import{_ as n,c as l,z as s,t as a,a as t,R as o,o as p}from"./chunks/framework.70e71619.js";const b=JSON.parse('{"title":"Schedule Future Content for Dynamic Sites","description":"This recipe explains how to schedule content to be published for a future date depending on your front-end approach.","frontmatter":{"description":"This recipe explains how to schedule content to be published for a future date depending on your front-end approach.","tags":[],"skill_level":null,"directus_version":"9.21.2","author_override":null,"author":"Bryant Gillespie"},"headers":[],"relativePath":"guides/headless-cms/schedule-content/dynamic-sites.md","lastUpdated":1682552691000}'),c={name:"guides/headless-cms/schedule-content/dynamic-sites.md"},r=s("h1",{id:"schedule-future-content-for-dynamic-sites",tabindex:"-1"},[t("Schedule Future Content for Dynamic Sites "),s("a",{class:"header-anchor",href:"#schedule-future-content-for-dynamic-sites","aria-label":'Permalink to "Schedule Future Content for Dynamic Sites"'},"​")],-1),i={class:"tip custom-block"},d={class:"custom-block-title"},h=s("strong",null,"Directus Version:",-1),D=o(`<h2 id="explanation" tabindex="-1">Explanation <a class="header-anchor" href="#explanation" aria-label="Permalink to &quot;Explanation&quot;">​</a></h2><p>This recipe explains how to schedule content to be published on a future date for dynamic sites.</p><p>Scheduling content has fewer steps for a dynamic site. Since you are calling your Directus API at the time that a visitor requests a page from your site, all you need to do is add a filter to your query.</p><div class="info custom-block"><p class="custom-block-title">Note</p><p>If your site is statically generated and your content fetched at build time, please <a href="/cookbook/flows/scheduling-content-static-sites.html">follow the recipe for static sites</a>.</p></div><h2 id="how-to-guide" tabindex="-1">How-To Guide <a class="header-anchor" href="#how-to-guide" aria-label="Permalink to &quot;How-To Guide&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">Requirements</p><p>You’ll need to have already created a collection for your site content like <code>articles</code> or <code>posts</code> or <code>pages</code> with a field <code>status</code> that controls the published state.</p></div><h3 id="add-a-field-to-control-publish-date-and-time" tabindex="-1">Add a Field To Control Publish Date and Time <a class="header-anchor" href="#add-a-field-to-control-publish-date-and-time" aria-label="Permalink to &quot;Add a Field To Control Publish Date and Time&quot;">​</a></h3><ol><li><p>Under Settings, go to Data Model.</p></li><li><p>Choose your content <a href="/configuration/data-model/collections.html">Collection</a>.</p></li><li><p><a href="/configuration/data-model/fields.html#create-a-field-standard">Add a new field</a> to your content Collection.</p><p><img src="https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/scheduling-content-publish-date.webp" alt="The interface for creating a new field is shown. The field type Datetime is selected. The Key is named date_published. The field for Use 24-Hour format is checked."></p><p>a. Choose <strong>Datetime</strong> for the Type.</p><p>b. Name the Key <code>date_published</code>.</p><p>c. Save the Field and your Collection.</p></li></ol><h3 id="add-some-content-and-set-a-publish-date" tabindex="-1">Add Some Content and Set a Publish Date <a class="header-anchor" href="#add-some-content-and-set-a-publish-date" aria-label="Permalink to &quot;Add Some Content and Set a Publish Date&quot;">​</a></h3><ol start="4"><li><p><a href="/app/content/items.html">Create or update an Item</a> inside your Collection</p><p><img src="https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/scheduling-content-create-content-published.webp" alt="A content item within the Articles collection is shown. The title is &quot;What is Headless CMS?&quot;. English translations are also shown with a Summary field. The Summary reads &quot;A quick overview of what Headless CMS is and how it&#39;s beneficial to your team.&quot;"></p><p>a. Set the <code>status</code> field to <code>published</code></p><p>b. Add a date for the <code>date_published</code> field</p><p>c. Add the content for other fields and save the Item</p></li></ol><h3 id="check-the-published-date-when-calling-the-directus-api" tabindex="-1">Check the Published Date When Calling the Directus API <a class="header-anchor" href="#check-the-published-date-when-calling-the-directus-api" aria-label="Permalink to &quot;Check the Published Date When Calling the Directus API&quot;">​</a></h3><ul><li>When calling the API, add a <a href="/reference/filter-rules.html">filter rule</a> that checks the <code>date_published</code> field.</li><li>Use the <code>_lte</code> operator to filter for dates that are less than or equal the current date/time.</li><li>You can use the <a href="/reference/filter-rules.html#dynamic-variables">dynamic variable</a> <code>$NOW</code> to get the current timestamp.</li></ul><h4 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h4><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>In these examples, we&#39;re using an <a href="/reference/filter-rules.html#logical-operators">AND logical operator</a> to only return records that match both conditions. This provides a little more control over your published content by ensuring only articles that have a publish date AND have the <code>published</code> state are displayed on your site.</p></div><p>Using the <a href="/reference/sdk.html">Directus JavaScript SDK</a> (preferred)</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> articles </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> directus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">items</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">articles</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readByQuery</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">filter</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">_and</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#F07178;">status</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#F07178;">_eq</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">published</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#F07178;">date_published</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#F07178;">_lte</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$NOW</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">		]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>Using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noreferrer">Fetch API</a> (JavaScript)</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> response </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fetch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://yourdirectusurl.com/items/articles?</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">URLSearchParams</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">filter</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#F07178;">_and</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#F07178;">status</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#F07178;">_eq</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">published</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#F07178;">date_published</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#F07178;">_lte</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">$NOW</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">			]</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">const articles </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#A6ACCD;">()</span></span></code></pre></div><h2 id="final-tips" tabindex="-1">Final Tips <a class="header-anchor" href="#final-tips" aria-label="Permalink to &quot;Final Tips&quot;">​</a></h2><p><strong>Tips</strong></p><ul><li>If you&#39;re not receiving the data you expect, double-check your <a href="/reference/filter-rules.html">filter rule</a> syntax.</li><li>Also be sure you have enabled the proper <a href="/configuration/users-roles-permissions/permissions.html">permissions</a> for your content Collection.</li></ul>`,21);function y(e,u,F,A,C,f){return p(),l("div",null,[r,s("blockquote",null,[s("p",null,a(e.$frontmatter.description),1)]),s("div",i,[s("p",d,"Author: "+a(e.$frontmatter.author),1),s("p",null,[h,t(" "+a(e.$frontmatter.directus_version),1)])]),D])}const g=n(c,[["render",y]]);export{b as __pageData,g as default};
