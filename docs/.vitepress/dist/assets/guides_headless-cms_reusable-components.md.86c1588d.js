import{_ as e,c as t,z as s,t as l,a,R as o,o as p}from"./chunks/framework.70e71619.js";const m=JSON.parse('{"title":"Create Re-Usable Page Components","description":"This guide shows you how to build re-usable page components using Directus Many-to-Any (M2A) relationships.","frontmatter":{"description":"This guide shows you how to build re-usable page components using Directus Many-to-Any (M2A) relationships.","tags":[],"skill_level":null,"directus_version":"9.21.4","author_override":null,"author":"Bryant Gillespie"},"headers":[],"relativePath":"guides/headless-cms/reusable-components.md","lastUpdated":1682552691000}'),c={name:"guides/headless-cms/reusable-components.md"},r=s("h1",{id:"create-re-usable-page-components",tabindex:"-1"},[a("Create Re-Usable Page Components "),s("a",{class:"header-anchor",href:"#create-re-usable-page-components","aria-label":'Permalink to "Create Re-Usable Page Components"'},"​")],-1),i=o(`<h2 id="explanation" tabindex="-1">Explanation <a class="header-anchor" href="#explanation" aria-label="Permalink to &quot;Explanation&quot;">​</a></h2><p>Many websites are made of common, repeating sections or groups of content.</p><p>A common use case when using Directus as a Headless CMS is creating individual blocks that can be re-used on many different pages.</p><p>This enables your content team create unique page layouts from re-usable components.</p><p>To achieve this, you will:</p><ul><li>Map your data model</li><li>Create individual page blocks</li><li>Create your page collection</li><li>Build pages with blocks</li><li>Fetch page data from the API</li><li>Learn tips to work with your front-end</li></ul><h2 id="how-to-guide" tabindex="-1">How-To Guide <a class="header-anchor" href="#how-to-guide" aria-label="Permalink to &quot;How-To Guide&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">Requirements</p><p>You’ll need to have either a Directus Cloud project configured and running or a self-hosted instance of Directus up and running.</p></div><h3 id="map-out-your-data-model" tabindex="-1">Map Out Your Data Model <a class="header-anchor" href="#map-out-your-data-model" aria-label="Permalink to &quot;Map Out Your Data Model&quot;">​</a></h3><p>Before you starting creating Collections inside Directus, it’s helpful to map out your data model (schema).</p><p>Consider this sample page below.</p><p><img src="https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/sample-page.webp" alt="Website wireframe that shows three different sections. A hero block with a headline and image, a group of content cards, and a block of rich text."></p><p>There are three main “blocks” that could be broken down into separate components.</p><ol><li>A hero block at the top of the page that includes a strong headline, an image, and some copy with a call to action.</li><li>A block of cards that could link out to blog posts or other content.</li><li>A block of rich text or HTML content.</li></ol><p>Let’s break down the data model for each section.</p><hr><p><img src="https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/block-hero.webp" alt="Simple wireframe of a hero section on a sample website."></p><p><strong>Hero</strong></p><ul><li><code>headline</code> - short text that grabs attention (string)</li><li><code>content</code> - longer text that explains the product or service (string)</li><li><code>buttons</code> - group of buttons that link out (array of objects) <ul><li><code>label</code> - call to action like Learn More (string)</li><li><code>href</code> - URL to link to (string)</li><li><code>variant</code> - type of button like &#39;default&#39;, &#39;primary’, or &#39;outline&#39; (string)</li></ul></li><li><code>image</code> - supporting image (file)</li></ul><hr><p><img src="https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/block-cardgroup.webp" alt="Simple wireframe of a group of content cards on a sample website."></p><p><strong>Card Group</strong></p><ul><li><p><code>headline</code> - short text that describes the section (string)</p></li><li><p><code>content</code> - supporting text (textarea)</p></li><li><p><code>card</code> - array of objects</p><ul><li><code>image</code> - featured image of a blog post or content (file)</li><li><code>content</code> - text summary of a blog post or content (string)</li></ul></li></ul><hr><p><img src="https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/block-richtext.webp" alt="Simple wireframe of a block of rich text on a sample website."></p><p><strong>Rich Text</strong></p><ul><li><code>headline</code> - short text that describes the content (string)</li><li><code>content</code> - rich text / HTML content (string)</li></ul><hr><p>Now let&#39;s create a Collection for each inside Directus.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>To keep things organized, we recommend that you namespace each collection with a prefix like <code>block</code>.</p></div><h3 id="create-the-rich-text-block" tabindex="-1">Create the Rich Text Block <a class="header-anchor" href="#create-the-rich-text-block" aria-label="Permalink to &quot;Create the Rich Text Block&quot;">​</a></h3><ol><li><p><a href="/configuration/data-model/collections.html#create-a-collection">Create a new Collection</a> named <code>block_richtext</code> and add the following fields.</p><div class="language-md"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">block_richtext</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> id (uuid)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> headline (Type: String, Interface: Input)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> content (Type: Text, Interface: WYSIWYG)</span></span></code></pre></div></li></ol><h3 id="create-the-hero-block" tabindex="-1">Create the Hero Block <a class="header-anchor" href="#create-the-hero-block" aria-label="Permalink to &quot;Create the Hero Block&quot;">​</a></h3><ol start="2"><li><p><a href="/configuration/data-model/collections.html#create-a-collection">Create a new Collection</a> named <code>block_hero</code> and add the following fields.</p><div class="language-md"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">block_hero</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> id (uuid)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> headline (Type: String, Interface: Input)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> content (Type: Text, Interface: WYSIWYG)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> buttons (Type: JSON, Interface: Repeater)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> label (Type: String, Interface: Input)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> href (Type: String, Interface: Input)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> variant (Type: String, Interface: Input)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> image (Type: uuid / single file, Interface: Image)</span></span></code></pre></div></li></ol><h3 id="create-the-card-group-block" tabindex="-1">Create the Card Group Block <a class="header-anchor" href="#create-the-card-group-block" aria-label="Permalink to &quot;Create the Card Group Block&quot;">​</a></h3><ol><li><p><a href="/configuration/data-model/collections.html#create-a-collection">Create a new Collection</a> named <code>block_cardgroup</code> and add the following fields.</p><div class="language-md"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">block_cardgroup</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> id (uuid)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> headline (Type: String, Interface: Input)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> content (Type: Text, Interface: WYSIWYG)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> group_type (Type: String, Interface: Radio, Options: [&#39;posts&#39;, &#39;custom&#39;] )</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> posts (Type: M2M, Conditions: group_type === &#39;posts&#39;)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> cards (Type: M2O, Conditions: group_type === &#39;custom&#39;)</span></span></code></pre></div></li></ol><h3 id="create-the-pages-collection" tabindex="-1">Create the Pages Collection <a class="header-anchor" href="#create-the-pages-collection" aria-label="Permalink to &quot;Create the Pages Collection&quot;">​</a></h3><ol start="4"><li><p><a href="/configuration/data-model/collections.html#create-a-collection">Create a new Collection</a> named <code>pages</code> and add the following fields.</p><div class="language-md"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">pages</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> id (uuid)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> title (Type: String, Interface: Input)</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> slug (Type: String, Interface: Input, URL Safe: true)</span></span></code></pre></div></li></ol><h3 id="configure-a-many-to-any-m2a-relationship-inside-the-pages-collection" tabindex="-1">Configure a Many-To-Any (M2A) Relationship Inside the <code>pages</code> Collection. <a class="header-anchor" href="#configure-a-many-to-any-m2a-relationship-inside-the-pages-collection" aria-label="Permalink to &quot;Configure a Many-To-Any (M2A) Relationship Inside the \`pages\` Collection.&quot;">​</a></h3><ol start="5"><li><p>Create a new Builder (M2A) field inside the <code>pages</code> data model.</p><p><img src="https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/reusable-page-components-m2a-screen.webp" alt="In the data model settings for the pages collection, a new Many-To-Any relationship is being created. The key is named blocks. There are 3 related collections selected - Block Cardgroup, Block Hero, and Block Rich text."></p><p>a. For the <strong>Key</strong>, use <code>blocks</code>.</p><p>b. For <strong>Related Collections</strong>, choose the following:</p><ul><li>Hero</li><li>Gallery / Cards</li><li>Article</li></ul><p>c. Save the field. Directus will create a new, hidden <a href="/configuration/data-model/relationships.html#many-to-any-m2a">junction collection</a> for you automatically.</p></li></ol><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you want more control over the name of the junction table and its fields, use the Continue in Advanced Field Creation Mode option.</p></div><h3 id="create-your-page-content" tabindex="-1">Create Your Page Content <a class="header-anchor" href="#create-your-page-content" aria-label="Permalink to &quot;Create Your Page Content&quot;">​</a></h3>`,42),D=s("ol",{start:"6"},[s("li",null,[s("p",null,[s("a",{href:"/app/content/items.html#create-an-item"},"Create a new item"),a(" in the "),s("code",null,"pages"),a(" collection")]),s("video",{title:"Create Your Page Content",autoplay:"",muted:"",loop:"",controls:"",playsinline:""},[s("source",{src:"https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/reusable-page-components-adding-content.mp4"}),a(' type="video/mp4" /> ')]),s("p",null,[a("a. Enter the page "),s("strong",null,"Title"),a(" and "),s("strong",null,"Slug"),a(".")]),s("p",null,"b. Under the Blocks field, click Create New and choose the collection type to create new blocks. Or click Add Existing to re-use existing blocks from other pages. Use the drag handle on the left side of each item to re-order blocks.")])],-1),y=o(`<h3 id="fetching-page-data-from-the-apis" tabindex="-1">Fetching Page Data From the APIs <a class="header-anchor" href="#fetching-page-data-from-the-apis" aria-label="Permalink to &quot;Fetching Page Data From the APIs&quot;">​</a></h3><p>Next, you&#39;ll want to access these with the API. If you try to use <code>/items/pages</code> then <code>blocks</code> returns an array of IDs. Instead, you&#39;ll want to add a <a href="/reference/query.html#many-to-any-union-types">field parameter</a> to get nested relational data.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Study the <a href="/reference/query.html#many-to-any-union-types">Global Query Parameters &gt; Fields &gt; Many-To-Any</a> article to learn how to properly fetch nested relational M2A data without over-fetching data that you might not need.</p></div><p><strong>Sample Request</strong></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Write some code here in your front-end framework that gets the slug from the current URL.</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> slug </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">the-ultimate-guide-to-rabbits</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Call the Directus API using the SDK.</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> response </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> directus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">items</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pages</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readByQuery</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">filter</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">slug</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">_eq</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> slug </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">fields</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">blocks.*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">blocks.item.*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*.collection</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">limit</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> page </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">data[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span></code></pre></div><details class="details custom-block"><summary><strong>Toggle Open to See Sample Response</strong></summary><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">079bf3c0-6f73-4725-b4c3-9d1a6cb58a05</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">status</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">published</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">date_created</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2023-02-08T20:54:15</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">user_updated</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">9fdd1ca5-982e-422d-bced-640e3a98a339</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">date_updated</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2023-02-13T17:36:38</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">user_created</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">9fdd1ca5-982e-422d-bced-640e3a98a339</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">The Ultimate Guide to Rabbits</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">slug</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">the-ultimate-guide-to-rabbits</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">blocks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">pages_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">079bf3c0-6f73-4725-b4c3-9d1a6cb58a05</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">sort</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">collection</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">block_hero</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">item</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1fa9065d-39a0-479a-a8ae-9ccd31429c98</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">headline</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Learn everything about rabbits</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">content</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">This guide will teach you everything you need to know about those wascally wabbits.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">buttons</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">							</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">								</span><span style="color:#89DDFF;">&quot;</span><span style="color:#916B53;">label</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Learn More</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">								</span><span style="color:#89DDFF;">&quot;</span><span style="color:#916B53;">href</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">learn-more</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">								</span><span style="color:#89DDFF;">&quot;</span><span style="color:#916B53;">variant</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">primary</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">							</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">12e02b82-b4a4-4aaf-8ca4-e73c20a41c26</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">pages_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">079bf3c0-6f73-4725-b4c3-9d1a6cb58a05</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">sort</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">collection</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">block_cardgroup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">item</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">52661ac6-f134-4fbf-9084-17cf3fc4e256</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">headline</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Our Best Blog Posts on Rabbits</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">content</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Here&#39;s the latest and greatest from our rabid writers.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">group_type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">posts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">cards</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">posts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">pages_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">079bf3c0-6f73-4725-b4c3-9d1a6cb58a05</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">sort</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">collection</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">block_richtext</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">item</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">6c5df396-be52-4b1c-a144-d55b229e5a34</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">headline</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">The Benefits of Rabbits</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">						</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">content</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;p&gt;Rabbits are a great source of environmental benefit. They help to keep grasslands and other ecosystems in check. Rabbits are herbivores, meaning they eat only plants, which helps to keep vegetation in balance. Additionally, rabbits are crucial to the food chain, providing sustenance for predators in their environment.&lt;/p&gt;</span><span style="color:#A6ACCD;">\\n</span><span style="color:#C3E88D;">&lt;p&gt;Rabbits also help to improve the quality of soil by digging burrows and depositing their waste in them. This helps to aerate the soil, improving its quality and allowing for better plant growth. Additionally, the waste from rabbits is a rich source of nutrients for plants and other animals in the area. This helps to keep the soil healthy and support the overall ecosystem.&lt;/p&gt;</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">					</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></details><h3 id="structuring-your-front-end" tabindex="-1">Structuring Your Front End <a class="header-anchor" href="#structuring-your-front-end" aria-label="Permalink to &quot;Structuring Your Front End&quot;">​</a></h3><p>We have <a href="https://directus.io/guides/" target="_blank" rel="noreferrer">integration guides</a> for many popular front-end frameworks. But there are far too many to cover in this recipe.</p><p>Here’s some general advice on how to structure your front end to display page blocks / Many-To-Any (M2A) Relationship data.</p><p><strong>Create a single component for each individual page_builder collection.</strong></p><ul><li>Hero</li><li>Gallery</li><li>Article</li></ul><p><strong>Create a dynamic route that does the following:</strong></p><ul><li>Imports your page builder components.</li><li>Calls your <code>pages</code> collection via the API. Add a filter rule to match the requested page’s <code>slug</code>.</li><li>Maps all the possible <code>page.pages_blocks.collection</code> names to your page block components.</li><li>Loops through the <code>page.blocks</code> array and passes the correct data (props) that each page_builder component needs to render properly.</li></ul><h2 id="final-tips" tabindex="-1">Final Tips <a class="header-anchor" href="#final-tips" aria-label="Permalink to &quot;Final Tips&quot;">​</a></h2><p>This guide has quite a few steps and involves several different collections. Here are some helpful tips to consider.</p><h3 id="study-the-api-response" tabindex="-1">Study the API Response <a class="header-anchor" href="#study-the-api-response" aria-label="Permalink to &quot;Study the API Response&quot;">​</a></h3><p>To prevent frustration when building your front-end, it’s important you understand the structure of the JSON data that Directus returns for Many To Any (M2A) relationships.</p><ul><li>Complete your page builder data model inside Directus.</li><li>Add some content.</li><li>Test your API calls.</li></ul><h3 id="check-your-permissions" tabindex="-1">Check Your Permissions <a class="header-anchor" href="#check-your-permissions" aria-label="Permalink to &quot;Check Your Permissions&quot;">​</a></h3><p>If you notice you aren&#39;t receiving the data that you expect, <a href="/configuration/users-roles-permissions/permissions.html#permissions">check the Permissions settings</a> for your Public or chosen role. You&#39;ll have to enable Read access for each collection using in the Pages &gt; Blocks Many-To-Any field.</p><h3 id="use-typescript" tabindex="-1">Use Typescript <a class="header-anchor" href="#use-typescript" aria-label="Permalink to &quot;Use Typescript&quot;">​</a></h3><p>We recommend adding types for each of your different collections to your frontend framework.</p><h3 id="organize-your-data-model-with-folders" tabindex="-1">Organize Your Data Model with Folders <a class="header-anchor" href="#organize-your-data-model-with-folders" aria-label="Permalink to &quot;Organize Your Data Model with Folders&quot;">​</a></h3><p>Consider using <a href="/configuration/data-model/collections.html#create-a-folder">data model folders</a> to keep things nicely organized and your collections easy to find.</p><p><img src="https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/reusable-page-components-folders.webp" alt="In the data model settings, a folder is highlighted. It is named blocks. There is a caption that reads &quot;Data Model Folders help you keep collections well-organized and easy to find.&quot;"></p><h3 id="use-translations-for-collection-names" tabindex="-1">Use Translations for Collection Names <a class="header-anchor" href="#use-translations-for-collection-names" aria-label="Permalink to &quot;Use Translations for Collection Names&quot;">​</a></h3><p>When <a href="/configuration/data-model/collections.html#collection-setup">setting up Collections</a> within your data model, use the Collection Naming Translations to create names that easier for the Data Studio users to understand.</p><p><img src="https://cdn.directus.io/docs/v9/headless-cms/how-to-packet-20220222A/reusable-page-components-translations.webp" alt="In the data model settings for the hero collection a section is highlighted. It reads &quot;Collection naming translations&quot; with a single item called &quot;Hero&quot;."></p><p>For example:</p><ul><li><code>block_richtext</code> becomes <code>Rich Text</code></li><li><code>block_hero</code> becomes <code>Hero</code> or <code>Hero Block</code></li><li><code>block_cardgroup</code> becomes <code>Card Group</code></li></ul>`,30);function F(n,d,u,C,h,A){return p(),t("div",null,[r,s("blockquote",null,[s("p",null,l(n.$frontmatter.description),1)]),i,D,y])}const b=e(c,[["render",F]]);export{m as __pageData,b as default};
