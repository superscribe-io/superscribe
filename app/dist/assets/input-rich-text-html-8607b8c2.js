import{w as A2,d as bj,m as vj,r as ql,l as ij,g as vG,k as yG,aW as wG,aX as CG,y as uj,c as lE,a as di,C as SG,o as Jf,b as O0,A as Er,x as dj,t as mi,f as VD,z as Jc,q as zD,v as $r,D as mj,e as x5,F as wW}from"./runtime-core.esm-bundler-b81764e2.js";import{w as k5,x as UD,y as T5,z as xG,a as TG,A as kG,_ as EG}from"./index.b0c463e5.entry.js";import{useI18n as _G}from"./vue-i18n.92928790.entry.js";import"./pinia.88007416.entry.js";import"./vue.runtime.esm-bundler-cc9213e5.js";import"./use-sync-0cbce98c.js";import"./vue-router.1201dd20.entry.js";var OG=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],AG=function(ge){return OG.map(function(bt){return bt.toLowerCase()}).indexOf(ge.toLowerCase())!==-1},DG=function(ge,bt,vn){Object.keys(bt).filter(AG).forEach(function(Dt){var zt=bt[Dt];typeof zt=="function"&&(Dt==="onInit"?zt(ge,vn):vn.on(Dt.substring(2),function(Xt){return zt(Xt,vn)}))})},RG=function(ge,bt,vn,Dt){var zt=ge.modelEvents?ge.modelEvents:null,Xt=Array.isArray(zt)?zt.join(" "):zt;A2(Dt,function(Mn,Et){vn&&typeof Mn=="string"&&Mn!==Et&&Mn!==vn.getContent({format:ge.outputFormat})&&vn.setContent(Mn)}),vn.on(Xt||"change input undo redo",function(){bt.emit("update:modelValue",vn.getContent({format:ge.outputFormat}))})},MG=function(ge,bt,vn,Dt,zt,Xt){Dt.setContent(Xt()),vn.attrs["onUpdate:modelValue"]&&RG(bt,vn,Dt,zt),DG(ge,vn.attrs,Dt)},fj=0,yj=function(ge){var bt=Date.now(),vn=Math.floor(Math.random()*1e9);return fj++,ge+"_"+vn+fj+String(bt)},NG=function(ge){return ge!==null&&ge.tagName.toLowerCase()==="textarea"},gj=function(ge){return typeof ge>"u"||ge===""?[]:Array.isArray(ge)?ge:ge.split(" ")},BG=function(ge,bt){return gj(ge).concat(gj(bt))},$G=function(ge){return ge==null},hj=function(){return{listeners:[],scriptId:yj("tiny-script"),scriptLoaded:!1}},PG=function(){var ge=hj(),bt=function(zt,Xt,Mn,Et){var Mt=Xt.createElement("script");Mt.referrerPolicy="origin",Mt.type="application/javascript",Mt.id=zt,Mt.src=Mn;var Ln=function(){Mt.removeEventListener("load",Ln),Et()};Mt.addEventListener("load",Ln),Xt.head&&Xt.head.appendChild(Mt)},vn=function(zt,Xt,Mn){ge.scriptLoaded?Mn():(ge.listeners.push(Mn),zt.getElementById(ge.scriptId)||bt(ge.scriptId,zt,Xt,function(){ge.listeners.forEach(function(Et){return Et()}),ge.scriptLoaded=!0}))},Dt=function(){ge=hj()};return{load:vn,reinitialize:Dt}},IG=PG(),FG=function(){return typeof window<"u"?window:global},_2=function(){var ge=FG();return ge&&ge.tinymce?ge.tinymce:null},LG={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(ge){return ge==="html"||ge==="text"}}},O2=globalThis&&globalThis.__assign||function(){return O2=Object.assign||function(ge){for(var bt,vn=1,Dt=arguments.length;vn<Dt;vn++){bt=arguments[vn];for(var zt in bt)Object.prototype.hasOwnProperty.call(bt,zt)&&(ge[zt]=bt[zt])}return ge},O2.apply(this,arguments)},HG=function(ge,bt,vn,Dt){return ge(Dt||"div",{id:bt,ref:vn})},VG=function(ge,bt,vn){return ge("textarea",{id:bt,visibility:"hidden",ref:vn})},zG=bj({props:LG,setup:function(ge,bt){var vn=ge.init?O2({},ge.init):{},Dt=vj(ge),zt=Dt.disabled,Xt=Dt.modelValue,Mn=Dt.tagName,Et=ql(null),Mt=null,Ln=ge.id||yj("tiny-vue"),hn=ge.init&&ge.init.inline||ge.inline,tn=!!bt.attrs["onUpdate:modelValue"],fn=!0,dt=ge.initialValue?ge.initialValue:"",Pt="",it=function(Ke){return tn?function(){return Xt!=null&&Xt.value?Xt.value:""}:function(){return Ke?dt:Pt}},tt=function(){var Ke=it(fn),G=O2(O2({},vn),{readonly:ge.disabled,target:Et.value,plugins:BG(vn.plugins,ge.plugins),toolbar:ge.toolbar||vn.toolbar,inline:hn,setup:function(Xe){Mt=Xe,Xe.on("init",function(Ot){return MG(Ot,ge,bt,Xe,Xt,Ke)}),typeof vn.setup=="function"&&vn.setup(Xe)}});NG(Et.value)&&(Et.value.style.visibility=""),_2().init(G),fn=!1};A2(zt,function(Ke){var G;Mt!==null&&(typeof((G=Mt.mode)===null||G===void 0?void 0:G.set)=="function"?Mt.mode.set(Ke?"readonly":"design"):Mt.setMode(Ke?"readonly":"design"))}),A2(Mn,function(Ke){var G;tn||(Pt=Mt.getContent()),(G=_2())===null||G===void 0||G.remove(Mt),ij(function(){return tt()})}),vG(function(){if(_2()!==null)tt();else if(Et.value&&Et.value.ownerDocument){var Ke=ge.cloudChannel?ge.cloudChannel:"6",G=ge.apiKey?ge.apiKey:"no-api-key",Xe=$G(ge.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(G,"/tinymce/").concat(Ke,"/tinymce.min.js"):ge.tinymceScriptSrc;IG.load(Et.value.ownerDocument,Xe,tt)}}),yG(function(){_2()!==null&&_2().remove(Mt)}),hn||(wG(function(){fn||tt()}),CG(function(){var Ke;tn||(Pt=Mt.getContent()),(Ke=_2())===null||Ke===void 0||Ke.remove(Mt)}));var pn=function(Ke){var G;Pt=Mt.getContent(),(G=_2())===null||G===void 0||G.remove(Mt),vn=O2(O2({},vn),Ke),ij(function(){return tt()})};return bt.expose({rerender:pn,getEditor:function(){return Mt}}),function(){return hn?HG(uj,Ln,Et,ge.tagName):VG(uj,Ln,Et)}}});const UG=""+new URL("FiraMono-Medium-33e88fa9.woff2",import.meta.url).href,WG=""+new URL("FiraMono-Medium-f2ff9941.woff",import.meta.url).href,ZG=""+new URL("merriweather-regular-2661709b.woff2",import.meta.url).href,jG=""+new URL("merriweather-regular-ff8db8bc.woff",import.meta.url).href;function Qc(ge){return getComputedStyle(document.body).getPropertyValue(ge)}function GG(ge){return`
@font-face {
	font-family: 'Fira Mono';
	font-style: normal;
	src: url(${UG}) format('woff2'),
	url(${WG}) format('woff');
}

@font-face {
	font-family: 'Merriweather';
	font-style: normal;
	src: url(${ZG}) format('woff2'),
	url(${jG}) format('woff');
}

::selection {
	background: ${Qc("--background-normal-alt")};
}
body {
	color: ${Qc("--foreground-normal")};
	background-color: ${Qc("--background-input")};
	margin: 20px;
	font-family: ${Qc("--family-sans-serif")};
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
	-moz-osx-font-smoothing: grayscale;
}
body.mce-content-readonly {
	color: ${Qc("--foreground-subdued")};
	background-color: ${Qc("--background-subdued")};
}
.mce-offscreen-selection {
	display: none;
}
h1, h2, h3, h4, h5, h6 {
	font-family: ${Qc(`--family-${ge}`)}, serif;
	color: ${Qc("--foreground-normal-alt")};
	font-weight: 700;
	margin-bottom: 0;
}
h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p {
	margin-top: 0.5em;
}
h1 {
	font-size: 36px;
	line-height: 46px;
	margin-top: 1em;
}
h2 {
	font-size: 24px;
	line-height: 34px;
	margin-top: 1.25em;
}
h3 {
	font-size: 19px;
	line-height: 29px;
	margin-top: 1.25em;
}
h4 {
	font-size: 16px;
	line-height: 26px;
	margin-top: 1.5em;
}
h5 {
	font-size: 14px;
	line-height: 24px;
	margin-top: 2em;
}
h6 {
	font-size: 12px;
	line-height: 22px;
	margin-top: 2em;
}
p {
	font-family: ${Qc(`--family-${ge}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
a {
	color: ${Qc("--primary-125")};
	text-decoration: none;
}
ul, ol {
	font-family: ${Qc(`--family-${ge}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
ul ul,
	ol ol,
		ul ol,
			ol ul {
	margin: 0;
}
b, strong {
	font-weight: 700;
}
code {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 2px 4px;
	font-family: ${Qc("--family-monospace")}, monospace;
	background-color: ${Qc("--background-normal")};
	border-radius: ${Qc("--border-radius")};
	overflow-wrap: break-word;
}
pre {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 1em;
	font-family: ${Qc("--family-monospace")}, monospace;
	background-color: ${Qc("--background-normal")};
	border-radius: ${Qc("--border-radius")};
	overflow: auto;
}
blockquote {
	font-family: ${Qc(`--family-${ge}`)}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	border-left: 2px solid ${Qc("--border-normal")};
	padding-left: 1em;
	margin-left: 0px;
}
video,
img {
	max-width: 100%;
	border-radius: ${Qc("--border-radius")};
	height: auto;
}
iframe {
	max-width: 100%;
	border-radius: ${Qc("--border-radius")};
}
hr {
	background-color: ${Qc("--border-normal")};
	height: 1px;
	border: none;
	margin-top: 2em;
	margin-bottom: 2em;
}
table {
	border-collapse: collapse;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
}
table th,
table td {
	border: 1px solid ${Qc("--border-normal")};
	padding: 0.4rem;
}
figure {
	display: table;
	margin: 1rem auto;
}
figure figcaption {
	color: #999;
	display: block;
	margin-top: 0.25rem;
	text-align: center;
}`}function qG(ge,bt,vn){const Dt=ql(!1),zt=ql(null),Xt=ql();A2(()=>{var tn;return(tn=zt.value)==null?void 0:tn.transformationKey},tn=>{Xt.value=vn.storageAssetPresets.value.find(fn=>fn.key===tn),Xt.value&&(zt.value.width=Xt.value.width??void 0,zt.value.height=Xt.value.height??void 0)});const Mn={icon:"image",tooltip:k5.global.t("wysiwyg_options.image"),onAction:tn=>{if(Dt.value=!0,tn===!0||tn.isActive()){const fn=ge.value.selection.getNode(),dt=fn.getAttribute("src"),Pt=dt?new URL(dt).searchParams:void 0,it=fn.getAttribute("alt"),tt=Number((Pt==null?void 0:Pt.get("width"))||void 0)||void 0,pn=Number((Pt==null?void 0:Pt.get("height"))||void 0)||void 0,Ke=(Pt==null?void 0:Pt.get("key"))||void 0;if(dt===null||it===null)return;Ke&&(Xt.value=vn.storageAssetPresets.value.find(G=>G.key===Ke)),zt.value={imageUrl:dt,alt:it,width:Xt.value?Xt.value.width??void 0:tt,height:Xt.value?Xt.value.height??void 0:pn,transformationKey:Ke,previewUrl:hn(dt,bt.value??UD())}}else zt.value=null},onSetup:tn=>{const fn=dt=>{tn.setActive(dt.element.tagName==="IMG")};return ge.value.on("NodeChange",fn),function(){ge.value.off("NodeChange",fn)}}};return{imageDrawerOpen:Dt,imageSelection:zt,closeImageDrawer:Et,onImageSelect:Mt,saveImage:Ln,imageButton:Mn};function Et(){zt.value=null,Dt.value=!1}function Mt(tn){const fn=T5()+"assets/"+tn.id;zt.value={imageUrl:hn(fn,bt.value),alt:tn.title,width:tn.width,height:tn.height,previewUrl:hn(fn,bt.value??UD())}}function Ln(){ge.value.fire("focus");const tn=zt.value;if(tn===null)return;const fn={},dt=new URL(tn.imageUrl);dt.searchParams.delete("width"),dt.searchParams.delete("height"),dt.searchParams.delete("key"),vn.storageAssetTransform.value==="all"?tn.transformationKey?fn.key=tn.transformationKey:(fn.width=tn.width,fn.height=tn.height):vn.storageAssetTransform.value==="presets"&&tn.transformationKey&&(fn.key=tn.transformationKey);const it=`<img src="${xG(dt.toString(),fn)}" alt="${tn.alt}" />`;ge.value.selection.setContent(it),ge.value.undoManager.add(),Et()}function hn(tn,fn){if(!tn.includes(T5()+"assets/"))return tn;try{const dt=new URL(tn),Pt=new URLSearchParams(dt.search);return fn?Pt.set("access_token",fn):Pt.delete("access_token"),Array.from(Pt).length>0?`${dt.origin}${dt.pathname}?${Pt.toString()}`:`${dt.origin}${dt.pathname}`}catch{return tn}}}function KG(ge){const bt=ql(!1),vn={url:null,displayText:null,title:null,newTab:!0},Dt=ql(vn),zt=ql(null),Xt=ql(null),Mn={icon:"link",tooltip:k5.global.t("wysiwyg_options.link"),onAction:()=>{if(ge.value.plugins.fullscreen.isFullscreen()&&ge.value.execCommand("mceFullScreen"),bt.value=!0,zt.value){ge.value.selection.select(Xt.value);const hn=zt.value.getAttribute("href"),tn=zt.value.getAttribute("title"),fn=zt.value.innerText,dt=zt.value.getAttribute("target");if(hn===null||fn===null)return;Dt.value={url:hn,displayText:fn,title:tn||null,newTab:dt==="_blank"}}else{const hn={displayText:ge.value.selection.getContent()||null};Et(hn)}},onSetup:hn=>{const tn=fn=>{let dt=fn.element;for(Xt.value=fn.element,zt.value=null;dt&&dt.id!=="tinymce";){if(dt.tagName==="A"){zt.value=dt;break}dt=dt.parentElement}hn.setActive(!!zt.value)};return ge.value.on("NodeChange",tn),function(){ge.value.off("NodeChange",tn)}}};return{linkDrawerOpen:bt,linkSelection:Dt,linkNode:zt,closeLinkDrawer:Mt,saveLink:Ln,linkButton:Mn};function Et(hn={}){Dt.value=Object.assign({},vn,hn)}function Mt(){Et(),bt.value=!1}function Ln(){ge.value.fire("focus");const hn=Dt.value;if(hn.url===null){zt.value&&(ge.value.selection.setContent(zt.value.innerText),Mt());return}const tn=`<a href="${hn.url}" ${hn.title?`title="${hn.title}"`:""} target="${hn.newTab?"_blank":"_self"}" >${hn.displayText||hn.url}</a>`;!zt.value||Xt.value===zt.value?ge.value.selection.setContent(tn):Xt.value&&(Xt.value.innerHTML=hn.displayText||hn.url,zt.value.setAttribute("data-mce-href",hn.url),zt.value.setAttribute("href",hn.url),hn.title&&zt.value.setAttribute("title",hn.title),zt.value.setAttribute("target",hn.newTab?"_blank":"_self"),ge.value.selection.select(zt.value),ge.value.selection.setNode(zt.value)),ge.value.undoManager.add(),Mt()}}function YG(ge,bt){const vn=ql(!1),Dt=ql(null),zt=ql(["video","audio"]),Xt=ql(""),Mn=ql(""),Et={icon:"embed",tooltip:k5.global.t("wysiwyg_options.media"),onAction:it=>{if(vn.value=!0,it.isActive()){if(ge.value.selection.getContent()===null)return;Xt.value=ge.value.selection.getContent(),Mn.value=Xt.value}else Dt.value=null},onSetup:it=>{const tt=pn=>{it.setActive(pn.element.tagName==="SPAN"&&pn.element.classList.contains("mce-preview-object"))};return ge.value.on("NodeChange",tt),function(){ge.value.off("NodeChange",tt)}}},Mt=lE({get(){var it;return(it=Dt.value)==null?void 0:it.sourceUrl},set(it){Dt.value={...Dt.value,sourceUrl:it},Dt.value.previewUrl=Pt(it,bt.value||UD())}}),Ln=lE({get(){var it;return(it=Dt.value)==null?void 0:it.width},set(it){Dt.value!==null&&(Dt.value={...Dt.value,width:it})}}),hn=lE({get(){var it;return(it=Dt.value)==null?void 0:it.height},set(it){Dt.value!==null&&(Dt.value={...Dt.value,height:it})}});return A2(Dt,it=>{if(Xt.value===""){if(it===null)return;Xt.value=`<${it.tag} width="${it.width}" height="${it.height}" controls><source src="${it.sourceUrl}" type="${it.type}" /></${it.tag}>`}else Xt.value=Xt.value.replace(/src=".*?"/g,`src="${it==null?void 0:it.sourceUrl}"`).replace(/width=".*?"/g,`width="${it==null?void 0:it.width}"`).replace(/height=".*?"/g,`height="${it==null?void 0:it.height}"`).replace(/type=".*?"/g,`type="${it==null?void 0:it.type}"`).replaceAll(/<(video|audio|iframe)/g,`<${it==null?void 0:it.tag}`).replaceAll(/<\/(video|audio|iframe)/g,`</${it==null?void 0:it.tag}`)}),A2(Xt,it=>{var tt,pn,Ke,G,Xe;if(it==="")Dt.value=null;else{const Ot=(tt=/<(video|audio|iframe)/g.exec(it))==null?void 0:tt[1],at=((pn=/src="(.*?)"/g.exec(it))==null?void 0:pn[1])||void 0,q=Number((Ke=/width="(.*?)"/g.exec(it))==null?void 0:Ke[1])||void 0,ht=Number((G=/height="(.*?)"/g.exec(it))==null?void 0:G[1])||void 0,Dn=((Xe=/type="(.*?)"/g.exec(it))==null?void 0:Xe[1])||void 0;if(at===void 0)return;const Ye=Pt(at,bt.value||UD());Dt.value={tag:Ot==="audio"?"audio":Ot==="iframe"?"iframe":"video",sourceUrl:at,width:q,height:ht,type:Dn,previewUrl:Ye}}}),{mediaDrawerOpen:vn,mediaSelection:Dt,closeMediaDrawer:tn,openMediaTab:zt,onMediaSelect:fn,embed:Xt,saveMedia:dt,startEmbed:Mn,mediaHeight:hn,mediaWidth:Ln,mediaSource:Mt,mediaButton:Et};function tn(){Xt.value="",Mn.value="",Dt.value=null,vn.value=!1,zt.value=["video"]}function fn(it){const tt=T5()+"assets/"+it.id,pn=it.type.startsWith("audio")?"audio":"video";Dt.value={sourceUrl:Pt(tt,bt.value),width:it.width||300,height:it.height||150,tag:pn,type:it.type,previewUrl:Pt(tt,bt.value||UD())}}function dt(){if(ge.value.fire("focus"),Xt.value!==""){if(Mn.value!==""){const it=ge.value.getContent().replace(Mn.value,Xt.value);ge.value.setContent(it)}else ge.value.selection.setContent(Xt.value);ge.value.undoManager.add(),tn()}}function Pt(it,tt){if(!it.includes(T5()+"assets/"))return it;try{const pn=new URL(it),Ke=new URLSearchParams(pn.search);return tt?Ke.set("access_token",tt):Ke.delete("access_token"),Array.from(Ke).length>0?`${pn.origin}${pn.pathname}?${Ke.toString()}`:`${pn.origin}${pn.pathname}`}catch{return it}}}function XG(ge){const bt=ql(!1),vn=ql(),Dt={icon:"sourcecode",tooltip:k5.global.t("wysiwyg_options.source_code"),onAction:()=>{bt.value=!0,vn.value=ge.value.getContent()}};return{codeDrawerOpen:bt,code:vn,closeCodeDrawer:zt,saveCode:Xt,sourceCodeButton:Dt};function zt(){bt.value=!1}function Xt(){ge.value.fire("focus"),ge.value.setContent(vn.value),ge.value.undoManager.add(),zt()}}var pj={},JG={get exports(){return pj},set exports(ge){pj=ge}};(function(ge){(function(){var bt=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},vn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Dt=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},zt=function(e,n){return Xt(function(o,r){return e.eq(n(o),n(r))})},Xt=function(e){return{eq:e}},Mn=Xt(function(e,n){return e===n}),Et=Mn,Mt=function(e){return Xt(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},Ln=function(e,n){return zt(Mt(e),function(o){return Dt(o,n)})},hn=function(e){return Xt(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!Ln(Et).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},tn=Xt(function(e,n){if(e===n)return!0;var o=bt(e),r=bt(n);return o!==r?!1:vn(o)?e===n:o==="array"?Mt(tn).eq(e,n):o==="object"?hn(tn).eq(e,n):!1});const fn=Object.getPrototypeOf,dt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Pt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&dt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},it=e=>n=>Pt(n)===e,tt=e=>n=>typeof n===e,pn=e=>n=>e===n,Ke=(e,n)=>Xe(e)&&dt(e,n,(o,r)=>fn(o)===r),G=it("string"),Xe=it("object"),Ot=e=>Ke(e,Object),at=it("array"),q=pn(null),ht=tt("boolean"),Dn=pn(void 0),Ye=e=>e==null,Pe=e=>!Ye(e),fe=tt("function"),Go=tt("number"),zn=(e,n)=>{if(at(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Wt=()=>{},O=(e,n)=>(...o)=>e(n.apply(null,o)),Oo=(e,n)=>o=>e(n(o)),rt=e=>()=>e,Fo=e=>e,cn=(e,n)=>e===n;function je(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const po=e=>n=>!e(n),es=e=>()=>{throw new Error(e)},Bo=e=>e(),Ts=e=>{e()},De=rt(!1),mt=rt(!0);class H{constructor(n,o){this.tag=n,this.value=o}static some(n){return new H(!0,n)}static none(){return H.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?H.some(n(this.value)):H.none()}bind(n){return this.tag?n(this.value):H.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:H.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Pe(n)?H.some(n):H.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}H.singletonNone=new H(!1);const Yr=Array.prototype.slice,Pn=Array.prototype.indexOf,is=Array.prototype.push,Bn=(e,n)=>Pn.call(e,n),Zn=(e,n)=>{const o=Bn(e,n);return o===-1?H.none():H.some(o)},qt=(e,n)=>Bn(e,n)>-1,ro=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},jt=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},Ve=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},Vr=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},ks=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},mn=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Ka=(e,n,o)=>(Vr(e,(r,c)=>{o=n(o,r,c)}),o),qo=(e,n,o)=>(Ve(e,(r,c)=>{o=n(o,r,c)}),o),Ya=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return H.some(u);if(o(u,r))break}return H.none()},gs=(e,n)=>Ya(e,n,De),ir=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return H.some(o)}return H.none()},Oa=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!at(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);is.apply(n,e[o])}return n},_r=(e,n)=>Oa(jt(e,n)),us=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},ts=e=>{const n=Yr.call(e,0);return n.reverse(),n},ot=(e,n)=>mn(e,o=>!qt(n,o)),Je=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Gt=(e,n)=>{const o=Yr.call(e,0);return o.sort(n),o},nn=(e,n)=>n>=0&&n<e.length?H.some(e[n]):H.none(),In=e=>nn(e,0),Ao=e=>nn(e,e.length-1),Rs=fe(Array.from)?Array.from:e=>Yr.call(e),pa=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return H.none()},rr=(e,n)=>{const o=[],r=fe(n)?c=>ro(o,u=>n(u,c)):c=>qt(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},Ss=Object.keys,Or=Object.hasOwnProperty,pt=(e,n)=>{const o=Ss(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},oo=(e,n)=>ba(e,(o,r)=>({k:r,v:n(o,r)})),ba=(e,n)=>{const o={};return pt(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},ar=e=>(n,o)=>{e[o]=n},Hc=(e,n,o,r)=>{pt(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},Xa=(e,n)=>{const o={},r={};return Hc(e,n,ar(o),ar(r)),{t:o,f:r}},Ko=(e,n)=>{const o={};return Hc(e,n,ar(o),Wt),o},Ja=(e,n)=>{const o=[];return pt(e,(r,c)=>{o.push(n(r,c))}),o},va=e=>Ja(e,Fo),Uo=(e,n)=>kn(e,n)?H.from(e[n]):H.none(),kn=(e,n)=>Or.call(e,n),zr=(e,n)=>kn(e,n)&&e[n]!==void 0&&e[n]!==null,Aa=(e,n,o=tn)=>hn(o).eq(e,n),Qa=e=>{const n={};return Ve(e,o=>{n[o]={}}),Ss(n)},ec=e=>e.length!==void 0,Is=Array.isArray,ur=e=>{if(Is(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},bs=(e,n,o)=>{if(!e)return!1;if(o=o||e,ec(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(kn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},pr=(e,n)=>{const o=[];return bs(e,(r,c)=>{o.push(n(r,c,e))}),o},de=(e,n)=>{const o=[];return bs(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},se=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Ie=(e,n,o,r)=>{let c=Dn(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},Me=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},Kt=e=>e[e.length-1],bn=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},to=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),k=u||f&&!y,N=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!k&&!y&&!N;return{isiPad:rt(c),isiPhone:rt(u),isTablet:rt(y),isPhone:rt(k),isTouch:rt(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:rt(N),isDesktop:rt(R)}},Zo=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},qn=(e,n)=>{const o=Zo(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Ho(r(1),r(2))},uo=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?pe():qn(e,o)},pe=()=>Ho(0,0),Ho=(e,n)=>({major:e,minor:n}),br={nu:Ho,detect:uo,unknown:pe},dr=(e,n)=>pa(n.brands,o=>{const r=o.brand.toLowerCase();return gs(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:br.nu(parseInt(o.version,10),0)}))}),Vc=(e,n)=>{const o=String(n).toLowerCase();return gs(e,r=>r.search(o))},bo=(e,n)=>Vc(e,n).map(o=>{const r=br.detect(o.versionRegexes,n);return{current:o.name,version:r}}),ml=(e,n)=>Vc(e,n).map(o=>{const r=br.detect(o.versionRegexes,n);return{current:o.name,version:r}}),vr=(e,n)=>e.substring(n),mr=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Ys=(e,n)=>ds(e,n)?vr(e,n.length):e,xs=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Dn(r)?!0:c+n.length<=r:!1},ds=(e,n)=>mr(e,n,0),zc=(e,n)=>mr(e,n,e.length-n.length),tc=e=>n=>n.replace(e,""),gc=tc(/^\s+|\s+$/g),el=tc(/^\s+/g),tl=tc(/\s+$/g),Vo=e=>e.length>0,ya=e=>!Vo(e),Ac=(e,n)=>n<=0?"":new Array(n+1).join(e),hc=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?H.none():H.some(o)},Da=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,yr=e=>n=>xs(n,e),Es=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>xs(e,"edge/")&&xs(e,"chrome")&&xs(e,"safari")&&xs(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Da],search:e=>xs(e,"chrome")&&!xs(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>xs(e,"msie")||xs(e,"trident")},{name:"Opera",versionRegexes:[Da,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:yr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:yr("firefox")},{name:"Safari",versionRegexes:[Da,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(xs(e,"safari")||xs(e,"mobile/"))&&xs(e,"applewebkit")}],au=[{name:"Windows",search:yr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>xs(e,"iphone")||xs(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:yr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yr("linux"),versionRegexes:[]},{name:"Solaris",search:yr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:yr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Kl={browsers:rt(Es),oses:rt(au)},Yo="Edge",aa="Chromium",wa="IE",Xs="Opera",Yl="Firefox",nc="Safari",ca=()=>pc({current:void 0,version:br.unknown()}),pc=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(Yo),isChromium:r(aa),isIE:r(wa),isOpera:r(Xs),isFirefox:r(Yl),isSafari:r(nc)}},fi={unknown:ca,nu:pc,edge:rt(Yo),chromium:rt(aa),ie:rt(wa),opera:rt(Xs),firefox:rt(Yl),safari:rt(nc)},fl="Windows",gi="iOS",Ca="Android",Dc="Linux",Xl="macOS",Uc="Solaris",Jl="FreeBSD",W="ChromeOS",ie=()=>be({current:void 0,version:br.unknown()}),be=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(fl),isiOS:r(gi),isAndroid:r(Ca),isMacOS:r(Xl),isLinux:r(Dc),isSolaris:r(Uc),isFreeBSD:r(Jl),isChromeOS:r(W)}},Fe={unknown:ie,nu:be,windows:rt(fl),ios:rt(gi),android:rt(Ca),linux:rt(Dc),macos:rt(Xl),solaris:rt(Uc),freebsd:rt(Jl),chromeos:rt(W)},yn={detect:(e,n,o)=>{const r=Kl.browsers(),c=Kl.oses(),u=n.bind(y=>dr(r,y)).orThunk(()=>bo(r,e)).fold(fi.unknown,fi.nu),f=ml(c,e).fold(Fe.unknown,Fe.nu),b=to(f,u,e,o);return{browser:u,os:f,deviceType:b}}},ns=e=>window.matchMedia(e).matches;let wr=bn(()=>yn.detect(navigator.userAgent,H.from(navigator.userAgentData),ns));const wo=()=>wr(),Cr=navigator.userAgent,$o=wo(),Zs=$o.browser,Rc=$o.os,bc=$o.deviceType,Hn=Cr.indexOf("Windows Phone")!==-1,Lo={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Zs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Zs.isIE(),windowsPhone:Hn,browser:{current:Zs.current,version:Zs.version,isChromium:Zs.isChromium,isEdge:Zs.isEdge,isFirefox:Zs.isFirefox,isIE:Zs.isIE,isOpera:Zs.isOpera,isSafari:Zs.isSafari},os:{current:Rc.current,version:Rc.version,isAndroid:Rc.isAndroid,isChromeOS:Rc.isChromeOS,isFreeBSD:Rc.isFreeBSD,isiOS:Rc.isiOS,isLinux:Rc.isLinux,isMacOS:Rc.isMacOS,isSolaris:Rc.isSolaris,isWindows:Rc.isWindows},deviceType:{isDesktop:bc.isDesktop,isiPad:bc.isiPad,isiPhone:bc.isiPhone,isPhone:bc.isPhone,isTablet:bc.isTablet,isTouch:bc.isTouch,isWebView:bc.isWebView}},Ur=/^\s*|\s*$/g,$=e=>Ye(e)?"":(""+e).replace(Ur,""),K=(e,n)=>n?n==="array"&&Is(e)?!0:typeof e===n:e!==void 0,ne=(e,n,o={})=>{const r=G(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Re=kn,Nt=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(kn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Yn=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),bs(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Yn(c,n,o,r),!0)))},et={trim:$,isArray:Is,is:K,toArray:ur,makeMap:ne,each:bs,map:pr,grep:de,inArray:se,hasOwn:Re,extend:Nt,walk:Yn,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>at(e)?e:e===""?[]:pr(e.split(n||","),$),_addCacheSuffix:e=>{const n=Lo.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Dr=(e,n,o=cn)=>e.exists(r=>o(r,n)),Js=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Zr=(e,n,o)=>e.isSome()&&n.isSome()?H.some(o(e.getOrDie(),n.getOrDie())):H.none(),dd=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?H.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):H.none(),fo=(e,n)=>e?H.some(n):H.none(),Y=typeof window<"u"?window:Function("return this;")(),oe=(e,n)=>{let o=n??Y;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},xe=(e,n)=>{const o=e.split(".");return oe(o,n)},ze=(e,n)=>xe(e,n),Qt=(e,n)=>{const o=ze(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Do=Object.getPrototypeOf,Fs=e=>Qt("HTMLElement",e),vo=e=>{const n=xe("ownerDocument.defaultView",e);return Xe(e)&&(Fs(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Do(e).constructor.name))},Ms=8,la=9,vs=11,vc=1,Wc=3,hs=e=>e.dom.nodeName.toLowerCase(),ia=e=>e.dom.nodeType,Qs=e=>n=>ia(n)===e,Dl=e=>ia(e)===Ms||hs(e)==="#comment",Ri=e=>_s(e)&&vo(e.dom),_s=Qs(vc),yc=Qs(Wc),Rl=Qs(la),md=Qs(vs),hi=e=>n=>_s(n)&&hs(n)===e,nl=(e,n,o)=>{if(G(o)||ht(o)||Go(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Pr=(e,n,o)=>{nl(e.dom,n,o)},oc=(e,n)=>{const o=e.dom;pt(n,(r,c)=>{nl(o,c,r)})},Mc=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},ol=(e,n)=>H.from(Mc(e,n)),Ha=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Sr=(e,n)=>{e.dom.removeAttribute(n)},Zc=e=>{const n=e.dom.attributes;return n==null||n.length===0},im=e=>qo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),cu=(e,n)=>{const o=Mc(e,n);return o===void 0||o===""?[]:o.split(" ")},lu=(e,n,o)=>{const c=cu(e,n).concat([o]);return Pr(e,n,c.join(" ")),!0},ef=(e,n,o)=>{const r=mn(cu(e,n),c=>c!==o);return r.length>0?Pr(e,n,r.join(" ")):Sr(e,n),!1},gl=e=>e.dom.classList!==void 0,iu=e=>cu(e,"class"),fd=(e,n)=>lu(e,"class",n),Rr=(e,n)=>ef(e,"class",n),um=(e,n)=>qt(iu(e),n)?Rr(e,n):fd(e,n),$u=(e,n)=>{gl(e)?e.dom.classList.add(n):fd(e,n)},Pu=e=>{(gl(e)?e.dom.classList:iu(e)).length===0&&Sr(e,"class")},gd=(e,n)=>{gl(e)?e.dom.classList.remove(n):Rr(e,n),Pu(e)},hd=(e,n)=>{const o=gl(e)?e.dom.classList.toggle(n):um(e,n);return Pu(e),o},pd=(e,n)=>gl(e)&&e.dom.classList.contains(n),Iu=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return uu(r.childNodes[0])},tf=(e,n)=>{const r=(n||document).createElement(e);return uu(r)},nf=(e,n)=>{const r=(n||document).createTextNode(e);return uu(r)},uu=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},re={fromHtml:Iu,fromTag:tf,fromText:nf,fromDom:uu,fromPoint:(e,n,o)=>H.from(e.dom.elementFromPoint(n,o)).map(uu)},bd=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Nc=(e,n)=>{const o=e.dom;if(o.nodeType!==vc)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Qf=e=>e.nodeType!==vc&&e.nodeType!==la&&e.nodeType!==vs||e.childElementCount===0,_p=(e,n)=>{const o=n===void 0?document:n.dom;return Qf(o)?[]:jt(o.querySelectorAll(e),re.fromDom)},Op=(e,n)=>{const o=n===void 0?document:n.dom;return Qf(o)?H.none():H.from(o.querySelector(e)).map(re.fromDom)},os=(e,n)=>e.dom===n.dom,Ml=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},wc=e=>re.fromDom(e.dom.ownerDocument),sl=e=>Rl(e)?e:wc(e),uh=e=>re.fromDom(sl(e).dom.documentElement),Mi=e=>re.fromDom(sl(e).dom.defaultView),hl=e=>H.from(e.dom.parentNode).map(re.fromDom),dm=e=>H.from(e.dom.parentElement).map(re.fromDom),eg=(e,n)=>{const o=fe(n)?n:De;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=re.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},dh=e=>{const n=o=>mn(o,r=>!os(e,r));return hl(e).map(Ra).map(n).getOr([])},jc=e=>H.from(e.dom.previousSibling).map(re.fromDom),vd=e=>H.from(e.dom.nextSibling).map(re.fromDom),mh=e=>ts(bd(e,jc)),rl=e=>bd(e,vd),Ra=e=>jt(e.dom.childNodes,re.fromDom),yd=(e,n)=>{const o=e.dom.childNodes;return H.from(o[n]).map(re.fromDom)},wd=e=>yd(e,0),Nl=e=>yd(e,e.dom.childNodes.length-1),Bc=e=>e.dom.childNodes.length,of=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return re.fromDom(n)},sf=e=>md(e)&&Pe(e.dom.host),rf=fe(Element.prototype.attachShadow)&&fe(Node.prototype.getRootNode),af=rt(rf),Ql=rf?e=>re.fromDom(e.dom.getRootNode()):sl,mm=e=>sf(e)?e:of(sl(e)),fh=e=>sf(e)?e:re.fromDom(sl(e).dom.body),A0=e=>{const n=Ql(e);return sf(n)?H.some(n):H.none()},gh=e=>re.fromDom(e.dom.host),fm=e=>{if(af()&&Pe(e.target)){const n=re.fromDom(e.target);if(_s(n)&&tg(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return In(o)}}return H.from(e.target)},tg=e=>Pe(e.dom.shadowRoot),Ni=e=>{const n=yc(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return A0(re.fromDom(n)).fold(()=>o.body.contains(n),Oo(Ni,gh))};var ng=(e,n,o,r,c)=>e(o,r)?H.some(o):fe(c)&&c(o)?H.none():n(o,r,c);const js=(e,n,o)=>{let r=e.dom;const c=fe(o)?o:De;for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r);if(n(u))return H.some(u);if(c(u))break}return H.none()},E=(e,n,o)=>ng((c,u)=>u(c),js,e,n,o),M=(e,n)=>{const o=e.dom;return o.parentNode?z(re.fromDom(o.parentNode),r=>!os(e,r)&&n(r)):H.none()},z=(e,n)=>{const o=c=>n(re.fromDom(c));return gs(e.dom.childNodes,o).map(re.fromDom)},ue=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=re.fromDom(r.childNodes[c]);if(n(u))return H.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return H.none()};return o(e.dom)},me=(e,n,o)=>js(e,r=>Nc(r,n),o),Tt=(e,n)=>Op(n,e),_n=(e,n,o)=>ng((c,u)=>Nc(c,u),me,e,n,o),Un=e=>_n(e,"[contenteditable]"),go=(e,n=!1)=>Ni(e)?e.dom.isContentEditable:Un(e).fold(rt(n),o=>Ct(o)==="true"),Ct=e=>e.dom.contentEditable,ms=e=>e.style!==void 0&&fe(e.style.getPropertyValue),Sa=(e,n,o)=>{if(!G(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);ms(e)&&e.style.setProperty(n,o)},pl=(e,n)=>{ms(e)&&e.style.removeProperty(n)},gm=(e,n,o)=>{const r=e.dom;Sa(r,n,o)},og=(e,n)=>{const o=e.dom;pt(n,(r,c)=>{Sa(o,c,r)})},pi=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!Ni(e)?bl(o,n):c},bl=(e,n)=>ms(e)?e.style.getPropertyValue(n):"",$c=(e,n)=>{const o=e.dom,r=bl(o,n);return H.from(r).filter(c=>c.length>0)},Bl=e=>{const n={},o=e.dom;if(ms(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},Va=(e,n)=>{const o=e.dom;pl(o,n),Dr(ol(e,"style").map(gc),"")&&Sr(e,"style")},pb=e=>e.dom.offsetWidth,as=(e,n)=>{hl(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Fu=(e,n)=>{vd(e).fold(()=>{hl(e).each(c=>{Mr(c,n)})},r=>{as(r,n)})},Cd=(e,n)=>{wd(e).fold(()=>{Mr(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Mr=(e,n)=>{e.dom.appendChild(n.dom)},bb=(e,n)=>{as(e,n),Mr(n,e)},D0=(e,n)=>{Ve(n,(o,r)=>{const c=r===0?e:n[r-1];Fu(c,o)})},Lu=(e,n)=>{Ve(n,o=>{Mr(e,o)})},Ns=e=>{e.dom.textContent="",Ve(Ra(e),n=>{Ls(n)})},Ls=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},ua=e=>{const n=Ra(e);n.length>0&&D0(e,n),Ls(e)},Sd=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,Ra(re.fromDom(r))},xd=e=>jt(e,re.fromDom),hm=e=>e.dom.innerHTML,Td=(e,n)=>{const r=wc(e).dom,c=re.fromDom(r.createDocumentFragment()),u=Sd(n,r);Lu(c,u),Ns(e),Mr(e,c)},Co=e=>{const n=re.fromTag("div"),o=re.fromDom(e.dom.cloneNode(!0));return Mr(n,o),hm(n)},hh=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),Ap=e=>{const n=re.fromDom(fm(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=O(r,o);return hh(n,e.clientX,e.clientY,o,r,c,e)},R0=(e,n)=>o=>{e(o)&&n(Ap(o))},M0=(e,n,o,r,c)=>{const u=R0(o,r);return e.dom.addEventListener(n,u,c),{unbind:je(vb,e,n,u,c)}},sg=(e,n,o,r)=>M0(e,n,o,r,!1),vb=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},rg=(e,n)=>({left:e,top:n,translate:(r,c)=>rg(e+r,n+c)}),bi=rg,yb=e=>{const n=e.getBoundingClientRect();return bi(n.left,n.top)},ph=(e,n)=>e!==void 0?e:n!==void 0?n:0,wb=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return bi(o.offsetLeft,o.offsetTop);const u=ph(r==null?void 0:r.pageYOffset,c.scrollTop),f=ph(r==null?void 0:r.pageXOffset,c.scrollLeft),b=ph(c.clientTop,o.clientTop),y=ph(c.clientLeft,o.clientLeft);return Bi(e).translate(f-y,u-b)},Bi=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?bi(r.offsetLeft,r.offsetTop):Ni(e)?yb(n):bi(0,0)},Dp=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return bi(o,r)},$i=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},pm=(e,n)=>{wo().browser.isSafari()&&fe(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},N0=e=>{const n=e===void 0?window:e;return wo().browser.isFirefox()?H.none():H.from(n.visualViewport)},bh=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),vh=e=>{const n=e===void 0?window:e,o=n.document,r=Dp(re.fromDom(o));return N0(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return bh(r.left,r.top,u,f)},c=>bh(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},Cb=(e,n)=>mn(Ra(e),n),yh=(e,n)=>{let o=[];return Ve(Ra(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(yh(r,n))}),o},Cc=(e,n)=>_p(n,e),wh=(e,n,o)=>me(e,n,o).isSome();class xa{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Sc=e=>n=>!!n&&n.nodeType===e,Cn=e=>!!e&&!Object.getPrototypeOf(e),Ht=Sc(1),ag=e=>{const n=e.toLowerCase();return o=>Pe(o)&&o.nodeName.toLowerCase()===n},al=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return qt(n,r)}return!1}},cg=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Ht(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Ch=e=>n=>Ht(n)&&n.hasAttribute(e),$l=(e,n)=>o=>Ht(o)&&o.getAttribute(e)===n,vl=e=>Ht(e)&&e.hasAttribute("data-mce-bogus"),Sh=e=>Ht(e)&&e.getAttribute("data-mce-bogus")==="all",Nr=e=>Ht(e)&&e.tagName==="TABLE",cf=e=>n=>!!(Ht(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),lg=al(["textarea","input"]),ft=Sc(3),B0=Sc(4),Sb=Sc(7),Pl=Sc(8),lf=Sc(9),kd=Sc(11),xr=ag("br"),xb=ag("img"),ys=cf("true"),cs=cf("false"),xc=al(["td","th"]),uf=al(["td","th","caption"]),Xr=al(["video","audio","object","embed"]),Ed=ag("li"),Jr="\uFEFF",Os=" ",ig=e=>e===Jr,Qe=e=>e.replace(/\uFEFF/g,""),xh=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?H.from(u.dom.nodeValue):H.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(yc,"text"),Ir=e=>xh.get(e),Pi=e=>xh.getOption(e),Rp=(e,n)=>xh.set(e,n),vi=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],$0=["td","th"],Hu=["thead","tbody","tfoot"],Tb=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],yl=["h1","h2","h3","h4","h5","h6"],ss=["li","dd","dt"],du=["ul","ol","dl"],ug=["pre","script","textarea","style"],Pc=["pre"].concat(yl),Ii=e=>{let n;return o=>(n=n||Je(e,mt),kn(n,hs(o)))},Tc=Ii(vi),kb=e=>hs(e)==="table",Ic=e=>_s(e)&&!Tc(e),Vu=e=>_s(e)&&hs(e)==="br",Te=Ii(Tb),cl=Ii(du),mu=Ii(ss),wl=Ii(Hu),Il=Ii($0),za=Ii(ug),Ta=Ii(Pc),P0=e=>Ta(e)||Ic(e),Th=e=>{const n=[];let o=e.dom;for(;o;)n.push(re.fromDom(o)),o=o.lastChild;return n},C=e=>{const n=Cc(e,"br"),o=mn(Th(e).slice(-1),Vu);n.length===o.length&&Ve(o,Ls)},S=()=>{const e=re.fromTag("br");return Pr(e,"data-mce-bogus","1"),e},F=e=>{Ns(e),Mr(e,S())},Z=e=>{Nl(e).each(n=>{jc(n).each(o=>{Tc(e)&&Vu(n)&&Tc(o)&&Ls(n)})})},ae=Jr,We=ig,ut=Qe,Yt=Ht,jn=ft,Xn=e=>(jn(e)&&(e=e.parentNode),Yt(e)&&e.hasAttribute("data-mce-caret")),ws=e=>jn(e)&&We(e.data),Po=e=>Xn(e)||ws(e),er=e=>e.firstChild!==e.lastChild||!xr(e.firstChild),Fl=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ae),u=e.parentNode;if(n){const f=e.previousSibling;if(jn(f)){if(Po(f))return f;if(_d(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(jn(f)){if(Po(f))return f;if(bm(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},sc=e=>{const n=e.container();return ft(n)?n.data.charAt(e.offset())===ae||e.isAtStart()&&ws(n.previousSibling):!1},Fi=e=>{const n=e.container();return ft(n)?n.data.charAt(e.offset()-1)===ae||e.isAtEnd()&&ws(n.nextSibling):!1},fu=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(S().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},bm=e=>jn(e)&&e.data[0]===ae,_d=e=>jn(e)&&e.data[e.data.length-1]===ae,Li=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];vl(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},Od=e=>e&&e.hasAttribute("data-mce-caret")?(Li(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,kh=e=>Xn(e.startContainer),dg=ys,df=cs,Ma=xr,gu=ft,Io=al(["script","style","textarea"]),Bs=al(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Gc=al(["table"]),Qr=Po,Cl=e=>Qr(e)?!1:gu(e)?!Io(e.parentNode):Bs(e)||Ma(e)||Gc(e)||zu(e),mg=e=>Ht(e)&&e.getAttribute("unselectable")==="true",zu=e=>!mg(e)&&df(e),yi=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(zu(o))return!1;if(dg(o))return!0}return!0},mf=e=>zu(e)?!qo(Rs(e.getElementsByTagName("*")),(n,o)=>n||dg(o),!1):!1,I0=e=>Bs(e)||mf(e),Ll=(e,n)=>Cl(e)&&yi(e,n),D2=/^[ \t\r\n]*$/,Hl=e=>D2.test(e),Uu=e=>" \f	\v".indexOf(e)!==-1,wi=e=>e===`
`||e==="\r",Eb=(e,n)=>n<e.length&&n>=0?wi(e[n]):!1,fg=(e,n=4,o=!0,r=!0)=>{const c=Ac(" ",n),u=e.replace(/\t/g,c);return qo(u,(b,y)=>Uu(y)||y===Os?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||Eb(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Os}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:wi(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},R2=(e,n)=>{const o=re.fromDom(n),r=re.fromDom(e);return wh(r,"pre,code",je(os,o))},iE=(e,n)=>ft(e)&&Hl(e.data)&&!R2(e,n),da=e=>Ht(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),_b=(e,n)=>Cl(e)&&!iE(e,n)||da(e)||Ad(e),Ad=Ch("data-mce-bookmark"),F0=Ch("data-mce-bogus"),L0=$l("data-mce-bogus","all"),gg=(e,n)=>{let o=0;if(_b(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new xa(r,e);do{if(n){if(L0(r)){r=c.next(!0);continue}if(F0(r)){r=c.next();continue}}if(xr(r)){o++,r=c.next();continue}if(_b(r,e))return!1;r=c.next()}while(r);return o<=1}},$s=(e,n=!0)=>gg(e.dom,n),Dd="data-mce-block",Mp=e=>mn(Ss(e),n=>!/[A-Z]/.test(n)),H0=e=>Mp(e).join(","),Eh=(e,n)=>Pe(n.querySelector(e))?(n.setAttribute(Dd,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Dd),!1),Np=(e,n)=>{const o=H0(e.getTransparentElements()),r=H0(e.getBlockElements());return mn(n.querySelectorAll(o),c=>Eh(r,c))},Bp=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if($s(re.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},uE=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();Bp(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Bp(u,!1),$s(re.fromDom(c))||r.insertBefore(c,e),$s(re.fromDom(n))||r.insertBefore(n,e),$s(re.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},V0=(e,n,o)=>{const r=e.getBlockElements(),c=re.fromDom(n),u=b=>hs(b)in r,f=b=>os(b,c);Ve(xd(o),b=>{js(b,u,f).each(y=>{const k=Cb(b,N=>u(N)&&!e.isValidChild(hs(y),hs(N)));if(k.length>0){const N=dm(y);Ve(k,R=>{js(R,u,f).each(L=>{uE(L.dom,R.dom)})}),N.each(R=>Np(e,R.dom))}})})},z0=(e,n,o)=>{Ve([...o,...wm(e,n)?[n]:[]],r=>Ve(Cc(re.fromDom(r),r.nodeName.toLowerCase()),c=>{M2(e,c.dom)&&ua(c)}))},vm=(e,n)=>{const o=Np(e,n);V0(e,n,o),z0(e,n,o)},Rd=(e,n)=>{if(Ob(e,n)){const o=H0(e.getBlockElements());Eh(o,n)}},ym=(e,n,o)=>{const r=u=>os(u,re.fromDom(n)),c=eg(re.fromDom(o),r);nn(c,c.length-2).filter(_s).fold(()=>vm(e,n),u=>vm(e,u.dom))},ff=e=>e.hasAttribute(Dd),$p=(e,n)=>kn(e.getTransparentElements(),n),Ob=(e,n)=>Ht(n)&&$p(e,n.nodeName),wm=(e,n)=>Ob(e,n)&&ff(n),M2=(e,n)=>Ob(e,n)&&!ff(n),N2=(e,n)=>n.type===1&&$p(e,n.name)&&G(n.attr(Dd)),U0=(e,n)=>n.type===1&&$p(e,n.name)&&Dn(n.attr(Dd)),B2=wo().browser,Pp=e=>gs(e,_s),Xo=e=>B2.isFirefox()&&hs(e)==="table"?Pp(Ra(e)).filter(n=>hs(n)==="caption").bind(n=>Pp(rl(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,wn=(e,n)=>e.children&&qt(e.children,n),Cm=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&pi(re.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!wn(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!wn(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=Xo(re.fromDom(n))}return{x:r,y:c}},hg=(e,n={})=>{let o=0;const r={},c=re.fromDom(e),u=sl(c),f=j=>{n.referrerPolicy=j},b=j=>{n.contentCssCors=j},y=j=>{Mr(mm(c),j)},k=j=>{const ee=mm(c);Tt(ee,"#"+j).each(Ls)},N=j=>Uo(r,j).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),R=j=>new Promise((ee,ve)=>{let he;const we=et._addCacheSuffix(j),_e=N(we);r[we]=_e,_e.count++;const qe=(Be,Ut)=>{Ve(Be,Ts),_e.status=Ut,_e.passed=[],_e.failed=[],he&&(he.onload=null,he.onerror=null,he=null)},At=()=>qe(_e.passed,2),St=()=>qe(_e.failed,3);if(ee&&_e.passed.push(ee),ve&&_e.failed.push(ve),_e.status===1)return;if(_e.status===2){At();return}if(_e.status===3){St();return}_e.status=1;const $e=re.fromTag("link",u.dom);oc($e,{rel:"stylesheet",type:"text/css",id:_e.id}),n.contentCssCors&&Pr($e,"crossOrigin","anonymous"),n.referrerPolicy&&Pr($e,"referrerpolicy",n.referrerPolicy),he=$e.dom,he.onload=At,he.onerror=St,y($e),Pr($e,"href",we)}),L=j=>Promise.allSettled(jt(j,ve=>R(ve).then(rt(ve)))).then(ve=>{const he=ks(ve,we=>we.status==="fulfilled");return he.fail.length>0?Promise.reject(jt(he.fail,we=>we.reason)):jt(he.pass,we=>we.value)}),Q=j=>{const ee=et._addCacheSuffix(j);Uo(r,ee).each(ve=>{--ve.count===0&&(delete r[ee],k(ve.id))})};return{load:R,loadAll:L,unload:Q,unloadAll:j=>{Ve(j,ee=>{Q(ee)})},_setReferrerPolicy:f,_setContentCssCors:b}},$2=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Ql(o).dom;return H.from(e.get(u)).getOrThunk(()=>{const f=hg(u,r);return e.set(u,f),f})}}})(),W0=e=>e.nodeName.toLowerCase()==="span",Gs=(e,n)=>Pe(e)&&(_b(e,n)||Ic(re.fromDom(e))),P2=(e,n)=>{const o=new xa(e,n).prev(!1),r=new xa(e,n).next(!1),c=Dn(o)||Gs(o,n),u=Dn(r)||Gs(r,n);return c&&u},Z0=e=>W0(e)&&e.getAttribute("data-mce-type")==="bookmark",I2=(e,n)=>ft(e)&&e.data.length>0&&P2(e,n),nt=e=>Ht(e)?e.childNodes.length>0:!1,j0=e=>kd(e)||lf(e),G0=(e,n,o)=>{var r;const c=o||n;if(Ht(n)&&Z0(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)G0(e,u[f],c);if(Ht(n)){const f=n.childNodes;f.length===1&&Z0(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!j0(n)&&!_b(n,c)&&!nt(n)&&!I2(n,c)&&e.remove(n),n},pg=et.makeMap,Db=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sm=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ip=/[<>&\"\']/g,bg=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,q0={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},hu={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Br={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Vl=e=>{const n=re.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},Fp=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!hu[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},Wu=Fp("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),F2=(e,n)=>e.replace(n?Db:Sm,o=>hu[o]||o),K0=e=>(""+e).replace(Ip,n=>hu[n]||n),gf=(e,n)=>e.replace(n?Db:Sm,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":hu[o]||"&#"+o.charCodeAt(0)+";"),Y0=(e,n,o)=>{const r=o||Wu;return e.replace(n?Db:Sm,c=>hu[c]||r[c]||c)},hf={encodeRaw:F2,encodeAllRaw:K0,encodeNumeric:gf,encodeNamed:Y0,getEncodeFunc:(e,n)=>{const o=Fp(n)||Wu,r=(f,b)=>f.replace(b?Db:Sm,y=>hu[y]!==void 0?hu[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>Y0(f,b,o),u=pg(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:Y0:u.numeric?gf:F2},decode:e=>e.replace(bg,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):q0[o]||String.fromCharCode(o)):Br[n]||Wu[n]||Vl(n))},Zu={},Rb={},dE={},_h=et.makeMap,Ua=et.each,en=et.extend,X0=et.explode,H2=et.inArray,qc=(e,n)=>(e=et.trim(e),e?e.split(n||" "):[]),J0=(e,n={})=>{const o=_h(e," ",_h(e.toUpperCase()," "));return en(o,n)},V2=e=>J0("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Q0=e=>{const n={};let o,r,c,u;const f=(y,k="",N="")=>{const R=qc(N),L=qc(y);let Q=L.length;for(;Q--;){const te=qc([o,k].join(" "));n[L[Q]]={attributes:Je(te,()=>({})),attributesOrder:te,children:Je(R,rt(dE))}}},b=(y,k)=>{const N=qc(y),R=qc(k);let L=N.length;for(;L--;){const Q=n[N[L]];for(let te=0,j=R.length;te<j;te++)Q.attributes[R[te]]={},Q.attributesOrder.push(R[te])}};if(Zu[e])return Zu[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const y="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+y,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const y="acronym applet basefont big font strike tt";c=[c,y].join(" "),Ua(qc(y),N=>{f(N,"",c)});const k="center dir isindex noframes";r=[r,k].join(" "),u=[r,c].join(" "),Ua(qc(k),N=>{f(N,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("address dt dd div caption","",u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&Ve([n.video,n.audio],y=>{delete y.children.audio,delete y.children.video}),Ua(qc("a form meter progress dfn"),y=>{n[y]&&delete n[y].children[y]}),delete n.caption.children.table,delete n.script,Zu[e]=n,n},Md=(e,n)=>{if(e){const o={};return G(e)&&(e={"*":e}),Ua(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?_h(r,/[, ]/):X0(r,/[, ]/)}),o}else return},Ci=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(Qn,Qo,Ds)=>{const Ws=e[Qn];if(Ws)return _h(Ws,/[, ]/,_h(Ws.toUpperCase(),/[, ]/));{let qr=Rb[Qn];return qr||(qr=J0(Qo,Ds),Rb[Qn]=qr),qr}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",k=Q0(y);e.verify_html===!1&&(e.valid_elements="*[*]");const N=Md(e.valid_styles),R=Md(e.invalid_styles,"map"),L=Md(e.valid_classes,"map"),Q=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),te=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),j=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ee=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ve="td th iframe video audio object script code",he=b("non_empty_elements",ve+" pre",j),we=b("move_caret_before_on_enter_elements",ve+" table",j),_e=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),qe=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",_e),At=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),St=b("transparent_elements","a ins del canvas map");Ua("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Qn=>{f[Qn]=new RegExp("</"+Qn+"[^>]*>","gi")});const $e=Qn=>new RegExp("^"+Qn.replace(/([?+*])/g,".$1")+"$"),Be=Qn=>{const Qo=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Ds=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Ws=/[*?+]/;if(Qn){const qr=qc(Qn,",");let ga,kr;o["@"]&&(ga=o["@"].attributes,kr=o["@"].attributesOrder);for(let Fa=0,rd=qr.length;Fa<rd;Fa++){let dl=Qo.exec(qr[Fa]);if(dl){const Ym=dl[1],tu=dl[2],ub=dl[3],db=dl[5],Xm={},rm=[],qa={attributes:Xm,attributesOrder:rm};if(Ym==="#"&&(qa.paddEmpty=!0),Ym==="-"&&(qa.removeEmpty=!0),dl[4]==="!"&&(qa.removeEmptyAttrs=!0),ga&&(pt(ga,(ad,Jm)=>{Xm[Jm]=ad}),kr&&rm.push(...kr)),db){const ad=qc(db,"|");for(let Jm=0,jl=ad.length;Jm<jl;Jm++)if(dl=Ds.exec(ad[Jm]),dl){const cd={},Kf=dl[1],Al=dl[2].replace(/[\\:]:/g,":"),ch=dl[3],Qm=dl[4];if(Kf==="!"&&(qa.attributesRequired=qa.attributesRequired||[],qa.attributesRequired.push(Al),cd.required=!0),Kf==="-"){delete Xm[Al],rm.splice(H2(rm,Al),1);continue}if(ch&&(ch==="="&&(qa.attributesDefault=qa.attributesDefault||[],qa.attributesDefault.push({name:Al,value:Qm}),cd.defaultValue=Qm),ch==="~"&&(qa.attributesForced=qa.attributesForced||[],qa.attributesForced.push({name:Al,value:Qm}),cd.forcedValue=Qm),ch==="<"&&(cd.validValues=_h(Qm,"?"))),Ws.test(Al)){const nu=cd;qa.attributePatterns=qa.attributePatterns||[],nu.pattern=$e(Al),qa.attributePatterns.push(nu)}else Xm[Al]||rm.push(Al),Xm[Al]=cd}}if(!ga&&tu==="@"&&(ga=Xm,kr=rm),ub&&(qa.outputName=tu,o[ub]=qa),Ws.test(tu)){const ad=qa;ad.pattern=$e(tu),c.push(ad)}else o[tu]=qa}}}},Ut=Qn=>{c=[],Ve(Ss(o),Qo=>{delete o[Qo]}),Be(Qn),Ua(k,(Qo,Ds)=>{r[Ds]=Qo.children})},gn=Qn=>{const Qo=/^(~)?(.+)$/;Qn&&(delete Rb.text_block_elements,delete Rb.block_elements,Ua(qc(Qn,","),Ds=>{const Ws=Qo.exec(Ds);if(Ws){const qr=Ws[1]==="~",ga=qr?"span":"div",kr=Ws[2];if(r[kr]=r[ga],u[kr]=ga,he[kr.toUpperCase()]={},he[kr]={},qr||(qe[kr.toUpperCase()]={},qe[kr]={}),!o[kr]){let Fa=o[ga];Fa=en({},Fa),delete Fa.removeEmptyAttrs,delete Fa.removeEmpty,o[kr]=Fa}Ua(r,(Fa,rd)=>{Fa[ga]&&(r[rd]=Fa=en({},r[rd]),Fa[kr]=Fa[ga])})}}))},An=Qn=>{const Qo=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Zu[y],Qn&&Ua(qc(Qn,","),Ds=>{const Ws=Qo.exec(Ds);if(Ws){const qr=Ws[1];let ga;qr?ga=r[Ws[2]]:ga=r[Ws[2]]={"#comment":{}},ga=r[Ws[2]],Ua(qc(Ws[3],"|"),kr=>{qr==="-"?delete ga[kr]:ga[kr]={}})}})},ao=Qn=>{const Qo=o[Qn];if(Qo)return Qo;let Ds=c.length;for(;Ds--;){const Ws=c[Ds];if(Ws.pattern.test(Qn))return Ws}};e.valid_elements?Ut(e.valid_elements):(Ua(k,(Qn,Qo)=>{o[Qo]={attributes:Qn.attributes,attributesOrder:Qn.attributesOrder},r[Qo]=Qn.children}),Ua(qc("strong/b em/i"),Qn=>{const Qo=qc(Qn,"/");o[Qo[1]].outputName=Qo[0]}),Ua(At,(Qn,Qo)=>{o[Qo]&&(e.padd_empty_block_inline_children&&(o[Qo].paddInEmptyBlock=!0),o[Qo].removeEmpty=!0)}),Ua(qc("ol ul blockquote a table tbody"),Qn=>{o[Qn]&&(o[Qn].removeEmpty=!0)}),Ua(qc("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Qn=>{o[Qn].paddEmpty=!0}),Ua(qc("span"),Qn=>{o[Qn].removeEmptyAttrs=!0})),gn(e.custom_elements),An(e.valid_children),Be(e.extended_valid_elements),An("+ol[ul|ol],+ul[ul|ol]"),Ua({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Qn,Qo)=>{o[Qo]&&(o[Qo].parentsRequired=qc(Qn))}),e.invalid_elements&&Ua(X0(e.invalid_elements),Qn=>{o[Qn]&&delete o[Qn]}),ao("span")||Be("span[!data-mce-type|*]");const Mo=rt(N),ps=rt(R),Us=rt(L),ra=rt(ee),Lc=rt(qe),fc=rt(_e),wt=rt(At),un=rt(Object.seal(j)),jo=rt(te),It=rt(he),En=rt(we),On=rt(Q),Lt=rt(St),To=rt(Object.seal(f)),ko=(Qn,Qo)=>{const Ds=r[Qn.toLowerCase()];return!!(Ds&&Ds[Qo.toLowerCase()])},Oc=(Qn,Qo)=>{const Ds=ao(Qn);if(Ds)if(Qo){if(Ds.attributes[Qo])return!0;const Ws=Ds.attributePatterns;if(Ws){let qr=Ws.length;for(;qr--;)if(Ws[qr].pattern.test(Qo))return!0}}else return!0;return!1},hr=rt(u);return{type:y,children:r,elements:o,getValidStyles:Mo,getValidClasses:Us,getBlockElements:Lc,getInvalidStyles:ps,getVoidElements:un,getTextBlockElements:fc,getTextInlineElements:wt,getBoolAttrs:ra,getElementRule:ao,getSelfClosingElements:jo,getNonEmptyElements:It,getMoveCaretBeforeOnEnterElements:En,getWhitespaceElements:On,getTransparentElements:Lt,getSpecialElements:To,isValidChild:ko,isValid:Oc,getCustomElements:hr,addValidElements:Be,setValidElements:Ut,addCustomElements:gn,addValidChildren:An}},Mb=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const y=Jr;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const k=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let R=0;R<k.length;R++)u[k[R]]=y+R,u[y+R]=k[R];const N={parse:R=>{const L={};let Q=!1;const te=e.url_converter,j=e.url_converter_scope||N,ee=($e,Be,Ut)=>{const gn=L[$e+"-top"+Be];if(!gn)return;const An=L[$e+"-right"+Be];if(!An)return;const ao=L[$e+"-bottom"+Be];if(!ao)return;const Mo=L[$e+"-left"+Be];if(!Mo)return;const ps=[gn,An,ao,Mo];let Us=ps.length-1;for(;Us--&&ps[Us]===ps[Us+1];);Us>-1&&Ut||(L[$e+Be]=Us===-1?ps[0]:ps.join(" "),delete L[$e+"-top"+Be],delete L[$e+"-right"+Be],delete L[$e+"-bottom"+Be],delete L[$e+"-left"+Be])},ve=$e=>{const Be=L[$e];if(!Be)return;const Ut=Be.split(" ");let gn=Ut.length;for(;gn--;)if(Ut[gn]!==Ut[0])return!1;return L[$e]=Ut[0],!0},he=($e,Be,Ut,gn)=>{ve(Be)&&ve(Ut)&&ve(gn)&&(L[$e]=L[Be]+" "+L[Ut]+" "+L[gn],delete L[Be],delete L[Ut],delete L[gn])},we=$e=>(Q=!0,u[$e]),_e=($e,Be)=>(Q&&($e=$e.replace(/\uFEFF[0-9]/g,Ut=>u[Ut])),Be||($e=$e.replace(/\\([\'\";:])/g,"$1")),$e),qe=$e=>String.fromCharCode(parseInt($e.slice(1),16)),At=$e=>$e.replace(/\\[0-9a-f]+/gi,qe),St=($e,Be,Ut,gn,An,ao)=>{if(An=An||ao,An)return An=_e(An),"'"+An.replace(/\'/g,"\\'")+"'";if(Be=_e(Be||Ut||gn||""),!e.allow_script_urls){const Mo=Be.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Mo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Mo))return""}return te&&(Be=te.call(j,Be,"style")),"url('"+Be.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,we).replace(/\"[^\"]+\"|\'[^\']+\'/g,Be=>Be.replace(/[;:]/g,we));let $e;for(;$e=r.exec(R);){r.lastIndex=$e.index+$e[0].length;let Be=$e[1].replace(c,"").toLowerCase(),Ut=$e[2].replace(c,"");if(Be&&Ut){if(Be=At(Be),Ut=At(Ut),Be.indexOf(y)!==-1||Be.indexOf('"')!==-1||!e.allow_script_urls&&(Be==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ut)))continue;Be==="font-weight"&&Ut==="700"?Ut="bold":(Be==="color"||Be==="background-color")&&(Ut=Ut.toLowerCase()),Ut=Ut.replace(o,St),L[Be]=Q?_e(Ut,!0):Ut}}ee("border","",!0),ee("border","-width"),ee("border","-color"),ee("border","-style"),ee("padding",""),ee("margin",""),he("border","border-width","border-style","border-color"),L.border==="medium none"&&delete L.border,L["border-image"]==="none"&&delete L["border-image"]}return L},serialize:(R,L)=>{let Q="";const te=(ee,ve)=>{const he=ve[ee];if(he)for(let we=0,_e=he.length;we<_e;we++){const qe=he[we],At=R[qe];At&&(Q+=(Q.length>0?" ":"")+qe+": "+At+";")}},j=(ee,ve)=>{if(!b||!ve)return!0;let he=b["*"];return he&&he[ee]?!1:(he=b[ve],!(he&&he[ee]))};return L&&f?(te("*",f),te(L,f)):pt(R,(ee,ve)=>{ee&&j(ve,L)&&(Q+=(Q.length>0?" ":"")+ve+": "+ee+";")}),Q}};return N},vg={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},mE=e=>e instanceof Event||fe(e.initEvent),z2=e=>e.isDefaultPrevented===mt||e.isDefaultPrevented===De,Lp=e=>Ye(e.preventDefault)||mE(e),Oh=(e,n)=>{const o=n??{};for(const r in e)kn(vg,r)||(o[r]=e[r]);return Pe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},Ah=(e,n,o,r)=>{var c;const u=Oh(n,r);return u.type=e,Ye(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),Lp(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=mt,fe(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=mt,fe(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=mt,u.stopPropagation()},z2(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?mt:De,u.isPropagationStopped=u.cancelBubble===!0?mt:De,u.isImmediatePropagationStopped=De)),u},yg="mce-data-",U2=/^(?:mouse|contextmenu)|click/,Nb=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},wg=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Bb=e=>Pe(e)&&U2.test(e.type),ti=(e,n)=>{const o=Ah(e.type,e,document,n);if(Bb(e)&&Dn(e.pageX)&&!Dn(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},zl=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{wg(e,"DOMContentLoaded",f),wg(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():Nb(e,"DOMContentLoaded",f),o.domLoaded||Nb(e,"load",f)};class Tm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=yg+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=L=>{u.executeHandlers(ti(L||b.event),k)};if(!n||ft(n)||Pl(n))return r;let k;n[u.expando]?k=n[u.expando]:(k=u.count++,n[u.expando]=k,u.events[k]={}),c=c||n;const N=o.split(" ");let R=N.length;for(;R--;){let L=N[R],Q=y,te=!1,j=!1;if(L==="DOMContentLoaded"&&(L="ready"),u.domLoaded&&L==="ready"&&n.readyState==="complete"){r.call(c,ti({type:L}));continue}!u.hasFocusIn&&(L==="focusin"||L==="focusout")&&(te=!0,j=L==="focusin"?"focus":"blur",Q=ee=>{const ve=ti(ee||b.event);ve.type=ve.type==="focus"?"focusin":"focusout",u.executeHandlers(ve,k)}),f=u.events[k][L],f?L==="ready"&&u.domLoaded?r(ti({type:L})):f.push({func:r,scope:c}):(u.events[k][L]=f=[{func:r,scope:c}],f.fakeName=j,f.capture=te,f.nativeHandler=Q,L==="ready"?zl(n,Q,u):Nb(n,j||L,Q,te))}return n=f=null,r}unbind(n,o,r){if(!n||ft(n)||Pl(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],k=u[y];if(k){if(r){let N=k.length;for(;N--;)if(k[N].func===r){const R=k.nativeHandler,L=k.fakeName,Q=k.capture,te=k.slice(0,N).concat(k.slice(N+1));te.nativeHandler=R,te.fakeName=L,te.capture=Q,u[y]=te}}(!r||k.length===0)&&(delete u[y],wg(n,k.fakeName||y,k.nativeHandler,k.capture))}}}else pt(u,(f,b)=>{wg(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(kn(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||ft(n)||Pl(n))return this;const c=ti({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||ft(n)||Pl(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Tm.Event=new Tm;const $b=et.each,W2=et.grep,Hp="data-mce-style",ju=et.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Pb=(e,n,o)=>{Ye(o)||o===""?Sr(e,n):Pr(e,n,o)},Dh=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Nd=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&ft(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},ey=(e,n)=>{const o=Mc(n,"style"),r=e.serialize(e.parse(o),hs(n));Pb(n,Hp,r)},fE=(e,n)=>Go(e)?kn(ju,n)?e+"":e+"px":e,Z2=(e,n,o)=>{const r=Dh(n);Ye(o)||o===""?Va(e,r):gm(e,r,fE(o,r))},ty=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const k=re.fromDom(f);fe(n.url_converter)&&Pe(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const N="data-mce-"+y;Pb(k,N,b),Pb(k,y,b)},get:(f,b)=>{const y=re.fromDom(f);return Mc(y,"data-mce-"+b)||Mc(y,b)}},u={style:{set:(f,b)=>{const y=re.fromDom(f);r&&Pb(y,Hp,b),Sr(y,"style"),G(b)&&og(y,e.parse(b))},get:f=>{const b=re.fromDom(f),y=Mc(b,Hp)||Mc(b,"style");return e.serialize(e.parse(y),hs(b))}}};return r&&(u.href=u.src=c),u},tr=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=$2.forElement(re.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),k=[],N=n.schema?n.schema:Ci({}),R=Mb({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),L=n.ownEvents?new Tm:Tm.Event,Q=N.getBlockElements(),te=Oe=>G(Oe)?kn(Q,Oe):Ht(Oe)&&(kn(Q,Oe.nodeName)||wm(N,Oe)),j=Oe=>Oe&&e&&G(Oe)?e.getElementById(Oe):Oe,ee=Oe=>{const Ae=j(Oe);return Pe(Ae)?re.fromDom(Ae):null},ve=(Oe,Ae,xt="")=>{let gt;const Tn=ee(Oe);if(Pe(Tn)&&_s(Tn)){const Eo=mb[Ae];Eo&&Eo.get?gt=Eo.get(Tn.dom,Ae):gt=Mc(Tn,Ae)}return Pe(gt)?gt:xt},he=Oe=>{const Ae=j(Oe);return Ye(Ae)?[]:Ae.attributes},we=(Oe,Ae,xt)=>{un(Oe,gt=>{if(Ht(gt)){const Tn=re.fromDom(gt),Eo=xt===""?null:xt,Ks=Mc(Tn,Ae),lr=mb[Ae];lr&&lr.set?lr.set(Tn.dom,Eo,Ae):Pb(Tn,Ae,Eo),Ks!==Eo&&n.onSetAttrib&&n.onSetAttrib({attrElm:Tn.dom,attrName:Ae,attrValue:Eo})}})},_e=(Oe,Ae)=>Oe.cloneNode(Ae),qe=()=>n.root_element||e.body,At=Oe=>{const Ae=vh(Oe);return{x:Ae.x,y:Ae.y,w:Ae.width,h:Ae.height}},St=(Oe,Ae)=>Cm(e.body,j(Oe),Ae),$e=(Oe,Ae,xt)=>{un(Oe,gt=>{const Tn=re.fromDom(gt);Z2(Tn,Ae,xt),n.update_styles&&ey(R,Tn)})},Be=(Oe,Ae)=>{un(Oe,xt=>{const gt=re.fromDom(xt);pt(Ae,(Tn,Eo)=>{Z2(gt,Eo,Tn)}),n.update_styles&&ey(R,gt)})},Ut=(Oe,Ae,xt)=>{const gt=j(Oe);if(!(Ye(gt)||!Ht(gt)))return xt?pi(re.fromDom(gt),Dh(Ae)):(Ae=Ae.replace(/-(\D)/g,(Tn,Eo)=>Eo.toUpperCase()),Ae==="float"&&(Ae="cssFloat"),gt.style?gt.style[Ae]:void 0)},gn=Oe=>{const Ae=j(Oe);if(!Ae)return{w:0,h:0};let xt=Ut(Ae,"width"),gt=Ut(Ae,"height");return(!xt||xt.indexOf("px")===-1)&&(xt="0"),(!gt||gt.indexOf("px")===-1)&&(gt="0"),{w:parseInt(xt,10)||Ae.offsetWidth||Ae.clientWidth,h:parseInt(gt,10)||Ae.offsetHeight||Ae.clientHeight}},An=Oe=>{const Ae=j(Oe),xt=St(Ae),gt=gn(Ae);return{x:xt.x,y:xt.y,w:gt.w,h:gt.h}},ao=(Oe,Ae)=>{if(!Oe)return!1;const xt=at(Oe)?Oe:[Oe];return ro(xt,gt=>Nc(re.fromDom(gt),Ae))},Mo=(Oe,Ae,xt,gt)=>{const Tn=[];let Eo=j(Oe);gt=gt===void 0;const Ks=xt||(qe().nodeName!=="BODY"?qe().parentNode:null);if(G(Ae))if(Ae==="*")Ae=Ht;else{const lr=Ae;Ae=Xf=>ao(Xf,lr)}for(;Eo&&!(Eo===Ks||Ye(Eo.nodeType)||lf(Eo)||kd(Eo));){if(!Ae||Ae(Eo))if(gt)Tn.push(Eo);else return[Eo];Eo=Eo.parentNode}return gt?Tn:null},ps=(Oe,Ae,xt)=>{const gt=Mo(Oe,Ae,xt,!1);return gt&&gt.length>0?gt[0]:null},Us=(Oe,Ae,xt)=>{let gt=Ae;if(Oe){G(Ae)&&(gt=Tn=>ao(Tn,Ae));for(let Tn=Oe[xt];Tn;Tn=Tn[xt])if(fe(gt)&&gt(Tn))return Tn}return null},ra=(Oe,Ae)=>Us(Oe,Ae,"nextSibling"),Lc=(Oe,Ae)=>Us(Oe,Ae,"previousSibling"),fc=Oe=>fe(Oe.querySelectorAll),wt=(Oe,Ae)=>{var xt,gt;const Tn=(gt=(xt=j(Ae))!==null&&xt!==void 0?xt:n.root_element)!==null&&gt!==void 0?gt:e;return fc(Tn)?Rs(Tn.querySelectorAll(Oe)):[]},un=function(Oe,Ae,xt){const gt=xt??this;if(at(Oe)){const Tn=[];return $b(Oe,(Eo,Ks)=>{const lr=j(Eo);lr&&Tn.push(Ae.call(gt,lr,Ks))}),Tn}else{const Tn=j(Oe);return Tn?Ae.call(gt,Tn):!1}},jo=(Oe,Ae)=>{un(Oe,xt=>{pt(Ae,(gt,Tn)=>{we(xt,Tn,gt)})})},It=(Oe,Ae)=>{un(Oe,xt=>{const gt=re.fromDom(xt);Td(gt,Ae)})},En=(Oe,Ae,xt,gt,Tn)=>un(Oe,Eo=>{const Ks=G(Ae)?e.createElement(Ae):Ae;return Pe(xt)&&jo(Ks,xt),gt&&(!G(gt)&&gt.nodeType?Ks.appendChild(gt):G(gt)&&It(Ks,gt)),Tn?Ks:Eo.appendChild(Ks)}),On=(Oe,Ae,xt)=>En(e.createElement(Oe),Oe,Ae,xt,!0),Lt=hf.decode,To=hf.encodeAllRaw,ko=(Oe,Ae,xt="")=>{let gt="<"+Oe;for(const Tn in Ae)zr(Ae,Tn)&&(gt+=" "+Tn+'="'+To(Ae[Tn])+'"');return ya(xt)&&kn(N.getVoidElements(),Oe)?gt+" />":gt+">"+xt+"</"+Oe+">"},Oc=Oe=>{const Ae=e.createElement("div"),xt=e.createDocumentFragment();xt.appendChild(Ae),Oe&&(Ae.innerHTML=Oe);let gt;for(;gt=Ae.firstChild;)xt.appendChild(gt);return xt.removeChild(Ae),xt},hr=(Oe,Ae)=>un(Oe,xt=>{const gt=re.fromDom(xt);return Ae&&Ve(Ra(gt),Tn=>{yc(Tn)&&Tn.dom.length===0?Ls(Tn):as(gt,Tn)}),Ls(gt),gt.dom}),Qn=Oe=>un(Oe,Ae=>{const xt=Ae.attributes;for(let gt=xt.length-1;gt>=0;gt--)Ae.removeAttributeNode(xt.item(gt))}),Qo=Oe=>R.parse(Oe),Ds=(Oe,Ae)=>R.serialize(Oe,Ae),Ws=Oe=>{if(am!==tr.DOM&&e===document){if(o[Oe])return;o[Oe]=!0}let Ae=e.getElementById("mceDefaultStyles");if(!Ae){Ae=e.createElement("style"),Ae.id="mceDefaultStyles",Ae.type="text/css";const xt=e.head;xt.firstChild?xt.insertBefore(Ae,xt.firstChild):xt.appendChild(Ae)}Ae.styleSheet?Ae.styleSheet.cssText+=Oe:Ae.appendChild(e.createTextNode(Oe))},qr=Oe=>{Oe||(Oe=""),Ve(Oe.split(","),Ae=>{c[Ae]=!0,y.load(Ae).catch(Wt)})},ga=(Oe,Ae,xt)=>{un(Oe,gt=>{if(Ht(gt)){const Tn=re.fromDom(gt),Eo=Ae.split(" ");Ve(Eo,Ks=>{Pe(xt)?(xt?$u:gd)(Tn,Ks):hd(Tn,Ks)})}})},kr=(Oe,Ae)=>{ga(Oe,Ae,!0)},Fa=(Oe,Ae)=>{ga(Oe,Ae,!1)},rd=(Oe,Ae)=>{const xt=ee(Oe),gt=Ae.split(" ");return Pe(xt)&&us(gt,Tn=>pd(xt,Tn))},dl=Oe=>{un(Oe,Ae=>Va(re.fromDom(Ae),"display"))},Ym=Oe=>{un(Oe,Ae=>gm(re.fromDom(Ae),"display","none"))},tu=Oe=>{const Ae=ee(Oe);return Pe(Ae)&&Dr($c(Ae,"display"),"none")},ub=Oe=>(Oe||"mce_")+u++,db=Oe=>{const Ae=ee(Oe);return Pe(Ae)?Ht(Ae.dom)?Ae.dom.outerHTML:Co(Ae):""},Xm=(Oe,Ae)=>{un(Oe,xt=>{Ht(xt)&&(xt.outerHTML=Ae)})},rm=(Oe,Ae)=>{const xt=j(Ae);return un(Oe,gt=>{const Tn=xt==null?void 0:xt.parentNode,Eo=xt==null?void 0:xt.nextSibling;return Tn&&(Eo?Tn.insertBefore(gt,Eo):Tn.appendChild(gt)),gt})},qa=(Oe,Ae,xt)=>un(Ae,gt=>{var Tn;const Eo=at(Ae)?Oe.cloneNode(!0):Oe;return xt&&$b(W2(gt.childNodes),Ks=>{Eo.appendChild(Ks)}),(Tn=gt.parentNode)===null||Tn===void 0||Tn.replaceChild(Eo,gt),gt}),ad=(Oe,Ae)=>{if(Oe.nodeName!==Ae.toUpperCase()){const xt=On(Ae);return $b(he(Oe),gt=>{we(xt,gt.nodeName,ve(Oe,gt.nodeName))}),qa(xt,Oe,!0),xt}else return Oe},Jm=(Oe,Ae)=>{let xt=Oe;for(;xt;){let gt=Ae;for(;gt&&xt!==gt;)gt=gt.parentNode;if(xt===gt)break;xt=xt.parentNode}return!xt&&Oe.ownerDocument?Oe.ownerDocument.documentElement:xt},jl=Oe=>{if(Ht(Oe)){const Ae=Oe.nodeName.toLowerCase()==="a"&&!ve(Oe,"href")&&ve(Oe,"id");if(ve(Oe,"name")||ve(Oe,"data-mce-bookmark")||Ae)return!0}return!1},cd=(Oe,Ae)=>{let xt=0;if(jl(Oe))return!1;const gt=Oe.firstChild;if(gt){const Tn=new xa(gt,Oe),Eo=N?N.getWhitespaceElements():{},Ks=Ae||(N?N.getNonEmptyElements():null);let lr=gt;do{if(Ht(lr)){const Xf=lr.getAttribute("data-mce-bogus");if(Xf){lr=Tn.next(Xf==="all");continue}const ou=lr.nodeName.toLowerCase();if(Ks&&Ks[ou]){if(ou==="br"){xt++,lr=Tn.next();continue}return!1}if(jl(lr))return!1}if(Pl(lr)||ft(lr)&&!Hl(lr.data)||ft(lr)&&lr.parentNode&&Eo[lr.parentNode.nodeName]&&Hl(lr.data))return!1;lr=Tn.next()}while(lr)}return xt<=1},Kf=()=>e.createRange(),Al=(Oe,Ae,xt)=>{let gt=Kf(),Tn,Eo;if(Oe&&Ae&&Oe.parentNode&&Ae.parentNode){const Ks=Oe.parentNode;return gt.setStart(Ks,Nd(Oe)),gt.setEnd(Ae.parentNode,Nd(Ae)),Tn=gt.extractContents(),gt=Kf(),gt.setStart(Ae.parentNode,Nd(Ae)+1),gt.setEnd(Ks,Nd(Oe)+1),Eo=gt.extractContents(),Ks.insertBefore(G0(am,Tn),Oe),xt?Ks.insertBefore(xt,Oe):Ks.insertBefore(Ae,Oe),Ks.insertBefore(G0(am,Eo),Oe),hr(Oe),xt||Ae}else return},ch=(Oe,Ae,xt,gt)=>{if(at(Oe)){let Tn=Oe.length;const Eo=[];for(;Tn--;)Eo[Tn]=ch(Oe[Tn],Ae,xt,gt);return Eo}else return n.collect&&(Oe===e||Oe===r)&&k.push([Oe,Ae,xt,gt]),L.bind(Oe,Ae,xt,gt||am)},Qm=(Oe,Ae,xt)=>{if(at(Oe)){let gt=Oe.length;const Tn=[];for(;gt--;)Tn[gt]=Qm(Oe[gt],Ae,xt);return Tn}else{if(k.length>0&&(Oe===e||Oe===r)){let gt=k.length;for(;gt--;){const[Tn,Eo,Ks]=k[gt];Oe===Tn&&(!Ae||Ae===Eo)&&(!xt||xt===Ks)&&L.unbind(Tn,Eo,Ks)}}return L.unbind(Oe,Ae,xt)}},nu=(Oe,Ae,xt)=>L.dispatch(Oe,Ae,xt),Yf=(Oe,Ae,xt)=>L.dispatch(Oe,Ae,xt),C2=Oe=>{if(Oe&&Ht(Oe)){const Ae=Oe.getAttribute("data-mce-contenteditable");return Ae&&Ae!=="inherit"?Ae:Oe.contentEditable!=="inherit"?Oe.contentEditable:null}else return null},am={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:k,styles:R,schema:N,events:L,isBlock:te,root:null,clone:_e,getRoot:qe,getViewPort:At,getRect:An,getSize:gn,getParent:ps,getParents:Mo,get:j,getNext:ra,getPrev:Lc,select:wt,is:ao,add:En,create:On,createHTML:ko,createFragment:Oc,remove:hr,setStyle:$e,getStyle:Ut,setStyles:Be,removeAllAttribs:Qn,setAttrib:we,setAttribs:jo,getAttrib:ve,getPos:St,parseStyle:Qo,serializeStyle:Ds,addStyle:Ws,loadCSS:qr,addClass:kr,removeClass:Fa,hasClass:rd,toggleClass:ga,show:dl,hide:Ym,isHidden:tu,uniqueId:ub,setHTML:It,getOuterHTML:db,setOuterHTML:Xm,decode:Lt,encode:To,insertAfter:rm,replace:qa,rename:ad,findCommonAncestor:Jm,run:un,getAttribs:he,isEmpty:cd,createRng:Kf,nodeIndex:Nd,split:Al,bind:ch,unbind:Qm,fire:Yf,dispatch:nu,getContentEditable:C2,getContentEditableParent:Oe=>{const Ae=qe();let xt=null;for(let gt=Oe;gt&&gt!==Ae&&(xt=C2(gt),xt===null);gt=gt.parentNode);return xt},isEditable:Oe=>{if(Pe(Oe)){const Ae=Ht(Oe)?Oe:Oe.parentElement,xt=C2(qe())==="true";return Pe(Ae)&&go(re.fromDom(Ae),xt)}else return!1},destroy:()=>{if(k.length>0){let Oe=k.length;for(;Oe--;){const[Ae,xt,gt]=k[Oe];L.unbind(Ae,xt,gt)}}pt(c,(Oe,Ae)=>{y.unload(Ae),delete c[Ae]})},isChildOf:(Oe,Ae)=>Oe===Ae||Ae.contains(Oe),dumpRng:Oe=>"startContainer: "+Oe.startContainer.nodeName+", startOffset: "+Oe.startOffset+", endContainer: "+Oe.endContainer.nodeName+", endOffset: "+Oe.endOffset},mb=ty(R,n,rt(am));return am};tr.DOM=tr(document),tr.nodeIndex=Nd;const gE=tr.DOM,j2=0,hE=1,Ib=2,Rh=3;class km{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=gE;let u;const f=()=>{c.remove(k),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},k=c.uniqueId();u=document.createElement("script"),u.id=k,u.type="text/javascript",u.src=et._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Ib}markDone(n){this.states[n]=Ib}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=j2),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,k)=>{Uo(o.scriptLoadedCallbacks,k).each(N=>{Ve(N,R=>R[y](k))}),delete o.scriptLoadedCallbacks[k]},c=y=>{const k=mn(y,N=>N.status==="rejected");return k.length>0?Promise.reject(_r(k,({reason:N})=>at(N)?N:[N])):Promise.resolve()},u=y=>Promise.allSettled(jt(y,k=>o.states[k]===Ib?(r("resolve",k),Promise.resolve()):o.states[k]===Rh?(r("reject",k),Promise.reject(k)):(o.states[k]=hE,o.loadScript(k).then(()=>{o.states[k]=Ib,r("resolve",k);const N=o.queue;return N.length>0?(o.queue=[],u(N).then(c)):Promise.resolve()},()=>(o.states[k]=Rh,r("reject",k),Promise.reject(k)))))),f=y=>(o.loading=!0,u(y).then(k=>{o.loading=!1;const N=o.queueLoadedCallbacks.shift();return H.from(N).each(Ts),c(k)})),b=Qa(n);return o.loading?new Promise((y,k)=>{o.queueLoadedCallbacks.push(()=>f(b).then(y,k))}):f(b)}}km.ScriptLoader=new km;const Na=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},Em=e=>Xe(e)&&kn(e,"raw"),ny=e=>at(e)&&e.length>1,Ba={},oy=Na("en"),Fb=()=>Uo(Ba,oy.get()),Gu={getData:()=>oo(Ba,e=>({...e})),setCode:e=>{e&&oy.set(e)},getCode:()=>oy.get(),add:(e,n)=>{let o=Ba[e];o||(Ba[e]=o={}),pt(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=Fb().getOr({}),o=f=>fe(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return Uo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(Em(e))return o(e.raw);if(ny(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,k)=>kn(f,k)?o(f[k]):y);return u(b)}return u(c(e))},isRtl:()=>Fb().bind(e=>Uo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>kn(Ba,e)},Cs=()=>{const e=[],n={},o={},r=[],c=(j,ee)=>{const ve=mn(r,he=>he.name===j&&he.state===ee);Ve(ve,he=>he.resolve())},u=j=>kn(n,j),f=j=>kn(o,j),b=j=>{if(o[j])return o[j].instance},y=(j,ee)=>{const ve=Gu.getCode(),he=","+(ee||"")+",";!ve||ee&&he.indexOf(","+ve+",")===-1||km.ScriptLoader.add(n[j]+"/langs/"+ve+".js")},k=(j,ee)=>{Cs.languageLoad!==!1&&(u(j)?y(j,ee):te(j,"loaded").then(()=>y(j,ee)))},N=(j,ee)=>(e.push(ee),o[j]={instance:ee},c(j,"added"),ee),R=j=>{delete n[j],delete o[j]},L=(j,ee)=>G(ee)?G(j)?{prefix:"",resource:ee,suffix:""}:{prefix:j.prefix,resource:ee,suffix:j.suffix}:ee,Q=(j,ee)=>{if(n[j])return Promise.resolve();let ve=G(ee)?ee:ee.prefix+ee.resource+ee.suffix;ve.indexOf("/")!==0&&ve.indexOf("://")===-1&&(ve=Cs.baseURL+"/"+ve),n[j]=ve.substring(0,ve.lastIndexOf("/"));const he=()=>(c(j,"loaded"),Promise.resolve());return o[j]?he():km.ScriptLoader.add(ve).then(he)},te=(j,ee="added")=>ee==="added"&&f(j)||ee==="loaded"&&u(j)?Promise.resolve():new Promise(ve=>{r.push({name:j,state:ee,resolve:ve})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:k,add:N,remove:R,createUrl:L,load:Q,waitFor:te}};Cs.languageLoad=!0,Cs.baseURL="",Cs.PluginManager=Cs(),Cs.ThemeManager=Cs(),Cs.ModelManager=Cs();const K2=e=>{const n=Na(H.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(H.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(H.some(b))}}},ea=e=>{const n=Na(H.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(H.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(H.some(setInterval(b,e)))}}},Wa=()=>{const e=K2(Wt);return{...e,on:o=>e.get().each(o)}},Hi=(e,n)=>{let o=null;return{cancel:()=>{q(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{q(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},Sl=(e,n)=>{let o=null;const r=()=>{q(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Cg=rt("mce-annotation"),Mh=rt("data-mce-annotation"),_m=rt("data-mce-annotation-uid"),Si=rt("data-mce-annotation-active"),pu=rt("data-mce-annotation-classes"),Nh=rt("data-mce-annotation-attrs"),Vp=e=>n=>os(n,e),sy=(e,n)=>{const o=e.selection.getRng(),r=re.fromDom(o.startContainer),c=re.fromDom(e.getBody()),u=n.fold(()=>"."+Cg(),y=>`[${Mh()}="${y}"]`),f=yd(r,o.startOffset).getOr(r);return _n(f,u,Vp(c)).bind(y=>ol(y,`${_m()}`).bind(k=>ol(y,`${Mh()}`).map(N=>{const R=Bh(e,k);return{uid:k,name:N,elements:R}})))},Y2=e=>_s(e)&&pd(e,Cg()),X2=(e,n)=>Ha(e,"data-mce-bogus")||wh(e,'[data-mce-bogus="all"]',Vp(n)),Bh=(e,n)=>{const o=re.fromDom(e.getBody()),r=Cc(o,`[${_m()}="${n}"]`);return mn(r,c=>!X2(c,o))},ry=(e,n)=>{const o=re.fromDom(e.getBody()),r=Cc(o,`[${Mh()}="${n}"]`),c={};return Ve(r,u=>{if(!X2(u,o)){const f=Mc(u,_m()),b=Uo(c,f).getOr([]);c[f]=b.concat([u])}}),c},pE=(e,n)=>{const o=Na({}),r=()=>({listeners:[],previous:Wa()}),c=(R,L)=>{u(R,Q=>(L(Q),Q))},u=(R,L)=>{const Q=o.get(),te=Uo(Q,R).getOrThunk(r),j=L(te);Q[R]=j,o.set(Q)},f=(R,L,Q)=>{c(R,te=>{Ve(te.listeners,j=>j(!0,R,{uid:L,nodes:jt(Q,ee=>ee.dom)}))})},b=R=>{c(R,L=>{Ve(L.listeners,Q=>Q(!1,R))})},y=(R,L)=>{Ve(Bh(e,R),Q=>{L?Pr(Q,Si(),"true"):Sr(Q,Si())})},k=Sl(()=>{const R=Gt(n.getNames());Ve(R,L=>{u(L,Q=>{const te=Q.previous.get();return sy(e,H.some(L)).fold(()=>{te.each(j=>{b(L),Q.previous.clear(),y(j,!1)})},({uid:j,name:ee,elements:ve})=>{Dr(te,j)||(te.each(he=>y(he,!1)),f(ee,j,ve),Q.previous.set(j),y(j,!0))}),{previous:Q.previous,listeners:Q.listeners}})})},30);return e.on("remove",()=>{k.cancel()}),e.on("NodeChange",()=>{k.throttle()}),{addListener:(R,L)=>{u(R,Q=>({previous:Q.previous,listeners:Q.listeners.concat([L])}))}}},bE=(e,n)=>{const o=Mh(),r=u=>H.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(_m(),null),u.attr(Mh(),null),u.attr(Si(),null);const y=H.from(u.attr(Nh())).map(L=>L.split(",")).getOr([]),k=H.from(u.attr(pu())).map(L=>L.split(",")).getOr([]);Ve(y,L=>u.attr(L,null));const N=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],R=ot(N,[Cg()].concat(k));u.attr("class",R.length>0?R.join(" "):null),u.attr(pu(),null),u.attr(Nh(),null)};e.serializer.addTempAttr(Si()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},J2=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>Uo(e,c).map(u=>u.settings),getNames:()=>Ss(e)}};let Q2=0;const ay=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return Q2++,e+"_"+r+Q2+String(o)},eS=(e,n)=>{Ve(n,o=>{$u(e,o)})},vE=(e,n)=>{Ve(n,o=>{gd(e,o)})},cy=(e,n)=>re.fromDom(e.dom.cloneNode(n)),Sg=e=>cy(e,!1),ly=e=>cy(e,!0),yE=(e,n)=>{const o=re.fromTag(n),r=im(e);return oc(o,r),o},wE=(e,n)=>{const o=yE(e,n);Fu(e,o);const r=Ra(e);return Lu(o,r),Ls(e),o},tS=(e,n,o=De)=>{const r=new xa(e,n),c=u=>{let f;do f=r[u]();while(f&&!ft(f)&&!o(f));return H.from(f).filter(ft)};return{current:()=>H.from(r.current()).filter(ft),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},fr=(e,n)=>{const o=n||(f=>e.isBlock(f)||xr(f)||cs(f)),r=(f,b,y,k)=>{if(ft(f)){const N=k(f,b,f.data);if(N!==-1)return H.some({container:f,offset:N})}return y().bind(N=>r(N.container,N.offset,y,k))};return{backwards:(f,b,y,k)=>{const N=tS(f,k??e.getRoot(),o);return r(f,b,()=>N.prev().map(R=>({container:R,offset:R.length})),y).getOrNull()},forwards:(f,b,y,k)=>{const N=tS(f,k??e.getRoot(),o);return r(f,b,()=>N.next().map(R=>({container:R,offset:0})),y).getOrNull()}}},vf=Math.round,xg=e=>e?{left:vf(e.left),top:vf(e.top),bottom:vf(e.bottom),right:vf(e.right),width:vf(e.width),height:vf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},nS=(e,n)=>(e=xg(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Hb=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Kc=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Ul=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Kc(n.top-e.bottom,e,n)},Tg=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Kc(n.bottom-e.top,e,n),Vb=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,iy=e=>qo(e,(n,o)=>n.fold(()=>H.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return H.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),H.none()),oS=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},sS=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),rS=(e,n,o)=>Math.min(Math.max(e,n),o),bu=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Om=(e,n)=>{if(Ht(e)&&e.hasChildNodes()){const o=e.childNodes,r=rS(n,0,o.length-1);return o[r]}else return e},Tr=(e,n)=>{if(!(n<0&&Ht(e)&&e.hasChildNodes()))return Om(e,n)},Bd=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),qu=e=>G(e)&&e.charCodeAt(0)>=768&&Bd.test(e),CE=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},aS=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},uy=Ht,kg=Cl,dy=cg("display","block table"),$h=cg("float","left right"),Eg=aS(uy,kg,po($h)),SE=po(cg("white-space","pre pre-line pre-wrap")),zp=ft,Up=xr,my=tr.nodeIndex,zb=Tr,Wp=e=>e?e.createRange():tr.DOM.createRng(),fy=e=>G(e)&&/[\r\n\t ]/.test(e),yf=e=>!!e.setStart&&!!e.setEnd,Ph=e=>{const n=e.startContainer,o=e.startOffset;if(fy(e.toString())&&SE(n.parentNode)&&ft(n)){const r=n.data;if(fy(r[o-1])||fy(r[o+1]))return!0}return!1},cS=e=>{const n=e.ownerDocument,o=Wp(n),r=n.createTextNode(Os),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=xg(o.getBoundingClientRect());return c.removeChild(r),u},lS=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&ft(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Ku(u)}else return null},iS=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ku=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=xg(r[0]):o=xg(e.getBoundingClientRect()),!yf(e)&&Up(e)&&iS(o)?cS(e):iS(o)&&yf(e)&&(n=lS(e))!==null&&n!==void 0?n:o},Vi=(e,n)=>{const o=nS(e,n);return o.width=1,o.right=o.left+1,o},Zp=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&Hb(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=Wp(f.ownerDocument);if(b<f.data.length){if(qu(f.data[b]))return;if(qu(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!Ph(y))){o(Vi(Ku(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),Ph(y)||o(Vi(Ku(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),Ph(y)||o(Vi(Ku(y),!0)))},c=e.container(),u=e.offset();if(zp(c))return r(c,u),n;if(uy(c))if(e.isAtEnd()){const f=zb(c,u);zp(f)&&r(f,f.data.length),Eg(f)&&!Up(f)&&o(Vi(Ku(f),!1))}else{const f=zb(c,u);if(zp(f)&&r(f,0),Eg(f)&&e.isAtEnd())return o(Vi(Ku(f),!1)),n;const b=zb(e.container(),e.offset()-1);Eg(b)&&!Up(b)&&(dy(b)||dy(f)||!Eg(f))&&o(Vi(Ku(b),!1)),Eg(f)&&o(Vi(Ku(f),!0))}return n},Se=(e,n,o)=>{const r=()=>(zp(e),n===0),c=()=>zp(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const N=Wp(e.ownerDocument);return N.setStart(e,n),N.setEnd(e,n),N},f=()=>(o||(o=Zp(Se(e,n))),o),b=()=>f().length>0,y=N=>N&&e===N.container()&&n===N.offset(),k=N=>zb(e,N?n-1:n);return{container:rt(e),offset:rt(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:k}};Se.fromRangeStart=e=>Se(e.startContainer,e.startOffset),Se.fromRangeEnd=e=>Se(e.endContainer,e.endOffset),Se.after=e=>Se(e.parentNode,my(e)+1),Se.before=e=>Se(e.parentNode,my(e)),Se.isAbove=(e,n)=>Zr(In(n.getClientRects()),Ao(e.getClientRects()),Ul).getOr(!1),Se.isBelow=(e,n)=>Zr(Ao(n.getClientRects()),In(e.getClientRects()),Tg).getOr(!1),Se.isAtStart=e=>e?e.isAtStart():!1,Se.isAtEnd=e=>e?e.isAtEnd():!1,Se.isTextPosition=e=>e?ft(e.container()):!1,Se.isElementPosition=e=>!Se.isTextPosition(e);const gr=(e,n)=>{ft(n)&&n.data.length===0&&e.remove(n)},_g=(e,n,o)=>{n.insertNode(o),gr(e,o.previousSibling),gr(e,o.nextSibling)},gy=(e,n,o)=>{const r=H.from(o.firstChild),c=H.from(o.lastChild);n.insertNode(o),r.each(u=>gr(e,u.previousSibling)),c.each(u=>gr(e,u.nextSibling))},qs=(e,n,o)=>{kd(o)?gy(e,n,o):_g(e,n,o)},vu=ft,jp=vl,Za=tr.nodeIndex,Am=e=>{const n=e.parentNode;return jp(n)?Am(n):n},hy=e=>e?Ie(e.childNodes,(n,o)=>(jp(o)&&o.nodeName!=="BR"?n=n.concat(hy(o)):n.push(o),n),[]):[],xE=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&vu(o);)n+=o.data.length;return n},py=e=>n=>e===n,Gp=e=>{let n,o;n=hy(Am(e)),o=Me(n,py(e),e),n=n.slice(0,o+1);const r=Ie(n,(c,u,f)=>(vu(u)&&vu(n[f-1])&&c++,c),0);return n=de(n,al([e.nodeName])),o=Me(n,py(e),e),o-r},Og=e=>(vu(e)?"text()":e.nodeName.toLowerCase())+"["+Gp(e)+"]",by=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},Ub=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(vu(r))u=xE(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(Og(r));let f=by(e,r);return f=de(f,po(vl)),o=o.concat(pr(f,b=>Og(b))),o.reverse().join("/")+","+u},xl=(e,n,o)=>{let r=hy(e);return r=de(r,(c,u)=>!vu(c)||!vu(r[u-1])),r=de(r,al([n])),r[o]},qp=(e,n)=>{let o=e,r=0;for(;vu(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!vu(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return vu(e)&&n>e.data.length&&(n=e.data.length),Se(e,n)},vy=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Ie(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),xl(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!vu(u)&&u.parentNode){let f;return c==="after"?f=Za(u)+1:f=Za(u),Se(u.parentNode,f)}return qp(u,parseInt(c,10))},Kp=cs,Ih=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&ft(c);c=c.previousSibling)r+=e(c.data).length;return r},ni=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(ft(u))b.push(o?Ih(n,u,f):f);else{let k=0;const N=u.childNodes;f>=N.length&&N.length&&(k=1,f=Math.max(0,N.length-1)),b.push(e.nodeIndex(N[f],o)+k)}for(let k=u;k&&k!==y;k=k.parentNode)b.push(e.nodeIndex(k,o));return b},TE=(e,n,o,r)=>{const c=n.dom,u=ni(c,e,o,r,!0),f=n.isForward(),b=kh(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=ni(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},rc=(e,n,o)=>{let r=0;return et.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},uS=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Ht(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},Dm=e=>(uS(e,!0),uS(e,!1),e),Yp=(e,n)=>{if(Ht(e)&&(e=Om(e,n),Kp(e)))return e;if(Po(e)){ft(e)&&Xn(e)&&(e=e.parentNode);let o=e.previousSibling;if(Kp(o)||(o=e.nextSibling,Kp(o)))return o}},dS=e=>Yp(e.startContainer,e.startOffset)||Yp(e.endContainer,e.endOffset),yy=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Kp(r)){const f=r.nodeName;return{name:f,index:rc(o.dom,f,r)}}const u=dS(c);if(u){const f=u.tagName;return{name:f,index:rc(o.dom,f,u)}}return TE(e,o,n,c)},wy=e=>{const n=e.getRng();return{start:Ub(e.dom.getRoot(),Se.fromRangeStart(n)),end:Ub(e.dom.getRoot(),Se.fromRangeEnd(n)),forward:e.isForward()}},Cy=e=>({rng:e.getRng(),forward:e.isForward()}),Sy=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},mS=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:rc(o,b,f)};const k=Dm(r.cloneRange());if(!u){k.collapse(!1);const R=Sy(o,c+"_end",n);qs(o,k,R)}r=Dm(r),r.collapse(!0);const N=Sy(o,c+"_start",n);return qs(o,r,N),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},kE=(e,n,o=!1)=>n===2?yy(ut,o,e):n===3?wy(e):n?Cy(e):mS(e,!1),ac=je(yy,Fo,!0),$a=e=>{const n=u=>u(e),o=rt(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:mt,isError:De,map:u=>Fr.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>H.some(e)};return c},Tl=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:De,isError:mt,map:n,mapError:r=>Fr.error(r(e)),bind:n,exists:De,forall:mt,getOr:Fo,or:Fo,getOrThunk:Bo,orThunk:Bo,getOrDie:es(String(e)),each:Wt,toOptional:H.none};return o},Fr={value:$a,error:Tl,fromOption:(e,n)=>e.fold(()=>Tl(n),$a)},yu={generate:e=>{if(!at(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return Ve(e,(r,c)=>{const u=Ss(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!at(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const k=y.length;if(k!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+k);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[c].apply(null,y)},match:R=>{const L=Ss(R);if(n.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+L.join(","));if(!us(n,te=>qt(L,te)))throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+n.join(", "));return R[f].apply(null,y)},log:R=>{console.log(R,{constructors:n,constructor:f,params:y})}}}}),o}};yu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const xy=e=>{const n=[],o=[];return Ve(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},fS=e=>e.type==="inline-command"||e.type==="inline-format",Wb=e=>e.type==="block-command"||e.type==="block-format",Zb=e=>{const n=r=>Fr.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(at(e.format)){if(!us(e.format,G))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(G(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return Fr.value(c(f))}else return e.cmd!==void 0?G(e.cmd)?Fr.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!Xe(e))return n("Raw pattern is not an object");if(!G(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!G(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?G(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Fr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},jb=e=>mn(e,Wb),Xp=e=>mn(e,fS),Gb=(e,n)=>({inlinePatterns:Xp(e),blockPatterns:jb(e),dynamicPatternsLookup:n}),Ty=e=>{const n=xy(jt(e,Zb));return Ve(n.errors,o=>console.error(o.message,o.pattern)),n.values},jD=e=>n=>{const o=e(n);return Ty(o)},qb=wo().deviceType,ky=qb.isTouch(),Kb=tr.DOM,Ey=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return qo(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[gc(u)]=gc(f),o},{})},gS=e=>Ke(e,RegExp),on=e=>n=>n.options.get(e),_y=e=>G(e)||Xe(e),hS=(e,n="")=>o=>{const r=G(o);if(r)if(o.indexOf("=")!==-1){const c=Ey(o);return{value:Uo(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},pS=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:hS(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:hS(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=G(o)&&Vo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=qt(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>ht(o)?{valid:!0,value:o}:G(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||G(o)||zn(o,G);return r?G(o)?{value:jt(o.split(","),gc),valid:r}:at(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:By(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=G(o)||zn(o,G);return r?{value:at(o)?o:jt(o.split(","),gc),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=ht(o)||G(o);return r?o===!1||qb.isiPhone()||qb.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!ky}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||G(o)||fe(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||G(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean"}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:_y}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:_y}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:_y}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>G(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>zn(o,Xe)||o===!1?{value:Ty(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>fe(o)?{value:jD(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>zn(o,gS)?{value:o,valid:!0}:gS(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Gu.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Kb.getAttrib(e.getElement(),"placeholder")})})},yt=on("iframe_attrs"),EE=on("doctype"),cc=on("document_base_url"),_E=on("body_id"),bS=on("body_class"),vS=on("content_security_policy"),zi=on("br_in_pre"),Ui=on("forced_root_block"),Jp=on("forced_root_block_attrs"),wu=on("newline_behavior"),Oy=on("br_newline_selector"),Qp=on("no_newline_selector"),$d=on("keep_styles"),Yu=on("end_container_on_empty_block"),Yb=on("automatic_uploads"),Wi=on("images_reuse_filename"),OE=on("images_replace_blob_uris"),Xb=on("icons"),Jb=on("icons_url"),wf=on("images_upload_url"),yS=on("images_upload_base_path"),Ay=on("images_upload_credentials"),AE=on("images_upload_handler"),wS=on("content_css_cors"),Fh=on("referrer_policy"),lc=on("language"),DE=on("language_url"),Ag=on("indent_use_margin"),CS=on("indentation"),Qb=on("content_css"),RE=on("content_style"),Dy=on("font_css"),ME=on("directionality"),e1=on("inline_boundaries_selector"),SS=on("object_resizing"),xS=on("resize_img_proportional"),Ry=on("placeholder"),My=on("event_root"),TS=on("service_message"),Pd=on("theme"),ev=on("theme_url"),Zi=on("model"),Hs=on("model_url"),Lh=on("inline_boundaries"),ll=on("formats"),Ny=on("preview_styles"),kS=on("format_empty_lines"),ES=on("format_noneditable_selector"),t1=on("custom_ui_selector"),By=on("inline"),_S=on("hidden_input"),OS=on("submit_patch"),NE=on("add_form_submit_trigger"),BE=on("add_unload_trigger"),$E=on("custom_undo_redo_levels"),PE=on("disable_nodechange"),Hh=on("readonly"),$y=on("content_css_cors"),Py=on("plugins"),Dg=on("external_plugins"),IE=on("block_unsupported_drop"),FE=on("visual"),LE=on("visual_table_class"),Iy=on("visual_anchor_class"),AS=on("iframe_aria_text"),Rg=on("setup"),DS=on("init_instance_callback"),HE=on("urlconverter_callback"),VE=on("auto_focus"),zE=on("browser_spellcheck"),Vh=on("protect"),tv=on("paste_block_drop"),Mg=on("paste_data_images"),nv=on("paste_preprocess"),RS=on("paste_postprocess"),Id=on("paste_webkit_styles"),ov=on("paste_remove_styles_if_webkit"),MS=on("paste_merge_formats"),Xu=on("smart_paste"),Cf=on("paste_as_text"),Fy=on("paste_tab_spaces"),NS=on("allow_html_data_urls"),UE=on("text_patterns"),WE=on("text_patterns_lookup"),Ly=on("noneditable_class"),ZE=on("editable_class"),jE=on("noneditable_regexp"),BS=on("preserve_cdata"),$S=on("highlight_on_focus"),sv=on("xss_sanitization"),GE=e=>e.options.isSet("text_patterns_lookup"),qE=e=>et.explode(e.options.get("font_size_style_values")),KE=e=>et.explode(e.options.get("font_size_classes")),PS=e=>e.options.get("encoding")==="xml",Hy=e=>et.explode(e.options.get("images_file_types")),IS=on("table_tab_navigation"),YE=Ht,FS=ft,n1=e=>{const n=e.parentNode;n&&n.removeChild(e)},Vy=e=>{const n=ut(e);return{count:e.length-n.length,text:n}},zy=e=>{let n;for(;(n=e.data.lastIndexOf(ae))!==-1;)e.deleteData(n,1)},zh=(e,n)=>(Ng(e),n),rv=(e,n)=>{const o=Vy(e.data.substr(0,n.offset())),r=Vy(e.data.substr(n.offset()));return(o.text+r.text).length>0?(zy(e),Se(e,n.offset()-o.count)):n},Uy=(e,n)=>{const o=n.container(),r=Zn(Rs(o.childNodes),e).map(c=>c<n.offset()?Se(o,n.offset()-1):n).getOr(n);return Ng(e),r},LS=(e,n)=>FS(e)&&n.container()===e?rv(e,n):zh(e,n),HS=(e,n)=>n.container()===e.parentNode?Uy(e,n):zh(e,n),VS=(e,n)=>Se.isTextPosition(n)?LS(e,n):HS(e,n),Ng=e=>{YE(e)&&Po(e)&&(er(e)?e.removeAttribute("data-mce-caret"):n1(e)),FS(e)&&(zy(e),e.data.length===0&&n1(e))},zS=cs,o1=Xr,XE=xc,Wy="*[contentEditable=false],video,audio,embed,object",US=(e,n,o)=>{const r=nS(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},JE=e=>{var n,o;const r=Cc(re.fromDom(e),Wy);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(_d(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,bm(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},QE=(e,n,o,r)=>{const c=Wa();let u,f;const b=Ui(e),y=e.dom,k=(j,ee)=>{let ve;if(N(),XE(ee))return null;if(o(ee)){const he=fu(b,ee,j),we=US(n,ee,j);y.setStyle(he,"top",we.top),f=he;const _e=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(_e,{...we}),y.add(n,_e),c.set({caret:_e,element:ee,before:j}),j&&y.addClass(_e,"mce-visual-caret-before"),R(),ve=ee.ownerDocument.createRange(),ve.setStart(he,0),ve.setEnd(he,0)}else return f=Fl(ee,j),ve=ee.ownerDocument.createRange(),s1(f.nextSibling)?(ve.setStart(f,0),ve.setEnd(f,0)):(ve.setStart(f,1),ve.setEnd(f,1)),ve;return ve},N=()=>{JE(n),f&&(Ng(f),f=null),c.on(j=>{y.remove(j.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=setInterval(()=>{c.on(j=>{r()?y.toggleClass(j.caret,"mce-visual-caret-hidden"):y.addClass(j.caret,"mce-visual-caret-hidden")})},500)};return{show:k,hide:N,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(j=>{const ee=US(n,j.element,j.before);y.setStyles(j.caret,{...ee})})},destroy:()=>clearInterval(u)}},av=()=>Lo.browser.isFirefox(),s1=e=>zS(e)||o1(e),Rm=e=>(s1(e)||Nr(e)&&av())&&dm(re.fromDom(e)).exists(go),e_=ys,Zy=cs,WS=Xr,Yc=cg("display","block table table-cell table-caption list-item"),ZS=Po,Bg=Xn,t_=Ht,r1=ft,jS=Cl,Uh=e=>e>0,$g=e=>e<0,a1=(e,n)=>{let o;for(;o=e(n);)if(!Bg(o))return o;return null},Sf=(e,n,o,r,c)=>{const u=new xa(e,r),f=Zy(e)||Bg(e);let b;if($g(n)){if(f&&(b=a1(u.prev.bind(u),!0),o(b)))return b;for(;b=a1(u.prev.bind(u),c);)if(o(b))return b}if(Uh(n)){if(f&&(b=a1(u.next.bind(u),!0),o(b)))return b;for(;b=a1(u.next.bind(u),c);)if(o(b))return b}return null},n_=(e,n)=>{const o=c=>e_(c.dom),r=c=>c.dom===n;return js(re.fromDom(e),o,r).map(c=>c.dom).getOr(n)},Pa=(e,n)=>{for(;e&&e!==n;){if(Yc(e))return e;e=e.parentNode}return null},xi=(e,n,o)=>Pa(e.container(),o)===Pa(n.container(),o),cv=(e,n)=>{if(!n)return H.none();const o=n.container(),r=n.offset();return t_(o)?H.from(o.childNodes[r+e]):H.none()},GS=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},qS=(e,n,o)=>Pa(n,e)===Pa(o,e),jy=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&ZS(u)&&(u=u[r]),Zy(u)||WS(u)){if(qS(n,u,c))return u;break}if(jS(u))break;c=c.parentNode}return null},Pg=je(GS,!0),c1=je(GS,!1),Ig=(e,n,o)=>{let r;const c=je(jy,!0,n),u=je(jy,!1,n),f=o.startContainer,b=o.startOffset;if(Xn(f)){const y=r1(f)?f.parentNode:f,k=y.getAttribute("data-mce-caret");if(k==="before"&&(r=y.nextSibling,Rm(r)))return Pg(r);if(k==="after"&&(r=y.previousSibling,Rm(r)))return c1(r)}if(!o.collapsed)return o;if(ft(f)){if(ZS(f)){if(e===1){if(r=u(f),r)return Pg(r);if(r=c(f),r)return c1(r)}if(e===-1){if(r=c(f),r)return c1(r);if(r=u(f),r)return Pg(r)}return o}if(_d(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?Pg(r):o;if(bm(f)&&b<=1)return e===-1&&(r=c(f),r)?c1(r):o;if(b===f.data.length)return r=u(f),r?Pg(r):o;if(b===0)return r=c(f),r?c1(r):o}return o},GD=(e,n)=>cv(e?0:-1,n).filter(Zy),Wh=(e,n,o)=>{const r=Ig(e,n,o);return e===-1?Se.fromRangeStart(r):Se.fromRangeEnd(r)},l1=e=>H.from(e.getNode()).map(re.fromDom),Fg=e=>H.from(e.getNode(!0)).map(re.fromDom),Gy=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Zh=(e,n)=>{const o=xi(e,n);return!o&&xr(e.getNode())?!0:o};var ic;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(ic||(ic={}));const qy=cs,Ju=ft,Fd=Ht,xf=xr,Lg=Cl,lv=I0,iv=Ll,o_=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},uv=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,i1=(e,n)=>{if(Uh(e)){if(Lg(n.previousSibling)&&!Ju(n.previousSibling))return Se.before(n);if(Ju(n))return Se(n,0)}if($g(e)){if(Lg(n.nextSibling)&&!Ju(n.nextSibling))return Se.after(n);if(Ju(n))return Se(n,n.data.length)}return $g(e)?xf(n)?Se.before(n):Se.after(n):Se.before(n)},KS=(e,n)=>{const o=n.nextSibling;return o&&Lg(o)?Ju(o)?Se(o,0):Se.before(o):dv(ic.Forwards,Se.after(n),e)},dv=(e,n,o)=>{let r,c,u,f;if(!Fd(o)||!n)return null;if(n.isEqual(Se.after(o))&&o.lastChild){if(f=Se.after(o.lastChild),$g(e)&&Lg(o.lastChild)&&Fd(o.lastChild))return xf(o.lastChild)?Se.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(Ju(b)){if($g(e)&&y>0)return Se(b,--y);if(Uh(e)&&y<b.length)return Se(b,++y);r=b}else{if($g(e)&&y>0&&(c=uv(b,y-1),Lg(c)))return!lv(c)&&(u=Sf(c,e,iv,c),u)?Ju(u)?Se(u,u.data.length):Se.after(u):Ju(c)?Se(c,c.data.length):Se.before(c);if(Uh(e)&&y<b.childNodes.length&&(c=uv(b,y),Lg(c)))return xf(c)?KS(o,c):!lv(c)&&(u=Sf(c,e,iv,c),u)?Ju(u)?Se(u,0):Se.before(u):Ju(c)?Se(c,0):Se.after(c);r=c||f.getNode()}if(r&&(Uh(e)&&f.isAtEnd()||$g(e)&&f.isAtStart())&&(r=Sf(r,e,mt,o,!0),iv(r,o)))return i1(e,r);c=r&&Sf(r,e,iv,o);const k=Kt(mn(o_(b,o),qy));return k&&(!c||!k.contains(c))?(Uh(e)?f=Se.after(k):f=Se.before(k),f):c?i1(e,c):null},Cu=e=>({next:n=>dv(ic.Forwards,n,e),prev:n=>dv(ic.Backwards,n,e)}),s_=(e,n,o)=>{const r=e?Se.before(o):Se.after(o);return ji(e,n,r)},r_=e=>xr(e)?Se.before(e):Se.after(e),Ky=e=>Se.isTextPosition(e)?e.offset()===0:Cl(e.getNode()),Yy=e=>{if(Se.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Cl(e.getNode(!0))},u1=(e,n)=>!Se.isTextPosition(e)&&!Se.isTextPosition(n)&&e.getNode()===n.getNode(!0),YS=e=>!Se.isTextPosition(e)&&xr(e.getNode()),XS=(e,n,o)=>e?!u1(n,o)&&!YS(n)&&Yy(n)&&Ky(o):!u1(o,n)&&Ky(n)&&Yy(o),ji=(e,n,o)=>{const r=Cu(n);return H.from(e?r.next(o):r.prev(o))},mv=(e,n,o)=>ji(e,n,o).bind(r=>xi(o,r,n)&&XS(e,o,r)?ji(e,n,r):H.some(r)),JS=(e,n,o,r)=>mv(e,n,o).bind(c=>r(c)?JS(e,n,c,r):H.some(c)),Ld=(e,n)=>{const o=e?n.firstChild:n.lastChild;return ft(o)?H.some(Se(o,e?0:o.data.length)):o?Cl(o)?H.some(e?Se.before(o):r_(o)):s_(e,n,o):H.none()},Ti=je(ji,!0),Su=je(ji,!1),si=je(Ld,!0),Tf=je(Ld,!1),kf="_mce_caret",Lr=e=>Ht(e)&&e.id===kf,Mm=(e,n)=>{let o=n;for(;o&&o!==e;){if(Lr(o))return o;o=o.parentNode}return null},d1=e=>G(e.start),Hg=e=>kn(e,"rng"),fv=e=>kn(e,"id"),gv=e=>kn(e,"name"),Xy=e=>et.isArray(e.start),hv=e=>!gv(e)&&ht(e.forward)?e.forward:!0,QS=(e,n)=>(Ht(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),a_=(e,n)=>{const o=H.from(vy(e.getRoot(),n.start)),r=H.from(vy(e.getRoot(),n.end));return Zr(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:hv(n)}})},Hd=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(ae);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},m1=e=>!e.hasChildNodes(),Jy=(e,n)=>Tf(e).fold(De,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Vd=(e,n,o)=>m1(n)&&Mm(e,n)?(Hd(n,o),!0):!1,Qy=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const k=f.childNodes;if(Vd(u,f,r))return!0;if(c[y]>k.length-1)return Vd(u,f,r)?!0:Jy(f,r);f=k[c[y]]}ft(f)&&(b=Math.min(c[0],f.data.length)),Ht(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},f1=e=>ft(e)&&e.data.length>0,Ef=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):f1(r.nextSibling)?(f=r.nextSibling,b=0):f1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):f1(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,k=r.nextSibling;et.each(et.grep(r.childNodes),R=>{ft(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let N;for(;N=e.get(o.id+"_"+n);)e.remove(N,!0);if(ft(k)&&ft(y)&&!Lo.browser.isOpera()){const R=y.data.length;y.appendData(k.data),e.remove(k),f=y,b=R}}return H.some(Se(f,b))}else return H.none()},ew=(e,n)=>{const o=e.createRng();return Qy(e,!0,n,o)&&Qy(e,!1,n,o)?H.some({range:o,forward:hv(n)}):H.none()},ex=(e,n)=>{const o=Ef(e,"start",n),r=Ef(e,"end",n);return Zr(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(QS(e,c.container()),c.offset()),f.setEnd(QS(e,u.container()),u.offset()),{range:f,forward:hv(n)}})},tw=(e,n)=>H.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),_f=(e,n)=>{const o=e.dom;if(n){if(Xy(n))return ew(o,n);if(d1(n))return a_(o,n);if(fv(n))return ex(o,n);if(gv(n))return tw(o,n);if(Hg(n))return H.some({range:n.rng,forward:hv(n)})}return H.none()},c_=(e,n,o)=>kE(e,n,o),zd=(e,n)=>{_f(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},ki=e=>Ht(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",pv=(e=>n=>e===n)(Os),g1=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,nw=e=>!g1(e)&&!pv(e)&&!ig(e),l_=e=>({value:nx(e)}),nx=e=>Ys(e,"#").toUpperCase(),ow=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},bv=e=>{const n=ow(e.red)+ow(e.green)+ow(e.blue);return l_(n)},i_=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,u_=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,vv=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),ox=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return vv(c,u,f,b)},qD=e=>{if(e==="transparent")return H.some(vv(0,0,0,0));const n=i_.exec(e);if(n!==null)return H.some(ox(n[1],n[2],n[3],"1"));const o=u_.exec(e);return o!==null?H.some(ox(o[1],o[2],o[3],o[4])):H.none()},jh=e=>qD(e).map(bv).map(n=>"#"+n.value).getOr(e),So=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},Nm=e=>_r(e,n=>{const o=bu(n);return o?[re.fromDom(o)]:[]}),Gh=e=>So(e).length>1,sw=e=>mn(Nm(e),Il),d_=e=>Cc(e,"td[data-mce-selected],th[data-mce-selected]"),h1=(e,n)=>{const o=d_(n);return o.length>0?o:sw(e)},Vg=e=>h1(So(e.selection.getSel()),re.fromDom(e.getBody())),zg=(e,n)=>me(e,"table",n),rw=e=>{const n=e.startContainer,o=e.startOffset;return ft(n)?o===0?H.some(re.fromDom(n)):H.none():H.from(n.childNodes[o]).map(re.fromDom)},aw=e=>{const n=e.endContainer,o=e.endOffset;return ft(n)?o===n.data.length?H.some(re.fromDom(n)):H.none():H.from(n.childNodes[o-1]).map(re.fromDom)},cw=e=>wd(e).fold(rt([e]),n=>[e].concat(cw(n))),sx=e=>Nl(e).fold(rt([e]),n=>hs(n)==="br"?jc(n).map(o=>[e].concat(sx(o))).getOr([]):[e].concat(sx(n))),p1=(e,n)=>Zr(rw(n),aw(n),(o,r)=>{const c=gs(cw(e),je(os,o)),u=gs(sx(e),je(os,r));return c.isSome()&&u.isSome()}).getOr(!1),yv=(e,n,o,r)=>{const c=o,u=new xa(o,c),f=Ko(e.schema.getMoveCaretBeforeOnEnterElements(),(y,k)=>!qt(["td","th","table"],k.toLowerCase()));let b=o;do{if(ft(b)&&et.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},lw=e=>{const n=e.selection.getSel();return Pe(n)&&n.rangeCount>0},iw=(e,n)=>{const o=Vg(e);o.length>0?Ve(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},wv=(e,n,o)=>{const r=mS(e,n);o(r),e.moveToBookmark(r)},b1=e=>Go(e==null?void 0:e.nodeType),Bm=e=>Ht(e)&&!ki(e)&&!Lr(e)&&!vl(e),rx=(e,n)=>{if(Bm(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},Ud=e=>e.isContentEditable===!0,Of=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=cs(u);wv(r,!0,()=>{n()}),f&&cs(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&m_(c,r)},m_=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!rx(e,b)&&Ht(u)){const y=u.childNodes,k=e.getRoot();let N;if(f<y.length){const R=y[f];N=new xa(R,(o=e.getParent(R,e.isBlock))!==null&&o!==void 0?o:k)}else{const R=y[y.length-1];N=new xa(R,(r=e.getParent(R,e.isBlock))!==null&&r!==void 0?r:k),N.next(!0)}for(let R=N.current();R;R=N.next()){if(e.getContentEditable(R)==="false")return;if(ft(R)&&!Kh(R)){c.setStart(R,0),n.setRng(c);return}}}},ax=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(Ht(e)||!Kh(e))return e}},uw=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||wm(e,n),qh=(e,n,o)=>e.schema.isValidChild(n,o),Kh=(e,n=!1)=>{if(Pe(e)&&ft(e)){const o=n?e.data.replace(/ /g," "):e.data;return Hl(o)}else return!1},f_=e=>Pe(e)&&ft(e)&&e.length===0,g_=(e,n)=>{const o="[data-mce-cef-wrappable]",r=ES(e),c=ya(r)?o:`${o},${r}`;return Nc(re.fromDom(n),c)},cx=(e,n)=>{const o=e.dom;return Bm(n)&&o.getContentEditable(n)==="false"&&g_(e,n)&&o.select('[contenteditable="true"]',n).length===0},Af=(e,n)=>fe(e)?e(n):(Pe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),dw=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),mw=(e,n)=>{if(Ye(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=jh(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Cv=(e,n,o)=>{const r=e.getStyle(n,o);return mw(r,o)},Ug=(e,n)=>{let o;return e.getParent(n,r=>Ht(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},Sv=(e,n,o)=>e.getParents(n,o,e.getRoot()),Ft=(e,n,o)=>{const r=e.formatter.get(n);return Pe(r)&&ro(r,o)},uc=(e,n)=>Ft(e,n,r=>{const c=u=>fe(u)||u.length>1&&u.charAt(0)==="%";return ro(["styles","attributes"],u=>Uo(r,u).exists(f=>{const b=at(f)?f:va(f);return ro(b,c)}))}),xv=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Ko(u,(f,b)=>ro(r,y=>y===b));return Ft(e,n,u=>{const f=c(u);return Ft(e,o,b=>{const y=c(b);return Aa(f,y)})})},cr=e=>zr(e,"block"),xu=e=>cr(e)&&e.wrapper===!0,lx=e=>cr(e)&&e.wrapper!==!0,Wl=e=>zr(e,"selector"),Ia=e=>zr(e,"inline"),Tv=e=>Wl(e)&&Ia(e)&&Dr(Uo(e,"mixed"),!0),kv=e=>Wl(e)&&e.expand!==!1&&!Ia(e),$m=ki,ix=Sv,fw=Kh,ux=uw,gw=e=>xr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,hw=(e,n)=>{let o=n;for(;o;){if(Ht(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},pw=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},v1=(e,n,o)=>pw(e,n,o,r=>pv(r)||g1(r)),Ev=(e,n,o)=>pw(e,n,o,nw),y1=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(N,R,L)=>{const Q=fr(e),te=c?Q.backwards:Q.forwards;return H.from(te(N,R,(j,ee)=>$m(j.parentNode)?-1:(f=j,L(c,j,ee)),b))};return y(o,r,v1).bind(N=>u?y(N.container,N.offset+(c?-1:0),Ev):H.some(N)).orThunk(()=>f?H.some({container:f,offset:c?0:f.length}):H.none())},w1=(e,n,o,r,c)=>{const u=r[c];ft(r)&&ya(r.data)&&u&&(r=u);const f=ix(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const k=n[y];if(!(Pe(k.collapsed)&&k.collapsed!==o.collapsed)&&Wl(k)&&e.is(f[b],k.selector))return f[b]}return r},_v=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(cr(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(ft(o)?o.parentNode:o,k=>k!==f&&ux(e.schema,k),y)}if(u&&cr(b)&&b.wrapper&&(u=ix(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!dw(u,"br")););return u||o},dx=(e,n,o,r)=>{const c=o.parentNode;return Pe(o[r])?!1:c===n||Ye(c)||e.isBlock(c)?!0:dx(e,n,c,r)},Pm=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(ft(o)&&!fw(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const k=ft(y)&&!dx(e,b,y,f);if(!$m(y)&&!gw(y)&&!fw(y,k))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Wd=e=>$m(e.parentNode)||$m(e),Wg=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return Ht(c)&&c.hasChildNodes()&&(c=Om(c,u),ft(c)&&(u=0)),Ht(f)&&f.hasChildNodes()&&(f=Om(f,n.collapsed?b:b-1),ft(f)&&(b=f.data.length)),c=hw(e,c),f=hw(e,f),Wd(c)&&(c=$m(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,ft(c)&&(u=n.collapsed?c.length:0)),Wd(f)&&(f=$m(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,ft(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(y1(e,e.getRoot(),c,u,!0,r).each(({container:R,offset:L})=>{c=R,u=L}),y1(e,e.getRoot(),f,b,!1,r).each(({container:R,offset:L})=>{f=R,b=L})),(Ia(y)||y.block_expand)&&((!Ia(y)||!ft(c)||u===0)&&(c=Pm(e,o,c,u,!0)),(!Ia(y)||!ft(f)||b===f.data.length)&&(f=Pm(e,o,f,b,!1))),kv(y)&&(c=w1(e,o,n,c,"previousSibling"),f=w1(e,o,n,f,"nextSibling")),(cr(y)||Wl(y))&&(c=_v(e,o,c,"previousSibling"),f=_v(e,o,f,"nextSibling"),cr(y)&&(e.isBlock(c)||(c=Pm(e,o,c,u,!0)),e.isBlock(f)||(f=Pm(e,o,f,b,!1)))),Ht(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),Ht(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},Yh=(e,n,o)=>{var r;const c=n.startOffset,u=Om(n.startContainer,c),f=n.endOffset,b=Om(n.endContainer,f-1),y=ee=>{const ve=ee[0];ft(ve)&&ve===u&&c>=ve.data.length&&ee.splice(0,1);const he=ee[ee.length-1];return f===0&&ee.length>0&&he===b&&ft(he)&&ee.splice(ee.length-1,1),ee},k=(ee,ve,he)=>{const we=[];for(;ee&&ee!==he;ee=ee[ve])we.push(ee);return we},N=(ee,ve)=>e.getParent(ee,he=>he.parentNode===ve,ve),R=(ee,ve,he)=>{const we=he?"nextSibling":"previousSibling";for(let _e=ee,qe=_e.parentNode;_e&&_e!==ve;_e=qe){qe=_e.parentNode;const At=k(_e===ee?_e:_e[we],we);At.length&&(he||At.reverse(),o(y(At)))}};if(u===b)return o(y([u]));const L=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return R(u,L,!0);if(e.isChildOf(b,u))return R(b,L);const Q=N(u,L)||u,te=N(b,L)||b;R(u,Q,!0);const j=k(Q===u?Q:Q.nextSibling,"nextSibling",te===b?te.nextSibling:te);j.length&&o(y(j)),R(b,te)},bw=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],h_=e=>yc(e)&&Ir(e)===ae,mx=(e,n,o,r)=>hl(n).fold(()=>"skipping",c=>r==="br"||h_(n)?"valid":Y2(n)?"existing":Lr(n.dom)?"caret":ro(bw,u=>Nc(n,u))?"valid-block":!qh(e,o,r)||!qh(e,hs(c),o)?"invalid-child":"valid"),Ov=(e,n)=>{const o=Wg(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},fx=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;$u(e,Cg()),Pr(e,`${_m()}`,f),Pr(e,`${Mh()}`,r);const{attributes:y={},classes:k=[]}=c(f,b);if(oc(e,y),eS(e,k),u){k.length>0&&Pr(e,`${pu()}`,k.join(","));const N=Ss(y);N.length>0&&Pr(e,`${Nh()}`,N.join(","))}},Av=e=>{gd(e,Cg()),Sr(e,`${_m()}`),Sr(e,`${Mh()}`),Sr(e,`${Si()}`);const n=ol(e,`${Nh()}`).map(r=>r.split(",")).getOr([]),o=ol(e,`${pu()}`).map(r=>r.split(",")).getOr([]);Ve(n,r=>Sr(e,r)),vE(e,o),Sr(e,`${pu()}`),Sr(e,`${Nh()}`)},ja=(e,n,o,r,c)=>{const u=re.fromTag("span",e);return fx(u,n,o,r,c,!1),u},Tu=(e,n,o,r,c,u)=>{const f=[],b=ja(e.getDoc(),o,u,r,c),y=Wa(),k=()=>{y.clear()},N=()=>y.get().getOrThunk(()=>{const te=Sg(b);return f.push(te),y.set(te),te}),R=te=>{Ve(te,L)},L=te=>{switch(mx(e,te,"span",hs(te))){case"invalid-child":{k();const ee=Ra(te);R(ee),k();break}case"valid-block":{k(),fx(te,o,u,r,c,!0);break}case"valid":{const ee=N();bb(te,ee);break}}},Q=te=>{const j=jt(te,re.fromDom);R(j)};return Yh(e.dom,n,te=>{k(),Q(te)}),f},Gi=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Vg(e).length>0,b=ay("mce-annotation");if(u.collapsed&&!f&&Ov(e,u),c.getRng().collapsed&&!f){const y=ja(e.getDoc(),b,r,n,o.decorate);Td(y,Os),c.getRng().insertNode(y.dom),c.select(y.dom)}else wv(c,!1,()=>{iw(e,y=>{Tu(e,y,b,n,o.decorate,r)})})})},C1=e=>{const n=J2();bE(e,n);const o=pE(e,n),r=hi("span"),c=u=>{Ve(u,f=>{r(f)?ua(f):Av(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Gi(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{sy(e,H.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();pt(ry(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=ry(e,u);return oo(f,b=>jt(b,y=>y.dom))}}},ri=e=>({getBookmark:je(c_,e),moveToBookmark:je(zd,e)});ri.isBookmarkNode=ki;const gx=(e,n,o)=>o.collapsed?!1:ro(o.getClientRects(),r=>Vb(r,e,n)),vw=(e,n)=>e.dispatch("PreProcess",n),yw=(e,n)=>e.dispatch("PostProcess",n),ww=e=>{e.dispatch("remove")},p_=e=>{e.dispatch("detach")},Cw=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},b_=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},v_=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},Sw=e=>{e.dispatch("PreInit")},xw=e=>{e.dispatch("PostRender")},Vs=e=>{e.dispatch("Init")},Zd=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Tw=(e,n,o)=>{e.dispatch(n,o)},kw=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},Ew=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},_w=(e,n)=>e.dispatch("BeforeSetContent",n),Ow=(e,n)=>e.dispatch("SetContent",n),Aw=(e,n)=>e.dispatch("BeforeGetContent",n),Dw=(e,n)=>e.dispatch("GetContent",n),y_=(e,n)=>{e.dispatch("AutocompleterStart",n)},hx=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},w_=e=>{e.dispatch("AutocompleterEnd")},Rw=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),C_=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),Df=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),sn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||sn.metaKeyPressed(e),metaKeyPressed:e=>Lo.os.isMacOS()||Lo.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Im="data-mce-selected",S_="table,img,figure.image,hr,video,span.mce-preview-object",ma=Math.abs,ta=Math.round,Rf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Dv=e=>e.type==="longpress"||e.type.indexOf("touch")===0,px=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,k,N,R,L,Q,te,j,ee,ve,he,we,_e,qe,At;const St=Lt=>Pe(Lt)&&(xb(Lt)||o.is(Lt,"figure.image")),$e=Lt=>Xr(Lt)||o.hasClass(Lt,"mce-preview-object"),Be=(Lt,To)=>{if(Dv(Lt)){const ko=Lt.touches[0];return St(Lt.target)&&!gx(ko.clientX,ko.clientY,To)}else return St(Lt.target)&&!gx(Lt.clientX,Lt.clientY,To)},Ut=Lt=>{const To=Lt.target;Be(Lt,n.selection.getRng())&&!Lt.isDefaultPrevented()&&n.selection.select(To)},gn=Lt=>o.hasClass(Lt,"mce-preview-object")&&Pe(Lt.firstElementChild)?[Lt,Lt.firstElementChild]:o.is(Lt,"figure.image")?[Lt.querySelector("img")]:[Lt],An=Lt=>{const To=SS(n);return!To||Lt.getAttribute("data-mce-resize")==="false"||Lt===n.getBody()?!1:o.hasClass(Lt,"mce-preview-object")&&Pe(Lt.firstElementChild)?Nc(re.fromDom(Lt.firstElementChild),To):Nc(re.fromDom(Lt),To)},ao=Lt=>$e(Lt)?o.create("img",{src:Lo.transparentSrc}):Lt.cloneNode(!0),Mo=(Lt,To,ko)=>{if(Pe(ko)){const Oc=gn(Lt);Ve(Oc,hr=>{hr.style[To]||!n.schema.isValid(hr.nodeName.toLowerCase(),To)?o.setStyle(hr,To,ko):o.setAttrib(hr,To,""+ko)})}},ps=(Lt,To,ko)=>{Mo(Lt,"width",To),Mo(Lt,"height",ko)},Us=Lt=>{let To,ko,Oc,hr,Qn;To=Lt.screenX-R,ko=Lt.screenY-L,we=To*k[2]+j,_e=ko*k[3]+ee,we=we<5?5:we,_e=_e<5?5:_e,(St(f)||$e(f))&&xS(n)!==!1?Oc=!sn.modifierPressed(Lt):Oc=sn.modifierPressed(Lt),Oc&&(ma(To)>ma(ko)?(_e=ta(we*ve),we=ta(_e/ve)):(we=ta(_e/ve),_e=ta(we*ve))),ps(b,we,_e),hr=k.startPos.x+To,Qn=k.startPos.y+ko,hr=hr>0?hr:0,Qn=Qn>0?Qn:0,o.setStyles(y,{left:hr,top:Qn,display:"block"}),y.innerHTML=we+" &times; "+_e,k[2]<0&&b.clientWidth<=we&&o.setStyle(b,"left",Q+(j-we)),k[3]<0&&b.clientHeight<=_e&&o.setStyle(b,"top",te+(ee-_e)),To=u.scrollWidth-qe,ko=u.scrollHeight-At,To+ko!==0&&o.setStyles(y,{left:hr-To,top:Qn-ko}),he||(b_(n,f,j,ee,"corner-"+k.name),he=!0)},ra=()=>{const Lt=he;he=!1,Lt&&(Mo(f,"width",we),Mo(f,"height",_e)),o.unbind(r,"mousemove",Us),o.unbind(r,"mouseup",ra),c!==r&&(o.unbind(c,"mousemove",Us),o.unbind(c,"mouseup",ra)),o.remove(b),o.remove(y),o.remove(N),Lc(f),Lt&&(v_(n,f,we,_e,"corner-"+k.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Lc=Lt=>{It();const To=o.getPos(Lt,u),ko=To.x,Oc=To.y,hr=Lt.getBoundingClientRect(),Qn=hr.width||hr.right-hr.left,Qo=hr.height||hr.bottom-hr.top;f!==Lt&&(wt(),f=Lt,we=_e=0);const Ds=n.dispatch("ObjectSelected",{target:Lt});An(Lt)&&!Ds.isDefaultPrevented()?pt(Rf,(Ws,qr)=>{const ga=Fa=>{const rd=gn(f)[0];R=Fa.screenX,L=Fa.screenY,j=rd.clientWidth,ee=rd.clientHeight,ve=ee/j,k=Ws,k.name=qr,k.startPos={x:Qn*Ws[0]+ko,y:Qo*Ws[1]+Oc},qe=u.scrollWidth,At=u.scrollHeight,N=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(N,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=ao(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:ko,top:Oc,margin:0}),ps(b,Qn,Qo),b.removeAttribute(Im),u.appendChild(b),o.bind(r,"mousemove",Us),o.bind(r,"mouseup",ra),c!==r&&(o.bind(c,"mousemove",Us),o.bind(c,"mouseup",ra)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},j+" &times; "+ee)};let kr=o.get("mceResizeHandle"+qr);kr&&o.remove(kr),kr=o.add(u,"div",{id:"mceResizeHandle"+qr,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+qr+"-resize; margin:0; padding:0"}),o.bind(kr,"mousedown",Fa=>{Fa.stopImmediatePropagation(),Fa.preventDefault(),ga(Fa)}),Ws.elm=kr,o.setStyles(kr,{left:Qn*Ws[0]+ko-kr.offsetWidth/2,top:Qo*Ws[1]+Oc-kr.offsetHeight/2})}):wt(!1)},fc=Hi(Lc,0),wt=(Lt=!0)=>{fc.cancel(),It(),f&&Lt&&f.removeAttribute(Im),pt(Rf,(To,ko)=>{const Oc=o.get("mceResizeHandle"+ko);Oc&&(o.unbind(Oc),o.remove(Oc))})},un=(Lt,To)=>o.isChildOf(Lt,To),jo=Lt=>{if(he||n.removed||n.composing)return;const To=Lt.type==="mousedown"?Lt.target:e.getNode(),ko=_n(re.fromDom(To),S_).map(hr=>hr.dom).filter(hr=>o.isEditable(hr.parentElement)).getOrUndefined(),Oc=Pe(ko)?o.getAttrib(ko,Im,"1"):"1";if(Ve(o.select(`img[${Im}],hr[${Im}]`),hr=>{hr.removeAttribute(Im)}),Pe(ko)&&un(ko,u)){En();const hr=e.getStart(!0);if(un(hr,ko)&&un(e.getEnd(!0),ko)){o.setAttrib(ko,Im,Oc),fc.throttle(ko);return}}wt()},It=()=>{pt(Rf,Lt=>{Lt.elm&&(o.unbind(Lt.elm),delete Lt.elm)})},En=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{En(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",jo),n.on("keyup compositionend",Lt=>{f&&f.nodeName==="TABLE"&&jo(Lt)}),n.on("hide blur",wt),n.on("contextmenu longpress",Ut,!0)}),n.on("remove",It),{isResizable:An,showResizeRect:Lc,hideResizeRect:wt,updateResizeRect:jo,destroy:()=>{fc.cancel(),f=b=N=null}}},x_=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},Ro=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},bx=(e,n,o)=>{const r=e.document.createRange();return x_(r,n),Ro(r,o),r},Rv=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},Zg=yu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),vx=(e,n,o)=>n(re.fromDom(o.startContainer),o.startOffset,re.fromDom(o.endContainer),o.endOffset),T_=(e,n)=>n.match({domRange:o=>({ltr:rt(o),rtl:H.none}),relative:(o,r)=>({ltr:bn(()=>bx(e,o,r)),rtl:bn(()=>H.some(bx(e,r,o)))}),exact:(o,r,c,u)=>({ltr:bn(()=>Rv(e,o,r,c,u)),rtl:bn(()=>H.some(Rv(e,c,u,o,r)))})}),Mw=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>Zg.rtl(re.fromDom(c.endContainer),c.endOffset,re.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>vx(e,Zg.ltr,o)):vx(e,Zg.ltr,o)},k_=(e,n)=>{const o=T_(e,n);return Mw(e,o)};Zg.ltr,Zg.rtl;const yx={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Nw=(e,n,o)=>{var r,c;return H.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return H.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),H.some(f)})},Bw=(e,n,o)=>{var r,c;return H.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},wx=(()=>document.caretPositionFromPoint?Nw:document.caretRangeFromPoint?Bw:H.none)(),YD=(e,n,o)=>{const r=re.fromDom(e.document);return wx(r,n,o).map(c=>yx.create(re.fromDom(c.startContainer),c.startOffset,re.fromDom(c.endContainer),c.endOffset))},Mv=yu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),E5=(e,n,o,r)=>e.fold(n,o,r),E_=e=>e.fold(Fo,Fo,Fo),__=Mv.before,XD=Mv.on,Vn=Mv.after,Fm={before:__,on:XD,after:Vn,cata:E5,getStart:E_},$w=yu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),O_=e=>$w.exact(e.start,e.soffset,e.finish,e.foffset),S1=e=>e.match({domRange:n=>re.fromDom(n.startContainer),relative:(n,o)=>Fm.getStart(n),exact:(n,o,r,c)=>n}),JD=$w.domRange,Nv=$w.relative,A_=$w.exact,D_=e=>{const n=S1(e);return Mi(n)},Pw=yx.create,Xh={domRange:JD,relative:Nv,exact:A_,exactFromRange:O_,getWin:D_,range:Pw},Jh=(e,n)=>{const o=hs(e);return o==="input"?Fm.after(e):qt(["br","img"],o)?n===0?Fm.before(e):Fm.after(e):Fm.on(e,n)},Iw=(e,n)=>{const o=e.fold(Fm.before,Jh,Fm.after),r=n.fold(Fm.before,Jh,Fm.after);return Xh.relative(o,r)},Bv=(e,n,o,r)=>{const c=Jh(e,n),u=Jh(o,r);return Xh.relative(c,u)},Fw=e=>e.match({domRange:n=>{const o=re.fromDom(n.startContainer),r=re.fromDom(n.endContainer);return Bv(o,n.startOffset,r,n.endOffset)},relative:Iw,exact:Bv}),Lw=(e,n)=>{const r=(n||document).createDocumentFragment();return Ve(e,c=>{r.appendChild(c.dom)}),re.fromDom(r)},R_=e=>{const n=Xh.getWin(e).dom,o=(c,u,f,b)=>Rv(n,c,u,f,b),r=Fw(e);return k_(n,r).match({ltr:o,rtl:o})},$v=(e,n,o)=>YD(e,n,o),Hw=(e,n,o)=>{const r=Mi(re.fromDom(o));return $v(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Vw=(e,n)=>Pe(e)&&Pe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,Jo=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Cx=(e,n,o)=>Jo(e,n,o)!==null,jd=(e,n,o)=>Cx(e,n,r=>r.nodeName===o),Qu=(e,n)=>Po(e)&&!Cx(e,n,Lr),x1=(e,n,o)=>{const r=n.parentNode;if(r){const c=new xa(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(xr(u))return!0}return!1},ai=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},Pv=(e,n)=>{let o=n;for(;o&&o!==e;){if(cs(o))return!0;o=o.parentNode}return!1},jg=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,k;if(!b)return H.none();const N=e.getParent(b,e.isBlock)||u;if(r&&xr(c)&&n&&e.isEmpty(N))return H.some(Se(b,e.nodeIndex(c)));const R=new xa(c,N);for(;k=R[r?"prev":"next"]();){if(e.getContentEditableParent(k)==="false"||Qu(k,u))return H.none();if(ft(k)&&k.data.length>0)return jd(k,u,"A")?H.none():H.some(Se(k,r?k.data.length:0));if(e.isBlock(k)||f[k.nodeName.toLowerCase()])return H.none();y=k}return Pl(y)?H.none():o&&y?H.some(Se(y,0)):H.none()},T1=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const k=Ht(b)&&y===b.childNodes.length,N=e.schema.getNonEmptyElements();let R=o;if(Po(b))return H.none();if(Ht(b)&&y>b.childNodes.length-1&&(R=!1),lf(b)&&(b=c,y=0),b===c){if(R&&(u=b.childNodes[y>0?y-1:0],u&&(Po(u)||N[u.nodeName]||Nr(u))))return H.none();if(b.hasChildNodes()){if(y=Math.min(!R&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=ft(b)&&k?b.data.length:0,!n&&b===c.lastChild&&Nr(b)||Pv(c,b)||Po(b))return H.none();if(b.hasChildNodes()&&!Nr(b)){u=b;const L=new xa(b,c);do{if(cs(u)||Po(u)){f=!1;break}if(ft(u)&&u.data.length>0){y=R?0:u.data.length,b=u,f=!0;break}if(N[u.nodeName.toLowerCase()]&&!uf(u)){y=e.nodeIndex(u),b=u.parentNode,R||y++,f=!0;break}}while(u=R?L.next():L.prev())}}}return n&&(ft(b)&&y===0&&jg(e,k,n,!0,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),Ht(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&xr(u)&&!ai(u,"A")&&!x1(e,u,!1)&&!x1(e,u,!0)&&jg(e,k,n,!0,u).each(L=>{b=L.container(),y=L.offset(),f=!0}))),R&&!n&&ft(b)&&y===b.data.length&&jg(e,k,n,!1,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),f&&b?H.some(Se(b,y)):H.none()},Lm=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=Se.fromRangeStart(n);return T1(e,o,!0,r).each(u=>{(!o||!Se.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||T1(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Vw(n,r)?H.none():H.some(r)},zw=(e,n)=>e.splitText(n),Iv=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&ft(n)){if(o>0&&o<n.data.length)if(r=zw(n,o),n=r.previousSibling,c>o){c=c-o;const u=zw(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(ft(n)&&o>0&&o<n.data.length&&(n=zw(n,o),o=0),ft(r)&&c>0&&c<r.data.length){const u=zw(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Qh=e=>({walk:(u,f)=>Yh(e,u,f),split:Iv,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=Wg(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>Lm(e,u).fold(De,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Qh.compareRanges=Vw,Qh.getCaretRangeFromPoint=Hw,Qh.getSelectedNode=bu,Qh.getNode=Om;const zo=((e,n)=>{const o=(b,y)=>{if(!Go(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const k=b.dom;ms(k)&&(k.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const k=pi(b,e);return parseFloat(k)||0}return y},c=r,u=(b,y)=>qo(y,(k,N)=>{const R=pi(b,N),L=R===void 0?0:parseInt(R,10);return isNaN(L)?k:k+L},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,k)=>{const N=u(b,k);return y>N?y-N:0}}})("height",e=>{const n=e.dom;return Ni(e)?n.getBoundingClientRect().height:n.offsetHeight}),ku=e=>zo.get(e),Gg=()=>re.fromDom(document),Sx=(e,n)=>e.view(n).fold(rt([]),r=>{const c=e.owner(r),u=Sx(e,c);return[r].concat(u)}),k1=(e,n)=>{const o=n.owner(e);return Sx(n,o)};var Tx=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?H.none():H.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(re.fromDom)},owner:e=>sl(e)});const Uw=e=>{const n=Gg(),o=Dp(n),r=k1(e,Tx),c=Bi(e),u=Ka(r,(f,b)=>{const y=Bi(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return bi(u.left+c.left+o.left,u.top+c.top+o.top)},Ww=e=>hs(e)==="textarea",ep=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),qg=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},kx=(e,n)=>{const o=Ra(e);if(o.length===0||Ww(e))return{element:e,offset:n};if(n<o.length&&!Ww(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return Ww(r)?{element:e,offset:n}:hs(r)==="img"?{element:r,offset:1}:yc(r)?{element:r,offset:Ir(r).length}:{element:r,offset:Ra(r).length}}},i=(e,n)=>{const o=wb(e),r=ku(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},m=(e,n)=>{const o=kx(e,n),r=re.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+ae+"</span>");return as(o.element,r),i(r,()=>Ls(r))},h=e=>i(re.fromDom(e),Wt),v=(e,n,o,r)=>{U(e,(c,u)=>A(e,n,o,r),o)},T=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(ep(e,u))return;const f=Dp(n).top;o(n,f,r,c),qg(e,u)},A=(e,n,o,r)=>{const c=re.fromDom(e.getBody()),u=re.fromDom(e.getDoc());pb(c);const f=m(re.fromDom(o.startContainer),o.startOffset);T(e,u,n,f,r),f.cleanup()},P=(e,n,o,r)=>{const c=re.fromDom(e.getDoc());T(e,c,o,h(n),r)},U=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(re.fromDom(r),re.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},J=(e,n,o,r)=>{const c=e.pos;if(o)$i(c.left,c.top,r);else{const u=c.top-n+e.height;$i(c.left,u,r)}},ce=(e,n,o,r,c)=>{const u=o+n,f=r.pos.top,b=r.bottom,y=b-f>=o;f<n?J(r,o,c!==!1,e):f>u?J(r,o,y?c!==!1:c===!0,e):b>u&&!y&&J(r,o,c===!0,e)},Ce=(e,n,o,r)=>{const c=Mi(e).dom.innerHeight;ce(e,n,c,o,r)},lt=(e,n,o,r)=>{const c=Mi(e).dom.innerHeight;ce(e,n,c,o,r);const u=Uw(o.element),f=vh(window);u.top<f.y?pm(o.element,r!==!1):u.top>f.bottom&&pm(o.element,r===!0)},Bt=(e,n,o)=>v(e,Ce,n,o),_t=(e,n,o)=>P(e,n,Ce,o),Ge=(e,n,o)=>v(e,lt,n,o),Rt=(e,n,o)=>P(e,n,lt,o),Ze=(e,n,o)=>{(e.inline?_t:Rt)(e,n,o)},Jt=(e,n,o)=>{(e.inline?Bt:Ge)(e,n,o)},Fn=e=>e.dom.focus(),no=e=>{const n=Ql(e).dom;return e.dom===n.activeElement},zs=(e=Gg())=>H.from(e.dom.activeElement).map(re.fromDom),Ec=e=>zs(Ql(e)).filter(n=>e.dom.contains(n.dom)),jr=(e,n)=>{const o=yc(n)?Ir(n).length:Ra(n).length+1;return e>o?o:e<0?0:e},ci=e=>Xh.range(e.start,jr(e.soffset,e.start),e.finish,jr(e.foffset,e.finish)),Mf=(e,n)=>!Cn(n.dom)&&(Ml(e,n)||os(e,n)),E1=e=>n=>Mf(e,n.start)&&Mf(e,n.finish),Zw=e=>e.inline||Lo.browser.isFirefox(),Fv=e=>Xh.range(re.fromDom(e.startContainer),e.startOffset,re.fromDom(e.endContainer),e.endOffset),As=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?H.none():H.from(n.getRangeAt(0))).map(Fv)},kl=e=>{const n=Mi(e);return As(n.dom).filter(E1(e))},El=(e,n)=>H.from(n).filter(E1(e)).map(ci),Eu=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),H.some(n)}catch{return H.none()}},li=e=>{const n=Zw(e)?kl(re.fromDom(e.getBody())):H.none();e.bookmark=n.isSome()?n:e.bookmark},Nf=e=>(e.bookmark?e.bookmark:H.none()).bind(o=>El(re.fromDom(e.getBody()),o)).bind(Eu),_l=e=>{Nf(e).each(n=>e.selection.setRng(n))},tp={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},qi=(e,n)=>(Go(n)||(n=0),setTimeout(e,n)),Fc=(e,n)=>(Go(n)||(n=0),setInterval(e,n)),Ki={setEditorTimeout:(e,n,o)=>qi(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=Fc(()=>{e.removed?clearInterval(r):n()},o);return r}},_x=e=>e.type==="nodechange"&&e.selectionChange,Ox=(e,n)=>{const o=()=>{n.throttle()};tr.DOM.bind(document,"mouseup",o),e.on("remove",()=>{tr.DOM.unbind(document,"mouseup",o)})},M_=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},N_=(e,n)=>{M_(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{_x(o)||li(e)})},jw=e=>{const n=Hi(()=>{li(e)},0);e.on("init",()=>{e.inline&&Ox(e,n),N_(e,n)}),e.on("remove",()=>{n.cancel()})};let np;const Kg=tr.DOM,QD=e=>Ht(e)&&tp.isEditorUIElement(e),Ax=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},_1=(e,n)=>{const o=t1(e);return Kg.getParent(n,c=>QD(c)||(o?e.dom.is(c,o):!1))!==null},B_=e=>{try{const n=Ql(re.fromDom(e.getElement()));return zs(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},O5=(e,n)=>{const o=n.editor;jw(o);const r=(c,u)=>{if($S(c)&&c.inline!==!0){const f=re.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;Ax(B_(o))&&r(o,$u),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Ki.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!Ax(B_(o))||c!==o)&&r(o,gd),!_1(o,B_(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),np||(np=c=>{const u=e.activeEditor;u&&fm(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!_1(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},Kg.bind(document,"focusin",np))},$_=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&np&&(Kg.unbind(document,"focusin",np),np=null)},A5=e=>{e.on("AddEditor",je(O5,e)),e.on("RemoveEditor",je($_,e))},e3=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),t3=e=>e.collapsed?H.from(Om(e.startContainer,e.startOffset)).map(re.fromDom):H.none(),n3=(e,n)=>t3(n).bind(o=>wl(o)?H.some(o):Ml(e,o)?H.none():H.some(e)),o3=(e,n)=>{n3(re.fromDom(e.getBody()),n).bind(o=>si(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},P_=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},D5=e=>no(e)||Ec(e).isSome(),R5=e=>Pe(e.iframeElement)&&no(re.fromDom(e.iframeElement)),Dx=e=>{const n=e.getBody();return n&&D5(re.fromDom(n))},s3=e=>{const n=Ql(re.fromDom(e.getElement()));return zs(n).filter(o=>!Ax(o.dom)&&_1(e,o.dom)).isSome()},op=e=>e.inline?Dx(e):R5(e),r3=e=>op(e)||s3(e),a3=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Pe(e.bookmark)&&!op(e)&&Nf(e).each(u=>{e.selection.setRng(u),r=u});const c=e3(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){P_(c),o3(e,r),I_(e);return}e.inline||(Lo.browser.isOpera()||P_(o),e.getWin().focus()),(Lo.browser.isFirefox()||e.inline)&&(P_(o),o3(e,r)),I_(e)},I_=e=>e.editorManager.setActive(e),M5=(e,n)=>{e.removed||(n?I_(e):a3(e))},c3=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return H.from(u).map(re.fromDom).map(b=>!r||!n.collapsed?yd(b,c(b,f)).getOr(b):b).bind(b=>_s(b)?H.some(b):hl(b).filter(_s)).map(b=>b.dom).getOr(e)},l3=(e,n,o=!1)=>c3(e,n,!0,o,(r,c)=>Math.min(Bc(r),c)),i3=(e,n,o=!1)=>c3(e,n,!1,o,(r,c)=>c>0?c-1:c),u3=(e,n)=>{const o=e;for(;e&&ft(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},N5=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),ft(o)&&ft(r)&&(o.length===c?o=u3(o.nextSibling,!0):o=o.parentNode,u===0?r=u3(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=ft(f)?f.parentNode:f;return Ht(b)?b:e},B5=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||l3(u,n,n.collapsed),e.isBlock),b=e.getParent(r||i3(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y;const k=new xa(f,u);for(;(y=k.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},$5=(e,n,o)=>H.from(n).bind(r=>H.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(yv(e,f,r,!0),yv(e,f,r,!1)),f})),F_=(e,n)=>jt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),P5=e=>hs(e)==="img"?1:Pi(e).fold(()=>Ra(e).length,n=>n.length),I5=e=>Pi(e).filter(n=>n.trim().length!==0||n.indexOf(Os)>-1).isSome(),Rx=e=>Ri(e)&&Mc(e,"contenteditable")==="false",d3=["img","br"],L_=e=>I5(e)||qt(d3,hs(e))||Rx(e),F5=e=>ue(e,L_),L5=e=>H5(e,L_),H5=(e,n)=>{const o=r=>{const c=Ra(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return H.some(f);const b=o(f);if(b.isSome())return b}return H.none()};return o(e)},m3="[data-mce-autocompleter]",V5=(e,n)=>{if(H_(re.fromDom(e.getBody())).isNone()){const o=re.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Mr(o,re.fromDom(n.extractContents())),n.insertNode(o.dom),hl(o).each(r=>r.dom.normalize()),L5(o).map(r=>{e.selection.setCursorLocation(r.dom,P5(r))})}},z5=e=>_n(e,m3),H_=e=>Tt(e,m3),U5=(e,n)=>H_(n).each(o=>{const r=e.selection.getBookmark();ua(o),e.selection.moveToBookmark(r)}),f3={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Gw=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},W5=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Hl(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},g3=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Ei{constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new Ei(n,f3[n]||1);return o&&pt(o,(c,u)=>{r.attr(u,c)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!G(n))return Pe(n)&&pt(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new Ei(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=Gw(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=Gw(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(g3(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||g3(f))return!1}if(f.type===8||f.type===3&&!W5(f)||f.type===3&&f.parent&&o[f.parent.name]&&Hl((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=Gw(f,u));return!0}walk(n){return Gw(this,null,n)}}const Z5=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),h3=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&Z5(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},j5=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const y=r.exec(n);if(y===null)return b;if(y[1]==="!"){ds(y[2],"--")?b=h3(n,!1,y.index+3):b=h3(n,!0,y.index+1);break}else{c.lastIndex=r.lastIndex;const k=c.exec(n);if(q(k)||k.index!==r.lastIndex)continue;y[1]==="/"?f-=1:kn(u,y[2])||(f+=1),b=r.lastIndex+k[0].length;break}}return b},G5=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},p3=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=G5(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,y=f[0].length;let k;u[f[1]]?k=b:k=j5(r,c,b),c=c.substring(0,b-y)+c.substring(k),o.lastIndex=b-y}return ut(c)},q5=p3,b3=e=>{const n=Cc(e,"[data-mce-bogus]");Ve(n,o=>{Mc(o,"data-mce-bogus")==="all"?Ls(o):Vu(o)?(as(o,re.fromText(Jr)),Ls(o)):ua(o)})},v3=e=>{const n=Cc(e,"input");Ve(n,o=>{Sr(o,"name")})},K5=(e,n)=>{const o=Ui(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},Y5=(e,n)=>{const o=e.getDoc(),r=Ql(re.fromDom(e.getBody())),c=re.fromTag("div",o);Pr(c,"data-mce-bogus","all"),og(c,{position:"fixed",left:"-9999999px",top:"0"}),Td(c,n.innerHTML),b3(c),v3(c);const u=fh(r);Mr(u,c);const f=ut(c.dom.innerText);return Ls(c),f},X5=(e,n,o)=>{let r;return n.format==="raw"?r=et.trim(q5(e.serializer,o.innerHTML)):n.format==="text"?r=Y5(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=K5(e,e.serializer.serialize(o,n)),n.format!=="text"&&!za(re.fromDom(o))&&G(r)?et.trim(r):r},J5=(e,n)=>H.from(e.getBody()).fold(rt(n.format==="tree"?new Ei("body",11):""),o=>X5(e,n,o)),y3=et.makeMap,w3=e=>{const n=[];e=e||{};const o=e.indent,r=y3(e.indent_before||""),c=y3(e.indent_after||""),u=hf.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,k)=>{if(o&&r[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let N=0,R=y.length;N<R;N++){const L=y[N];n.push(" ",L.name,'="',u(L.value,!0),'"')}if(!k||f?n[n.length]=">":n[n.length]=" />",k&&o&&c[b]&&n.length>0){const N=n[n.length-1];N.length>0&&N!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},sp=(e={},n=Ci())=>{const o=w3(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var k;o.text((k=y.value)!==null&&k!==void 0?k:"",y.raw)},8:y=>{var k;o.comment((k=y.value)!==null&&k!==void 0?k:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var k;o.doctype((k=y.value)!==null&&k!==void 0?k:"")},4:y=>{var k;o.cdata((k=y.value)!==null&&k!==void 0?k:"")},11:y=>{let k=y;if(k=k.firstChild)do b(k);while(k=k.next)}};o.reset();const b=y=>{var k;const N=f[y.type];if(N)N(y);else{const R=y.name,L=R in n.getVoidElements();let Q=y.attributes;if(u&&Q&&Q.length>1){const te=[];te.map={};const j=n.getElementRule(y.name);if(j){for(let ee=0,ve=j.attributesOrder.length;ee<ve;ee++){const he=j.attributesOrder[ee];if(he in Q.map){const we=Q.map[he];te.map[he]=we,te.push({name:he,value:we})}}for(let ee=0,ve=Q.length;ee<ve;ee++){const he=Q[ee].name;if(!(he in te.map)){const we=Q.map[he];te.map[he]=we,te.push({name:he,value:we})}}Q=te}}if(o.start(R,Q,L),!L){let te=y.firstChild;if(te){(R==="pre"||R==="textarea")&&te.type===3&&((k=te.value)===null||k===void 0?void 0:k[0])===`
`&&o.text(`
`,!0);do b(te);while(te=te.next)}o.end(R)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},C3=new Set;Ve(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{C3.add(n)});const Sn=["font","text-decoration","text-emphasis"],Mx=(e,n)=>Ss(e.parseStyle(e.getAttrib(n,"style"))),S3=e=>C3.has(e),Q5=(e,n)=>us(Mx(e,n),o=>!S3(o)),V_=e=>mn(e,n=>ro(Sn,o=>ds(n,o))),eF=(e,n,o)=>{const r=Mx(e,n),c=Mx(e,o),u=f=>{var b,y;const k=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",N=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return Vo(k)&&Vo(N)&&k!==N};return ro(r,f=>{const b=y=>ro(y,k=>k===f);if(!b(c)&&b(Sn)){const y=V_(c);return ro(y,u)}else return u(f)})},x3=(e,n,o)=>H.from(o.container()).filter(ft).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),z_=je(x3,!0,g1),U_=je(x3,!1,g1),tF=e=>{const n=e.container();return ft(n)&&(n.data.length===0||We(n.data)&&ri.isBookmarkNode(n.parentNode))},Hm=(e,n)=>o=>cv(e?0:-1,o).filter(n).isSome(),W_=e=>xb(e)&&pi(re.fromDom(e),"display")==="block",nF=e=>cs(e)&&!Sh(e),oF=Hm(!0,W_),Kn=Hm(!1,W_),qw=Hm(!0,Xr),Jn=Hm(!1,Xr),Z_=Hm(!0,Nr),sF=Hm(!1,Nr),O1=Hm(!0,nF),rp=Hm(!1,nF),CW=e=>e.slice(0,-1),SW=(e,n,o)=>Ml(n,e)?CW(eg(e,r=>o(r)||os(r,n))):[],T3=(e,n)=>SW(e,n,De),Yg=(e,n)=>[e].concat(T3(e,n)),Rn=(e,n,o)=>JS(e,n,o,tF),k3=(e,n)=>gs(Yg(re.fromDom(n.container()),e),Tc),E3=(e,n,o)=>Rn(e,n.dom,o).forall(r=>k3(n,o).fold(()=>!xi(r,o,n.dom),c=>!xi(r,o,n.dom)&&Ml(c,re.fromDom(r.container())))),_3=(e,n,o)=>k3(n,o).fold(()=>Rn(e,n.dom,o).forall(r=>!xi(r,o,n.dom)),r=>Rn(e,r.dom,o).isNone()),A1=je(_3,!1),j_=je(_3,!0),rF=je(E3,!1),aF=je(E3,!0),cF=e=>l1(e).exists(Vu),Kw=(e,n,o)=>{const r=mn(Yg(re.fromDom(o.container()),n),Tc),c=In(r).getOr(n);return ji(e,c.dom,o).filter(cF)},G_=(e,n)=>l1(n).exists(Vu)||Kw(!0,e,n).isSome(),O3=(e,n)=>Fg(n).exists(Vu)||Kw(!1,e,n).isSome(),xW=je(Kw,!1),lF=je(Kw,!0),A3=e=>Se.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),D3=(e,n)=>{const o=mn(Yg(re.fromDom(n.container()),e),Tc);return In(o).getOr(e)},R3=(e,n)=>A3(n)?U_(n):U_(n)||Su(D3(e,n).dom,n).exists(U_),q_=(e,n)=>A3(n)?z_(n):z_(n)||Ti(D3(e,n).dom,n).exists(z_),iF=e=>qt(["pre","pre-wrap"],e),lo=e=>l1(e).bind(n=>E(n,_s)).exists(n=>iF(pi(n,"white-space"))),M3=(e,n)=>Su(e.dom,n).isNone(),Nx=(e,n)=>Ti(e.dom,n).isNone(),N3=(e,n)=>M3(e,n)||Nx(e,n)||A1(e,n)||j_(e,n)||O3(e,n)||G_(e,n),B3=e=>Pe(e)&&cs(e)&&Yc(e),K_=(e,n)=>o=>B3(new xa(o,e)[n]()),$3=(e,n)=>{const o=Ti(e.dom,n).getOr(n),r=K_(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},P3=(e,n)=>{const o=Su(e.dom,n).getOr(n),r=K_(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},uF=(e,n)=>lo(n)?!1:N3(e,n)||R3(e,n)||q_(e,n),Lv=(e,n)=>lo(n)?!1:A1(e,n)||rF(e,n)||O3(e,n)||R3(e,n)||P3(e,n),dF=e=>{const n=e.container(),o=e.offset();return ft(n)&&o<n.data.length?Se(n,o+1):e},Yw=(e,n)=>lo(n)?!1:j_(e,n)||aF(e,n)||G_(e,n)||q_(e,n)||$3(e,n),Y_=(e,n)=>Lv(e,n)||Yw(e,dF(n)),I3=(e,n)=>pv(e.charAt(n)),F3=(e,n)=>g1(e.charAt(n)),mF=e=>{const n=e.container();return ft(n)&&xs(n.data,Os)},fF=e=>{const n=e.split("");return jt(n,(o,r)=>pv(o)&&r>0&&r<n.length-1&&nw(n[r-1])&&nw(n[r+1])?" ":o).join("")},L3=(e,n,o)=>{const r=n.data,c=Se(n,0);return!o&&I3(r,0)&&!Y_(e,c)?(n.data=" "+r.slice(1),!0):o&&F3(r,0)&&Lv(e,c)?(n.data=Os+r.slice(1),!0):!1},X_=e=>{const n=e.data,o=fF(n);return o!==n?(e.data=o,!0):!1},Bx=(e,n,o)=>{const r=n.data,c=Se(n,r.length-1);return!o&&I3(r,r.length-1)&&!Y_(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&F3(r,r.length-1)&&Yw(e,c)?(n.data=r.slice(0,-1)+Os,!0):!1},gF=(e,n)=>{const o=n.container();if(!ft(o))return H.none();if(mF(n)){const r=L3(e,o,!1)||X_(o)||Bx(e,o,!1);return fo(r,n)}else if(Y_(e,n)){const r=L3(e,o,!0)||Bx(e,o,!0);return fo(r,n)}else return H.none()},hF=e=>{const n=re.fromDom(e.getBody());e.selection.isCollapsed()&&gF(n,Se.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},H3=(e,n,o)=>{if(o===0)return;const r=re.fromDom(e),c=js(r,Tc).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&Yw(c,Se(e,e.data.length)),b=n===0&&Lv(c,Se(e,0));e.replaceData(n,o,fg(u,4,b,f))},$x=(e,n)=>{const o=e.data.slice(n),r=o.length-el(o).length;H3(e,n,r)},J_=(e,n)=>{const o=e.data.slice(0,n),r=o.length-tl(o).length;H3(e,n-r,r)},Q_=(e,n,o,r=!0)=>{const c=tl(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),Ls(re.fromDom(f)),o&&$x(u,c),u},pF=(e,n)=>{const o=e.container(),r=e.offset();return!Se.isTextPosition(e)&&o===n.parentNode&&r>Se.before(n).offset()},bF=(e,n)=>pF(n,e)?Se(n.container(),n.offset()-1):n,V3=e=>ft(e)?Se(e,0):Se.before(e),vF=e=>ft(e)?Se(e,e.data.length):Se.after(e),z3=e=>Cl(e.previousSibling)?H.some(vF(e.previousSibling)):e.previousSibling?Tf(e.previousSibling):H.none(),ap=e=>Cl(e.nextSibling)?H.some(V3(e.nextSibling)):e.nextSibling?si(e.nextSibling):H.none(),yF=(e,n)=>H.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Su(e,Se.before(o))).orThunk(()=>Ti(e,Se.after(n))),U3=(e,n)=>Ti(e,Se.after(n)).orThunk(()=>Su(e,Se.before(n))),wF=(e,n)=>z3(n).orThunk(()=>ap(n)).orThunk(()=>yF(e,n)),CF=(e,n)=>ap(n).orThunk(()=>z3(n)).orThunk(()=>U3(e,n)),W3=(e,n,o)=>e?CF(n,o):wF(n,o),Z3=(e,n,o)=>W3(e,n,o).map(je(bF,o)),eO=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},j3=e=>n=>n.dom===e,ii=(e,n)=>n&&kn(e.schema.getBlockElements(),hs(n)),SF=e=>{if($s(e)){const n=re.fromHtml('<br data-mce-bogus="1">');return Ns(e),Mr(e,n),H.some(Se.before(n.dom))}else return H.none()},xF=(e,n,o)=>{const r=jc(e).filter(yc),c=vd(e).filter(yc);return Ls(e),dd(r,c,n,(u,f,b)=>{const y=u.dom,k=f.dom,N=y.data.length;return Q_(y,k,o),b.container()===k?Se(y,N):b}).orThunk(()=>(o&&(r.each(u=>J_(u.dom,u.dom.length)),c.each(u=>$x(u.dom,0))),n))},TF=(e,n)=>kn(e.schema.getTextInlineElements(),hs(n)),D1=(e,n,o,r=!0)=>{const c=Z3(n,e.getBody(),o.dom),u=js(o,je(ii,e),j3(e.getBody())),f=xF(o,c,TF(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(SF).fold(()=>{r&&eO(e,n,f)},b=>{r&&eO(e,n,H.some(b))})},kF=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,R1=e=>kF.test(e),M1=(e,n)=>Nc(re.fromDom(n),e1(e))&&!wm(e.schema,n)&&e.dom.isEditable(n),EF=e=>{var n;return tr.DOM.getStyle(e,"direction",!0)==="rtl"||R1((n=e.textContent)!==null&&n!==void 0?n:"")},ka=(e,n,o)=>mn(tr.DOM.getParents(o.container(),"*",n),e),Vm=(e,n,o)=>{const r=ka(e,n,o);return H.from(r[r.length-1])},TW=(e,n,o)=>{const r=Pa(n,e),c=Pa(o,e);return Pe(r)&&r===c},Xc=e=>sc(e)||Fi(e),xo=(e,n)=>{const o=n.container(),r=n.offset();return e?ws(o)?ft(o.nextSibling)?Se(o.nextSibling,0):Se.after(o):sc(n)?Se(o,r+1):n:ws(o)?ft(o.previousSibling)?Se(o.previousSibling,o.previousSibling.data.length):Se.before(o):Fi(n)?Se(o,r-1):n},_u=je(xo,!0),G3=je(xo,!1),tO=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},nO=e=>{e.execCommand("delete")},Xw=e=>tO(e,"Delete"),q3=e=>tO(e,"ForwardDelete"),K3=e=>n=>Dr(hl(n),e,os),_F=e=>Te(e)||mu(e),Px=(e,n)=>Ml(e,n)?E(n,_F,K3(e)):H.none(),Jw=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},Y3=(e,n,o)=>Zr(si(o),Tf(o),(r,c)=>{const u=xo(!0,r),f=xo(!1,c),b=xo(!1,n);return e?Ti(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):Su(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),ed=e=>(Dl(e)?jc(e):Nl(e)).bind(ed).orThunk(()=>H.some(e)),X3=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=ed(o).getOr(o),f=re.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?Jw(e,r):$s(f)&&(F(f),r&&e.selection.setCursorLocation(f.dom,0)),!os(o,f)){const b=Dr(hl(f),o)?[]:dh(f);Ve(b.concat(Ra(o)),y=>{!os(y,f)&&!Ml(y,f)&&$s(y)&&Ls(y)})}},OF=e=>n=>os(e,n),J3=e=>Cc(e,"td,th"),oO=(e,n)=>{const o=k=>zg(re.fromDom(k),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=Zr(r,c,os).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},sO=(e,n)=>({start:e,end:n}),Qw=(e,n,o)=>({rng:e,table:n,cells:o}),eC=yu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Xg=(e,n)=>_n(re.fromDom(e),"td,th",n),Ou=e=>!os(e.start,e.end),Hv=(e,n)=>zg(e.start,n).bind(o=>zg(e.end,n).bind(r=>fo(os(o,r),o))),nr=(e,n)=>!Ou(e)&&Hv(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),tC=(e,n)=>{const o=Xg(e.startContainer,n),r=Xg(e.endContainer,n);return Zr(o,r,sO)},Q3=e=>n=>zg(n,e).bind(o=>Ao(J3(o)).map(r=>sO(n,r))),eR=e=>n=>zg(n,e).bind(o=>In(J3(o)).map(r=>sO(r,n))),nC=e=>n=>Hv(n,e).map(o=>Qw(n,o,J3(o))),Ix=(e,n,o,r)=>{if(o.collapsed||!e.forall(Ou))return H.none();if(n.isSameTable){const c=e.bind(nC(r));return H.some({start:c,end:c})}else{const c=Xg(o.startContainer,r),u=Xg(o.endContainer,r),f=c.bind(Q3(r)).bind(nC(r)),b=u.bind(eR(r)).bind(nC(r));return H.some({start:f,end:b})}},Fx=(e,n)=>ir(e,o=>os(o,n)),oC=e=>Zr(Fx(e.cells,e.rng.start),Fx(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),Lx=(e,n,o)=>e.exists(r=>nr(r,o)&&p1(r.start,n)),Hx=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},tR=(e,n,o,r)=>Ix(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=oC(c).getOr([]);if(u&&c.cells.length===f.length)return H.some(eC.fullTable(c.table));if(f.length>0){if(u)return H.some(eC.partialTable(f,H.none()));{const b=Hx(o,n);return H.some(eC.partialTable(f,H.some({...n,rng:b})))}}else return H.none()}),nR=(e,n,o,r)=>Ix(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(oC).getOr([]),b=u.bind(oC).getOr([]);if(f.length>0&&b.length>0){const y=Hx(o,n);return H.some(eC.multiTable(f,b,y))}else return H.none()}),oR=(e,n)=>{const o=OF(e),r=tC(n,o),c=oO(n,o);return Lx(r,n,o)?r.map(u=>eC.singleCellTable(n,u.start)):c.isMultiTable?nR(r,c,n,o):tR(r,c,n,o)},rO=e=>Ve(e,n=>{Sr(n,"contenteditable"),F(n)}),sR=(e,n)=>H.from(e.dom.getParent(n,e.dom.isBlock)).map(re.fromDom),Vv=(e,n,o)=>{o.each(r=>{n?Ls(r):(F(r),e.selection.setCursorLocation(r.dom,0))})},Vx=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),Ux(e,c,n,!1).each(u=>u())},zx=e=>{const n=Vg(e),o=re.fromDom(e.selection.getNode());xc(o.dom)&&$s(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&ro(n,r=>os(r,o))&&Pr(o,"data-mce-selected","1")},rR=(e,n,o)=>H.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=sR(e,f?u.endContainer:u.startContainer);u.deleteContents(),Vv(e,f,b.filter($s));const y=f?n[0]:n[n.length-1];return Vx(e,y,r,f),$s(y)?H.none():H.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);rO(c),zx(e)}),AF=(e,n,o,r)=>H.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];Vx(e,u,c,!0),Vx(e,f,c,!1);const b=$s(u)?n:n.slice(1),y=$s(f)?o:o.slice(0,-1);rO(b.concat(y)),r.deleteContents(),zx(e)}),Ux=(e,n,o,r=!0)=>H.some(()=>{X3(e,n,o,r)}),aR=(e,n)=>H.some(()=>D1(e,!1,n)),cR=(e,n,o)=>oR(n,o).bind(r=>r.fold(je(Ux,e),je(aR,e),je(rR,e),je(AF,e))),Wx=(e,n)=>sC(e,n),lR=(e,n,o,r)=>Zx(n,r).fold(()=>cR(e,n,o),c=>Wx(e,c)),iR=(e,n,o)=>{const r=re.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?rR(e,o,H.none()):lR(e,r,c,n)},aO=(e,n)=>gs(Yg(n,e),Il),Zx=(e,n)=>gs(Yg(n,e),hi("caption")),uR=(e,n,o,r,c)=>mv(o,e.getBody(),c).bind(u=>aO(n,re.fromDom(u.getNode())).bind(f=>os(f,r)?H.none():H.some(Wt))),sC=(e,n)=>H.some(()=>{F(n),e.selection.setCursorLocation(n.dom,0)}),dR=(e,n,o,r)=>si(e.dom).bind(c=>Tf(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),mR=(e,n)=>sC(e,n),fR=(e,n,o)=>Zx(e,re.fromDom(o.getNode())).fold(()=>H.some(Wt),r=>fo(!os(r,n),Wt)),gR=(e,n,o,r,c)=>mv(o,e.getBody(),c).fold(()=>H.some(Wt),u=>dR(r,o,c,u)?mR(e,r):fR(n,r,u)),hR=(e,n,o,r)=>{const c=Se.fromRangeStart(e.selection.getRng());return aO(o,r).bind(u=>$s(u)?sC(e,u):uR(e,o,n,u,c))},pR=(e,n,o,r)=>{const c=Se.fromRangeStart(e.selection.getRng());return $s(r)?sC(e,r):gR(e,o,n,r,c)},cO=(e,n)=>e?Z_(n):sF(n),bR=(e,n)=>{const o=Se.fromRangeStart(e.selection.getRng());return cO(n,o)||ji(n,e.getBody(),o).exists(r=>cO(n,r))},vR=(e,n,o)=>{const r=re.fromDom(e.getBody());return Zx(r,o).fold(()=>hR(e,n,r,o).orThunk(()=>fo(bR(e,n),Wt)),c=>pR(e,n,r,c))},rC=(e,n)=>{const o=re.fromDom(e.selection.getStart(!0)),r=Vg(e);return e.selection.isCollapsed()&&r.length===0?vR(e,n,o):iR(e,o,r)},Bf=(e,n)=>{let o=n;for(;o&&o!==e;){if(ys(o)||cs(o))return o;o=o.parentNode}return null},yR=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],wR=et.each,zv=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=k=>{const N={};return wR(n.getAttribs(k),R=>{const L=R.nodeName.toLowerCase();L!=="style"&&!c(L)&&(N[L]=n.getAttrib(k,L))}),N},y=(k,N)=>{for(const R in k)if(kn(k,R)){const L=N[R];if(Dn(L)||k[R]!==L)return!1;delete N[R]}for(const R in N)if(kn(N,R))return!1;return!0};return Ht(u)&&Ht(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!ki(u)&&!ki(f)},c=u=>ro(yR,f=>ds(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},lO=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},Uv=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const k=r.attributes[y];k?k.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},iO=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&lO(o,c=>{Uv(e,n,c,r)}),r},uO=(e,n)=>{const o=(r,c)=>{pt(r,u=>{const f=Rs(u.nodes);Ve(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const k=f[y];(!(c?k.attr(u.filter.name)!==void 0:k.name===u.filter.name)||Ye(k.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},N1=(e,n,o,r={})=>{const c=iO(e,n,o);uO(c,r)},aC=(e,n,o)=>{if(e.insert&&n(o)){const r=new Ei("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Ei("#text",3)).value=Os},dO=e=>{var n;return Wv(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Os},Wv=(e,n)=>{const o=e==null?void 0:e.firstChild;return Pe(o)&&o===e.lastChild&&o.name===n},cp=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Zv=(e,n,o,r)=>r.isEmpty(n,o,c=>cp(e,c)),DF=(e,n)=>Pe(e)&&(n(e)||e.name==="br"),CR=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return H.from(n)},jx=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&jx(c,n,o);e.unwrap()}},mO=(e,n,o,r=Wt)=>{const c=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=et.makeMap("tr,td,th,tbody,thead,tfoot,table"),y=new Set,k=N=>N!==o&&!b[N.name];for(let N=0;N<e.length;N++){const R=e[N];let L,Q,te;if(!R.parent||y.has(R))continue;if(c[R.name]&&R.parent.name==="li"){let ee=R.next;for(;ee&&c[ee.name];){ee.name="li",y.add(ee),R.parent.insert(ee,R.parent);ee=ee.next}R.unwrap();continue}const j=[R];for(L=R.parent;L&&!n.isValidChild(L.name,R.name)&&k(L);L=L.parent)j.push(L);if(L&&j.length>1)if(n.isValidChild(L.name,R.name)){j.reverse(),Q=j[0].clone(),r(Q);let ee=Q;for(let ve=0;ve<j.length-1;ve++){n.isValidChild(ee.name,j[ve].name)&&ve>0?(te=j[ve].clone(),r(te),ee.append(te)):te=ee;for(let he=j[ve].firstChild;he&&he!==j[ve+1];){const we=he.next;te.append(he),he=we}ee=te}Zv(n,u,f,Q)?L.insert(R,j[0],!0):(L.insert(Q,j[0],!0),L.insert(R,Q)),L=j[0],(Zv(n,u,f,L)||Wv(L,"br"))&&L.empty().remove()}else jx(R,n);else if(R.parent){if(R.name==="li"){let ee=R.prev;if(ee&&(ee.name==="ul"||ee.name==="ol")){ee.append(R);continue}if(ee=R.next,ee&&(ee.name==="ul"||ee.name==="ol")&&ee.firstChild){ee.insert(R,ee.firstChild,!0);continue}const ve=new Ei("ul",1);r(ve),R.wrap(ve);continue}if(n.isValidChild(R.parent.name,"div")&&n.isValidChild("div",R.name)){const ee=new Ei("div",1);r(ee),R.wrap(ee)}else jx(R,n)}}},kW=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},SR=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&kW(o,"a")),fO=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},zm=e=>{const n=Se.fromRangeStart(e),o=Se.fromRangeEnd(e),r=e.commonAncestorContainer;return ji(!1,r,o).map(c=>!xi(n,o,r)&&xi(n,c,r)?fO(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},cC=e=>e.collapsed?e:zm(e),Gx=e=>Pe(e.firstChild)&&e.firstChild===e.lastChild,gO=e=>e.name==="br"||e.value===Os,RF=(e,n)=>e.getBlockElements()[n.name]&&Gx(n)&&gO(n.firstChild),xR=(e,n)=>{const o=e.getNonEmptyElements();return Pe(n)&&(n.isEmpty(o)||RF(e,n))},MF=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),xR(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},TR=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},hO=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return TR(c)},NF=e=>{var n;return mn((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},kR=e=>e.data===Os||xr(e),BF=e=>Pe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&kR(e.firstChild),lC=e=>!e.firstChild||BF(e),ER=e=>e.length>0&&lC(e[e.length-1])?e.slice(0,-1):e,pO=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},_R=(e,n)=>!!pO(e,n),$F=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},PF=(e,n)=>{const o=Se.before(e),c=Cu(n).next(o);return c?c.toRange():null},OR=(e,n)=>{const o=Se.after(e),c=Cu(n).prev(o);return c?c.toRange():null},IF=(e,n,o,r)=>{const c=$F(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),et.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),OR(n[n.length-1],o)},FF=(e,n,o)=>{const r=e.parentNode;return r&&et.each(n,c=>{r.insertBefore(c,e)}),PF(e,o)},AR=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),OR(n[0],o)),LF=(e,n,o,r)=>{const c=hO(n,e,r),u=pO(n,o.startContainer),f=ER(NF(c.firstChild)),b=1,y=2,k=n.getRoot(),N=R=>{const L=Se.fromRangeStart(o),Q=Cu(n.getRoot()),te=R===b?Q.prev(L):Q.next(L),j=te==null?void 0:te.getNode();return j?pO(n,j)!==u:!0};return u?N(b)?FF(u,f,k):N(y)?AR(u,f,k,n):IF(u,f,k,o):null},bO=["pre"],B1=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,k=qt(bO,u.name);if(y&&k){const N=u.attr("contenteditable")!=="false",R=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,L=H.from(Bf(r,o)).forall(ys);return N&&R&&L}else return!1},vO=xc,HF=(e,n,o)=>{if(Pe(o)){const r=e.getParent(n.endContainer,vO);return o===r&&p1(re.fromDom(o),n)}else return!1},qx=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},DR=(e,n)=>{H.from(e.getParent(n,"td,th")).map(re.fromDom).each(Z)},RR=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=zv(e);et.each(r.select("*[data-mce-fragment]"),f=>{if(Pe(o[f.nodeName.toLowerCase()])&&Q5(r,f)){for(let y=f.parentElement;Pe(y)&&y!==c&&!eF(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},VF=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},MR=e=>{et.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},zF=e=>!!e.getAttribute("data-mce-fragment"),$1=(e,n)=>Pe(n)&&!e.schema.getVoidElements()[n.nodeName],NR=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=Bf(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let k=f.createRng();const N=n.previousSibling;if(ft(N)){k.setStart(N,(r=(o=N.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const Q=n.nextSibling;ft(Q)&&(N.appendData(Q.data),(c=Q.parentNode)===null||c===void 0||c.removeChild(Q))}else k.setStartBefore(n),k.setEndBefore(n);const R=Q=>{let te=Se.fromRangeStart(Q);return te=Cu(e.getBody()).next(te),te==null?void 0:te.toRange()},L=f.getParent(n,f.isBlock);f.remove(n),L&&f.isEmpty(L)&&(Ns(re.fromDom(L)),k.setStart(L,0),k.setEnd(L,0),!vO(L)&&!zF(L)&&(u=R(k))?(k=u,f.remove(L)):f.add(L,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(k)},BR=e=>{const n=e.dom,o=cC(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,vO);HF(n,o,r)?Ux(e,o,re.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&ft(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},$R=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return H.some(n);return H.none()},Kx=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,k=sp({validate:!0},e.schema),N='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,N);let R=u.getRng();const L=R.startContainer,Q=e.getBody();L===Q&&u.isCollapsed()&&f.isBlock(Q.firstChild)&&$1(e,Q.firstChild)&&f.isEmpty(Q.firstChild)&&(R=f.createRng(),R.setStart(Q.firstChild,0),R.setEnd(Q.firstChild,0),u.setRng(R)),u.isCollapsed()||BR(e);const te=u.getNode(),j={context:te.nodeName.toLowerCase(),data:o.data,insert:!0},ee=b.parse(n,j);if(o.paste===!0&&MF(e.schema,ee)&&_R(f,te))return R=LF(k,f,u.getRng(),ee),R&&u.setRng(R),n;o.paste===!0&&B1(f,ee,te,e.getBody())&&((r=ee.firstChild)===null||r===void 0||r.unwrap()),VF(ee);let ve=ee.lastChild;if(ve&&ve.attr("id")==="mce_marker"){const he=ve;for(ve=ve.prev;ve;ve=ve.walk(!0))if(ve.type===3||!f.isBlock(ve.name)){ve.parent&&e.schema.isValidChild(ve.parent.name,"span")&&ve.parent.insert(he,ve,ve.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(te),!j.invalid)n=k.serialize(ee),qx(e,n,te);else{e.selection.setContent(N);let he=u.getNode(),we;const _e=e.getBody();for(lf(he)?he=we=_e:we=he;we&&we!==_e;)he=we,we=we.parentNode;n=he===_e?_e.innerHTML:f.getOuterHTML(he);const qe=b.parse(n),At=$R(qe),St=At.bind(CR).getOr(qe);At.each(gn=>gn.replace(ee));const $e=ee.children(),Be=(c=ee.parent)!==null&&c!==void 0?c:qe;ee.unwrap();const Ut=mn($e,gn=>SR(e.schema,gn,Be));mO(Ut,e.schema,St),N1(b.getNodeFilters(),b.getAttributeFilters(),qe),n=k.serialize(qe),he===_e?f.setHTML(_e,n):f.setOuterHTML(he,n)}return RR(e,y),NR(e,f.get("mce_marker")),MR(e.getBody()),DR(f,u.getStart()),ym(e.schema,e.getBody(),u.getStart()),n},iC=e=>e instanceof Ei,UF=e=>{op(e)&&si(e.getBody()).each(n=>{const o=n.getNode(),r=Nr(o)?si(o).getOr(n):n;e.selection.setRng(r.toRange())})},Yx=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&UF(e)},WF=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=Ui(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Jp(e),o)):o||(o=c),Yx(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=sp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=za(re.fromDom(n))?o:et.trim(o);return Yx(e,c,r.no_selection),{content:c,html:c}}},ZF=(e,n,o,r)=>{N1(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=sp({validate:!1},e.schema).serialize(o),u=za(re.fromDom(n))?c:et.trim(c);return Yx(e,u,r.no_selection),{content:o,html:u}},Xx=(e,n,o)=>H.from(e.getBody()).map(r=>iC(n)?ZF(e,r,n,o):WF(e,r,n,o)).getOr({content:n,html:iC(o.content)?"":o.content}),PR=(e,n,o)=>js(e,n,o).isSome(),yO=(e,n)=>M(e,n).isSome(),IR=e=>fe(e)?e:De,jF=(e,n,o)=>{let r=e.dom;const c=IR(o);for(;r.parentNode;){r=r.parentNode;const u=re.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return H.none()},Jx=(e,n,o)=>{const r=n(e),c=IR(o);return r.orThunk(()=>c(e)?H.none():jF(e,n,c))},uC=dw,wO=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Wl(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},CO=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>wO(e,b,o)?!0:b.parentNode===u||!!td(e,b,o,r,!0));return!!td(e,f,o,r,c)},Qx=(e,n,o)=>Ia(o)&&uC(n,o.inline)||cr(o)&&uC(n,o.block)?!0:Wl(o)?Ht(n)&&e.is(n,o.selector):!1,FR=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(fe(o.onmatch))return o.onmatch(n,o,r);if(f){if(ec(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):Cv(e,n,f[y]))return!0}else for(const y in f)if(kn(f,y)){const k=b?e.getAttrib(n,y):Cv(e,n,y),N=Af(f[y],u),R=Ye(k)||ya(k);if(R&&Ye(N))continue;if(c&&R&&!o.exact||(!c||o.exact)&&!uC(k,mw(N,y)))return!1}}return!0},td=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Ht(n))for(let b=0;b<u.length;b++){const y=u[b];if(Qx(e.dom,n,y)&&FR(f,n,y,"attributes",c,r)&&FR(f,n,y,"styles",c,r)){const k=y.classes;if(k){for(let N=0;N<k.length;N++)if(!e.dom.hasClass(n,Af(k[N],r)))return}return y}}},Um=(e,n,o,r,c)=>{if(r)return CO(e,r,n,o,c);if(r=e.selection.getNode(),CO(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&CO(e,u,n,o,c))},GF=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&td(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},SO=(e,n)=>{const o=c=>os(c,re.fromDom(e.getBody())),r=(c,u)=>td(e,c.dom,u)?H.some(u):H.none();return H.from(e.selection.getStart(!0)).bind(c=>Jx(re.fromDom(c),u=>pa(n,f=>r(u,f)),o)).getOrNull()},Ea=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o){const c=e.selection.getStart(),u=Sv(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Wl(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},xO=(e,n,o)=>qo(o,(r,c)=>{const u=uc(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),lp=ae,Jg=(e,n)=>e.importNode(n,!0),LR=e=>{const n=[];let o=e;for(;o;){if(ft(o)&&o.data!==lp||o.childNodes.length>1)return[];Ht(o)&&n.push(o),o=o.firstChild}return n},eT=e=>LR(e).length>0,jv=e=>{if(e){const n=new xa(e,e);for(let o=n.current();o;o=n.next())if(ft(o))return o}return null},TO=e=>{const n=re.fromTag("span");return oc(n,{id:kf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Mr(n,re.fromText(lp)),n},qF=e=>{const n=jv(e);return n&&n.data.charAt(0)===lp&&n.deleteData(0,1),n},ip=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(eT(n))D1(e,!1,re.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,k=u.endContainer,N=u.endOffset,R=qF(n);r.remove(n,!0),b===R&&y>0&&u.setStart(R,y-1),k===R&&N>0&&u.setEnd(R,N-1),f&&r.isEmpty(f)&&F(re.fromDom(f)),c.setRng(u)}},kO=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)ip(e,n,o);else if(n=Mm(e.getBody(),c.getStart()),!n)for(;n=r.get(kf);)ip(e,n,!1)},P1=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,je(uw,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(C(re.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},HR=(e,n)=>(e.appendChild(n),n),Qg=(e,n)=>{var o;const r=Ka(e,(u,f)=>HR(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return HR(r,c.createTextNode(lp))},Gd=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=mn(Ss(f.get()),R=>R!==r&&!xs(R,"removeformat")),k=xO(e,o,y);if(mn(k,R=>!xv(e,R,r)).length>0){const R=o.cloneNode(!1);return b.add(n,R),f.remove(r,c,R,u),b.remove(R),H.some(R)}else return H.none()},tT=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const k=f.startContainer.nodeValue;r=Mm(e.getBody(),c.getStart());const N=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(k&&b>0&&b<k.length&&N.test(k.charAt(b))&&N.test(k.charAt(b-1))){const R=c.getBookmark();f.collapse(!0);let L=Wg(e.dom,f,u);L=Iv(L),e.formatter.apply(n,o,L),c.moveToBookmark(R)}else{let R=r?jv(r):null;(!r||(R==null?void 0:R.data)!==lp)&&(r=Jg(e.getDoc(),TO(!0).dom),R=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(R,b)}},EO=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),k=y.startContainer,N=y.startOffset;let R=k;ft(k)&&(N!==k.data.length&&(f=!0),R=R.parentNode);const L=[];let Q;for(;R;){if(td(e,R,n,o,r)){Q=R;break}R.nextSibling&&(f=!0),L.push(R),R=R.parentNode}if(Q)if(f){const te=u.getBookmark();y.collapse(!0);let j=Wg(c,y,b,!0);j=Iv(j),e.formatter.remove(n,o,j,r),u.moveToBookmark(te)}else{const te=Mm(e.getBody(),Q),j=TO(!1).dom;P1(e,j,te??Q);const ee=Gd(e,j,Q,n,o,r),ve=Qg(L.concat(ee.toArray()),j);te&&ip(e,te,!1),u.setCursorLocation(ve,1),c.isEmpty(Q)&&c.remove(Q)}},KF=(e,n)=>{const o=e.selection,r=e.getBody();kO(e,null,!1),(n===8||n===46)&&o.isCollapsed()&&o.getStart().innerHTML===lp&&kO(e,Mm(r,o.getStart())),(n===37||n===39)&&kO(e,Mm(r,o.getStart()))},YF=e=>{e.on("mouseup keydown",n=>{KF(e,n.keyCode)})},dC=e=>{const n=TO(!1),o=Qg(e,n.dom);return{caretContainer:n,caretPosition:Se(o,0)}},VR=(e,n)=>{const{caretContainer:o,caretPosition:r}=dC(n);return as(re.fromDom(e),o),Ls(re.fromDom(e)),r},qd=(e,n)=>{const{caretContainer:o,caretPosition:r}=dC(n);return e.selection.getRng().insertNode(o.dom),r},mC=(e,n)=>{const o=e.schema.getTextInlineElements();return kn(o,hs(n))&&!Lr(n.dom)&&!vl(n.dom)},_O=e=>Lr(e.dom)&&eT(e.dom),I1={},nT=al(["pre"]),F1=(e,n)=>{I1[e]||(I1[e]=[]),I1[e].push(n)},OO=(e,n)=>{kn(I1,e)&&Ve(I1[e],o=>{o(n)})};F1("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return nT(f)&&qt(c,f)},r=(c,u)=>{const f=re.fromDom(u),b=sl(f).dom;Ls(f),Lu(re.fromDom(c),[re.fromTag("br",b),re.fromTag("br",b),...Ra(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=mn(mn(c,nT),o(c));Ve(u,f=>{r(f.previousSibling,f)})}});const zR=["fontWeight","fontStyle","color","fontSize","fontFamily"],UR=e=>Xe(e.styles)&&ro(Ss(e.styles),n=>qt(zR,n)),XF=e=>gs(e,n=>Ia(n)&&n.inline==="span"&&UR(n)),WR=(e,n)=>{const o=e.get(n);return at(o)?XF(o):H.none()},ZR=(e,n)=>Su(n,Se.fromRangeStart(e)).isNone(),jR=(e,n)=>Ti(n,Se.fromRangeEnd(e)).exists(o=>!xr(o.getNode())||Ti(n,o).isSome())===!1,Gv=e=>n=>Ed(n)&&e.isEditable(n),JF=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return ZR(o,n[0])&&jR(o,n[0])?n:[];{const r=In(n).filter(f=>ZR(o,f)).toArray(),c=Ao(n).filter(f=>jR(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},GR=e=>mn(JF(e),Gv(e.dom)),oT=e=>mn(e.getSelectedBlocks(),Gv(e.dom)),AO=et.each,sT=e=>Ht(e)&&!ki(e)&&!Lr(e)&&!vl(e),DO=(e,n)=>{for(let o=e;o;o=o[n]){if(ft(o)&&Vo(o.data))return e;if(Ht(o)&&!ki(o))return o}return e},qR=(e,n,o)=>{const r=zv(e),c=Ht(n)&&Ud(n),u=Ht(o)&&Ud(o);if(c&&u){const f=DO(n,"previousSibling"),b=DO(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const k=y;y=y.nextSibling,f.appendChild(k)}return e.dom.remove(b),et.each(et.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},KR=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=qR(e,ax(r),r))!==null&&c!==void 0?c:r;qR(e,u,ax(u,!0))}},QF=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";AO(e.select(r,o),c=>{sT(c)&&Ud(c)&&AO(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},RO=(e,n,o)=>{AO(e.childNodes,r=>{sT(r)&&(n(r)&&o(r),r.hasChildNodes()&&RO(r,n,o))})},eL=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},YR=(e,n)=>o=>!!(o&&Cv(e,o,n)),XR=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),eL(e,r)},L1=yu.generate([{keep:[]},{rename:["name"]},{removed:[]}]),tL=/^(src|href|style)$/,MO=et.each,rT=dw,nL=e=>/^(TR|TH|TD)$/.test(e.nodeName),JR=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),NO=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if(Ht(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return ft(r)&&o&&c>=r.data.length&&(r=new xa(r,e.getBody()).next()||r),ft(r)&&!o&&c===0&&(r=new xa(r,e.getBody()).prev()||r),r},QR=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return nL(e)&&r?e.nodeName==="TR"&&r[o]||r:e},up=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},eM=(e,n,o,r,c)=>{const u=re.fromDom(n),f=re.fromDom(e.create(r,c)),b=o?rl(u):mh(u);return Lu(f,b),o?(as(u,f),Cd(f,u)):(Fu(u,f),Mr(f,u)),f.dom},oL=(e,n)=>n.links&&e.nodeName==="A",tM=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=Ui(e);cr(o)&&r===u.getRoot()&&(!o.list_block||!rT(n,o.list_block))&&Ve(Rs(n.childNodes),b=>{qh(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=up(u,b,f),u.setAttribs(c,Jp(e))):c=null}),!(Tv(o)&&!rT(o.inline,n))&&u.remove(n,!0)},nM=(e,n,o)=>Go(e)?{name:n,value:null}:{name:e,value:Af(n,o)},BO=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},oM=(e,n,o,r,c)=>{let u=!1;MO(o.styles,(f,b)=>{const{name:y,value:k}=nM(b,f,r),N=mw(k,y);(o.remove_similar||q(k)||!Ht(c)||rT(Cv(e,c,y),N))&&e.setStyle(n,y,""),u=!0}),u&&BO(e,n)},sL=(e,n,o)=>{n==="removeformat"?Ve(oT(e.selection),r=>{Ve(zR,c=>e.dom.setStyle(r,c,"")),BO(e.dom,r)}):WR(e.formatter,n).each(r=>{Ve(oT(e.selection),c=>oM(e.dom,c,r,o,null))})},sM=(e,n,o,r,c)=>{const u=e.dom,f=zv(e),b=e.schema;if(Ia(n)&&$p(b,n.inline)&&wm(b,r)&&r.parentElement===e.getBody())return tM(e,r,n),L1.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Qx(u,r,n)&&!oL(r,n))return L1.keep();const y=r,k=n.preserve_attributes;if(Ia(n)&&n.remove==="all"&&at(k)){const N=mn(u.getAttribs(y),R=>qt(k,R.name.toLowerCase()));if(u.removeAllAttribs(y),Ve(N,R=>u.setAttrib(y,R.name,R.value)),N.length>0)return L1.rename("span")}if(n.remove!=="all"){oM(u,y,n,o,c),MO(n.attributes,(R,L)=>{const{name:Q,value:te}=nM(L,R,o);if(n.remove_similar||q(te)||!Ht(c)||rT(u.getAttrib(c,Q),te)){if(Q==="class"){const j=u.getAttrib(y,Q);if(j){let ee="";if(Ve(j.split(/\s+/),ve=>{/mce\-\w+/.test(ve)&&(ee+=(ee?" ":"")+ve)}),ee){u.setAttrib(y,Q,ee);return}}}if(tL.test(Q)&&y.removeAttribute("data-mce-"+Q),Q==="style"&&al(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(Q),u.setStyle(y,"list-style-type","none");return}Q==="class"&&y.removeAttribute("className"),y.removeAttribute(Q)}}),MO(n.classes,R=>{R=Af(R,o),(!Ht(c)||u.hasClass(c,R))&&u.removeClass(y,R)});const N=u.getAttribs(y);for(let R=0;R<N.length;R++){const L=N[R].nodeName;if(!f.isAttributeInternal(L))return L1.keep()}}return n.remove!=="none"?(tM(e,y,n),L1.removed()):L1.keep()},fC=(e,n,o,r,c)=>sM(e,n,o,r,c).fold(De,u=>(e.dom.rename(r,u),!0),mt),rL=(e,n,o,r,c)=>{let u;return n.parentNode&&Ve(Sv(e.dom,n.parentNode).reverse(),f=>{if(!u&&Ht(f)&&f.id!=="_start"&&f.id!=="_end"){const b=td(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},aL=(e,n,o,r)=>sM(e,n,o,r,r).fold(rt(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),rt(null)),cL=(e,n,o,r,c,u,f,b)=>{var y,k;let N,R;const L=e.dom;if(o){const Q=o.parentNode;for(let te=r.parentNode;te&&te!==Q;te=te.parentNode){let j=L.clone(te,!1);for(let ee=0;ee<n.length&&(j=aL(e,n[ee],b,j),j!==null);ee++);j&&(N&&j.appendChild(N),R||(R=j),N=j)}u&&(!f.mixed||!L.isBlock(o))&&(r=(y=L.split(o,r))!==null&&y!==void 0?y:r),N&&R&&((k=c.parentNode)===null||k===void 0||k.insertBefore(N,c),R.appendChild(c),Ia(f)&&KR(e,f,b,N))}return r},rM=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,k=j=>{const ee=rL(e,j,n,o,c);return cL(e,u,ee,j,j,!0,f,o)},N=j=>ki(j)&&Ht(j)&&(j.id==="_start"||j.id==="_end"),R=j=>ro(u,ee=>fC(e,ee,o,j,j)),L=j=>{const ee=Rs(j.childNodes),he=R(j)||ro(u,qe=>Qx(b,j,qe)),we=j.parentNode;if(!he&&Pe(we)&&kv(f)&&R(we),f.deep&&ee.length)for(let qe=0;qe<ee.length;qe++)L(ee[qe]);Ve(["underline","line-through","overline"],qe=>{Ht(j)&&e.dom.getStyle(j,"text-decoration")===qe&&j.parentNode&&Ug(b,j.parentNode)===qe&&fC(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:qe}},void 0,j)})},Q=j=>{const ee=b.get(j?"_start":"_end");if(ee){let ve=ee[j?"firstChild":"lastChild"];return N(ve)&&(ve=ve[j?"firstChild":"lastChild"]),ft(ve)&&ve.data.length===0&&(ve=j?ee.previousSibling||ee.nextSibling:ee.nextSibling||ee.previousSibling),b.remove(ee,!0),ve}else return null},te=j=>{let ee,ve,he=Wg(b,j,u,j.collapsed);if(f.split){if(he=Iv(he),ee=NO(e,he,!0),ve=NO(e,he),ee!==ve){if(ee=QR(ee,!0),ve=QR(ve,!1),JR(b,ee,ve)){const _e=H.from(ee.firstChild).getOr(ee);k(eM(b,_e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),Q(!0);return}if(JR(b,ve,ee)){const _e=H.from(ve.lastChild).getOr(ve);k(eM(b,_e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),Q(!1);return}ee=up(b,ee,"span",{id:"_start","data-mce-type":"bookmark"}),ve=up(b,ve,"span",{id:"_end","data-mce-type":"bookmark"});const we=b.createRng();we.setStartAfter(ee),we.setEndBefore(ve),Yh(b,we,_e=>{Ve(_e,qe=>{!ki(qe)&&!ki(qe.parentNode)&&k(qe)})}),k(ee),k(ve),ee=Q(!0),ve=Q()}else ee=ve=k(ee);he.startContainer=ee.parentNode?ee.parentNode:ee,he.startOffset=b.nodeIndex(ee),he.endContainer=ve.parentNode?ve.parentNode:ve,he.endOffset=b.nodeIndex(ve)+1}Yh(b,he,we=>{Ve(we,L)})};if(r){if(b1(r)){const j=b.createRng();j.setStartBefore(r),j.setEndAfter(r),te(j)}else te(r);Ew(e,n,r,o);return}!y.isCollapsed()||!Ia(f)||Vg(e).length?(Of(e,()=>iw(e,te),j=>Ia(f)&&Um(e,n,o,j)),e.nodeChanged()):EO(e,n,o,c),sL(e,n,o),Ew(e,n,r,o)},aM=et.each,lL=(e,n,o,r)=>{const c=u=>{if(Ht(u)&&Ht(u.parentNode)&&Ud(u)){const f=Ug(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(et.walk(r,c,"childNodes"),c(r))},$O=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=YR(e,"fontSize");RO(r,u=>c(u)&&Ud(u),XR(e,"backgroundColor",Af(n.styles.backgroundColor,o)))}},cM=(e,n,o,r)=>{if(Ia(n)&&(n.inline==="sub"||n.inline==="sup")){const c=YR(e,"fontSize");RO(r,f=>c(f)&&Ud(f),XR(e,"fontSize",""));const u=mn(e.select(n.inline==="sup"?"sub":"sup",r),Ud);e.remove(u,!0)}},EW=(e,n,o,r)=>{aM(n,c=>{Ia(c)&&aM(e.dom.select(c.inline,r),u=>{sT(u)&&fC(e,c,o,u,c.exact?u:null)}),QF(e.dom,c,r)})},gC=(e,n,o,r,c)=>{const u=c.parentNode;td(e,u,o,r)&&fC(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>td(e,f,o,r)?(fC(e,n,r,c),!0):!1)},hC=et.each,pC=(e,n,o,r)=>{if(kS(e)&&Ia(n)&&o.parentNode){const c=V2(e.schema),u=yO(re.fromDom(o),f=>Lr(f.dom));return zr(c,r)&&$s(re.fromDom(o.parentNode),!1)&&!u}else return!1},qv=(e,n,o,r)=>{if(hC(o.styles,(c,u)=>{e.setStyle(n,u,Af(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},PO=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,k=(te,j=u)=>{fe(j.onformat)&&j.onformat(te,j,o,r),qv(b,te,j,o),hC(j.attributes,(ee,ve)=>{b.setAttrib(te,ve,Af(ee,o))}),hC(j.classes,ee=>{const ve=Af(ee,o);b.hasClass(te,ve)||b.addClass(te,ve)})},N=(te,j)=>{let ee=!1;return hC(te,ve=>Wl(ve)?b.getContentEditable(j)==="false"&&!ve.ceFalseOverride||Pe(ve.collapsed)&&ve.collapsed!==f?!0:b.is(j,ve.selector)&&!Lr(j)?(k(j,ve),ee=!0,!1):!0:!1),ee},R=te=>{if(G(te)){const j=b.create(te);return k(j),j}else return null},L=(te,j,ee)=>{const ve=[];let he=!0;const we=u.inline||u.block,_e=R(we),qe=$e=>xu(u)&&td(e,$e,n,o),At=($e,Be,Ut)=>{const gn=lx(u)&&uw(e.schema,$e)&&qh(e,Be,we);return Ut&&gn},St=($e,Be,Ut,gn)=>{const An=$e.nodeName.toLowerCase(),ao=qh(e,we,An)&&qh(e,Be,we),Mo=!ee&&ft($e)&&We($e.data),ps=Lr($e),Us=!Ia(u)||!te.isBlock($e);return(Ut||gn)&&ao&&!Mo&&!ps&&Us};Yh(te,j,$e=>{let Be;const Ut=gn=>{let An=!1,ao=he,Mo=!1;const ps=gn.parentNode,Us=ps.nodeName.toLowerCase(),ra=te.getContentEditable(gn);Pe(ra)&&(ao=he,he=ra==="true",An=!0,Mo=cx(e,gn));const Lc=he&&!An;if(xr(gn)&&!pC(e,u,gn,Us)){Be=null,cr(u)&&te.remove(gn);return}if(qe(gn)){Be=null;return}if(At(gn,Us,Lc)){const fc=te.rename(gn,we);k(fc),ve.push(fc),Be=null;return}if(Wl(u)){let fc=N(c,gn);if(!fc&&Pe(ps)&&kv(u)&&(fc=N(c,ps)),!Ia(u)||fc){Be=null;return}}Pe(_e)&&St(gn,Us,Lc,Mo)?(Be||(Be=te.clone(_e,!1),ps.insertBefore(Be,gn),ve.push(Be)),Mo&&An&&(he=ao),Be.appendChild(gn)):(Be=null,Ve(Rs(gn.childNodes),Ut),An&&(he=ao),Be=null)};Ve($e,Ut)}),u.links===!0&&Ve(ve,$e=>{const Be=Ut=>{Ut.nodeName==="A"&&k(Ut,u),Ve(Rs(Ut.childNodes),Be)};Be($e)}),Ve(ve,$e=>{const Be=An=>{let ao=0;return Ve(An.childNodes,Mo=>{!f_(Mo)&&!ki(Mo)&&ao++}),ao},Ut=An=>gs(An.childNodes,Bm).filter(Mo=>te.getContentEditable(Mo)!=="false"&&Qx(te,Mo,u)).map(Mo=>{const ps=te.clone(Mo,!1);return k(ps),te.replace(ps,An,!0),te.remove(Mo,!0),ps}).getOr(An),gn=Be($e);if((ve.length>1||!te.isBlock($e))&&gn===0){te.remove($e,!0);return}(Ia(u)||cr(u)&&u.wrapper)&&(!u.exact&&gn===1&&($e=Ut($e)),EW(e,c,o,$e),gC(e,u,n,o,$e),$O(te,u,o,$e),lL(te,u,o,$e),cM(te,u,o,$e),KR(e,u,o,$e))})},Q=b1(r)?r:y.getNode();if(b.getContentEditable(Q)==="false"&&!cx(e,Q)){r=Q,N(c,r),kw(e,n,r,o);return}if(u){if(r)if(b1(r)){if(!N(c,r)){const te=b.createRng();te.setStartBefore(r),te.setEndAfter(r),L(b,Wg(b,te,c),!0)}}else L(b,r,!0);else!f||!Ia(u)||Vg(e).length?(y.setRng(cC(y.getRng())),Of(e,()=>{iw(e,(te,j)=>{const ee=j?te:Wg(b,te,c);L(b,ee,!1)})},mt),e.nodeChanged()):tT(e,n,o),WR(e.formatter,n).each(te=>{Ve(GR(e.selection),j=>qv(b,j,te,o))});OO(n,e)}kw(e,n,r,o)},iL=e=>kn(e,"vars"),uL=(e,n)=>{e.set({}),n.on("NodeChange",o=>{mL(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=H.from(o.node).map(c=>b1(c)?c:c.startContainer).bind(c=>Ht(c)?H.some(c):H.from(c.parentElement)).getOrThunk(()=>dL(n));mL(n,r,e.get())})},dL=e=>e.selection.getStart(),lM=(e,n,o,r,c)=>Ya(n,b=>{const y=e.formatter.matchNode(b,o,c??{},r);return!Dn(y)},b=>wO(e,b,o)?!0:r?!1:Pe(e.formatter.matchNode(b,o,c,!0))),iM=(e,n)=>{const o=n??dL(e);return mn(Sv(e.dom,o),r=>Ht(r)&&!vl(r))},mL=(e,n,o)=>{const r=iM(e,n);pt(o,(c,u)=>{const f=b=>{const y=lM(e,r,u,b.similar,iL(b)?b.vars:void 0),k=y.isSome();if(b.state.get()!==k){b.state.set(k);const N=y.getOr(n);iL(b)?b.callback(k,{node:N,format:u,parents:r}):Ve(b.callbacks,R=>R(k,{node:N,format:u,parents:r}))}};Ve([c.withSimilar,c.withoutSimilar],f),Ve(c.withVars,f)})},fL=(e,n,o,r,c,u)=>{const f=n.get();Ve(o.split(","),b=>{const y=Uo(f,b).getOrThunk(()=>{const N={withSimilar:{state:Na(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Na(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=N,N}),k=()=>{const N=iM(e);return lM(e,N,b,c,u).isSome()};if(Dn(u)){const N=c?y.withSimilar:y.withoutSimilar;N.callbacks.push(r),N.callbacks.length===1&&N.state.set(k())}else y.withVars.push({state:Na(k()),similar:c,vars:u,callback:r})}),n.set(f)},uM=(e,n,o)=>{const r=e.get();Ve(n.split(","),c=>Uo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:mn(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:mn(u.withoutSimilar.callbacks,f=>f!==o)},withVars:mn(u.withVars,f=>f.callback!==o)}})),e.set(r)},gL=(e,n,o,r,c,u)=>(fL(e,n,o,r,c,u),{unbind:()=>uM(n,o,r)}),dM=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(Um(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?rM(e,n,o,r):PO(e,n,o,r))},mM=et.explode,bC=()=>{const e={};return{addFilter:(c,u)=>{Ve(mM(c),f=>{kn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>va(e),removeFilter:(c,u)=>{Ve(mM(c),f=>{if(kn(e,f))if(Pe(u)){const b=e[f],y=mn(b.callbacks,k=>k!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},fM=(e,n)=>{Ve(n,o=>{e.attr(o,null)})},dc=(e,n,o)=>{e.addNodeFilter("font",r=>{Ve(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&hc(y).each(k=>{u["font-size"]=o[k-1]}),c.name="span",c.attr("style",n.serialize(u)),fM(c,["color","face","size"])})})},_W=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";Ve(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},OW=(e,n,o)=>{var r;const c=Mb();n.convert_fonts_to_spans&&dc(e,c,et.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),_W(e,o,c)},AW=(e,n,o)=>{n.inline_styles&&OW(e,n,o)},DW=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),Kd=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Kv=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?Kd(r):decodeURIComponent(r);return H.some({type:c[1],data:f,base64Encoded:u})}else return H.none()},dp=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return H.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return H.some(new Blob([c],{type:e}))},H1=e=>new Promise((n,o)=>{Kv(e).bind(({type:r,data:c,base64Encoded:u})=>dp(r,c,u)).fold(()=>o("Invalid data URI"),n)}),hL=e=>ds(e,"blob:")?DW(e):ds(e,"data:")?H1(e):Promise.reject("Unknown URI format"),gM=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let Yv=0;const Xv=e=>(e||"blobid")+Yv++,V1=(e,n,o)=>Kv(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return H.none();{const f=u?r:btoa(r);return o(f,c)}}),hM=(e,n,o)=>{const r=e.create(Xv(),n,o);return e.add(r),r},aT=(e,n,o=!1)=>V1(n,o,(r,c)=>H.from(e.getByData(r,c)).orThunk(()=>dp(c,r).map(u=>hM(e,u,r)))),pM=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(ds(n,"blob:")){const r=e.getByUri(n);return Pe(r)?Promise.resolve(r):hL(n).then(c=>gM(c).then(u=>V1(u,!1,f=>H.some(hM(e,c,f))).getOrThunk(o)))}else return ds(n,"data:")?aT(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},bM=e=>Pe(e.attr("data-mce-bogus")),pL=e=>e.attr("src")===Lo.transparentSrc||Pe(e.attr("data-mce-placeholder")),bL=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");pL(c)||bM(c)||Ye(u)||aT(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>Ve(c,r))}},vM=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",(c,u,f)=>{const b=et.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),k=o.getWhitespaceElements();b.body=1;const N=R=>R.name in b&&U0(o,R);for(let R=0,L=c.length;R<L;R++){let Q=c[R],te=Q.parent;if(te&&b[te.name]&&Q===te.lastChild){let j=Q.prev;for(;j;){const ee=j.name;if(ee!=="span"||j.attr("data-mce-type")!=="bookmark"){ee==="br"&&(Q=null);break}j=j.prev}if(Q&&(Q.remove(),Zv(o,y,k,te))){const ee=o.getElementRule(te.name);ee&&(ee.removeEmpty?te.remove():ee.paddEmpty&&aC(f,N,te))}}else{let j=Q;for(;te&&te.firstChild===j&&te.lastChild===j&&(j=te,!b[te.name]);)te=te.parent;if(j===te){const ee=new Ei("#text",3);ee.value=Os,Q.replace(ee)}}}}),e.addAttributeFilter("href",c=>{let u=c.length;const f=y=>y.split(" ").filter(N=>N.length>0).concat(["noopener"]).sort().join(" "),b=y=>{const k=y?et.trim(y):"";return/\b(noopener)\b/g.test(k)?k:f(k)};if(!n.allow_unsafe_link_target)for(;u--;){const y=c[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",b(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,y,k;for(;u--;)if(k=c[u],k.name==="a"&&k.firstChild&&!k.attr("href"))for(y=k.parent,f=k.lastChild;f&&y;)b=f.prev,y.insert(f,k),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new Ei("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],y=(u=b.attr("class"))!==null&&u!==void 0?u:"",k=et.explode(y," ");let N="";for(let R=0;R<k.length;R++){const L=k[R];let Q=!1,te=r["*"];te&&te[L]&&(Q=!0),te=r[b.name],!Q&&te&&te[L]&&(Q=!0),Q&&(N&&(N+=" "),N+=L)}N.length||(N=null),b.attr("class",N)}}),bL(e,n)};function z1(e){return z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},z1(e)}function IO(e,n){return IO=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},IO(e,n)}function vL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cT(e,n,o){return vL()?cT=Reflect.construct:cT=function(c,u,f){var b=[null];b.push.apply(b,u);var y=Function.bind.apply(c,b),k=new y;return f&&IO(k,f.prototype),k},cT.apply(null,arguments)}function Wm(e){return yM(e)||yL(e)||vC(e)||wL()}function yM(e){if(Array.isArray(e))return lT(e)}function yL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vC(e,n){if(e){if(typeof e=="string")return lT(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return lT(e,n)}}function lT(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function wL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wM=Object.hasOwnProperty,CM=Object.setPrototypeOf,SM=Object.isFrozen,CL=Object.getPrototypeOf,SL=Object.getOwnPropertyDescriptor,_i=Object.freeze,Zm=Object.seal,xM=Object.create,FO=typeof Reflect<"u"&&Reflect,yC=FO.apply,iT=FO.construct;yC||(yC=function(n,o,r){return n.apply(o,r)}),_i||(_i=function(n){return n}),Zm||(Zm=function(n){return n}),iT||(iT=function(n,o){return cT(n,Wm(o))});var xL=Zl(Array.prototype.forEach),TL=Zl(Array.prototype.pop),wC=Zl(Array.prototype.push),Jv=Zl(String.prototype.toLowerCase),CC=Zl(String.prototype.match),eh=Zl(String.prototype.replace),TM=Zl(String.prototype.indexOf),uT=Zl(String.prototype.trim),Yi=Zl(RegExp.prototype.test),LO=HO(TypeError);function Zl(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return yC(e,n,r)}}function HO(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return iT(e,o)}}function Ps(e,n){CM&&CM(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=Jv(r);c!==r&&(SM(n)||(n[o]=c),r=c)}e[r]=!0}return e}function jm(e){var n=xM(null),o;for(o in e)yC(wM,e,[o])&&(n[o]=e[o]);return n}function SC(e,n){for(;e!==null;){var o=SL(e,n);if(o){if(o.get)return Zl(o.get);if(typeof o.value=="function")return Zl(o.value)}e=CL(e)}function r(c){return console.warn("fallback value for",c),null}return r}var dT=_i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mT=_i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fT=_i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kL=_i(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),VO=_i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),EL=_i(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),gT=_i(["#text"]),kM=_i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),hT=_i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),EM=_i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pT=_i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_L=Zm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U1=Zm(/<%[\w\W]*|[\w\W]*%>/gm),_M=Zm(/^data-[\-\w.\u00B7-\uFFFF]/),OL=Zm(/^aria-[\-\w]+$/),OM=Zm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),AL=Zm(/^(?:\w+script|data):/i),AM=Zm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xC=Zm(/^html$/i),zO=function(){return typeof window>"u"?null:window},DL=function(n,o){if(z1(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function UO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zO(),n=function(He){return UO(He)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,y=e.NodeFilter,k=e.NamedNodeMap,N=k===void 0?e.NamedNodeMap||e.MozNamedAttrMap:k,R=e.HTMLFormElement,L=e.DOMParser,Q=e.trustedTypes,te=b.prototype,j=SC(te,"cloneNode"),ee=SC(te,"nextSibling"),ve=SC(te,"childNodes"),he=SC(te,"parentNode");if(typeof u=="function"){var we=r.createElement("template");we.content&&we.content.ownerDocument&&(r=we.content.ownerDocument)}var _e=DL(Q,o),qe=_e?_e.createHTML(""):"",At=r,St=At.implementation,$e=At.createNodeIterator,Be=At.createDocumentFragment,Ut=At.getElementsByTagName,gn=o.importNode,An={};try{An=jm(r).documentMode?r.documentMode:{}}catch{}var ao={};n.isSupported=typeof he=="function"&&St&&typeof St.createHTMLDocument<"u"&&An!==9;var Mo=_L,ps=U1,Us=_M,ra=OL,Lc=AL,fc=AM,wt=OM,un=null,jo=Ps({},[].concat(Wm(dT),Wm(mT),Wm(fT),Wm(VO),Wm(gT))),It=null,En=Ps({},[].concat(Wm(kM),Wm(hT),Wm(EM),Wm(pT))),On=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Lt=null,To=null,ko=!0,Oc=!0,hr=!1,Qn=!1,Qo=!1,Ds=!1,Ws=!1,qr=!1,ga=!1,kr=!1,Fa=!0,rd=!0,dl=!1,Ym={},tu=null,ub=Ps({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),db=null,Xm=Ps({},["audio","video","img","source","image","track"]),rm=null,qa=Ps({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ad="http://www.w3.org/1998/Math/MathML",Jm="http://www.w3.org/2000/svg",jl="http://www.w3.org/1999/xhtml",cd=jl,Kf=!1,Al,ch=["application/xhtml+xml","text/html"],Qm="text/html",nu,Yf=null,C2=r.createElement("form"),eE=function(He){return He instanceof RegExp||He instanceof Function},S2=function(He){Yf&&Yf===He||((!He||z1(He)!=="object")&&(He={}),He=jm(He),un="ALLOWED_TAGS"in He?Ps({},He.ALLOWED_TAGS):jo,It="ALLOWED_ATTR"in He?Ps({},He.ALLOWED_ATTR):En,rm="ADD_URI_SAFE_ATTR"in He?Ps(jm(qa),He.ADD_URI_SAFE_ATTR):qa,db="ADD_DATA_URI_TAGS"in He?Ps(jm(Xm),He.ADD_DATA_URI_TAGS):Xm,tu="FORBID_CONTENTS"in He?Ps({},He.FORBID_CONTENTS):ub,Lt="FORBID_TAGS"in He?Ps({},He.FORBID_TAGS):{},To="FORBID_ATTR"in He?Ps({},He.FORBID_ATTR):{},Ym="USE_PROFILES"in He?He.USE_PROFILES:!1,ko=He.ALLOW_ARIA_ATTR!==!1,Oc=He.ALLOW_DATA_ATTR!==!1,hr=He.ALLOW_UNKNOWN_PROTOCOLS||!1,Qn=He.SAFE_FOR_TEMPLATES||!1,Qo=He.WHOLE_DOCUMENT||!1,qr=He.RETURN_DOM||!1,ga=He.RETURN_DOM_FRAGMENT||!1,kr=He.RETURN_TRUSTED_TYPE||!1,Ws=He.FORCE_BODY||!1,Fa=He.SANITIZE_DOM!==!1,rd=He.KEEP_CONTENT!==!1,dl=He.IN_PLACE||!1,wt=He.ALLOWED_URI_REGEXP||wt,cd=He.NAMESPACE||jl,He.CUSTOM_ELEMENT_HANDLING&&eE(He.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(On.tagNameCheck=He.CUSTOM_ELEMENT_HANDLING.tagNameCheck),He.CUSTOM_ELEMENT_HANDLING&&eE(He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(On.attributeNameCheck=He.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),He.CUSTOM_ELEMENT_HANDLING&&typeof He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(On.allowCustomizedBuiltInElements=He.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Al=ch.indexOf(He.PARSER_MEDIA_TYPE)===-1?Al=Qm:Al=He.PARSER_MEDIA_TYPE,nu=Al==="application/xhtml+xml"?function(ln){return ln}:Jv,Qn&&(Oc=!1),ga&&(qr=!0),Ym&&(un=Ps({},Wm(gT)),It=[],Ym.html===!0&&(Ps(un,dT),Ps(It,kM)),Ym.svg===!0&&(Ps(un,mT),Ps(It,hT),Ps(It,pT)),Ym.svgFilters===!0&&(Ps(un,fT),Ps(It,hT),Ps(It,pT)),Ym.mathMl===!0&&(Ps(un,VO),Ps(It,EM),Ps(It,pT))),He.ADD_TAGS&&(un===jo&&(un=jm(un)),Ps(un,He.ADD_TAGS)),He.ADD_ATTR&&(It===En&&(It=jm(It)),Ps(It,He.ADD_ATTR)),He.ADD_URI_SAFE_ATTR&&Ps(rm,He.ADD_URI_SAFE_ATTR),He.FORBID_CONTENTS&&(tu===ub&&(tu=jm(tu)),Ps(tu,He.FORBID_CONTENTS)),rd&&(un["#text"]=!0),Qo&&Ps(un,["html","head","body"]),un.table&&(Ps(un,["tbody"]),delete Lt.tbody),_i&&_i(He),Yf=He)},ND=Ps({},["mi","mo","mn","ms","mtext"]),x2=Ps({},["foreignobject","desc","title","annotation-xml"]),BD=Ps({},["title","style","font","a","script"]),am=Ps({},mT);Ps(am,fT),Ps(am,kL);var mb=Ps({},VO);Ps(mb,EL);var Oe=function(He){var ln=he(He);(!ln||!ln.tagName)&&(ln={namespaceURI:jl,tagName:"template"});var Gn=Jv(He.tagName),ha=Jv(ln.tagName);return He.namespaceURI===Jm?ln.namespaceURI===jl?Gn==="svg":ln.namespaceURI===ad?Gn==="svg"&&(ha==="annotation-xml"||ND[ha]):!!am[Gn]:He.namespaceURI===ad?ln.namespaceURI===jl?Gn==="math":ln.namespaceURI===Jm?Gn==="math"&&x2[ha]:!!mb[Gn]:He.namespaceURI===jl?ln.namespaceURI===Jm&&!x2[ha]||ln.namespaceURI===ad&&!ND[ha]?!1:!mb[Gn]&&(BD[Gn]||!am[Gn]):!1},Ae=function(He){wC(n.removed,{element:He});try{He.parentNode.removeChild(He)}catch{try{He.outerHTML=qe}catch{He.remove()}}},xt=function(He,ln){try{wC(n.removed,{attribute:ln.getAttributeNode(He),from:ln})}catch{wC(n.removed,{attribute:null,from:ln})}if(ln.removeAttribute(He),He==="is"&&!It[He])if(qr||ga)try{Ae(ln)}catch{}else try{ln.setAttribute(He,"")}catch{}},gt=function(He){var ln,Gn;if(Ws)He="<remove></remove>"+He;else{var ha=CC(He,/^[\r\n\t ]+/);Gn=ha&&ha[0]}Al==="application/xhtml+xml"&&(He='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+He+"</body></html>");var Nu=_e?_e.createHTML(He):He;if(cd===jl)try{ln=new L().parseFromString(Nu,Al)}catch{}if(!ln||!ln.documentElement){ln=St.createDocument(cd,"template",null);try{ln.documentElement.innerHTML=Kf?"":Nu}catch{}}var Di=ln.body||ln.documentElement;return He&&Gn&&Di.insertBefore(r.createTextNode(Gn),Di.childNodes[0]||null),cd===jl?Ut.call(ln,Qo?"html":"body")[0]:Qo?ln.documentElement:Di},Tn=function(He){return $e.call(He.ownerDocument||He,He,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},Eo=function(He){return He instanceof R&&(typeof He.nodeName!="string"||typeof He.textContent!="string"||typeof He.removeChild!="function"||!(He.attributes instanceof N)||typeof He.removeAttribute!="function"||typeof He.setAttribute!="function"||typeof He.namespaceURI!="string"||typeof He.insertBefore!="function")},Ks=function(He){return z1(f)==="object"?He instanceof f:He&&z1(He)==="object"&&typeof He.nodeType=="number"&&typeof He.nodeName=="string"},lr=function(He,ln,Gn){ao[He]&&xL(ao[He],function(ha){ha.call(n,ln,Gn,Yf)})},Xf=function(He){var ln;if(lr("beforeSanitizeElements",He,null),Eo(He)||Yi(/[\u0080-\uFFFF]/,He.nodeName))return Ae(He),!0;var Gn=nu(He.nodeName);if(lr("uponSanitizeElement",He,{tagName:Gn,allowedTags:un}),He.hasChildNodes()&&!Ks(He.firstElementChild)&&(!Ks(He.content)||!Ks(He.content.firstElementChild))&&Yi(/<[/\w]/g,He.innerHTML)&&Yi(/<[/\w]/g,He.textContent)||Gn==="select"&&Yi(/<template/i,He.innerHTML))return Ae(He),!0;if(!un[Gn]||Lt[Gn]){if(!Lt[Gn]&&m5(Gn)&&(On.tagNameCheck instanceof RegExp&&Yi(On.tagNameCheck,Gn)||On.tagNameCheck instanceof Function&&On.tagNameCheck(Gn)))return!1;if(rd&&!tu[Gn]){var ha=he(He)||He.parentNode,Nu=ve(He)||He.childNodes;if(Nu&&ha)for(var Di=Nu.length,Hr=Di-1;Hr>=0;--Hr)ha.insertBefore(j(Nu[Hr],!0),ee(He))}return Ae(He),!0}return He instanceof b&&!Oe(He)||(Gn==="noscript"||Gn==="noembed")&&Yi(/<\/no(script|embed)/i,He.innerHTML)?(Ae(He),!0):(Qn&&He.nodeType===3&&(ln=He.textContent,ln=eh(ln,Mo," "),ln=eh(ln,ps," "),He.textContent!==ln&&(wC(n.removed,{element:He.cloneNode()}),He.textContent=ln)),lr("afterSanitizeElements",He,null),!1)},ou=function(He,ln,Gn){if(Fa&&(ln==="id"||ln==="name")&&(Gn in r||Gn in C2))return!1;if(!(Oc&&!To[ln]&&Yi(Us,ln))){if(!(ko&&Yi(ra,ln))){if(!It[ln]||To[ln]){if(!(m5(He)&&(On.tagNameCheck instanceof RegExp&&Yi(On.tagNameCheck,He)||On.tagNameCheck instanceof Function&&On.tagNameCheck(He))&&(On.attributeNameCheck instanceof RegExp&&Yi(On.attributeNameCheck,ln)||On.attributeNameCheck instanceof Function&&On.attributeNameCheck(ln))||ln==="is"&&On.allowCustomizedBuiltInElements&&(On.tagNameCheck instanceof RegExp&&Yi(On.tagNameCheck,Gn)||On.tagNameCheck instanceof Function&&On.tagNameCheck(Gn))))return!1}else if(!rm[ln]){if(!Yi(wt,eh(Gn,fc,""))){if(!((ln==="src"||ln==="xlink:href"||ln==="href")&&He!=="script"&&TM(Gn,"data:")===0&&db[He])){if(!(hr&&!Yi(Lc,eh(Gn,fc,"")))){if(Gn)return!1}}}}}}return!0},m5=function(He){return He.indexOf("-")>0},f5=function(He){var ln,Gn,ha,Nu;lr("beforeSanitizeAttributes",He,null);var Di=He.attributes;if(Di){var Hr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:It};for(Nu=Di.length;Nu--;){ln=Di[Nu];var ld=ln,ui=ld.name,$D=ld.namespaceURI;Gn=ui==="value"?ln.value:uT(ln.value),ha=nu(ui);var tE=Gn;if(Hr.attrName=ha,Hr.attrValue=Gn,Hr.keepAttr=!0,Hr.forceKeepAttr=void 0,lr("uponSanitizeAttribute",He,Hr),Gn=Hr.attrValue,!Hr.forceKeepAttr){if(!Hr.keepAttr){xt(ui,He);continue}if(Yi(/\/>/i,Gn)){xt(ui,He);continue}Qn&&(Gn=eh(Gn,Mo," "),Gn=eh(Gn,ps," "));var PD=nu(He.nodeName);if(!ou(PD,ha,Gn)){xt(ui,He);continue}if(Gn!==tE)try{$D?He.setAttributeNS($D,ui,Gn):He.setAttribute(ui,Gn)}catch{xt(ui,He)}}}lr("afterSanitizeAttributes",He,null)}},nW=function io(He){var ln,Gn=Tn(He);for(lr("beforeSanitizeShadowDOM",He,null);ln=Gn.nextNode();)lr("uponSanitizeShadowNode",ln,null),!Xf(ln)&&(ln.content instanceof c&&io(ln.content),f5(ln));lr("afterSanitizeShadowDOM",He,null)};return n.sanitize=function(io,He){var ln,Gn,ha,Nu,Di;if(Kf=!io,Kf&&(io="<!-->"),typeof io!="string"&&!Ks(io)){if(typeof io.toString!="function")throw LO("toString is not a function");if(io=io.toString(),typeof io!="string")throw LO("dirty is not a string, aborting")}if(!n.isSupported){if(z1(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof io=="string")return e.toStaticHTML(io);if(Ks(io))return e.toStaticHTML(io.outerHTML)}return io}if(Ds||S2(He),n.removed=[],typeof io=="string"&&(dl=!1),dl){if(io.nodeName){var Hr=nu(io.nodeName);if(!un[Hr]||Lt[Hr])throw LO("root node is forbidden and cannot be sanitized in-place")}}else if(io instanceof f)ln=gt("<!---->"),Gn=ln.ownerDocument.importNode(io,!0),Gn.nodeType===1&&Gn.nodeName==="BODY"||Gn.nodeName==="HTML"?ln=Gn:ln.appendChild(Gn);else{if(!qr&&!Qn&&!Qo&&io.indexOf("<")===-1)return _e&&kr?_e.createHTML(io):io;if(ln=gt(io),!ln)return qr?null:kr?qe:""}ln&&Ws&&Ae(ln.firstChild);for(var ld=Tn(dl?io:ln);ha=ld.nextNode();)ha.nodeType===3&&ha===Nu||Xf(ha)||(ha.content instanceof c&&nW(ha.content),f5(ha),Nu=ha);if(Nu=null,dl)return io;if(qr){if(ga)for(Di=Be.call(ln.ownerDocument);ln.firstChild;)Di.appendChild(ln.firstChild);else Di=ln;return It.shadowroot&&(Di=gn.call(o,Di,!0)),Di}var ui=Qo?ln.outerHTML:ln.innerHTML;return Qo&&un["!doctype"]&&ln.ownerDocument&&ln.ownerDocument.doctype&&ln.ownerDocument.doctype.name&&Yi(xC,ln.ownerDocument.doctype.name)&&(ui="<!DOCTYPE "+ln.ownerDocument.doctype.name+`>
`+ui),Qn&&(ui=eh(ui,Mo," "),ui=eh(ui,ps," ")),_e&&kr?_e.createHTML(ui):ui},n.setConfig=function(io){S2(io),Ds=!0},n.clearConfig=function(){Yf=null,Ds=!1},n.isValidAttribute=function(io,He,ln){Yf||S2({});var Gn=nu(io),ha=nu(He);return ou(Gn,ha,ln)},n.addHook=function(io,He){typeof He=="function"&&(ao[io]=ao[io]||[],wC(ao[io],He))},n.removeHook=function(io){if(ao[io])return TL(ao[io])},n.removeHooks=function(io){ao[io]&&(ao[io]=[])},n.removeAllHooks=function(){ao={}},n}var RL=UO();const bT=et.each,WO=et.trim,ZO=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],DM={ftp:21,http:80,https:443,mailto:25},RM=["img","video"],ML=(e,n)=>Pe(e)?!e:Pe(n)?!qt(RM,n):!0,$f=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},vT=(e,n,o)=>{const r=$f(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?ML(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Gm{constructor(n,o={}){this.path="",this.directory="",n=WO(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Gm(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&bT(ZO,(b,y)=>{let k=f[y];k&&(k=k.replace(/\(mce_at\)/g,"@@")),c[b]=k}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=hf.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!vT(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Gm(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Gm(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?DM[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];bT(u,R=>{R&&b.push(R)});const y=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}y.push(f[R])}const k=b.length-r;let N;return k<=0?N=ts(y).join("/"):N=b.slice(0,k).join("/")+"/"+ts(y).join("/"),N.indexOf("/")!==0&&(N="/"+N),c&&N.lastIndexOf("/")!==N.length-1&&(N+=c),N}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const NL=et.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),yT="data-mce-type";let jO=0;const Qv=(e,n,o,r)=>{var c,u,f,b;const y=n.validate,k=o.getSpecialElements();e.nodeType===Ms&&!n.allow_conditional_comments&&/^\[if/i.test((c=e.nodeValue)!==null&&c!==void 0?c:"")&&(e.nodeValue=" "+e.nodeValue);const N=(u=r==null?void 0:r.tagName)!==null&&u!==void 0?u:e.nodeName.toLowerCase();if(e.nodeType!==vc||N==="body")return;const R=re.fromDom(e),L=Ha(R,yT),Q=Mc(R,"data-mce-bogus");if(!L&&G(Q)){Q==="all"?Ls(R):ua(R);return}const te=o.getElementRule(N);if(y&&!te){kn(k,N)?Ls(R):ua(R);return}else Pe(r)&&(r.allowedTags[N]=!0);if(y&&te&&!L){if(Ve((f=te.attributesForced)!==null&&f!==void 0?f:[],j=>{Pr(R,j.name,j.value==="{$uid}"?`mce_${jO++}`:j.value)}),Ve((b=te.attributesDefault)!==null&&b!==void 0?b:[],j=>{Ha(R,j.name)||Pr(R,j.name,j.value==="{$uid}"?`mce_${jO++}`:j.value)}),te.attributesRequired&&!ro(te.attributesRequired,j=>Ha(R,j))){ua(R);return}if(te.removeEmptyAttrs&&Zc(R)){ua(R);return}te.outputName&&te.outputName!==N&&wE(R,te.outputName)}},MM=(e,n,o,r,c)=>!(r in NL&&vT(e,c,o))&&(!e.validate||n.isValid(o,r)||ds(r,"data-")||ds(r,"aria-")),NM=(e,n)=>e.hasAttribute(yT)&&(n==="id"||n==="class"||n==="style"),BM=(e,n)=>e in n.getBoolAttrs(),BL=(e,n,o)=>{const{attributes:r}=e;for(let c=r.length-1;c>=0;c--){const u=r[c],f=u.name,b=u.value;!MM(n,o,e.tagName.toLowerCase(),f,b)&&!NM(e,f)?e.removeAttribute(f):BM(f,o)&&e.setAttribute(f,f)}},$L=(e,n)=>{const o=RL();return o.addHook("uponSanitizeElement",(r,c)=>{Qv(r,e,n,c)}),o.addHook("uponSanitizeAttribute",(r,c)=>{const u=r.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=MM(e,n,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,BM(f,n)&&(c.attrValue=f),e.allow_svg_data_urls&&ds(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):NM(r,f)&&(c.forceKeepAttr=!0)}),o},$M=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},PL=(e,n)=>{if(e.sanitize){const o=$L(e,n);return(r,c)=>{o.sanitize(r,$M(e,c)),o.removed=[]}}else return(o,r)=>{const c=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let u;for(;u=c.nextNode();)Qv(u,e,n),Ht(u)&&BL(u,e,n)}},PM=et.makeMap,IM=et.extend,GO=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const y=u[f],k=new Ei(y.nodeName.toLowerCase(),y.nodeType);if(Ht(y)){const N=y.attributes;for(let R=0,L=N.length;R<L;R++){const Q=N[R];k.attr(Q.name,Q.value)}}else ft(y)?(k.value=y.data,c&&(k.raw=!0)):(Pl(y)||B0(y)||Sb(y))&&(k.value=y.data);GO(k,y,o),e.append(k)}},qO=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;Ve(n,b=>b(f)),Ye(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];Ve(o,f=>f(u))}},FM=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=IM(PM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=V2(n),k=/[ \t\r\n]+/g,N=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,L=he=>{let we=he.parent;for(;Pe(we);){if(we.name in f)return!0;we=we.parent}return!1},Q=he=>{let we=he;for(;Pe(we);){if(we.name in y)return Zv(n,u,f,we);we=we.parent}return!1},te=he=>he.name in b&&!U0(n,he),j=(he,we)=>{const _e=we?he.prev:he.next;return Pe(_e)||Ye(he.parent)?!1:te(he.parent)&&(he.parent!==e||r.isRootContent===!0)};return[he=>{var we;if(he.type===3&&!L(he)){let _e=(we=he.value)!==null&&we!==void 0?we:"";_e=_e.replace(k," "),(DF(he.prev,te)||j(he,!0))&&(_e=_e.replace(N,"")),_e.length===0?he.remove():he.value=_e}},he=>{var we;if(he.type===1){const _e=n.getElementRule(he.name);if(c&&_e){const qe=Zv(n,u,f,he);_e.paddInEmptyBlock&&qe&&Q(he)?aC(r,te,he):_e.removeEmpty&&qe?te(he)?he.remove():he.unwrap():_e.paddEmpty&&(qe||dO(he))&&aC(r,te,he)}}else if(he.type===3&&!L(he)){let _e=(we=he.value)!==null&&we!==void 0?we:"";(he.next&&te(he.next)||j(he,!1))&&(_e=_e.replace(R,"")),_e.length===0?he.remove():he.value=_e}}]},LM=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},mp=(e={},n=Ci())=>{const o=bC(),r=bC(),c={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=PL(c,n),b=(we,_e,qe="html")=>{const At=qe==="xhtml"?"application/xhtml+xml":"text/html",St=kn(n.getSpecialElements(),_e.toLowerCase()),$e=St?`<${_e}>${we}</${_e}>`:we,Be=qe==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${$e}</body></html>`:`<body>${$e}</body>`,Ut=u.parseFromString(Be,At).body;return f(Ut,At),St?Ut.firstChild:Ut},y=o.addFilter,k=o.getFilters,N=o.removeFilter,R=r.addFilter,L=r.getFilters,Q=r.removeFilter,te=(we,_e)=>{SR(n,we)&&_e.push(we)},j=(we,_e)=>{const qe=G(_e.attr(yT)),At=_e.type===1&&!kn(we,_e.name)&&!N2(n,_e);return _e.type===3||At&&!qe},ee=(we,_e)=>{const qe=IM(PM("script,style,head,html,body,title,meta,param"),n.getBlockElements()),At=/^[ \t\r\n]+/,St=/[ \t\r\n]+$/;let $e=we.firstChild,Be=null;const Ut=gn=>{var An,ao;gn&&($e=gn.firstChild,$e&&$e.type===3&&($e.value=(An=$e.value)===null||An===void 0?void 0:An.replace(At,"")),$e=gn.lastChild,$e&&$e.type===3&&($e.value=(ao=$e.value)===null||ao===void 0?void 0:ao.replace(St,"")))};if(n.isValidChild(we.name,_e.toLowerCase())){for(;$e;){const gn=$e.next;j(qe,$e)?(Be||(Be=new Ei(_e,1),Be.attr(c.forced_root_block_attrs),we.insert(Be,$e)),Be.append($e)):(Ut(Be),Be=null),$e=gn}Ut(Be)}},he={schema:n,addAttributeFilter:R,getAttributeFilters:L,removeAttributeFilter:Q,addNodeFilter:y,getNodeFilters:k,removeNodeFilter:N,parse:(we,_e={})=>{var qe;const At=c.validate,St=(qe=_e.context)!==null&&qe!==void 0?qe:c.root_name,$e=b(we,St,_e.format);vm(n,$e);const Be=new Ei(St,11);GO(Be,$e,n.getSpecialElements()),$e.innerHTML="";const[Ut,gn]=FM(Be,n,c,_e),An=[],ao=At?ra=>te(ra,An):Wt,Mo={nodes:{},attributes:{}},ps=ra=>Uv(k(),L(),ra,Mo);if(qO(Be,[Ut,ps],[gn,ao]),An.reverse(),At&&An.length>0)if(_e.context){const{pass:ra,fail:Lc}=ks(An,fc=>fc.parent===Be);mO(Lc,n,Be,ps),_e.invalid=ra.length>0}else mO(An,n,Be,ps);const Us=LM(c,_e);return Us&&(Be.name==="body"||_e.isRootContent)&&ee(Be,Us),_e.invalid||uO(Mo,_e),Be}};return vM(he,c),AW(he,c,n),he},HM=e=>iC(e)?sp({validate:!1}).serialize(e):e,KO=(e,n,o)=>{const r=HM(e),c=n(r);if(c.isDefaultPrevented())return c;if(iC(e))if(c.content!==r){const u=mp({validate:!1,forced_root_block:!1,sanitize:o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},YO=(e,n)=>{if(n.no_events)return Fr.value(n);{const o=Aw(e,n);return o.isDefaultPrevented()?Fr.error(Dw(e,{content:"",...o}).content):Fr.value(o)}},XO=(e,n,o)=>o.no_events?n:KO(n,c=>Dw(e,{...o,content:c}),sv(e)).content,JO=(e,n)=>{if(n.no_events)return Fr.value(n);{const o=KO(n.content,r=>_w(e,{...n,content:r}),sv(e));return o.isDefaultPrevented()?(Ow(e,o),Fr.error(void 0)):Fr.value(o)}},TC=(e,n,o)=>{o.no_events||Ow(e,{...o,content:n})},QO=(e,n,o)=>({element:e,width:n,rows:o}),kC=(e,n)=>({element:e,cells:n}),IL=(e,n)=>({x:e,y:n}),VM=(e,n)=>ol(e,n).bind(hc).getOr(1),FL=(e,n,o,r,c)=>{const u=VM(c,"rowspan"),f=VM(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=kC(ly(r),[]));for(let k=n;k<n+f;k++){const N=b[y].cells;N[k]=y===o&&k===n?c:Sg(c)}}},zM=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},UM=(e,n,o)=>{for(;zM(e,n,o);)n++;return n},WM=e=>qo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),ZM=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(os(c[u],n))return H.some(IL(u,r))}return H.none()},jM=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,k=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(kC(f[b].element,k))}return u},LL=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?jM(e,r,c,u,f):jM(e,r,f,u,c);return QO(e.element,WM(b),b)},GM=(e,n)=>{const o=Sg(e.element),r=re.fromTag("tbody");return Lu(r,n),Mr(o,r),o},RW=e=>jt(e.rows,n=>{const o=jt(n.cells,c=>{const u=ly(c);return Sr(u,"colspan"),Sr(u,"rowspan"),u}),r=Sg(n.element);return Lu(r,o),r}),HL=e=>{const n=QO(Sg(e),0,[]);return Ve(Cc(e,"tr"),(o,r)=>{Ve(Cc(o,"td,th"),(c,u)=>{FL(n,UM(n,u,r),r,o,c)})}),QO(n.element,WM(n.rows),n.rows)},VL=e=>GM(e,RW(e)),zL=(e,n,o)=>ZM(e,n).bind(r=>ZM(e,o).map(c=>LL(e,r,c))),UL=e=>gs(e,n=>hs(n)==="ul"||hs(n)==="ol"),WL=(e,n)=>gs(e,o=>hs(o)==="li"&&p1(o,n)).fold(rt([]),o=>UL(e).map(r=>{const c=re.fromTag(hs(r)),u=Ko(Bl(r),(f,b)=>ds(b,"list-style"));return og(c,u),[re.fromTag("li"),c]}).getOr([])),ZL=(e,n)=>{const o=qo(n,(r,c)=>(Mr(c,r),c),e);return n.length>0?Lw([o]):o},jL=e=>mu(e)?hl(e).filter(cl).fold(rt([]),n=>[e,n]):cl(e)?[e]:[],qM=(e,n)=>{const o=re.fromDom(n.commonAncestorContainer),r=Yg(o,e),c=mn(r,P0),u=WL(r,n),f=c.concat(u.length?u:jL(o));return jt(f,Sg)},KM=()=>Lw([]),GL=(e,n)=>ZL(re.fromDom(n.cloneContents()),qM(e,n)),qL=(e,n)=>me(n,"table",je(os,e)),KL=(e,n)=>qL(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=HL(o);return zL(u,r,c).map(f=>Lw([VL(f)]))}).getOrThunk(KM),YL=(e,n)=>n.length>0&&n[0].collapsed?KM():GL(e,n[0]),MW=(e,n)=>{const o=h1(n,e);return o.length>0?KL(e,o):YL(e,n)},eA=(e,n)=>n>=0&&n<e.length&&g1(e.charAt(n)),YM=e=>ut(e.innerText),XL=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),NW=e=>H.from(e.selection.getRng()).map(n=>{var o;const r=H.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=XL(r),f=re.fromDom(n.cloneContents());b3(f),v3(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=YM(b),k=ut((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),eA(k,0)||eA(k,k.length-1)){const N=r.getOr(c),R=YM(N),L=R.indexOf(y);if(L===-1)return y;{const Q=eA(R,L-1),te=eA(R,L+y.length);return(Q?" ":"")+y+(te?" ":"")}}else return y}).getOr(""),JL=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=F_(e,So(c)),f=n.contextual?MW(re.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},na=(e,n)=>{if(n.format==="text")return NW(e);{const o=JL(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},tA=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),BW=(e,n,o={})=>{const r=tA(o,n);return YO(e,r).fold(Fo,c=>{const u=na(e,c);return XO(e,u,c)})},nA=0,XM=1,W1=2,$W=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(N,R,L)=>({start:N,end:R,diag:L}),f=(N,R,L,Q,te)=>{const j=y(N,R,L,Q);if(j===null||j.start===R&&j.diag===R-Q||j.end===N&&j.diag===N-L){let ee=N,ve=L;for(;ee<R||ve<Q;)ee<R&&ve<Q&&e[ee]===n[ve]?(te.push([nA,e[ee]]),++ee,++ve):R-N>Q-L?(te.push([W1,e[ee]]),++ee):(te.push([XM,n[ve]]),++ve)}else{f(N,j.start,L,j.start-j.diag,te);for(let ee=j.start;ee<j.end;++ee)te.push([nA,e[ee]]);f(j.end,R,j.end-j.diag,Q,te)}},b=(N,R,L,Q)=>{let te=N;for(;te-R<Q&&te<L&&e[te]===n[te-R];)++te;return u(N,te,R)},y=(N,R,L,Q)=>{const te=R-N,j=Q-L;if(te===0||j===0)return null;const ee=te-j,ve=j+te,he=(ve%2===0?ve:ve+1)/2;r[1+he]=N,c[1+he]=R+1;let we,_e,qe,At,St;for(we=0;we<=he;++we){for(_e=-we;_e<=we;_e+=2){for(qe=_e+he,_e===-we||_e!==we&&r[qe-1]<r[qe+1]?r[qe]=r[qe+1]:r[qe]=r[qe-1]+1,At=r[qe],St=At-N+L-_e;At<R&&St<Q&&e[At]===n[St];)r[qe]=++At,++St;if(ee%2!==0&&ee-we<=_e&&_e<=ee+we&&c[qe-ee]<=r[qe])return b(c[qe-ee],_e+N-L,R,Q)}for(_e=ee-we;_e<=ee+we;_e+=2){for(qe=_e+he-ee,_e===ee-we||_e!==ee+we&&c[qe+1]<=c[qe-1]?c[qe]=c[qe+1]-1:c[qe]=c[qe-1],At=c[qe]-1,St=At-N+L-_e;At>=N&&St>=L&&e[At]===n[St];)c[qe]=At--,St--;if(ee%2===0&&-we<=_e&&_e<=we&&c[qe]<=r[qe+ee])return b(c[qe],_e+N-L,R,Q)}}return null},k=[];return f(0,e.length,0,n.length,k),k},QL=e=>Ht(e)?e.outerHTML:ft(e)?hf.encodeRaw(e.data,!1):Pl(e)?"<!--"+e.data+"-->":"",il=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},JM=(e,n,o)=>{const r=il(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},QM=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},eN=(e,n)=>{let o=0;Ve(e,r=>{r[0]===nA?o++:r[0]===XM?(JM(n,r[1],o),o++):r[0]===W1&&QM(n,o)})},e6=e=>mn(jt(Rs(e.childNodes),QL),n=>n.length>0),t6=(e,n)=>{const o=jt(Rs(n.childNodes),QL);return eN($W(o,e),n),n},wT=bn(()=>document.implementation.createHTMLDocument("undo")),n6=e=>e.indexOf("</iframe>")!==-1,oA=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),o6=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),EC=e=>{const n=e6(e.getBody()),o=_r(n,c=>{const u=p3(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return n6(r)?oA(o):o6(r)},CT=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?t6(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Pe(r)&&Xy(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},_C=e=>e.type==="fragmented"?e.fragments.join(""):e.content,sA=e=>{const n=re.fromTag("body",wT());return Td(n,_C(e)),Ve(Cc(n,"*[data-mce-bogus]"),ua),hm(n)},rA=(e,n)=>_C(e)===_C(n),s6=(e,n)=>sA(e)===sA(n),aA=(e,n)=>!e||!n?!1:rA(e,n)?!0:s6(e,n),cA=e=>e.get()===0,Oi=(e,n,o)=>{cA(o)&&(e.typing=n)},tN=(e,n)=>{e.typing&&(Oi(e,!1,n),e.add())},r6=e=>{e.typing&&(e.typing=!1,e.add())},a6=(e,n,o)=>{cA(n)&&o.set(ac(e.selection))},c6=(e,n,o,r,c,u,f)=>{const b=EC(e),y=et.extend(u||{},b);if(!cA(r)||e.removed)return null;const k=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:k,originalEvent:f}).isDefaultPrevented()||k&&aA(k,y))return null;n.data[o.get()]&&c.get().each(L=>{n.data[o.get()].beforeBookmark=L});const N=$E(e);if(N&&n.data.length>N){for(let L=0;L<n.data.length-1;L++)n.data[L]=n.data[L+1];n.data.length--,o.set(n.data.length)}y.bookmark=ac(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const R={level:y,lastLevel:k,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),y},l6=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},nN=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];CT(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},i6=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],CT(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},u6=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,Oi(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],CT(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},d6=e=>{e.clear(),e.add()},ST=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!aA(EC(e),n.data[0]),m6=(e,n)=>n.get()<e.data.length-1&&!e.typing,f6=(e,n,o)=>(tN(e,n),e.beforeChange(),e.ignore(o),e.add()),oN=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},lA=(e,n)=>{const o=e.dom,r=Pe(n)?n:e.getBody();Ve(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=LE(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=Iy(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},sN=e=>({init:{bindEvents:Wt},undoManager:{beforeChange:(n,o)=>a6(e,n,o),add:(n,o,r,c,u,f)=>c6(e,n,o,r,c,u,f),undo:(n,o,r)=>u6(e,n,o,r),redo:(n,o)=>i6(e,n,o),clear:(n,o)=>l6(e,n,o),reset:n=>d6(n),hasUndo:(n,o)=>ST(e,n,o),hasRedo:(n,o)=>m6(n,o),transact:(n,o,r)=>f6(n,o,r),ignore:(n,o)=>oN(n,o),extra:(n,o,r,c)=>nN(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>Um(e,n,o,r,c),matchAll:(n,o)=>GF(e,n,o),matchNode:(n,o,r,c)=>td(e,n,o,r,c),canApply:n=>Ea(e,n),closest:n=>SO(e,n),apply:(n,o,r)=>PO(e,n,o,r),remove:(n,o,r,c)=>rM(e,n,o,r,c),toggle:(n,o,r)=>dM(e,n,o,r),formatChanged:(n,o,r,c,u)=>gL(e,n,o,r,c,u)},editor:{getContent:n=>J5(e,n),setContent:(n,o)=>Xx(e,n,o),insertContent:(n,o)=>Kx(e,n,o),addVisual:n=>lA(e,n)},selection:{getContent:(n,o)=>BW(e,n,o)},autocompleter:{addDecoration:n=>V5(e,n),removeDecoration:()=>U5(e,re.fromDom(e.getBody()))},raw:{getModel:()=>H.none()}}),g6=e=>{const n=k=>Xe(k)?k:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(k,N,R)=>r.transact(R),ignore:(k,N)=>r.ignore(N),extra:(k,N,R,L)=>r.extra(R,L)},formatter:{match:(k,N,R,L)=>c.match(k,n(N),L),matchAll:c.matchAll,matchNode:c.matchNode,canApply:k=>c.canApply(k),closest:k=>c.closest(k),apply:(k,N,R)=>c.apply(k,n(N)),remove:(k,N,R,L)=>c.remove(k,n(N)),toggle:(k,N,R)=>c.toggle(k,n(N)),formatChanged:(k,N,R,L,Q)=>c.formatChanged(N,R,L,Q)},editor:{getContent:k=>u.getContent(k),setContent:(k,N)=>({content:u.setContent(k,N),html:""}),insertContent:(k,N)=>(u.insertContent(k),""),addVisual:u.addVisual},selection:{getContent:(k,N)=>f.getContent(N)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>H.some(y.getRawModel())}}},PW=()=>{const e=rt(null),n=rt("");return{init:{bindEvents:Wt},undoManager:{beforeChange:Wt,add:e,undo:e,redo:e,clear:Wt,reset:Wt,hasUndo:De,hasRedo:De,transact:e,ignore:Wt,extra:Wt},formatter:{match:De,matchAll:rt([]),matchNode:rt(void 0),canApply:De,closest:n,apply:Wt,remove:Wt,toggle:Wt,formatChanged:rt({unbind:Wt})},editor:{getContent:n,setContent:rt({content:"",html:""}),insertContent:rt(""),addVisual:Wt},selection:{getContent:n},autocompleter:{addDecoration:Wt,removeDecoration:Wt},raw:{getModel:rt(H.none())}}},Pf=e=>kn(e.plugins,"rtc"),h6=e=>Uo(e.plugins,"rtc").bind(n=>H.from(n.setup)),p6=e=>{const n=e;return h6(e).fold(()=>(n.rtcInstance=sN(e),H.none()),o=>(n.rtcInstance=PW(),H.some(()=>o().then(r=>(n.rtcInstance=g6(r),r.rtc.isRemote)))))},iA=e=>e.rtcInstance?e.rtcInstance:sN(e),oa=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},xT=(e,n,o)=>{oa(e).undoManager.beforeChange(n,o)},OC=(e,n,o,r,c,u,f)=>oa(e).undoManager.add(n,o,r,c,u,f),rN=(e,n,o,r)=>oa(e).undoManager.undo(n,o,r),aN=(e,n,o)=>oa(e).undoManager.redo(n,o),b6=(e,n,o)=>{oa(e).undoManager.clear(n,o)},cN=(e,n)=>{oa(e).undoManager.reset(n)},v6=(e,n,o)=>oa(e).undoManager.hasUndo(n,o),y6=(e,n,o)=>oa(e).undoManager.hasRedo(n,o),w6=(e,n,o,r)=>oa(e).undoManager.transact(n,o,r),C6=(e,n,o)=>{oa(e).undoManager.ignore(n,o)},lN=(e,n,o,r,c)=>{oa(e).undoManager.extra(n,o,r,c)},S6=(e,n,o,r,c)=>oa(e).formatter.match(n,o,r,c),x6=(e,n,o)=>oa(e).formatter.matchAll(n,o),AC=(e,n,o,r,c)=>oa(e).formatter.matchNode(n,o,r,c),iN=(e,n)=>oa(e).formatter.canApply(n),uN=(e,n)=>oa(e).formatter.closest(n),T6=(e,n,o,r)=>{oa(e).formatter.apply(n,o,r)},k6=(e,n,o,r,c)=>{oa(e).formatter.remove(n,o,r,c)},E6=(e,n,o,r)=>{oa(e).formatter.toggle(n,o,r)},dN=(e,n,o,r,c,u)=>oa(e).formatter.formatChanged(n,o,r,c,u),_6=(e,n)=>iA(e).editor.getContent(n),O6=(e,n,o)=>iA(e).editor.setContent(n,o),A6=(e,n,o)=>iA(e).editor.insertContent(n,o),D6=(e,n,o)=>oa(e).selection.getContent(n,o),IW=(e,n)=>oa(e).editor.addVisual(n),Yd=e=>oa(e).init.bindEvents(),uA=(e,n)=>oa(e).autocompleter.addDecoration(n),R6=e=>oa(e).autocompleter.removeDecoration(),M6=(e,n={})=>{const o=n.format?n.format:"html";return D6(e,o,n)},mN=e=>e.dom.length===0?(Ls(e),H.none()):H.some(e),N6=(e,n)=>e.filter(o=>ri.isBookmarkNode(o.dom)).bind(n?vd:jc),ls=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(Q_(c,u,!1,!r),o.setStart(u,f)):(Q_(u,c,!1,!r),o.setEnd(u,f))},FW=(e,n)=>{hl(e).each(o=>{const r=e.dom;n&&Lv(o,Se(r,0))?$x(r,0):!n&&Yw(o,Se(r,r.length))&&J_(r,r.length)})},fN=(e,n,o,r)=>{e.bind(c=>((r?J_:$x)(c.dom,r?c.dom.length:0),n.filter(yc).map(f=>ls(c,f,o,r)))).orThunk(()=>N6(n,r).or(n).filter(yc).map(u=>FW(u,r)))},B6=(e,n)=>{const o=H.from(n.firstChild).map(re.fromDom),r=H.from(n.lastChild).map(re.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(jc).filter(yc).bind(mN),u=r.bind(vd).filter(yc).bind(mN);fN(c,o,e,!0),fN(u,r,e,!1),e.collapse(!1)},Gr=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),$6=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return sp({validate:!1},e.schema).serialize(u)}else return n.content},DC=(e,n,o={})=>{const r=Gr(o,n);JO(e,r).each(c=>{const u=$6(e,c),f=e.selection.getRng();B6(f,f.createContextualFragment(u)),e.selection.setRng(f),Jt(e,f),TC(e,u,c)})},gN=(e,n,o)=>{if(kn(e,n)){const r=mn(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var P6=(e,n)=>{let o,r;const c=(b,y)=>gs(y,k=>e.is(k,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,k=u(y),N={};pt(o,(R,L)=>{c(L,k).each(Q=>{r[L]||(Ve(R,te=>{te(!0,{node:Q,selector:L,parents:k})}),r[L]=R),N[L]=R})}),pt(r,(R,L)=>{N[L]||(delete r[L],Ve(R,Q=>{Q(!1,{node:y,selector:L,parents:k})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{gN(o,b,y),gN(r,b,y)}})}};const hN=e=>!!(e&&e.ownerDocument)&&Ml(re.fromDom(e.ownerDocument),re.fromDom(e)),pN=e=>e?hN(e.startContainer)&&hN(e.endContainer):!1,th=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=P6(e,r),b=(wt,un)=>{const jo=e.createRng();Pe(wt)&&Pe(un)?(jo.setStart(wt,un),jo.setEnd(wt,un),_e(jo),ve(!1)):(yv(e,jo,r.getBody(),!0),_e(jo))},y=wt=>M6(r,wt),k=(wt,un)=>DC(r,wt,un),N=wt=>l3(r.getBody(),we(),wt),R=wt=>i3(r.getBody(),we(),wt),L=(wt,un)=>Lc.getBookmark(wt,un),Q=wt=>Lc.moveToBookmark(wt),te=(wt,un)=>($5(e,wt,un).each(_e),wt),j=()=>{const wt=we(),un=he();return!wt||wt.item?!1:wt.compareEndPoints?wt.compareEndPoints("StartToEnd",wt)===0:!un||wt.collapsed},ee=()=>{const wt=we(),un=r.getBody().querySelectorAll('[data-mce-selected="1"]');return un.length>0?us(un,jo=>e.isEditable(jo.parentElement)):wt.startContainer===wt.endContainer?e.isEditable(wt.startContainer):e.isEditable(wt.startContainer)&&e.isEditable(wt.endContainer)},ve=wt=>{const un=we();un.collapse(!!wt),_e(un)},he=()=>n.getSelection?n.getSelection():n.document.selection,we=()=>{let wt;const un=(It,En,On)=>{try{return En.compareBoundaryPoints(It,On)}catch{return-1}},jo=n.document;if(Pe(r.bookmark)&&!op(r)){const It=Nf(r);if(It.isSome())return It.map(En=>F_(r,[En])[0]).getOr(jo.createRange())}try{const It=he();It&&!Cn(It.anchorNode)&&(It.rangeCount>0?wt=It.getRangeAt(0):wt=jo.createRange(),wt=F_(r,[wt])[0])}catch{}if(wt||(wt=jo.createRange()),lf(wt.startContainer)&&wt.collapsed){const It=e.getRoot();wt.setStart(It,0),wt.setEnd(It,0)}return c&&u&&(un(wt.START_TO_START,wt,c)===0&&un(wt.END_TO_END,wt,c)===0?wt=u:(c=null,u=null)),wt},_e=(wt,un)=>{if(!pN(wt))return;const jo=he();if(wt=r.dispatch("SetSelectionRange",{range:wt,forward:un}).range,jo){u=wt;try{jo.removeAllRanges(),jo.addRange(wt)}catch{}un===!1&&jo.extend&&(jo.collapse(wt.endContainer,wt.endOffset),jo.extend(wt.startContainer,wt.startOffset)),c=jo.rangeCount>0?jo.getRangeAt(0):null}if(!wt.collapsed&&wt.startContainer===wt.endContainer&&(jo!=null&&jo.setBaseAndExtent)&&wt.endOffset-wt.startOffset<2&&wt.startContainer.hasChildNodes()){const En=wt.startContainer.childNodes[wt.startOffset];En&&En.nodeName==="IMG"&&(jo.setBaseAndExtent(wt.startContainer,wt.startOffset,wt.endContainer,wt.endOffset),(jo.anchorNode!==wt.startContainer||jo.focusNode!==wt.endContainer)&&jo.setBaseAndExtent(En,0,En,1))}r.dispatch("AfterSetSelectionRange",{range:wt,forward:un})},qe=wt=>(k(e.getOuterHTML(wt)),wt),At=()=>N5(r.getBody(),we()),St=(wt,un)=>B5(e,we(),wt,un),$e=()=>{const wt=he(),un=wt==null?void 0:wt.anchorNode,jo=wt==null?void 0:wt.focusNode;if(!wt||!un||!jo||Cn(un)||Cn(jo))return!0;const It=e.createRng(),En=e.createRng();try{It.setStart(un,wt.anchorOffset),It.collapse(!0),En.setStart(jo,wt.focusOffset),En.collapse(!0)}catch{return!0}return It.compareBoundaryPoints(It.START_TO_START,En)<=0},ra={dom:e,win:n,serializer:o,editor:r,expand:(wt={type:"word"})=>_e(Qh(e).expand(we(),wt)),collapse:ve,setCursorLocation:b,getContent:y,setContent:k,getBookmark:L,moveToBookmark:Q,select:te,isCollapsed:j,isEditable:ee,isForward:$e,setNode:qe,getNode:At,getSel:he,setRng:_e,getRng:we,getStart:N,getEnd:R,getSelectedBlocks:St,normalize:()=>{const wt=we(),un=he();if(!Gh(un)&&lw(r)){const jo=Lm(e,wt);return jo.each(It=>{_e(It,$e())}),jo.getOr(wt)}return wt},selectorChanged:(wt,un)=>(f(wt,un),ra),selectorChangedWithUnbind:f,getScrollContainer:()=>{let wt,un=e.getRoot();for(;un&&un.nodeName!=="BODY";){if(un.scrollHeight>un.clientHeight){wt=un;break}un=un.parentNode}return wt},scrollIntoView:(wt,un)=>{Pe(wt)?Ze(r,wt,un):Jt(r,we(),un)},placeCaretAt:(wt,un)=>_e(Hw(wt,un,r.getDoc())),getBoundingClientRect:()=>{const wt=we();return wt.collapsed?Se.fromRangeStart(wt).getClientRects()[0]:wt.getBoundingClientRect()},destroy:()=>{n=c=u=null,fc.destroy()}},Lc=ri(ra),fc=px(ra,r);return ra.bookmarkManager=Lc,ra.controlSelection=fc,ra},Xi=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const k=r[y];let N=k.attr(u);N!==void 0?(k.attr(c,N.length>0?N:null),k.attr(u,null)):(N=k.attr(c),c==="style"?N=o.serializeStyle(o.parseStyle(N),k.name):f&&(N=f.call(b,N,c,k.name)),k.attr(c,N.length>0?N:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(H.from(b.firstChild).exists(k=>{var N;return!We((N=k.value)!==null&&N!==void 0?N:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=hf.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],k=y.firstChild,N=(u=k==null?void 0:k.value)!==null&&u!==void 0?u:"";if(c==="script"){const R=y.attr("type");R&&y.attr("type",R==="mce-no/type"?null:R.replace(/^mce\-/,"")),n.element_format==="xhtml"&&k&&N.length>0&&(k.value=`// <![CDATA[
`+f(N)+`
// ]]>`)}else n.element_format==="xhtml"&&k&&N.length>0&&(k.value=`<!--
`+f(N)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{Ve(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)})},RC=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Z1=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");et.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return vw(e,{...o,node:u}),r&&(c.doc=r),u},If=(e,n)=>Pe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,MC=(e,n,o)=>If(e,o)?Z1(e,n,o):n,dA=(e,n,o)=>{et.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},mA=(e,n,o)=>!n.no_events&&e?yw(e,{...n,content:o}).content:o,bN=(e,n,o)=>{const r=ut(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||za(re.fromDom(n))?r:et.trim(r)},vN=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return RC(c),c},I6=(e,n,o)=>sp(e,n).serialize(o),F6=(e,n,o,r,c)=>{const u=I6(n,o,r);return mA(e,c,u)},yN=(e,n)=>{const o=["data-mce-selected"],r=n&&n.dom?n.dom:tr.DOM,c=n&&n.schema?n.schema:Ci(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const u=mp(e,c);Xi(u,e,r);const f=(b,y={})=>{const k={format:"html",...y},N=MC(n,b,k),R=bN(r,N,k),L=vN(u,R,k);return k.format==="tree"?L:F6(n,e,c,L,k)};return{schema:c,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:f,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:je(dA,u,o),getTempAttrs:rt(o),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},fA=(e,n)=>{const o=yN(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},wN="html",CN=(e,n)=>({...e,format:n,get:!0,getInner:!0}),gA=(e,n={})=>{const o=n.format?n.format:wN,r=CN(n,o);return YO(e,r).fold(Fo,c=>{const u=_6(e,c);return XO(e,u,c)})},LW="html",L6=(e,n)=>({format:LW,...e,set:!0,content:n}),SN=(e,n,o={})=>{const r=L6(o,n);return JO(e,r).map(c=>{const u=O6(e,c.content,c);return TC(e,u.html,c),u.content}).getOr(n)},H6="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),V6="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Ff="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),z6=[{name:"template",replacedWith:"Advanced Template"}],U6=(e,n)=>{const o=mn(n,r=>kn(e,r));return Gt(o)},W6=e=>{const n=U6(e,H6),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Gt(n)},NC=e=>U6(e,V6),xN=(e,n)=>{const o=et.makeMap(e.plugins," "),c=mn(n,u=>kn(o,u));return Gt(c)},TN=e=>xN(e,Ff),kN=e=>xN(e,z6.map(n=>n.name)),EN=(e,n)=>{const o=W6(e),r=TN(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",k=c?`

Plugins:${b}${r.join(b)}`:"",N=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+k+N)}},Z6=e=>gs(z6,n=>n.name===e).fold(()=>e,n=>`${e}, replaced by ${n.replacedWith}`),j6=(e,n)=>{const o=NC(e),r=kN(n),c=r.length>0,u=o.length>0;if(c||u){const f=`
- `,b=c?`

Plugins:${f}${r.map(Z6).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+y)}},fp=(e,n)=>{EN(e,n),j6(e,n)},TT=tr.DOM,G6=e=>{TT.setStyle(e.id,"display",e.orgDisplay)},kT=e=>H.from(e).each(n=>n.destroy()),q6=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},K6=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),TT.unbind(n,"submit reset",e.formEventDelegate))},Y6=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Pe(c==null?void 0:c.nextSibling)&&TT.remove(c.nextSibling),ww(e),e.editorManager.remove(e),!e.inline&&r&&G6(e),p_(e),TT.remove(e.getContainer()),kT(n),kT(o),e.destroy()}},X6=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),kT(o),kT(r)),K6(e),q6(e),e.destroyed=!0}},ET=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>kn(e,c)}})(),e0=Cs.ModelManager,_N=(e,n)=>n.dom[e],J6=(e,n)=>parseInt(pi(n,e),10),BC=je(_N,"clientWidth"),Q6=je(_N,"clientHeight"),hA=je(J6,"margin-top"),e8=je(J6,"margin-left"),t8=e=>e.dom.getBoundingClientRect(),n8=(e,n,o)=>{const r=BC(e),c=Q6(e);return n>=0&&o>=0&&n<=r&&o<=c},o8=(e,n,o,r)=>{const c=t8(n),u=e?c.left+n.dom.clientLeft+e8(n):0,f=e?c.top+n.dom.clientTop+hA(n):0,b=o-u,y=r-f;return{x:b,y}},j1=(e,n,o)=>{const r=re.fromDom(e.getBody()),c=e.inline?r:uh(r),u=o8(e.inline,c,n,o);return n8(c,u.x,u.y)},G1=e=>H.from(e).map(re.fromDom),_T=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return G1(n).map(Ni).getOr(!1)};var OT=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const gp=e=>{const n=[],o=()=>{const L=e.theme;return L&&L.getNotificationManagerImpl?L.getNotificationManagerImpl():OT()},r=()=>H.from(n[0]),c=(L,Q)=>L.type===Q.type&&L.text===Q.text&&!L.progressBar&&!L.timeout&&!Q.progressBar&&!Q.timeout,u=()=>{Ve(n,L=>{L.reposition()})},f=L=>{n.push(L)},b=L=>{ir(n,Q=>Q===L).each(Q=>{n.splice(Q,1)})},y=(L,Q=!0)=>e.removed||!_T(e)?{}:(Q&&e.dispatch("BeforeOpenNotification",{notification:L}),gs(n,te=>c(o().getArgs(te),L)).getOrThunk(()=>{e.editorManager.setActive(e);const te=o().open(L,()=>{b(te),u(),r().fold(()=>e.focus(),j=>Fn(re.fromDom(j.getEl())))});return f(te),u(),e.dispatch("OpenNotification",{notification:{...te}}),te})),k=()=>{r().each(L=>{o().close(L),b(L),u()})},N=rt(n);return(L=>{L.on("SkinLoaded",()=>{const Q=TS(L);Q&&y({text:Q,type:"warning",timeout:0},!1),u()}),L.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),L.on("remove",()=>{Ve(n.slice(),Q=>{o().close(Q)})})})(e),{open:y,close:k,getNotifications:N}},Xd=Cs.PluginManager,Lf=Cs.ThemeManager;var AT=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const pA=e=>{let n=[];const o=()=>{const j=e.theme;return j&&j.getWindowManagerImpl?j.getWindowManagerImpl():AT()},r=(j,ee)=>(...ve)=>ee?ee.apply(j,ve):void 0,c=j=>{e.dispatch("OpenWindow",{dialog:j})},u=j=>{e.dispatch("CloseWindow",{dialog:j})},f=j=>{n.push(j),c(j)},b=j=>{u(j),n=mn(n,ee=>ee!==j),n.length===0&&e.focus()},y=()=>H.from(n[n.length-1]),k=j=>{e.editorManager.setActive(e),li(e),e.ui.show();const ee=j();return f(ee),ee},N=(j,ee)=>k(()=>o().open(j,ee,b)),R=j=>k(()=>o().openUrl(j,b)),L=(j,ee,ve)=>{const he=o();he.alert(j,r(ve||he,ee))},Q=(j,ee,ve)=>{const he=o();he.confirm(j,r(ve||he,ee))},te=()=>{y().each(j=>{o().close(j),b(j)})};return e.on("remove",()=>{Ve(n,j=>{o().close(j)})}),{open:N,openUrl:R,alert:L,confirm:Q,close:te}},DT=(e,n)=>{e.notificationManager.open({type:"error",text:n})},t0=(e,n)=>{e._skinLoaded?DT(e,n):e.on("SkinLoaded",()=>{DT(e,n)})},ON=(e,n)=>{t0(e,Gu.translate(["Failed to upload image: {0}",n]))},n0=(e,n,o)=>{Tw(e,n,{message:o}),console.error(o)},Hf=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,AN=(e,n,o)=>{n0(e,"PluginLoadError",Hf("plugin",n,o))},DN=(e,n,o)=>{n0(e,"IconsLoadError",Hf("icons",n,o))},RN=(e,n,o)=>{n0(e,"LanguageLoadError",Hf("language",n,o))},RT=(e,n,o)=>{n0(e,"ThemeLoadError",Hf("theme",n,o))},MN=(e,n,o)=>{n0(e,"ModelLoadError",Hf("model",n,o))},NN=(e,n,o)=>{const r=Gu.translate(["Failed to initialize plugin: {0}",n]);Tw(e,"PluginLoadError",{message:r}),$C(r,o),t0(e,r)},$C=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},BN=e=>/^[a-z0-9\-]+$/i.test(e),nh=e=>nd(e,Qb(e)),hp=e=>nd(e,Dy(e)),nd=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return jt(n,u=>BN(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},s8=e=>{e.contentCSS=e.contentCSS.concat(nh(e),hp(e))},r8=e=>e?Rs(e.getElementsByTagName("img")):[],a8=(e,n)=>{const o={};return{findAll:(c,u=mt)=>{const f=mn(r8(c),y=>{const k=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!k||k===Lo.transparentSrc?!1:ds(k,"blob:")?!e.isUploaded(k)&&u(y):ds(k,"data:")?u(y):!1}),b=jt(f,y=>{const k=y.src;if(kn(o,k))return o[k].then(N=>G(N)?N:{image:y,blobInfo:N.blobInfo});{const N=pM(n,k).then(R=>(delete o[k],{image:y,blobInfo:R})).catch(R=>(delete o[k],R));return o[k]=N,N}});return Promise.all(b)}}},$N=()=>{let o={};const r=(L,Q)=>({status:L,resultUri:Q}),c=L=>L in o;return{hasBlobUri:c,getResultUri:L=>{const Q=o[L];return Q?Q.resultUri:null},isPending:L=>c(L)?o[L].status===1:!1,isUploaded:L=>c(L)?o[L].status===2:!1,markPending:L=>{o[L]=r(1,null)},markUploaded:(L,Q)=>{o[L]=r(2,Q)},removeFailed:L=>{delete o[L]},destroy:()=>{o={}}}};let c8=0;const l8=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},i8=e=>e+c8+++l8(),u8=()=>{let e=[];const n=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,L,Q,te,j)=>{if(G(R))return r({id:R,name:te,filename:j,blob:L,base64:Q});if(Xe(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const L=R.id||i8("blobid"),Q=R.name||L,te=R.blob;return{id:rt(L),name:rt(Q),filename:rt(R.filename||Q+"."+n(te.type)),blob:rt(te),base64:rt(R.base64),blobUri:rt(R.blobUri||URL.createObjectURL(te)),uri:rt(R.uri)}},c=R=>{f(R.id())||e.push(R)},u=R=>gs(e,R).getOrUndefined(),f=R=>u(L=>L.id()===R);return{create:o,add:c,get:f,getByUri:R=>u(L=>L.blobUri()===R),getByData:(R,L)=>u(Q=>Q.base64()===R&&Q.blob().type===L),findFirst:u,removeByUri:R=>{e=mn(e,L=>L.blobUri()===R?(URL.revokeObjectURL(L.blobUri()),!1):!0)},destroy:()=>{Ve(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},d8=(e,n)=>{const o={},r=(j,ee)=>j?j.replace(/\/$/,"")+"/"+ee.replace(/^\//,""):ee,c=(j,ee)=>new Promise((ve,he)=>{const we=new XMLHttpRequest;we.open("POST",n.url),we.withCredentials=n.credentials,we.upload.onprogress=qe=>{ee(qe.loaded/qe.total*100)},we.onerror=()=>{he("Image upload failed due to a XHR Transport error. Code: "+we.status)},we.onload=()=>{if(we.status<200||we.status>=300){he("HTTP Error: "+we.status);return}const qe=JSON.parse(we.responseText);if(!qe||!G(qe.location)){he("Invalid JSON: "+we.responseText);return}ve(r(n.basePath,qe.location))};const _e=new FormData;_e.append("file",j.blob(),j.filename()),we.send(_e)}),u=fe(n.handler)?n.handler:c,f=()=>new Promise(j=>{j([])}),b=(j,ee)=>({url:ee,blobInfo:j,status:!0}),y=(j,ee)=>({url:"",blobInfo:j,status:!1,error:ee}),k=(j,ee)=>{et.each(o[j],ve=>{ve(ee)}),delete o[j]},N=(j,ee,ve)=>(e.markPending(j.blobUri()),new Promise(he=>{let we,_e;try{const qe=()=>{we&&(we.close(),_e=Wt)},At=$e=>{qe(),e.markUploaded(j.blobUri(),$e),k(j.blobUri(),b(j,$e)),he(b(j,$e))},St=$e=>{qe(),e.removeFailed(j.blobUri()),k(j.blobUri(),y(j,$e)),he(y(j,$e))};_e=$e=>{$e<0||$e>100||H.from(we).orThunk(()=>H.from(ve).map(Bo)).each(Be=>{we=Be,Be.progressBar.value($e)})},ee(j,_e).then(At,$e=>{St(G($e)?{message:$e}:$e)})}catch(qe){he(y(j,qe))}})),R=j=>j===c,L=j=>{const ee=j.blobUri();return new Promise(ve=>{o[ee]=o[ee]||[],o[ee].push(ve)})},Q=(j,ee)=>(j=et.grep(j,ve=>!e.isUploaded(ve.blobUri())),Promise.all(et.map(j,ve=>e.isPending(ve.blobUri())?L(ve):N(ve,u,ee))));return{upload:(j,ee)=>!n.url&&R(u)?f():Q(j,ee)}},PN=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),IN=(e,n)=>d8(n,{url:wf(e),basePath:yS(e),credentials:Ay(e),handler:AE(e)}),m8=e=>{const n=$N(),o=IN(e,n);return{upload:(r,c=!0)=>o.upload(r,c?PN(e):void 0)}},bA=e=>{const n=u8();let o,r;const c=$N(),u=[],f=we=>_e=>e.selection?we(_e):[],b=we=>we+(we.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(we,_e,qe)=>{let At=0;do At=we.indexOf(_e,At),At!==-1&&(we=we.substring(0,At)+qe+we.substr(At+_e.length),At+=qe.length-_e.length+1);while(At!==-1);return we},k=(we,_e,qe)=>{const At=`src="${qe}"${qe===Lo.transparentSrc?' data-mce-placeholder="1"':""}`;return we=y(we,`src="${_e}"`,At),we=y(we,'data-mce-src="'+_e+'"','data-mce-src="'+qe+'"'),we},N=(we,_e)=>{Ve(e.undoManager.data,qe=>{qe.type==="fragmented"?qe.fragments=jt(qe.fragments,At=>k(At,we,_e)):qe.content=k(qe.content,we,_e)})},R=(we,_e)=>{const qe=e.convertURL(_e,"src");N(we.src,_e),oc(re.fromDom(we),{src:Wi(e)?b(_e):_e,"data-mce-src":qe})},L=()=>(o||(o=IN(e,c)),ee().then(f(we=>{const _e=jt(we,qe=>qe.blobInfo);return o.upload(_e,PN(e)).then(f(qe=>{const At=[];let St=!1;const $e=jt(qe,(Be,Ut)=>{const{blobInfo:gn,image:An}=we[Ut];let ao=!1;return Be.status&&OE(e)?(Be.url&&!xs(An.src,Be.url)&&(St=!0),n.removeByUri(An.src),Pf(e)||R(An,Be.url)):Be.error&&(Be.error.remove&&(N(An.src,Lo.transparentSrc),At.push(An),ao=!0),ON(e,Be.error.message)),{element:An,status:Be.status,uploadUri:Be.url,blobInfo:gn,removed:ao}});return At.length>0&&!Pf(e)?e.undoManager.transact(()=>{Ve(At,Be=>{e.dom.remove(Be),n.removeByUri(Be.src)})}):St&&e.undoManager.dispatchChange(),$e}))}))),Q=()=>Yb(e)?L():Promise.resolve([]),te=we=>us(u,_e=>_e(we)),j=we=>{u.push(we)},ee=()=>(r||(r=a8(c,n)),r.findAll(e.getBody(),te).then(f(we=>{const _e=mn(we,qe=>G(qe)?(t0(e,qe),!1):!0);return Pf(e)||Ve(_e,qe=>{N(qe.image.src,qe.blobInfo.blobUri()),qe.image.src=qe.blobInfo.blobUri(),qe.image.removeAttribute("data-mce-src")}),_e}))),ve=()=>{n.destroy(),c.destroy(),r=o=null},he=we=>we.replace(/src="(blob:[^"]+)"/g,(_e,qe)=>{const At=c.getResultUri(qe);if(At)return'src="'+At+'"';let St=n.getByUri(qe);return St||(St=qo(e.editorManager.get(),($e,Be)=>$e||Be.editorUpload&&Be.editorUpload.blobCache.getByUri(qe),void 0)),St?'src="data:'+St.blob().type+";base64,"+St.base64()+'"':_e});return e.on("SetContent",()=>{Yb(e)?Q():ee()}),e.on("RawSaveContent",we=>{we.content=he(we.content)}),e.on("GetContent",we=>{we.source_view||we.format==="raw"||we.format==="tree"||(we.content=he(we.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",we=>{Ve(we,_e=>{const qe=_e.attr("src");if(!qe||n.getByUri(qe))return;const At=c.getResultUri(qe);At&&_e.attr("src",At)})})}),{blobCache:n,addFilter:j,uploadImages:L,uploadImagesAuto:Q,scanForImages:ee,destroy:ve}},vA=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>Ht(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{et.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return et.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},yA={remove_similar:!0,inherit:!1},o0={selector:"td,th",...yA},f8={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...o0},tablecellverticalalign:{styles:{"vertical-align":"%value"},...o0},tablecellbordercolor:{styles:{borderColor:"%value"},...o0},tablecellclass:{classes:["%value"],...o0},tableclass:{selector:"table",classes:["%value"],...yA},tablecellborderstyle:{styles:{borderStyle:"%value"},...o0},tablecellborderwidth:{styles:{borderWidth:"%value"},...o0}},FN=rt(f8),LN=e=>{const n={},o=f=>Pe(f)?n[f]:n,r=f=>kn(n,f),c=(f,b)=>{f&&(G(f)?(at(b)||(b=[b]),Ve(b,y=>{Dn(y.deep)&&(y.deep=!Wl(y)),Dn(y.split)&&(y.split=!Wl(y)||Ia(y)),Dn(y.remove)&&Wl(y)&&!Ia(y)&&(y.remove="none"),Wl(y)&&Ia(y)&&(y.mixed=!0,y.block_expand=!0),G(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):pt(f,(y,k)=>{c(k,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(vA(e)),c(FN()),c(ll(e)),{get:o,has:r,register:c,unregister:u}},s0=et.each,Au=tr.DOM,MT=e=>Pe(e)&&Xe(e),NT=(e,n)=>{const o=n&&n.schema||Ci({}),r=(y,k)=>{k.classes.length>0&&Au.addClass(y,k.classes.join(" ")),Au.setAttribs(y,k.attrs)},c=y=>{const k=G(y)?{name:y,classes:[],attrs:{}}:y,N=Au.create(k.name);return r(N,k),N},u=(y,k)=>{const N=o.getElementRule(y.nodeName.toLowerCase()),R=N==null?void 0:N.parentsRequired;return R&&R.length?k&&qt(R,k)?k:R[0]:!1},f=(y,k,N)=>{let R;const L=k[0],Q=MT(L)?L.name:void 0,te=u(y,Q);if(te)Q===te?(R=L,k=k.slice(1)):R=te;else if(L)R=L,k=k.slice(1);else if(!N)return y;const j=R?c(R):Au.create("div");j.appendChild(y),N&&et.each(N,ve=>{const he=c(ve);j.insertBefore(he,y)});const ee=MT(R)?R.siblings:void 0;return f(j,k,ee)},b=Au.create("div");if(e.length>0){const y=e[0],k=c(y),N=MT(y)?y.siblings:void 0;b.appendChild(f(k,e.slice(1),N))}return b},g8=e=>{e=et.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":et.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},h8=e=>G(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),et.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=et.map(n.split(/(?:~\+|~|\+)/),g8),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],Vf=(e,n)=>{let o="",r=Ny(e);if(r==="")return"";const c=L=>G(L)?L.replace(/%(\w+)/g,""):"",u=(L,Q)=>Au.getStyle(Q??e.getBody(),L,!0);if(G(n)){const L=e.formatter.get(n);if(!L)return"";n=L[0]}if("preview"in n){const L=n.preview;if(L===!1)return"";r=L||r}let f=n.block||n.inline||"span",b;const y=h8(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=NT(y,e)):b=NT([f],e);const k=Au.select(f,b)[0]||b.firstChild;s0(n.styles,(L,Q)=>{const te=c(L);te&&Au.setStyle(k,Q,te)}),s0(n.attributes,(L,Q)=>{const te=c(L);te&&Au.setAttrib(k,Q,te)}),s0(n.classes,L=>{const Q=c(L);Au.hasClass(k,Q)||Au.addClass(k,Q)}),e.dispatch("PreviewFormats"),Au.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const N=u("fontSize"),R=/px$/.test(N)?parseInt(N,10):0;return s0(r.split(" "),L=>{let Q=u(L,k);if(!(L==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(Q)&&(Q=u(L),jh(Q).toLowerCase()==="#ffffff"))&&!(L==="color"&&jh(Q).toLowerCase()==="#000000")){if(L==="font-size"&&/em|%$/.test(Q)){if(R===0)return;Q=parseFloat(Q)/(/%$/.test(Q)?100:1)*R+"px"}L==="border"&&Q&&(o+="padding:0 2px;"),o+=L+":"+Q+";"}}),e.dispatch("AfterPreviewFormats"),Au.remove(b),o},Jd=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},PC=e=>{const n=LN(e),o=Na({});return Jd(e),YF(e),Pf(e)||uL(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{T6(e,r,c,u)},remove:(r,c,u,f)=>{k6(e,r,c,u,f)},toggle:(r,c,u)=>{E6(e,r,c,u)},match:(r,c,u,f)=>S6(e,r,c,u,f),closest:r=>uN(e,r),matchAll:(r,c)=>x6(e,r,c),matchNode:(r,c,u,f)=>AC(e,r,c,u,f),canApply:r=>iN(e,r),formatChanged:(r,c,u,f)=>dN(e,o,r,c,u,f),getCssText:je(Vf,e)}},wA=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},BT=(e,n,o)=>{const r=Na(!1),c=y=>{Oi(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const k=y.command;wA(k)||(tN(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const k=y.command;wA(k)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const k=y.keyCode;y.isDefaultPrevented()||((k>=33&&k<=36||k>=37&&k<=40||k===45||y.ctrlKey)&&(c(),e.nodeChanged()),(k===46||k===8)&&e.nodeChanged(),r.get()&&n.typing&&!aA(EC(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",y=>{const k=y.keyCode;if(y.isDefaultPrevented())return;if(k>=33&&k<=36||k>=37&&k<=40||k===45){n.typing&&c(y);return}const N=y.ctrlKey&&!y.altKey||y.metaKey;(k<16||k>20)&&k!==224&&k!==91&&!n.typing&&!N&&(n.beforeChange(),Oi(n,!0,o),n.add({},y),r.set(!0))}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},HN=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},CA=e=>{const n=Wa(),o=Na(0),r=Na(0),c={data:[],typing:!1,beforeChange:()=>{xT(e,o,n)},add:(u,f)=>OC(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=EC(e);u.bookmark=ac(e.selection),e.dispatch("change",{level:u,lastLevel:nn(c.data,r.get()).getOrUndefined()})},undo:()=>rN(e,c,o,r),redo:()=>aN(e,r,c.data),clear:()=>{b6(e,c,r)},reset:()=>{cN(e,c)},hasUndo:()=>v6(e,c,r),hasRedo:()=>y6(e,c,r),transact:u=>w6(e,c,o,u),ignore:u=>{C6(e,o,u)},extra:(u,f)=>{lN(e,c,r,u,f)}};return Pf(e)||BT(e,c,o),HN(e),c},VN=[9,27,sn.HOME,sn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,sn.DOWN,sn.UP,sn.LEFT,sn.RIGHT].concat(Lo.browser.isFirefox()?[224]:[]),SA="data-mce-placeholder",xA=e=>e.type==="keydown"||e.type==="keyup",TA=e=>{const n=e.keyCode;return n===sn.BACKSPACE||n===sn.DELETE},$T=e=>{if(xA(e)){const n=e.keyCode;return!TA(e)&&(sn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||qt(VN,n))}else return!1},kA=e=>xA(e)&&!(TA(e)||e.type==="keyup"&&e.keyCode===229),p8=(e,n,o)=>{if($s(re.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},b8=e=>{var n;const o=e.dom,r=Ui(e),c=(n=Ry(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if($T(f))return;const y=e.getBody(),k=kA(f)?!1:p8(o,y,r);(o.getAttrib(y,SA)!==""!==k||b)&&(o.setAttrib(y,SA,k?c:null),o.setAttrib(y,"aria-placeholder",k?c:null),Zd(e,k),e.on(k?"keydown":"keyup",u),e.off(k?"keyup":"keydown",u))};Vo(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Ki.setEditorTimeout(e,()=>u(b)))})},v8=(e,n)=>({block:e,position:n}),y8=(e,n)=>({from:e,to:n}),PT=(e,n)=>{const o=re.fromDom(e),r=re.fromDom(n.container());return Px(o,r).map(c=>v8(c,n))},w8=e=>!os(e.from.block,e.to.block),zN=(e,n)=>E(n,c=>Il(c)||ys(c.dom),c=>os(c,e)).filter(_s).getOr(e),EA=(e,n)=>{const o=re.fromDom(e);return os(zN(o,n.from.block),zN(o,n.to.block))},C8=e=>cs(e.from.block.dom)===!1&&cs(e.to.block.dom)===!1,S8=e=>{const n=o=>Te(o)||ff(o.dom);return n(e.from.block)&&n(e.to.block)},x8=(e,n,o)=>xr(o.position.getNode())&&!$s(o.block)?Ld(!1,o.block.dom).bind(r=>r.isEqual(o.position)?ji(n,e,r).bind(c=>PT(e,c)):H.some(o)).getOr(o):o,T8=(e,n,o)=>{const r=PT(e,Se.fromRangeStart(o)),c=r.bind(u=>ji(n,e,u.position).bind(f=>PT(e,f).map(b=>x8(e,n,b))));return Zr(r,c,y8).filter(u=>w8(u)&&EA(e,u)&&C8(u)&&S8(u))},k8=(e,n,o)=>o.collapsed?T8(e,n,o):H.none(),E8=e=>{const n=Ra(e);return ir(n,Tc).fold(rt(n),o=>n.slice(0,o))},UN=e=>{const n=E8(e);return Ve(n,Ls),n},IC=(e,n)=>{const o=Yg(n,e);return gs(o.reverse(),r=>$s(r)).each(Ls)},_A=e=>mn(mh(e),n=>!$s(n)).length===0,_8=(e,n,o,r)=>{if($s(o))return F(o),si(o.dom);_A(r)&&$s(n)&&as(r,re.fromTag("br"));const c=Su(o.dom,Se.before(r.dom));return Ve(UN(n),u=>{as(r,u)}),IC(e,n),c},O8=(e,n,o)=>{if($s(o)){if($s(n)){const u=Ka((f=>{const b=(y,k)=>wd(y).fold(()=>k,N=>Ic(N)?b(N,k.concat(Sg(N))):k);return b(f,[])})(o),(f,b)=>(bb(f,b),b),S());Ns(n),Mr(n,u)}return Ls(o),si(n.dom)}const r=Tf(o.dom);return Ve(UN(n),c=>{Mr(o,c)}),IC(e,n),r},A8=(e,n)=>{const o=Yg(n,e);return H.from(o[o.length-1])},D8=(e,n)=>Ml(n,e)?A8(n,e):H.none(),OA=(e,n)=>{Ld(e,n.dom).bind(o=>H.from(o.getNode())).map(re.fromDom).filter(Vu).each(Ls)},WN=(e,n,o)=>(OA(!0,n),OA(!1,o),D8(n,o).fold(je(O8,e,n,o),je(_8,e,n,o))),ZN=(e,n,o,r)=>n?WN(e,r,o):WN(e,o,r),FC=(e,n)=>{const o=re.fromDom(e.getBody());return k8(o.dom,n,e.selection.getRng()).map(c=>()=>{ZN(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},R8=(e,n)=>{const o=n.getRng();return Zr(Px(e,re.fromDom(o.startContainer)),Px(e,re.fromDom(o.endContainer)),(r,c)=>os(r,c)?H.none():H.some(()=>{o.deleteContents(),ZN(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(H.none())},jN=(e,n)=>{const o=re.fromDom(n),r=je(os,e);return js(o,Il,r).isSome()},M8=(e,n)=>jN(e,n.startContainer)||jN(e,n.endContainer),N8=(e,n)=>{const o=Su(e.dom,Se.fromRangeStart(n)).isNone(),r=Ti(e.dom,Se.fromRangeEnd(n)).isNone();return!M8(e,n)&&o&&r},B8=e=>H.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),$8=e=>{const n=re.fromDom(e.getBody()),o=e.selection.getRng();return N8(n,o)?B8(e):R8(n,e.selection)},AA=(e,n)=>e.selection.isCollapsed()?H.none():$8(e),Qd=(e,n,o,r,c)=>H.from(n._selectionOverrides.showCaret(e,o,r,c)),IT=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},LC=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?H.none():H.some(IT(n)),P8=(e,n,o)=>{const r=Ig(1,e.getBody(),n),c=Se.fromRangeStart(r),u=c.getNode();if(s1(u))return Qd(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(s1(f))return Qd(1,e,f,!1,!1);const b=Bf(e.dom.getRoot(),c.getNode());return s1(b)?Qd(1,e,b,!1,o):H.none()},r0=(e,n,o)=>n.collapsed?P8(e,n,o).getOr(n):n,I8=e=>O1(e)||qw(e),F8=e=>rp(e)||Jn(e),L8=(e,n)=>{ft(n)&&n.data.length===0&&e.remove(n)},GN=(e,n,o,r,c,u)=>{Qd(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),L8(e.dom,o)},H8=(e,n)=>{const o=e.selection.getRng();if(!ft(o.commonAncestorContainer))return H.none();const r=n?ic.Forwards:ic.Backwards,c=Cu(e.getBody()),u=je(Gy,n?c.next:c.prev),f=n?I8:F8,b=Wh(r,e.getBody(),o),y=u(b),k=y&&xo(n,y);if(!k||!Zh(b,k))return H.none();if(f(k))return H.some(()=>GN(e,o,b.getNode(),r,n,k));const N=u(k);return N&&f(N)&&Zh(k,N)?H.some(()=>GN(e,o,b.getNode(),r,n,N)):H.none()},DA=(e,n)=>H8(e,n),RA=(e,n)=>{const o=e.getBody();return n?si(o).filter(O1):Tf(o).filter(rp)},MA=e=>{const n=e.selection.getRng();return!n.collapsed&&(RA(e,!0).exists(o=>o.isEqual(Se.fromRangeStart(n)))||RA(e,!1).exists(o=>o.isEqual(Se.fromRangeEnd(n))))},V8=e=>Pe(e)&&(Il(re.fromDom(e))||mu(re.fromDom(e))),Du=yu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),z8=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Ht(o)&&o.getAttribute("data-mce-caret")===r},VW=(e,n,o,r)=>{const c=u=>Ic(re.fromDom(u))&&!xi(o,r,e);return GD(!n,o).fold(()=>GD(n,r).fold(De,c),c)},od=(e,n,o,r)=>{const c=r.getNode(!n);return Px(re.fromDom(e),re.fromDom(o.getNode())).map(u=>$s(u)?Du.remove(u.dom):Du.moveToElement(c)).orThunk(()=>H.some(Du.moveToElement(c)))},FT=(e,n,o)=>ji(n,e,o).bind(r=>V8(r.getNode())||VW(e,n,o,r)?H.none():n&&cs(r.getNode())||!n&&cs(r.getNode(!0))?od(e,n,o,r):n&&rp(o)||!n&&O1(o)?H.some(Du.moveToPosition(r)):H.none()),qN=(e,n)=>Ye(n)?H.none():e&&cs(n.nextSibling)?H.some(Du.moveToElement(n.nextSibling)):!e&&cs(n.previousSibling)?H.some(Du.moveToElement(n.previousSibling)):H.none(),KN=(e,n,o)=>o.fold(r=>H.some(Du.remove(r)),r=>H.some(Du.moveToElement(r)),r=>xi(n,r,e)?H.none():H.some(Du.moveToPosition(r))),U8=(e,n,o)=>z8(n,o)?qN(n,o.getNode(!n)).orThunk(()=>FT(e,n,o)):FT(e,n,o).bind(r=>KN(e,o,r)),YN=(e,n,o)=>{const r=Ig(n?1:-1,e,o),c=Se.fromRangeStart(r),u=re.fromDom(e);return!n&&rp(c)?H.some(Du.remove(c.getNode(!0))):n&&O1(c)?H.some(Du.remove(c.getNode())):!n&&O1(c)&&O3(u,c)?xW(u,c).map(f=>Du.remove(f.getNode())):n&&rp(c)&&G_(u,c)?lF(u,c).map(f=>Du.remove(f.getNode())):U8(e,n,c)},W8=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),D1(e,n,re.fromDom(o)),!0),XN=(e,n)=>o=>{const r=n?Se.before(o):Se.after(o);return e.selection.setRng(r.toRange()),!0},Z8=e=>n=>(e.selection.setRng(n.toRange()),!0),JN=(e,n)=>H.from(Bf(e.getBody(),n)),j8=(e,n)=>{const o=e.selection.getNode();return JN(e,o).filter(cs).fold(()=>YN(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(W8(e,n),XN(e,n),Z8(e))),()=>H.some(Wt))},a0=e=>{Ve(Cc(e,".mce-offscreen-selection"),Ls)},QN=(e,n)=>{const o=e.selection.getNode();return cs(o)&&!xc(o)?JN(e,o.parentNode).filter(cs).fold(()=>H.some(()=>{a0(re.fromDom(e.getBody())),D1(e,n,re.fromDom(e.selection.getNode())),Jw(e)}),()=>H.some(Wt)):MA(e)?H.some(()=>{X3(e,e.selection.getRng(),re.fromDom(e.getBody()))}):H.none()},NA=e=>{const n=e.dom,o=e.selection,r=Bf(e.getBody(),o.getNode());if(ys(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(Se.before(c).toRange())}return!0},LT=(e,n)=>e.selection.isCollapsed()?j8(e,n):QN(e,n),BA=(e,n)=>{const o=Se.fromRangeStart(e.selection.getRng());return ji(n,e.getBody(),o).filter(r=>n?oF(r):Kn(r)).bind(r=>cv(n?0:-1,r)).map(r=>()=>e.selection.select(r))},$A=(e,n)=>e.selection.isCollapsed()?BA(e,n):H.none(),c0=ft,eB=e=>c0(e)&&e.data[0]===ae,G8=e=>c0(e)&&e.data[e.data.length-1]===ae,q8=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(ae)},zW=e=>{var n;if(c0(e.previousSibling))return G8(e.previousSibling)||e.previousSibling.appendData(ae),e.previousSibling;if(c0(e))return eB(e)||e.insertData(0,ae),e;{const o=q8(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},em=e=>{var n,o;if(c0(e.nextSibling))return eB(e.nextSibling)||e.nextSibling.insertData(0,ae),e.nextSibling;if(c0(e))return G8(e)||e.appendData(ae),e;{const r=q8(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},HT=(e,n)=>e?zW(n):em(n),K8=je(HT,!0),tB=je(HT,!1),VT=(e,n)=>ft(e.container())?HT(n,e.container()):HT(n,e.getNode()),Y8=(e,n)=>{const o=n.get();return o&&e.container()===o&&ws(o)},nB=(e,n)=>n.fold(o=>{Ng(e.get());const r=K8(o);return e.set(r),H.some(Se(r,r.length-1))},o=>si(o).map(r=>{if(Y8(r,e)){const c=e.get();return Se(c,1)}else{Ng(e.get());const c=VT(r,!0);return e.set(c),Se(c,1)}}),o=>Tf(o).map(r=>{if(Y8(r,e)){const c=e.get();return Se(c,c.length-1)}else{Ng(e.get());const c=VT(r,!1);return e.set(c),Se(c,c.length-1)}}),o=>{Ng(e.get());const r=tB(o);return e.set(r),H.some(Se(r,1))}),X8=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return H.none()},sa=yu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),oB=(e,n)=>{const o=Pa(n,e);return o||e},J8=(e,n,o)=>{const r=_u(o),c=oB(n,r.container());return Vm(e,c,r).fold(()=>Ti(c,r).bind(je(Vm,e,c)).map(u=>sa.before(u)),H.none)},Q8=(e,n)=>Mm(e,n)===null,sB=(e,n,o)=>Vm(e,n,o).filter(je(Q8,n)),e7=(e,n,o)=>{const r=G3(o);return sB(e,n,r).bind(c=>Su(c,r).isNone()?H.some(sa.start(c)):H.none())},t7=(e,n,o)=>{const r=_u(o);return sB(e,n,r).bind(c=>Ti(c,r).isNone()?H.some(sa.end(c)):H.none())},q1=(e,n,o)=>{const r=G3(o),c=oB(n,r.container());return Vm(e,c,r).fold(()=>Su(c,r).bind(je(Vm,e,c)).map(u=>sa.after(u)),H.none)},rB=e=>!EF(PA(e)),zf=(e,n,o)=>X8([J8,e7,t7,q1],[e,n,o]).filter(rB),PA=e=>e.fold(Fo,Fo,Fo,Fo),zT=e=>e.fold(rt("before"),rt("start"),rt("end"),rt("after")),l0=e=>e.fold(sa.before,sa.before,sa.after,sa.after),UT=e=>e.fold(sa.start,sa.start,sa.end,sa.end),aB=(e,n)=>zT(e)===zT(n)&&PA(e)===PA(n),cB=(e,n,o,r,c,u)=>Zr(Vm(n,o,r),Vm(n,o,c),(f,b)=>f!==b&&TW(o,f,b)?sa.after(e?f:b):u).getOr(u),n7=(e,n)=>e.fold(mt,o=>!aB(o,n)),HC=(e,n,o,r,c)=>{const u=xo(e,c);return ji(e,o,u).map(je(xo,e)).fold(()=>r.map(l0),y=>zf(n,o,y).map(je(cB,e,n,o,u,y)).filter(je(n7,r))).filter(rB)},o7=(e,n)=>e?n.fold(O(H.some,sa.start),H.none,O(H.some,sa.after),H.none):n.fold(H.none,O(H.some,sa.before),H.none,O(H.some,sa.end)),s7=(e,n,o,r)=>{const c=xo(e,r),u=zf(n,o,c);return zf(n,o,c).bind(je(o7,e)).orThunk(()=>HC(e,n,o,u,r))},r7=e=>fe(e.selection.getSel().modify),lB=(e,n,o)=>{const r=e?1:-1;return n.setRng(Se(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},a7=(e,n)=>{const o=n.selection.getRng(),r=e?Se.fromRangeEnd(o):Se.fromRangeStart(o);return r7(n)?e&&sc(r)?lB(!0,n.selection,r):!e&&Fi(r)?lB(!1,n.selection,r):!1:!1};var Uf;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Uf||(Uf={}));const WT=(e,n)=>e===ic.Backwards?ts(n):n,iB=(e,n,o)=>e===ic.Forwards?n.next(o):n.prev(o),c7=(e,n,o,r)=>xr(r.getNode(n===ic.Forwards))?Uf.Br:xi(o,r)===!1?Uf.Block:Uf.Wrap,pp=(e,n,o,r)=>{const c=Cu(o);let u=r;const f=[];for(;u;){const b=iB(n,c,u);if(!b)break;if(xr(b.getNode(!1)))return n===ic.Forwards?{positions:WT(n,f).concat([b]),breakType:Uf.Br,breakAt:H.some(b)}:{positions:WT(n,f),breakType:Uf.Br,breakAt:H.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=c7(o,n,u,b);return{positions:WT(n,f),breakType:y,breakAt:H.some(b)}}f.push(b),u=b}return{positions:WT(n,f),breakType:Uf.Eol,breakAt:H.none()}},IA=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===ic.Backwards?u.concat(c):[c].concat(u)}).getOr([]),VC=(e,n)=>qo(e,(o,r)=>o.fold(()=>H.some(r),c=>Zr(In(c.getClientRects()),In(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),H.none()),zC=(e,n)=>In(n.getClientRects()).bind(o=>VC(e,o.left)),K1=je(pp,Se.isAbove,-1),tm=je(pp,Se.isBelow,1),FA=je(IA,-1,K1),Ru=je(IA,1,tm),Y1=(e,n)=>K1(e,n).breakAt.isNone(),LA=(e,n)=>tm(e,n).breakAt.isNone(),l7=e=>si(e).map(n=>[n].concat(tm(e,n).positions)).getOr([]),uB=e=>Tf(e).map(n=>K1(e,n).positions.concat(n)).getOr([]),i7=(e,n)=>zC(FA(e,n),n),u7=(e,n)=>zC(Ru(e,n),n),d7=cs,dB=(e,n)=>Math.abs(e.left-n),mB=(e,n)=>Math.abs(e.right-n),fB=e=>zr(e,"node"),gB=(e,n)=>Ie(e,(o,r)=>{const c=Math.min(dB(o,n),mB(o,n)),u=Math.min(dB(r,n),mB(r,n));return u===c&&fB(r)&&d7(r.node)||u<c?r:o}),m7=e=>{const n=o=>jt(o,r=>{const c=xg(r);return c.node=e,c});if(Ht(e))return n(e.getClientRects());if(ft(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},X1=e=>_r(e,m7);var J1;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(J1||(J1={}));const hB=(e,n,o,r)=>{let c=r;for(;c=Sf(c,e,Ll,n);)if(o(c))return},HA=(e,n,o,r,c,u)=>{let f=0;const b=[],y=R=>{let L=X1([R]);e===-1&&(L=L.reverse());for(let Q=0;Q<L.length;Q++){const te=L[Q];if(!o(te,k)){if(b.length>0&&n(te,Kt(b))&&f++,te.line=f,c(te))return!0;b.push(te)}}return!1},k=Kt(u.getClientRects());if(!k)return b;const N=u.getNode();return N&&(y(N),hB(e,r,y,N)),b},VA=(e,n)=>n.line>e,f7=(e,n)=>n.line===e,g7=je(HA,J1.Up,Ul,Tg),h7=je(HA,J1.Down,Tg,Ul),pB=e=>Kt(e.getClientRects()),p7=(e,n,o,r)=>{const c=Cu(n);let u,f,b,y;const k=[];let N=0;e===1?(u=c.next,f=Tg,b=Ul,y=Se.after(r)):(u=c.prev,f=Ul,b=Tg,y=Se.before(r));const R=pB(y);do{if(!y.isVisible())continue;const L=pB(y);if(b(L,R))continue;k.length>0&&f(L,Kt(k))&&N++;const Q=xg(L);if(Q.position=y,Q.line=N,o(Q))return k;k.push(Q)}while(y=u(y));return k},bB=e=>n=>VA(e,n),zA=e=>n=>f7(e,n),Wf=(e,n)=>{e.selection.setRng(n),Jt(e,e.selection.getRng())},UA=(e,n,o)=>H.some(r0(e,n,o)),vB=(e,n,o,r,c,u)=>{const f=n===ic.Forwards,b=Cu(e.getBody()),y=je(Gy,f?b.next:b.prev),k=f?r:c;if(!o.collapsed){const te=bu(o);if(u(te))return Qd(n,e,te,n===ic.Backwards,!1);if(MA(e)){const j=o.cloneRange();return j.collapse(n===ic.Backwards),H.from(j)}}const N=Wh(n,e.getBody(),o);if(k(N))return LC(e,N.getNode(!f));let R=y(N);const L=kh(o);if(R)R=xo(f,R);else return L?H.some(o):H.none();if(k(R))return Qd(n,e,R.getNode(!f),f,!1);const Q=y(R);return Q&&k(Q)&&Zh(R,Q)?Qd(n,e,Q.getNode(!f),f,!1):L?UA(e,R.toRange(),!1):H.none()},Ji=(e,n,o,r,c,u)=>{const f=Wh(n,e.getBody(),o),b=Kt(f.getClientRects()),y=n===J1.Down,k=e.getBody();if(!b)return H.none();if(MA(e)){const ee=y?Se.fromRangeEnd(o):Se.fromRangeStart(o);return(y?u7:i7)(k,ee).orThunk(()=>H.from(ee)).map(he=>he.toRange())}const R=(y?h7:g7)(k,bB(1),f),L=mn(R,zA(1)),Q=b.left,te=gB(L,Q);if(te&&u(te.node)){const ee=Math.abs(Q-te.left),ve=Math.abs(Q-te.right);return Qd(n,e,te.node,ee<ve,!1)}let j;if(r(f)?j=f.getNode():c(f)?j=f.getNode(!0):j=bu(o),j){const ee=p7(n,k,bB(1),j);let ve=gB(mn(ee,zA(1)),Q);if(ve||(ve=Kt(mn(ee,zA(0))),ve))return UA(e,ve.position.toRange(),!1)}return L.length===0?WA(e,y).filter(y?c:r).map(ee=>r0(e,ee.toRange(),!1)):H.none()},WA=(e,n)=>{const o=e.selection.getRng(),r=n?Se.fromRangeEnd(o):Se.fromRangeStart(o),c=n_(r.container(),e.getBody());if(n){const u=tm(c,r);return Ao(u.positions)}else{const u=K1(c,r);return In(u.positions)}},ZT=(e,n,o)=>WA(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),UC=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},jT=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},yB=(e,n,o)=>nB(n,o).map(r=>(UC(e,r),o)),b7=(e,n,o)=>{const r=Se.fromRangeStart(e);if(e.collapsed)return r;{const c=Se.fromRangeEnd(e);return o?Su(n,c).getOr(c):Ti(n,r).getOr(r)}},v7=(e,n,o)=>{const r=e.getBody(),c=b7(e.selection.getRng(),r,o),u=je(M1,e);return s7(o,u,r,c).bind(b=>yB(e,n,b))},y7=(e,n,o)=>{const r=jt(Cc(re.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=mn(r,e),u=mn(o,e);Ve(ot(c,u),je(jT,!1)),Ve(ot(u,c),je(jT,!0))},w7=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Se.fromRangeStart(e.selection.getRng());Se.isTextPosition(r)&&!Xc(r)&&(UC(e,VS(o,r)),n.set(null))}},wB=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=mn(r,e);Ve(c,u=>{const f=Se.fromRangeStart(n.selection.getRng());zf(e,n.getBody(),f).bind(b=>yB(n,o,b))})}},CB=(e,n,o)=>Lh(e)?v7(e,n,o).isSome():!1,SB=(e,n,o)=>Lh(n)?a7(e,n):!1,WC=e=>{const n=Na(null),o=je(M1,e);return e.on("NodeChange",r=>{Lh(e)&&(y7(o,e.dom,r.parents),w7(e,n),wB(o,e,n,r.parents))}),n},oh=je(SB,!0),Q1=je(SB,!1),eb=(e,n,o)=>{if(Lh(e)){const r=WA(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?Se.fromRangeEnd(c):Se.fromRangeStart(c)});return zf(je(M1,e),e.getBody(),r).exists(c=>{const u=l0(c);return nB(o,u).exists(f=>(UC(e,f),!0))})}else return!1},ZA=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},jA=e=>Zr(si(e),Tf(e),(n,o)=>{const r=xo(!0,n),c=xo(!1,o);return Ti(e,r).forall(u=>u.isEqual(c))}).getOr(!0),GA=(e,n)=>o=>nB(n,o).map(r=>()=>UC(e,r)),xB=(e,n,o,r)=>{const c=e.getBody(),u=je(M1,e);e.undoManager.ignore(()=>{e.selection.setRng(ZA(o,r)),Xw(e),zf(u,c,Se.fromRangeStart(e.selection.getRng())).map(UT).bind(GA(e,n)).each(Ts)}),e.nodeChanged()},TB=(e,n)=>{const o=Pa(n,e);return o||e},kB=(e,n,o,r)=>{const c=TB(e.getBody(),r.container()),u=je(M1,e),f=zf(u,c,r);return f.bind(y=>o?y.fold(rt(H.some(UT(y))),H.none,rt(H.some(l0(y))),H.none):y.fold(H.none,rt(H.some(l0(y))),H.none,rt(H.some(UT(y))))).map(GA(e,n)).getOrThunk(()=>{const y=mv(o,c,r),k=y.bind(N=>zf(u,c,N));return Zr(f,k,()=>Vm(u,c,r).bind(N=>jA(N)?H.some(()=>{D1(e,o,re.fromDom(N))}):H.none())).getOrThunk(()=>k.bind(()=>y.map(N=>()=>{o?xB(e,n,r,N):xB(e,n,N,r)})))})},qA=(e,n,o)=>{if(e.selection.isCollapsed()&&Lh(e)){const r=Se.fromRangeStart(e.selection.getRng());return kB(e,n,o,r)}return H.none()},C7=e=>Bc(e)>1,EB=(e,n)=>{const o=re.fromDom(e.getBody()),r=re.fromDom(e.selection.getStart()),c=Yg(r,o);return ir(c,n).fold(rt(c),u=>c.slice(0,u))},S7=e=>EB(e,n=>Tc(n)||C7(n)),x7=e=>EB(e,Tc),_B=(e,n)=>{const o=je(mC,e);return _r(n,r=>o(r)?[r.dom]:[])},KA=e=>{const n=x7(e);return _B(e,n)},OB=(e,n,o,r)=>{const c=_B(n,r);if(c.length===0)D1(n,e,o);else{const u=VR(o.dom,c);n.selection.setRng(u.toRange())}},UW=(e,n)=>{const o=S7(e);return Ao(o).bind(r=>{const c=Se.fromRangeStart(e.selection.getRng());return Y3(n,c,r.dom)&&!_O(r)?H.some(()=>OB(n,e,r,o)):H.none()})},WW=(e,n)=>{const o=n.parentElement;return xr(n)&&!q(o)&&e.dom.isEmpty(o)},ZW=e=>_O(re.fromDom(e)),AB=(e,n)=>{const o=e.selection.getStart(),r=WW(e,o)||ZW(o)?VR(o,n):qd(e,n);e.selection.setRng(r.toRange())},jW=(e,n)=>{const o=ot(n,KA(e));o.length>0&&AB(e,o)},T7=e=>ft(e.startContainer),k7=e=>e.startOffset===0&&T7(e),E7=(e,n)=>{const o=n.startContainer.parentElement;return!q(o)&&mC(e,re.fromDom(o))},GW=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!q(n)&&!q(o)&&n.isEqualNode(o)},_7=e=>{const n=e.endContainer;return e.endOffset===(ft(n)?n.length:n.childNodes.length)},Qi=e=>GW(e)&&_7(e),DB=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),ZC=e=>Qi(e)||DB(e),O7=e=>{const n=e.selection.getRng();return k7(n)&&E7(e,n)&&ZC(n)},RB=e=>{if(O7(e)){const n=KA(e);return H.some(()=>{Xw(e),jW(e,n)})}else return H.none()},GT=(e,n)=>e.selection.isCollapsed()?UW(e,n):RB(e),YA=e=>PR(e,n=>Lr(n.dom),Tc),A7=e=>YA(re.fromDom(e.selection.getStart())),D7=e=>{const n=e.selection.getRng();return n.collapsed&&(T7(n)||e.dom.isEmpty(n.startContainer))&&!A7(e)},i0=e=>(D7(e)&&AB(e,[]),!0),XA=(e,n,o)=>Pe(o)?H.some(()=>{e._selectionOverrides.hideFakeCaret(),D1(e,n,re.fromDom(o))}):H.none(),R7=(e,n)=>{const o=n?qw:Jn,r=n?ic.Forwards:ic.Backwards,c=Wh(r,e.getBody(),e.selection.getRng());return o(c)?XA(e,n,c.getNode(!n)):H.from(xo(n,c)).filter(u=>o(u)&&Zh(c,u)).bind(u=>XA(e,n,u.getNode(!n)))},JA=(e,n)=>{const o=e.selection.getNode();return Xr(o)?XA(e,n,o):H.none()},QA=(e,n)=>e.selection.isCollapsed()?R7(e,n):JA(e,n),qW=e=>E(e,n=>ys(n.dom)||cs(n.dom)).exists(n=>ys(n.dom)),e4=e=>hc(e??"").getOr(0),MB=(e,n)=>{const o=e||kb(n)?"margin":"padding",r=pi(n,"direction")==="rtl"?"-right":"-left";return o+r},t4=(e,n,o,r,c,u)=>{const f=MB(o,re.fromDom(u)),b=e4(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},NB=(e,n)=>us(n,o=>{const r=MB(Ag(e),o),c=$c(o,r).map(e4).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),M7=e=>{const n=$B(e);return!e.mode.isReadOnly()&&(n.length>1||NB(e,n))},BB=e=>cl(e)||mu(e),N7=e=>hl(e).exists(BB),$B=e=>mn(xd(e.selection.getSelectedBlocks()),n=>!BB(n)&&!N7(n)&&qW(n)),qT=(e,n)=>{var o,r;const{dom:c}=e,u=CS(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=e4(u),y=Ag(e);Ve($B(e),k=>{t4(c,n,y,b,f,k.dom)})},KT=e=>qT(e,"indent"),n4=e=>qT(e,"outdent"),o4=e=>{if(e.selection.isCollapsed()&&M7(e)){const n=e.dom,o=e.selection.getRng(),r=Se.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&A1(re.fromDom(c),r))return H.some(()=>n4(e))}return H.none()},PB=(e,n,o)=>pa([o4,LT,DA,(r,c)=>qA(r,n,c),FC,rC,$A,QA,AA,GT],r=>r(e,o)).filter(r=>e.selection.isEditable()),B7=(e,n)=>{PB(e,n,!1).fold(()=>{Xw(e),Jw(e)},Ts)},s4=(e,n)=>{PB(e,n,!0).fold(()=>q3(e),Ts)},$7=(e,n)=>{e.addCommand("delete",()=>{B7(e,n)}),e.addCommand("forwardDelete",()=>{s4(e,n)})},IB=5,P7=400,FB=e=>e.touches===void 0||e.touches.length!==1?H.none():H.some(e.touches[0]),nm=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>IB||r>IB},LB=e=>{const n=Wa(),o=Na(!1),r=Sl(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},P7);e.on("touchstart",c=>{FB(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),FB(c).each(u=>{n.on(f=>{nm(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},YT=(e,n)=>kn(e,n.nodeName),KW=(e,n)=>ft(n)?!0:Ht(n)?!YT(e.getBlockElements(),n)&&!ki(n)&&!wm(e,n):!1,YW=(e,n,o)=>ro(T3(re.fromDom(o),re.fromDom(n)),r=>YT(e,r.dom)),XW=(e,n)=>{if(ft(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||YT(e,n.nextSibling)))return!0}return!1},I7=e=>e.dom.create(Ui(e),Jp(e)),F7=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,k=!1;const N=Ui(e);if(!u||!Ht(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,N.toLowerCase())||YW(c,f,u))return;const L=o.getRng(),{startContainer:Q,startOffset:te,endContainer:j,endOffset:ee}=L,ve=op(e);let he=f.firstChild;for(;he;)if(Ht(he)&&Rd(r,he),KW(r,he)){if(XW(c,he)){y=he,he=he.nextSibling,n.remove(y);continue}b||(b=I7(e),f.insertBefore(b,he),k=!0),y=he,he=he.nextSibling,b.appendChild(y)}else b=null,he=he.nextSibling;k&&ve&&(L.setStart(Q,te),L.setEnd(j,ee),o.setRng(L),e.nodeChanged())},jC=(e,n,o)=>{const r=re.fromDom(I7(e)),c=S();Mr(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},L7=e=>{e.on("NodeChange",je(F7,e))},XT=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,HB=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},VB=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],HB(e,c,Ly(e)));o.content=c}},zB=e=>{const n="contenteditable",o=" "+et.trim(ZE(e))+" ",r=" "+et.trim(Ly(e))+" ",c=XT(o),u=XT(r),f=jE(e);f.length>0&&e.on("BeforeSetContent",b=>{VB(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const k=b[y];c(k)?k.attr(n,"true"):u(k)&&k.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const k=b[y];!c(k)&&!u(k)||(f.length>0&&k.attr("data-mce-content")?(k.name="#text",k.type=3,k.raw=!0,k.value=k.attr("data-mce-content")):k.attr(n,null))}})},H7=e=>Tt(re.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),UB=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Od(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},V7=(e,n)=>{const o=H7(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),UB(e,o);return}er(o)&&(UB(e,o),e.undoManager.add())}},z7=e=>{e.on("keyup compositionstart",je(V7,e))},GC=cs,U7=(e,n,o)=>vB(n,e,o,O1,rp,GC),W7=(e,n,o)=>Ji(n,e,o,u=>O1(u)||Z_(u),u=>rp(u)||sF(u),GC),Z7=e=>{const n=e.dom.create(Ui(e));return n.innerHTML='<br data-mce-bogus="1">',n},JT=(e,n,o)=>{const r=Cu(e.getBody()),c=je(Gy,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Se.fromRangeStart(o))){const b=re.fromDom(Z7(e));n===1?Fu(re.fromDom(u),b):as(re.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},j7=(e,n)=>{const o=n?ic.Forwards:ic.Backwards,r=e.selection.getRng();return U7(o,e,r).orThunk(()=>(JT(e,o,r),H.none()))},G7=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return W7(o,e,r).orThunk(()=>(JT(e,o,r),H.none()))},r4=(e,n)=>j7(e,n).exists(o=>(Wf(e,o),!0)),WB=(e,n)=>G7(e,n).exists(o=>(Wf(e,o),!0)),ZB=(e,n)=>ZT(e,n,n?rp:O1),QT=(e,n)=>RA(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Wf(e,o),!0)),q7=e=>qt(["figcaption"],hs(e)),K7=(e,n)=>{const o=je(os,n);return E(re.fromDom(e.container()),Tc,o).filter(q7)},Y7=(e,n,o)=>n?LA(e.dom,o):Y1(e.dom,o),a4=(e,n)=>{const o=re.fromDom(e.getBody()),r=Se.fromRangeStart(e.selection.getRng());return K7(r,o).exists(()=>{if(Y7(o,n,r)){const u=jC(e,o,n?Mr:Cd);return e.selection.setRng(u),!0}else return!1})},jB=(e,n)=>e.selection.isCollapsed()?a4(e,n):!1,c4={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},X7=e=>jt(e,n=>({...c4,...n})),J7=e=>jt(e,n=>({...c4,...n})),GB=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,Q7=(e,n)=>_r(X7(e),o=>GB(o,n)?[o]:[]),eH=(e,n)=>_r(J7(e),o=>GB(o,n)?[o]:[]),co=(e,...n)=>()=>e.apply(null,n),fa=(e,n)=>gs(Q7(e,n),o=>o.action()),qB=(e,n)=>pa(eH(e,n),o=>o.action()),KB=(e,n)=>{const o=n?ic.Forwards:ic.Backwards,r=e.selection.getRng();return vB(e,o,r,qw,Jn,Xr).exists(c=>(Wf(e,c),!0))},YB=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Ji(e,o,r,qw,Jn,Xr).exists(c=>(Wf(e,c),!0))},l4=(e,n)=>ZT(e,n,n?Jn:qw),ek=yu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),om={...ek,none:e=>ek.none(e)},i4=(e,n)=>u4(e,n,mt),u4=(e,n,o)=>_r(Ra(e),r=>Nc(r,n)?o(r)?[r]:[]:u4(r,n,o)),d4=(e,n,o=De)=>{if(o(n))return H.none();if(qt(e,hs(n)))return H.some(n);const r=c=>Nc(c,"table")||o(c);return me(n,e.join(","),r)},m4=(e,n)=>d4(["td","th"],e,n),f4=e=>i4(e,"th,td"),g4=(e,n)=>_n(e,"table",n),u0=(e,n,o,r,c=mt)=>{const u=r===1;if(!u&&o<=0)return om.first(e[0]);if(u&&o>=e.length-1)return om.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?om.middle(n,b):u0(e,n,f,r,c)}},qC=(e,n)=>g4(e,n).bind(o=>{const r=f4(o);return ir(r,u=>os(e,u)).map(u=>({index:u,all:r}))}),KC=(e,n,o)=>qC(e,o).fold(()=>om.none(e),c=>u0(c.all,e,c.index,1,n)),YC=(e,n,o)=>qC(e,o).fold(()=>om.none(),c=>u0(c.all,e,c.index,-1,n)),Zf=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),XC=(e,n)=>_r(n,o=>{const r=Zf(xg(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),XB=(e,n,o)=>qo(e,(r,c)=>r.fold(()=>H.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return H.some(b<f?c:u)}),H.none()),h4=(e,n,o,r,c)=>{const u=Cc(re.fromDom(o),"td,th,caption").map(b=>b.dom),f=mn(XC(e,u),b=>n(b,c));return XB(f,r,c).map(b=>b.cell)},nH=e=>e.bottom,JB=e=>e.top,oH=(e,n)=>e.y<n,sH=(e,n)=>e.y>n,QB=je(h4,nH,oH),rH=je(h4,JB,sH),aH=(e,n)=>In(n.getClientRects()).bind(o=>QB(e,o.left,o.top)).bind(o=>zC(uB(o),n)),cH=(e,n)=>Ao(n.getClientRects()).bind(o=>rH(e,o.left,o.top)).bind(o=>zC(l7(o),n)),lH=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),iH=e=>e.breakType===Uf.Wrap&&e.positions.length===0,uH=e=>e.breakType===Uf.Br&&e.positions.length===1,e$=(e,n,o)=>{const r=e(n,o);return iH(r)||!xr(o.getNode())&&uH(r)?!lH(e,n,r):r.breakAt.isNone()},dH=je(e$,K1),mH=je(e$,tm),fH=(e,n,o)=>{const r=Se.fromRangeStart(n);return Ld(!e,o).exists(c=>c.isEqual(r))},gH=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return av()&&fH(n,c,o)?(Qd(u,e,o,!n,!1).each(f=>{Wf(e,f)}),!0):!1},hH=(e,n,o)=>aH(n,o).orThunk(()=>In(o.getClientRects()).bind(r=>VC(FA(e,Se.before(n)),r.left))).getOr(Se.before(n)),pH=(e,n,o)=>cH(n,o).orThunk(()=>In(o.getClientRects()).bind(r=>VC(Ru(e,Se.after(n)),r.left))).getOr(Se.after(n)),p4=(e,n)=>{const o=n.getNode(e);return Nr(o)?H.some(o):H.none()},t$=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Fu:as,c=jC(n,re.fromDom(o),r);Wf(n,c)})},b4=(e,n,o)=>{const r=p4(!!n,o),c=n===!1;r.fold(()=>Wf(e,o.toRange()),u=>Ld(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Wf(e,o.toRange()),f=>t$(n,e,u)))},bH=(e,n,o,r)=>{const c=e.selection.getRng(),u=Se.fromRangeStart(c),f=e.getBody();if(!n&&dH(r,u)){const b=hH(f,o,u);return b4(e,n,b),!0}else if(n&&mH(r,u)){const b=pH(f,o,u);return b4(e,n,b),!0}else return!1},n$=(e,n,o)=>H.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>H.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),o$=(e,n)=>n$(e,n,gH),s$=(e,n)=>n$(e,n,bH),r$=e=>{const n=Xh.exact(e,0,e,0);return R_(n)},a$=(e,n,o)=>o.fold(H.none,H.none,(r,c)=>F5(c).map(u=>r$(u)),r=>(e.execCommand("mceTableInsertRowAfter"),v4(e,n,r))),v4=(e,n,o)=>a$(e,n,KC(o,go)),vH=(e,n,o)=>a$(e,n,YC(o,go)),y4=(e,n)=>{const o=["table","li","dl"],r=re.fromDom(e.getBody()),c=b=>{const y=hs(b);return os(b,r)||qt(o,y)},u=e.selection.getRng(),f=re.fromDom(n?u.endContainer:u.startContainer);return m4(f,c).map(b=>(g4(b,c).each(N=>{e.model.table.clearSelectedCells(N.dom)}),e.selection.collapse(!n),(n?v4:vH)(e,c,b).each(N=>{e.selection.setRng(N)}),!0)).getOr(!1)},c$=(e,n,o)=>{const r=Lo.os.isMacOS()||Lo.os.isiOS();fa([{keyCode:sn.RIGHT,action:co(r4,e,!0)},{keyCode:sn.LEFT,action:co(r4,e,!1)},{keyCode:sn.UP,action:co(WB,e,!1)},{keyCode:sn.DOWN,action:co(WB,e,!0)},...r?[{keyCode:sn.UP,action:co(QT,e,!1),metaKey:!0,shiftKey:!0},{keyCode:sn.DOWN,action:co(QT,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:sn.RIGHT,action:co(o$,e,!0)},{keyCode:sn.LEFT,action:co(o$,e,!1)},{keyCode:sn.UP,action:co(s$,e,!1)},{keyCode:sn.DOWN,action:co(s$,e,!0)},{keyCode:sn.RIGHT,action:co(KB,e,!0)},{keyCode:sn.LEFT,action:co(KB,e,!1)},{keyCode:sn.UP,action:co(YB,e,!1)},{keyCode:sn.DOWN,action:co(YB,e,!0)},{keyCode:sn.RIGHT,action:co(CB,e,n,!0)},{keyCode:sn.LEFT,action:co(CB,e,n,!1)},{keyCode:sn.RIGHT,ctrlKey:!r,altKey:r,action:co(oh,e,n)},{keyCode:sn.LEFT,ctrlKey:!r,altKey:r,action:co(Q1,e,n)},{keyCode:sn.UP,action:co(jB,e,!1)},{keyCode:sn.DOWN,action:co(jB,e,!0)}],o).each(c=>{o.preventDefault()})},yH=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||c$(e,n,o)})},qm=(e,n)=>({container:e,offset:n}),tk=tr.DOM,JC=e=>n=>e===n?-1:0,wH=e=>n=>e.isBlock(n)||qt(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",w4=(e,n,o)=>{if(ft(e)&&n>=0)return H.some(qm(e,n));{const r=fr(tk);return H.from(r.backwards(e,n,JC(e),o)).map(c=>qm(c.container,c.container.data.length))}},l$=(e,n,o)=>{if(ft(e)&&n>=e.length)return H.some(qm(e,n));{const r=fr(tk);return H.from(r.forwards(e,n,JC(e),o)).map(c=>qm(c.container,0))}},C4=(e,n,o)=>{if(!ft(e))return H.none();const r=e.data;if(n>=0&&n<=r.length)return H.some(qm(e,n));{const c=fr(tk);return H.from(c.backwards(e,n,JC(e),o)).bind(u=>{const f=u.container.data;return C4(u.container,n+f.length,o)})}},i$=(e,n,o)=>{if(!ft(e))return H.none();const r=e.data;if(n<=r.length)return H.some(qm(e,n));{const c=fr(tk);return H.from(c.forwards(e,n,JC(e),o)).bind(u=>i$(u.container,n-r.length,o))}},nk=(e,n,o,r,c)=>{const u=fr(e,wH(e));return H.from(u.backwards(n,o,r,c))},CH=e=>e.collapsed&&ft(e.startContainer),u$=e=>ut(e.toString().replace(/\u00A0/g," ")),d$=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,ok=(e,n)=>e.substring(n.length),m$=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(d$(u))return H.none();if(c===u&&xs(e,o,r,n))break}return H.some(r)},SH=(e,n,o,r=0)=>{if(!CH(n))return H.none();const c={text:"",offset:0},u=(b,y,k)=>(c.text=k+c.text,c.offset+=y,m$(c.text,c.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return nk(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return H.none();const k=u$(y);return k.lastIndexOf(o)!==0||ok(k,o).length<r?H.none():H.some({text:ok(k,o),range:y,trigger:o})})},f$=(e,n,o,r=0)=>z5(re.fromDom(n.startContainer)).fold(()=>SH(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=u$(u);return H.some({range:u,text:ok(f,o),trigger:o})}),xH=e=>e.nodeType===Wc,TH=e=>e.nodeType===vc,g$=e=>{if(xH(e))return qm(e,e.data.length);{const n=e.childNodes;return n.length>0?g$(n[n.length-1]):qm(e,n.length)}},h$=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?h$(o[n],0):o.length>0&&TH(e)&&o.length===n?g$(o[o.length-1]):qm(e,n)},kH=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return nk(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!d$(u)}).isSome()},EH=e=>n=>{const o=h$(n.startContainer,n.startOffset);return!kH(e,o)},JW=(e,n,o)=>pa(o.triggers,r=>f$(e,n,r)),_H=(e,n)=>{const o=n(),r=e.selection.getRng();return JW(e.dom,r,o).bind(c=>QC(e,n,c))},QC=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=mn(u.lookupByTrigger(o.trigger),N=>o.text.length>=N.minChars&&N.matches.getOrThunk(()=>EH(e.dom))(o.range,b,o.text));if(y.length===0)return H.none();const k=Promise.all(jt(y,N=>N.fetch(o.text,N.maxResults,r).then(L=>({matchText:o.text,items:L,columns:N.columns,onAction:N.onAction,highlightOn:N.highlightOn}))));return H.some({lookupData:k,context:o})};var sm;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(sm||(sm={}));const sk=(e,n,o)=>e.stype===sm.Error?n(e.serror):o(e.svalue),OH=e=>{const n=[],o=[];return Ve(e,r=>{sk(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},p$=(e,n)=>e.stype===sm.Error?{stype:sm.Error,serror:n(e.serror)}:e,b$=(e,n)=>e.stype===sm.Value?{stype:sm.Value,svalue:n(e.svalue)}:e,AH=(e,n)=>e.stype===sm.Value?n(e.svalue):e,DH=(e,n)=>e.stype===sm.Error?n(e.serror):e,v$=e=>({stype:sm.Value,svalue:e}),S4=e=>({stype:sm.Error,serror:e}),ul={fromResult:e=>e.fold(S4,v$),toResult:e=>sk(e,Fr.error,Fr.value),svalue:v$,partition:OH,serror:S4,bind:AH,bindError:DH,map:b$,mapError:p$,fold:sk},x4=e=>Xe(e)&&Ss(e).length>100?" removed due to size":JSON.stringify(e,null,2),RH=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:rt("... (only showing first ten failures)")}]):e;return jt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},e2=(e,n)=>ul.serror([{path:e,getErrorInfo:n}]),MH=(e,n,o)=>e2(e,()=>'Could not find valid *required* value for "'+n+'" in '+x4(o)),NH=(e,n)=>e2(e,()=>'Choice schema did not contain choice key: "'+n+'"'),BH=(e,n,o)=>e2(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+x4(n)),$H=(e,n)=>e2(e,rt(n)),PH=(e,n,o,r)=>Uo(o,r).fold(()=>BH(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),_c=(e,n)=>({extract:(c,u)=>Uo(u,e).fold(()=>NH(c,e),b=>PH(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Ss(n)}),jf=(e,n)=>n,IH=(e,n)=>Ot(e)&&Ot(n)?rk(e,n):n,FH=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)kn(c,u)&&(o[u]=e(o[u],c[u]))}return o},rk=FH(IH),LH=FH(jf),w$=()=>({tag:"required",process:{}}),HH=e=>({tag:"defaultedThunk",process:e}),T4=e=>HH(rt(e)),d0=()=>({tag:"option",process:{}}),eZ=(e,n)=>e.length>0?ul.svalue(rk(n,LH.apply(void 0,e))):ul.svalue(n),C$=e=>O(ul.serror,Oa)(e),VH={consolidateObj:(e,n)=>{const o=ul.partition(e);return o.errors.length>0?C$(o.errors):eZ(o.values,n)},consolidateArr:e=>{const n=ul.partition(e);return n.errors.length>0?C$(n.errors):ul.svalue(n.values)}},zH=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),S$=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),x$=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},t2=e=>{const n=(r,c)=>ul.bindError(e(c),u=>$H(r,u)),o=rt("val");return{extract:n,toString:o}},T$=t2(ul.svalue),UH=(e,n,o,r)=>Uo(n,o).fold(()=>MH(e,o,n),r),k$=(e,n,o,r)=>{const c=Uo(e,n).getOrThunk(()=>o(e));return r(c)},WH=(e,n,o)=>o(Uo(e,n)),E$=(e,n,o,r)=>{const c=Uo(e,n).map(u=>u===!0?o(e):u);return r(c)},_$=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>ul.svalue(H.none()),y=>{const k=c.extract(n.concat([r]),y);return ul.map(k,H.some)});switch(e.tag){case"required":return UH(n,o,r,u);case"defaultedThunk":return k$(o,r,e.process,u);case"option":return WH(o,r,f);case"defaultedOptionThunk":return E$(o,r,e.process,f);case"mergeWithThunk":return k$(o,r,rt({}),b=>{const y=rk(e.process(o),b);return u(y)})}},k4=(e,n,o)=>{const r={},c=[];for(const u of o)x$(u,(f,b,y,k)=>{const N=_$(y,e,n,f,k);ul.fold(N,R=>{c.push(...R)},R=>{r[b]=R})},(f,b)=>{r[f]=b(n)});return c.length>0?ul.serror(c):ul.svalue(r)},n2=e=>({extract:(r,c)=>k4(r,c,e),toString:()=>`obj{
`+jt(e,c=>x$(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),ak=e=>({extract:(r,c)=>{const u=jt(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return VH.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),ZH=e=>t2(n=>e(n).fold(ul.serror,ul.svalue)),jH=(e,n,o)=>{const r=n.extract([e],o);return ul.mapError(r,c=>({input:o,errors:c}))},GH=(e,n,o)=>ul.toResult(jH(e,n,o)),qH=e=>`Errors: 
`+RH(e.errors).join(`
`)+`

Input object: `+x4(e.input),ck=(e,n)=>_c(e,oo(n,n2)),O$=rt(T$),lk=(e,n)=>t2(o=>{const r=typeof o;return e(o)?ul.svalue(o):ul.serror(`Expected type: ${n} but got: ${r}`)}),A$=lk(Go,"number"),ik=lk(G,"string"),E4=lk(ht,"boolean"),_4=lk(fe,"function"),o2=zH,D$=S$,KH=e=>ZH(n=>qt(e,n)?Fr.value(n):Fr.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),R$=(e,n)=>o2(e,e,w$(),n),O4=e=>R$(e,ik),uk=e=>R$(e,_4),M$=(e,n)=>o2(e,e,w$(),ak(n)),dk=(e,n)=>o2(e,e,d0(),n),mk=e=>dk(e,ik),YH=e=>dk(e,_4),XH=(e,n)=>o2(e,e,T4(n),O$()),sh=(e,n,o)=>o2(e,e,T4(n),o),A4=(e,n)=>sh(e,n,A$),N$=(e,n)=>sh(e,n,ik),B$=(e,n,o)=>sh(e,n,KH(o)),D4=(e,n)=>sh(e,n,E4),$$=(e,n)=>sh(e,n,_4),nZ=(e,n,o)=>sh(e,n,ak(o)),oZ=O4("type"),JH=uk("fetch"),P$=uk("onAction"),QH=$$("onSetup",()=>Wt),eV=mk("text"),sZ=mk("icon"),tV=mk("tooltip"),Ga=mk("label"),R4=D4("active",!1),qf=D4("enabled",!0),M4=D4("primary",!1),I$=e=>XH("columns",e),s2=e=>N$("type",e),N4=n2([oZ,O4("trigger"),A4("minChars",1),I$(1),A4("maxResults",10),YH("matches"),JH,P$,nZ("highlightOn",[],ik)]),B4=e=>GH("Autocompleter",N4,{trigger:e.ch,...e}),fk=[qf,tV,sZ,eV,QH],$4=[R4].concat(fk),nV=[$$("predicate",De),B$("scope","node",["node","editor"]),B$("position","selection",["node","selection","line"])],oV=fk.concat([s2("contextformbutton"),M4,P$,D$("original",Fo)]),sV=$4.concat([s2("contextformbutton"),M4,P$,D$("original",Fo)]),rV=fk.concat([s2("contextformbutton")]),aV=$4.concat([s2("contextformtogglebutton")]),F$=ck("type",{contextformbutton:oV,contextformtogglebutton:sV});n2([s2("contextform"),$$("initValue",rt("")),Ga,M$("commands",F$),dk("launch",ck("type",{contextformbutton:rV,contextformtogglebutton:aV}))].concat(nV));const cV=e=>{const n=e.ui.registry.getAll().popups,o=oo(n,f=>B4(f).fold(b=>{throw new Error(qH(b))},Fo)),r=Qa(Ja(o,f=>f.trigger)),c=va(o);return{dataset:o,triggers:r,lookupByTrigger:f=>mn(c,b=>b.trigger===f)}},lV=(e,n)=>{const o=Sl(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},iV=e=>{const n=Wa(),o=Na(!1),r=n.isSet,c=()=>{r()&&(R6(e),w_(e),o.set(!1),n.clear())},u=k=>{r()||(uA(e,k.range),n.set({trigger:k.trigger,matchLength:k.text.length}))},f=bn(()=>cV(e)),b=k=>n.get().map(N=>f$(e.dom,e.selection.getRng(),N.trigger).bind(R=>QC(e,f,R,k))).getOrThunk(()=>_H(e,f)),y=k=>{b(k).fold(c,N=>{u(N.context),N.lookupData.then(R=>{n.get().map(L=>{const Q=N.context;L.trigger===Q.trigger&&(Q.text.length-L.matchLength>=10?c():(n.set({...L,matchLength:Q.text.length}),o.get()?hx(e,{lookupData:R}):(o.set(!0),y_(e,{lookupData:R}))))})})})};e.addCommand("mceAutocompleterReload",(k,N)=>{const R=Xe(N)?N.fetchOptions:{};y(R)}),e.addCommand("mceAutocompleterClose",c),lV(e,{cancelIfNecessary:c,load:y})},L$=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Wt,inputType:o},f=Oh(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},P4=L$("input"),gk=L$("beforeinput"),H$=(e,n,o)=>{const r=o.keyCode===sn.BACKSPACE?"deleteContentBackward":"deleteContentForward";qB([{keyCode:sn.BACKSPACE,action:co(o4,e)},{keyCode:sn.BACKSPACE,action:co(LT,e,!1)},{keyCode:sn.DELETE,action:co(LT,e,!0)},{keyCode:sn.BACKSPACE,action:co(DA,e,!1)},{keyCode:sn.DELETE,action:co(DA,e,!0)},{keyCode:sn.BACKSPACE,action:co(qA,e,n,!1)},{keyCode:sn.DELETE,action:co(qA,e,n,!0)},{keyCode:sn.BACKSPACE,action:co(rC,e,!1)},{keyCode:sn.DELETE,action:co(rC,e,!0)},{keyCode:sn.BACKSPACE,action:co($A,e,!1)},{keyCode:sn.DELETE,action:co($A,e,!0)},{keyCode:sn.BACKSPACE,action:co(QA,e,!1)},{keyCode:sn.DELETE,action:co(QA,e,!0)},{keyCode:sn.BACKSPACE,action:co(AA,e,!1)},{keyCode:sn.DELETE,action:co(AA,e,!0)},{keyCode:sn.BACKSPACE,action:co(FC,e,!1)},{keyCode:sn.DELETE,action:co(FC,e,!0)},{keyCode:sn.BACKSPACE,action:co(GT,e,!1)},{keyCode:sn.DELETE,action:co(GT,e,!0)}],o).filter(c=>e.selection.isEditable()).each(c=>{o.preventDefault(),gk(e,r).isDefaultPrevented()||(c(),P4(e,r))})},uV=(e,n,o)=>{const r=wo(),c=r.os,u=r.browser,f=c.isMacOS()?[{keyCode:sn.BACKSPACE,altKey:!0,action:co(i0,e)},{keyCode:sn.DELETE,altKey:!0,action:co(i0,e)}]:[{keyCode:sn.BACKSPACE,ctrlKey:!0,action:co(i0,e)},{keyCode:sn.DELETE,ctrlKey:!0,action:co(i0,e)}];c.isMacOS()&&o&&f.push({keyCode:u.isFirefox()?224:91,action:co(i0,e)}),fa([{keyCode:sn.BACKSPACE,action:co(NA,e)},{keyCode:sn.DELETE,action:co(NA,e)},...f],n)},dV=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===sn.BACKSPACE,r.isDefaultPrevented()||H$(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||uV(e,r,o),o=!1})},rZ=e=>{for(;e;){if(Ht(e)||ft(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},tb=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=rZ(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Os),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new xa(n,n);let f=n,b;for(;b=u.current();){if(ft(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else xr(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Jt(e,c)},hk=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},I4=e=>H.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),mV=e=>I4(e).fold(rt(""),n=>n.nodeName.toUpperCase()),V$=e=>I4(e).filter(n=>mu(re.fromDom(n))).isSome(),fV=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,z$=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},U$=(e,n)=>{const o=e==null?void 0:e.parentNode;return Pe(o)&&o.nodeName===n},W$=e=>Pe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),aZ=e=>Pe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Ol=e=>W$(e)&&W$(e.parentNode),pk=e=>{const n=e.parentNode;return aZ(n)?n:e},bk=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ht(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},gV=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;Ol(o)&&(c="LI");let y=n(c);if(bk(o,r,!0)&&bk(o,r,!1))if(U$(o,"LI")){const k=pk(o);u.insertAfter(y,k),z$(o)?u.remove(k):u.remove(o)}else u.replace(y,o);else if(bk(o,r,!0))U$(o,"LI")?(u.insertAfter(y,pk(o)),y.appendChild(u.doc.createTextNode(" ")),y.appendChild(o)):b.insertBefore(y,o),u.remove(r);else if(bk(o,r,!1))u.insertAfter(y,pk(o)),u.remove(r);else{o=pk(o);const k=f.cloneRange();k.setStartAfter(r),k.setEndAfter(o);const N=k.extractContents();c==="LI"&&fV(N,"LI")?(y=N.firstChild,u.insertAfter(N,o)):(u.insertAfter(N,o),u.insertAfter(y,o)),u.remove(r)}tb(e,y)},hV=e=>{Ve(yh(re.fromDom(e),yc),n=>{const o=n.dom;o.nodeValue=ut(o.data)})},pV=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},bV=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),F4=e=>{e.innerHTML='<br data-mce-bogus="1">'},m0=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,L4=(e,n)=>Pe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",vV=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Ht(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||bV(e,u))&&e.remove(u)},r2=(e,n,o)=>ft(n)?e?o===1&&n.data.charAt(o-1)===ae?0:o:o===n.data.length-1&&n.data.charAt(o)===ae?n.data.length:o:o,H4=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,r2(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,r2(!1,e.endContainer,e.endOffset)),n},yV=e=>{let n=e;do ft(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},cZ=(e,n,o)=>{const r=e.dom;H.from(o.style).map(r.parseStyle).each(y=>{const N={...Bl(re.fromDom(n)),...y};r.setStyles(n,N)});const c=H.from(o.class).map(y=>y.split(/\s+/)),u=H.from(n.className).map(y=>mn(y.split(/\s+/),k=>k!==""));Zr(c,u,(y,k)=>{const N=mn(k,L=>!qt(y,L)),R=[...y,...N];r.setAttrib(n,"class",R.join(" "))});const f=["style","class"],b=Ko(o,(y,k)=>!qt(f,k));r.setAttribs(n,b)},vk=(e,n)=>{if(Ui(e).toLowerCase()===n.tagName.toLowerCase()){const r=Jp(e);cZ(e,n,r)}},wV=(e,n,o,r,c)=>{var u,f;const b=e.dom,y=(u=hk(b,r))!==null&&u!==void 0?u:b.getRoot();let k=b.getParent(r,b.isBlock);if(!k||!L4(b,k)){if(k=k||y,!k.hasChildNodes()){const Q=b.create(n);return vk(e,Q),k.appendChild(Q),o.setStart(Q,0),o.setEnd(Q,0),Q}let N=r;for(;N&&N.parentNode!==k;)N=N.parentNode;let R;for(;N&&!b.isBlock(N);)R=N,N=N.previousSibling;const L=(f=R==null?void 0:R.parentElement)===null||f===void 0?void 0:f.nodeName;if(R&&L&&e.schema.isValidChild(L,n.toLowerCase())){const Q=R.parentNode,te=b.create(n);for(vk(e,te),Q.insertBefore(te,R),N=R;N&&!b.isBlock(N);){const j=N.nextSibling;te.appendChild(N),N=j}o.setStart(r,c),o.setEnd(r,c)}}return r},CV=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Ht(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},lZ=(e,n)=>{const o=Yu(e);return Ye(n)?!1:G(o)?qt(et.explode(o),n.nodeName.toLowerCase()):o},Z$={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,k=y.getNonEmptyElements(),N=e.selection.getRng(),R=Ui(e),L=At=>{let St=o;const $e=y.getTextInlineElements();let Be;At||c==="TABLE"||c==="HR"?Be=b.create(At||R):Be=he.cloneNode(!1);let Ut=Be;if($d(e)===!1)b.setAttrib(Be,"style",null),b.setAttrib(Be,"class",null);else do if($e[St.nodeName]){if(Lr(St)||ki(St))continue;const gn=St.cloneNode(!1);b.setAttrib(gn,"id",""),Be.hasChildNodes()?(gn.appendChild(Be.firstChild),Be.appendChild(gn)):(Ut=gn,Be.appendChild(gn))}while((St=St.parentNode)&&St!==ve);return vk(e,Be),F4(Ut),Be},Q=At=>{const St=r2(At,o,r);if(ft(o)&&(At?St>0:St<o.data.length))return!1;if(o.parentNode===he&&f&&!At||At&&Ht(o)&&o===he.firstChild)return!0;if(m0(o,"TABLE")||m0(o,"HR"))return f&&!At||!f&&At;const $e=new xa(o,he);ft(o)&&(At&&St===0?$e.prev():!At&&St===o.data.length&&$e.next());let Be;for(;Be=$e.current();){if(Ht(Be)){if(!Be.getAttribute("data-mce-bogus")){const Ut=Be.nodeName.toLowerCase();if(k[Ut]&&Ut!=="br")return!1}}else if(ft(Be)&&!Hl(Be.data))return!1;At?$e.prev():$e.next()}return!0},te=()=>{let At;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&we!=="HGROUP"?At=L(R):At=L(),lZ(e,u)&&L4(b,u)&&b.isEmpty(he)?At=b.split(u,he):b.insertAfter(At,he),tb(e,At),At};Lm(b,N).each(At=>{N.setStart(At.startContainer,At.startOffset),N.setEnd(At.endContainer,At.endOffset)}),o=N.startContainer,r=N.startOffset;const j=!!(n&&n.shiftKey),ee=!!(n&&n.ctrlKey);Ht(o)&&o.hasChildNodes()&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&ft(o)?r=o.data.length:r=0);const ve=hk(b,o);if(!ve||pV(e,o))return;j||(o=wV(e,R,N,o,r));let he=b.getParent(o,b.isBlock)||b.getRoot();u=Pe(he==null?void 0:he.parentNode)?b.getParent(he.parentNode,b.isBlock):null,c=he?he.nodeName.toUpperCase():"";const we=u?u.nodeName.toUpperCase():"";if(we==="LI"&&!ee){const At=u;he=At,u=At.parentNode,c=we}if(/^(LI|DT|DD)$/.test(c)&&Ht(u)&&b.isEmpty(he)){gV(e,L,u,he,R);return}if(he===e.getBody()||!L4(b,he))return;const _e=he.parentNode;let qe;if(Xn(he))qe=Od(he),b.isEmpty(he)&&F4(he),vk(e,qe),tb(e,qe);else if(Q(!1))qe=te();else if(Q(!0)&&_e)qe=_e.insertBefore(L(),he),tb(e,m0(he,"HR")?qe:he);else{const At=H4(N).cloneRange();At.setEndAfter(he);const St=At.extractContents();hV(St),yV(St),qe=St.firstChild,b.insertAfter(St,he),vV(b,k,qe),CV(b,he),b.isEmpty(he)&&F4(he),qe.normalize(),b.isEmpty(qe)?(b.remove(qe),te()):(vk(e,qe),tb(e,qe))}b.setAttrib(qe,"id",""),e.dispatch("NewBlock",{newBlock:qe})},fakeEventName:"insertParagraph"},SV=(e,n,o)=>{const r=new xa(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||ft(c)&&c.length>0)return!0;return!1},rh=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Jt(e,r)},xV=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Lm(r,c).each(Q=>{c.setStart(Q.startContainer,Q.startOffset),c.setEnd(Q.endContainer,Q.endOffset)});let b=c.startOffset,y=c.startContainer;if(Ht(y)&&y.hasChildNodes()){const Q=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,Q&&ft(y)?b=y.data.length:b=0}let k=r.getParent(y,r.isBlock);const N=k&&k.parentNode?r.getParent(k.parentNode,r.isBlock):null,R=N?N.nodeName.toUpperCase():"",L=!!(n&&n.ctrlKey);R==="LI"&&!L&&(k=N),ft(y)&&b>=y.data.length&&(SV(e.schema,y,k||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),qs(r,c,u),rh(e,u,f),e.undoManager.add()},j$=(e,n)=>{const o=re.fromTag("br");as(re.fromDom(n),o),e.undoManager.add()},TV=(e,n)=>{EV(e.getBody(),n)||Fu(re.fromDom(n),re.fromTag("br"));const o=re.fromTag("br");Fu(re.fromDom(n),o),rh(e,o.dom,!1),e.undoManager.add()},kV=e=>xr(e.getNode()),EV=(e,n)=>kV(Se.after(n))?!0:Ti(e,Se.after(n)).map(o=>xr(o.getNode())).getOr(!1),G$=e=>e&&e.nodeName==="A"&&"href"in e,_V=e=>e.fold(De,G$,G$,De),OV=e=>{const n=je(M1,e),o=Se.fromRangeStart(e.selection.getRng());return zf(n,e.getBody(),o).filter(_V)},AV=(e,n)=>{n.fold(Wt,je(j$,e),je(TV,e),Wt)},a2={insert:(e,n)=>{const o=OV(e);o.isSome()?o.each(je(AV,e)):xV(e,n)},fakeEventName:"insertLineBreak"},K$=(e,n)=>I4(e).filter(o=>n.length>0&&Nc(re.fromDom(o),n)).isSome(),RV=e=>K$(e,Oy(e)),MV=e=>K$(e,Qp(e)),sd=yu.generate([{br:[]},{block:[]},{none:[]}]),NV=(e,n)=>MV(e),V4=e=>(n,o)=>V$(n)===e,Y$=(e,n)=>(o,r)=>mV(o)===e.toUpperCase()===n,X$=e=>{const n=hk(e.dom,e.selection.getStart());return Ye(n)},f0=e=>Y$("pre",e),BV=()=>Y$("summary",!0),yk=e=>(n,o)=>zi(n)===e,z4=(e,n)=>RV(e),wk=(e,n)=>n,$V=e=>{const n=Ui(e),o=hk(e.dom,e.selection.getStart());return Pe(o)&&e.schema.isValidChild(o.nodeName,n)},eu=(e,n)=>(o,r)=>qo(e,(u,f)=>u&&f(o,r),!0)?H.some(n):H.none(),PV=(e,n)=>X8([eu([NV],sd.none()),eu([f0(!0),X$],sd.none()),eu([BV()],sd.br()),eu([f0(!0),yk(!1),wk],sd.br()),eu([f0(!0),yk(!1)],sd.block()),eu([f0(!0),yk(!0),wk],sd.block()),eu([f0(!0),yk(!0)],sd.br()),eu([V4(!0),wk],sd.br()),eu([V4(!0)],sd.block()),eu([z4],sd.br()),eu([wk],sd.br()),eu([$V],sd.block())],[e,!!(n&&n.shiftKey)]).getOr(sd.none()),g0=(e,n,o)=>{n.selection.isCollapsed()||nO(n),!(Pe(o)&&gk(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Pe(o)&&P4(n,e.fakeEventName))},Ck=(e,n)=>{const o=()=>g0(a2,e,n),r=()=>g0(Z$,e,n),c=PV(e,n);switch(wu(e)){case"linebreak":c.fold(o,o,Wt);break;case"block":c.fold(r,r,Wt);break;case"invert":c.fold(r,o,Wt);break;default:c.fold(o,r,Wt);break}},J$=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),r6(e.undoManager),e.undoManager.transact(()=>{Ck(e,n)}))},IV=e=>{e.on("keydown",n=>{n.keyCode===sn.ENTER&&J$(e,n)})},uZ=(e,n,o)=>{const r=Lo.os.isMacOS()||Lo.os.isiOS();fa([{keyCode:sn.END,action:co(ZB,e,!0)},{keyCode:sn.HOME,action:co(ZB,e,!1)},...r?[]:[{keyCode:sn.HOME,action:co(QT,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:sn.END,action:co(QT,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:sn.END,action:co(l4,e,!0)},{keyCode:sn.HOME,action:co(l4,e,!1)},{keyCode:sn.END,action:co(eb,e,!0,n)},{keyCode:sn.HOME,action:co(eb,e,!1,n)}],o).each(c=>{o.preventDefault()})},vp=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||uZ(e,n,o)})},FV=e=>{e.on("input",n=>{n.isComposing||hF(e)})},LV=wo(),HV=(e,n,o)=>{fa([{keyCode:sn.PAGE_UP,action:co(eb,e,!1,n)},{keyCode:sn.PAGE_DOWN,action:co(eb,e,!0,n)}],o)},c2=e=>e.stopImmediatePropagation(),U4=e=>e.keyCode===sn.PAGE_UP||e.keyCode===sn.PAGE_DOWN,W4=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",c2,!0):!o&&e.get()&&n.off("NodeChange",c2),e.set(o)},VV=(e,n)=>{if(LV.os.isMacOS())return;const o=Na(!1);e.on("keydown",r=>{U4(r)&&W4(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||HV(e,n,r),U4(r)&&o.get()&&(W4(o,e,!1),e.nodeChanged())})},Z4=(e,n)=>{const o=n.container(),r=n.offset();return ft(o)?(o.insertData(r,e),H.some(Se(o,r+e.length))):l1(n).map(c=>{const u=re.fromText(e);return n.isAtEnd()?Fu(c,u):as(c,u),Se(u.dom,e.length)})},zV=je(Z4,Os),UV=je(Z4," "),WV=e=>n=>n.fold(o=>Su(e.dom,Se.before(o)),o=>si(o),o=>Tf(o),o=>Ti(e.dom,Se.after(o))),Q$=(e,n)=>o=>uF(e,o)?zV(n):UV(n),j4=e=>n=>(e.selection.setRng(n.toRange()),e.nodeChanged(),!0),ZV=e=>{const n=Se.fromRangeStart(e.selection.getRng()),o=re.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=je(M1,e),c=Se.fromRangeStart(e.selection.getRng());return zf(r,e.getBody(),c).bind(WV(o)).map(u=>()=>Q$(o,n)(u).each(j4(e)))}else return H.none()},G4=(e,n)=>{qB([{keyCode:sn.SPACEBAR,action:co(ZV,e)}],n).each(o=>{n.preventDefault(),gk(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),P4(e,"insertText",{data:" "}))})},eP=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||G4(e,n)})},Sk=e=>IS(e)?[{keyCode:sn.TAB,action:co(y4,e,!0)},{keyCode:sn.TAB,shiftKey:!0,action:co(y4,e,!1)}]:[],tP=(e,n)=>{fa([...Sk(e)],n).each(o=>{n.preventDefault()})},nP=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||tP(e,n)})},jV=e=>{if(e.addShortcut("Meta+P","","mcePrint"),iV(e),Pf(e))return Na(null);{const n=WC(e);return z7(e),yH(e,n),dV(e,n),IV(e),eP(e),FV(e),nP(e),vp(e,n),VV(e,n),n}};class GV{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Vw(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&lw(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&lw(n)&&(n.selection.getNode().nodeName==="IMG"?Ki.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!PE(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=ts(r.dom.getParents(n,mt,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const l2="x-tinymce/html",i2=rt(l2),q4="<!-- "+l2+" -->",qV=e=>q4+e,oP=e=>e.replace(q4,""),sP=e=>e.indexOf(q4)!==-1,KV=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),YV=(e,n)=>{let o="<"+e;const r=Ja(n,(c,u)=>u+'="'+hf.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},XV=(e,n,o)=>{const r=e.split(/\n\n/),c=YV(n,o),u="</"+n+">",f=jt(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:jt(f,b).join("")},rP="%MCEPASTEBIN%",aP=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},rP);Lo.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},JV=(e,n)=>{const o=e.dom;if(xk(e)){let r;const c=n.get();for(;r=xk(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},xk=e=>e.dom.get("mcepastebin"),QV=e=>Pe(e)&&e.id==="mcepastebin",ez=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=mn(e.getBody().childNodes,QV);Ve(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},cP=e=>e===rP,tz=e=>{const n=Na(null);return{create:()=>aP(e,n),remove:()=>JV(e,n),getEl:()=>xk(e),getHtml:()=>ez(e),getLastRng:n.get}},lP=(e,n)=>(et.each(n,o=>{Ke(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),h0=e=>{const n=Ci(),o=mp({},n);let r="";const c=n.getVoidElements(),u=et.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const k=y.name,N=y;if(k==="br"){r+=`
`;return}if(k!=="wbr"){if(c[k]&&(r+=" "),u[k]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let R=y.firstChild;if(R)do b(R);while(R=R.next)}f[k]&&N.next&&(r+=`
`,k==="p"&&(r+=`
`))}};return e=lP(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},iP=e=>(e=lP(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Os],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),nz=e=>{let n=0;return()=>e+n++},uP=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return et.hasOwn(o,n)?"image/"+o[n]:"image/"+n},oz=(e,n)=>{const o=mp({sanitize:sv(e)},e.schema);o.addNodeFilter("meta",c=>{et.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return sp({validate:!0},e.schema).serialize(r)},dP=(e,n)=>({content:e,cancelled:n}),sz=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=C_(e,r,o);return dP(c.node.innerHTML,c.isDefaultPrevented())},mP=(e,n,o)=>{const r=Rw(e,n,o),c=oz(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?sz(e,c,o):dP(c,r.isDefaultPrevented())},rz=(e,n,o)=>mP(e,n,o),K4=(e,n)=>(e.insertContent(n,{merge:MS(e),paste:!0}),!0),fP=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),Tk=(e,n)=>fP(n)&&ro(Hy(e),o=>zc(n.toLowerCase(),`.${o.toLowerCase()}`)),az=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),cz=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),lz=(e,n,o)=>!e.selection.isCollapsed()&&fP(n)?cz(e,n,o):!1,iz=(e,n,o)=>Tk(e,n)?az(e,n,o):!1,uz=(e,n)=>{et.each([lz,iz,K4],o=>!o(e,n,K4))},dz=(e,n,o)=>{o||!Xu(e)?K4(e,n):uz(e,n)},mz=nz("mceclip"),gP=(e,n,o,r)=>{const c=rz(e,n,o);c.cancelled||dz(e,c.content,r)},kk=(e,n,o)=>{const r=o||sP(n);gP(e,oP(n),r,!1)},Y4=(e,n)=>{const o=e.dom.encode(n).replace(/\r\n/g,`
`),r=fg(o,Fy(e)),c=XV(r,Ui(e),Jp(e));gP(e,c,!1,!0)},hP=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},yp=(e,n)=>n in e&&e[n].length>0,pP=e=>yp(e,"text/html")||yp(e,"text/plain"),or=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Pe(o)?e.dom.encode(o[1]):void 0},fz=(e,n,o,r)=>{const c=mz(),u=Wi(e)&&Pe(o.name),f=u?or(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},bP=(e,n)=>{Kv(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),k=y??fz(e,b,f,u);kk(e,`<img src="${k.blobUri()}">`,!1)})},gz=e=>e.type==="paste",X4=e=>Promise.all(jt(e,n=>gM(n).then(o=>({file:n,uri:o})))),vP=e=>{const n=Hy(e);return o=>ds(o.type,"image/")&&ro(n,r=>uP(r)===o.type)},yP=(e,n)=>{const o=n.items?_r(Rs(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Rs(n.files):[];return mn(o.length>0?o:r,vP(e))},wP=(e,n,o)=>{const r=gz(n)?n.clipboardData:n.dataTransfer;if(Mg(e)&&r){const c=yP(e,r);if(c.length>0)return n.preventDefault(),X4(c).then(u=>{o&&e.selection.setRng(o),Ve(u,f=>{bP(e,f)})}),!0}return!1},CP=e=>{var n,o;return Lo.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},hz=e=>sn.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,J4=(e,n,o,r)=>{let c=iP(o);const u=yp(n,i2())||sP(o),f=!u&&KV(c),b=fP(c);(cP(c)||!c.length||f&&!b)&&(r=!0),(r||b)&&(yp(n,"text/plain")&&f?c=n["text/plain"]:c=h0(c)),!cP(c)&&(r?Y4(e,c):kk(e,c,u))},SP=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{hz(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||CP(u))return;const f=o.get()==="text"||r;r=!1;const b=hP(u.clipboardData);!pP(b)&&wP(e,u,c())||(yp(b,"text/html")?(u.preventDefault(),J4(e,b,b["text/html"],f)):yp(b,"text/plain")&&yp(b,"text/uri-list")?(u.preventDefault(),J4(e,b,b["text/plain"],f)):(n.create(),Ki.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),J4(e,b,y,f)},0)))})},pz=e=>{const n=c=>ds(c,"webkit-fake-url"),o=c=>ds(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!Mg(e)&&r(f))for(const b of c){const y=b.attr("src");G(y)&&!b.attr("data-mce-object")&&y!==Lo.transparentSrc&&(n(y)||!NS(e)&&o(y))&&b.remove()}})},bz=(e,n,o)=>{SP(e,n,o),pz(e)},Ek=(e,n)=>{n.get()==="text"?(n.set("html"),Df(e,!1)):(n.set("text"),Df(e,!0)),e.focus()},u2=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{Ek(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&kk(e,r.html,r.internal),r.text&&Y4(e,r.text)})},xP=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(i2(),n),!0}catch{return!1}else return!1},Mu=(e,n,o,r)=>{xP(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},TP=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),Ki.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},nb=e=>({html:qV(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),d2=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),kP=e=>!e.selection.isCollapsed()||d2(e),vz=e=>n=>{!n.isDefaultPrevented()&&kP(e)&&Mu(n,nb(e),TP(e),()=>{if(Lo.browser.isChromium()||Lo.browser.isFirefox()){const o=e.selection.getRng();Ki.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},p0=e=>n=>{!n.isDefaultPrevented()&&kP(e)&&Mu(n,nb(e),TP(e),Wt)},yz=e=>{e.on("cut",vz(e)),e.on("copy",p0(e))},_k=(e,n)=>{var o,r;return Qh.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},Q4=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},eD=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},wz=e=>ro(e.files,n=>/^image\//.test(n.type)),Cz=(e,n,o,r)=>{const c=e.getParent(o,u=>wm(n,u));if(c&&kn(r,"text/html")){const u=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!q(u.querySelector(c.nodeName.toLowerCase()))}else return!1},EP=(e,n)=>{tv(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Mg(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&wz(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=_k(e,o);if(Ye(r))return;const c=hP(o.dataTransfer),u=yp(c,i2());if((!pP(c)||Q4(c))&&wP(e,o,r))return;const f=c[i2()],b=f||c["text/html"]||c["text/plain"],y=Cz(e.dom,e.schema,r.startContainer,c);n.get()&&!y||b&&(o.preventDefault(),Ki.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),eD(e,r);const k=iP(b);c["text/html"]?kk(e,k,u):Y4(e,k)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Mg(e)&&!n.get()&&(o.preventDefault(),eD(e,_k(e,o))),o.type==="dragend"&&n.set(!1)})},_P=e=>{const n=c=>u=>{c(e,u)},o=nv(e);fe(o)&&e.on("PastePreProcess",n(o));const r=RS(e);fe(r)&&e.on("PastePostProcess",n(r))},Sz=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},xz=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,OP=e=>et.trim(e).replace(xz,jh).toLowerCase(),AP=(e,n,o)=>{const r=Id(e);if(o||r==="all"||!ov(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,k,N)=>{const R=u.parseStyle(u.decode(k)),L={};for(let te=0;te<c.length;te++){const j=R[c[te]];let ee=j,ve=u.getStyle(f,c[te],!0);/color/.test(c[te])&&(ee=OP(ee),ve=OP(ve)),ve!==ee&&(L[c[te]]=j)}const Q=u.serializeStyle(L,"span");return Q?y+' style="'+Q+'"'+N:y+N})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},Tz=e=>{(Lo.browser.isChromium()||Lo.browser.isSafari())&&Sz(e,AP)},DP=e=>{const n=Na(!1),o=Na(Cf(e)?"text":"html"),r=tz(e);Tz(e),u2(e,o),_P(e),e.on("PreInit",()=>{yz(e),EP(e,n),bz(e,r,o)})},kz=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},Ez=e=>{e.parser.addNodeFilter("details",n=>{Ve(n,o=>{o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",n=>{Ve(n,o=>{const r=o.attr("data-mce-open");o.attr("open",G(r)?r:null),o.attr("data-mce-open",null)})})},RP=e=>{kz(e),Ez(e)},_z=xr,MP=ft,Oz=e=>cs(e.dom),NP=e=>ys(e.dom),BP=e=>n=>os(re.fromDom(e),n),Az=(e,n)=>E(re.fromDom(e),o=>NP(o)||Tc(o),BP(n)).getOr(re.fromDom(n)).dom,$P=(e,n)=>E(re.fromDom(e),Oz,BP(n)),PP=(e,n,o)=>{const r=new xa(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!_z(f);f=c())Cl(f)&&(u=f);return u},Dz=(e,n)=>{const r=Se.fromRangeStart(e).getNode(),c=Az(r,n),u=PP(r,c,!1),f=PP(r,c,!0),b=document.createRange();return $P(u,c).fold(()=>{MP(u)?b.setStart(u,0):b.setStartBefore(u)},y=>b.setStartBefore(y.dom)),$P(f,c).fold(()=>{MP(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},y=>b.setEndAfter(y.dom)),b},Rz=e=>{const n=Dz(e.selection.getRng(),e.getBody());e.selection.setRng(cC(n))},Mz=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),Rz(e))})};var ob;(function(e){e.Before="before",e.After="after"})(ob||(ob={}));const Nz=(e,n)=>Math.abs(e.left-n),Bz=(e,n)=>Math.abs(e.right-n),$z=(e,n)=>e>=n.top&&e<=n.bottom,Pz=(e,n)=>e.top<n.bottom&&e.bottom>n.top,Iz=(e,n)=>{const o=sS(e,n)/Math.min(e.height,n.height);return Pz(e,n)&&o>.5},IP=(e,n)=>{const o=mn(e,r=>$z(n,r));return iy(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=ks(e,f=>Iz(f,r));return[c,u]})},Fz=(e,n)=>({node:e.node,position:Nz(e,n)<Bz(e,n)?ob.Before:ob.After}),Lz=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),tD=(e,n,o)=>{const r=N=>Cl(N.node)?H.some(N):Ht(N.node)?tD(Rs(N.node.childNodes),n,o):H.none(),c=(N,R)=>{if(N.length>=2){const L=r(N[0]).getOr(N[0]),Q=r(N[1]).getOr(N[1]);if(Math.abs(R(L,n,o)-R(Q,n,o))<2){if(ft(L.node))return H.some(L);if(ft(Q.node))return H.some(Q)}}return H.none()},u=(N,R)=>{const L=Gt(N,(Q,te)=>R(Q,n,o)-R(te,n,o));return c(L,R).orThunk(()=>pa(L,r))},[f,b]=IP(X1(e),o),{pass:y,fail:k}=ks(b,N=>N.top<o);return u(f,Lz).orThunk(()=>u(k,oS)).orThunk(()=>u(y,oS))},Hz=(e,n,o,r)=>{const c=(u,f)=>{const b=k=>Ht(k)&&k.classList.contains("mce-drag-container"),y=mn(u.dom.childNodes,po(b));return f.fold(()=>tD(y,o,r),k=>{const N=mn(y,R=>R!==k.dom);return tD(N,o,r)}).orThunk(()=>(os(u,e)?H.none():dm(u)).bind(N=>c(N,H.some(u))))};return c(n,H.none())},Vz=(e,n,o)=>{const r=re.fromDom(e),c=sl(r),f=re.fromPoint(c,n,o).filter(b=>Ml(r,b)).getOr(r);return Hz(r,f,n,o)},FP=(e,n,o)=>Vz(e,n,o).filter(r=>Rm(r.node)).map(r=>Fz(r,n)),LP=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},Ok=e=>e.inline?LP(e.getBody()):{left:0,top:0},HP=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},zz=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},VP=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=LP(e.getContentAreaContainer()),r=zz(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},zP=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),nD=(e,n)=>zP(Ok(e),HP(e),VP(e,n)),Uz=(e,n,o)=>({...n,dataTransfer:null,type:e,...o}),UP=(e,n)=>{const o=es("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,srcElement:null,target:null,timeStamp:0,type:e,composedPath:o,initEvent:o,preventDefault:Wt,stopImmediatePropagation:Wt,stopPropagation:Wt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:null,...n}},WP=e=>({target:e,srcElement:e}),ZP=e=>n=>UP(e,WP(n)),oD=e=>(n,o)=>Uz(e,n,WP(o)),jP=oD("dragstart"),Wz=oD("drop"),Zz=ZP("dragend"),GP=oD("dragend"),wp=32,jz=100,Ak=8,m2=16,qP=cs,Gz=CE(qP,ys),qz=(e,n,o)=>qP(o)&&o!==n&&e.isEditable(o.parentElement),Kz=(e,n,o)=>Ye(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),Yz=e=>{const n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},Dk=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},KP=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},f2=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},YP=f2("left",-wp),XP=f2("left",wp),JP=f2("top",-wp),Xz=f2("top",wp),Jz=(e,n,o,r,c,u,f,b,y,k,N,R)=>{let L=0,Q=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(L=n.pageX+o-c),n.pageY+r>u&&(Q=n.pageY+r-u),e.style.width=o-L+"px",e.style.height=r-Q+"px";const te=y.clientHeight,j=y.clientWidth,ee=f+y.getBoundingClientRect().top,ve=b+y.getBoundingClientRect().left;N.on(he=>{he.intervalId.clear(),he.dragging&&R&&(f+Ak>=te?he.intervalId.set(Xz(k)):f-Ak<=0?he.intervalId.set(JP(k)):b+Ak>=j?he.intervalId.set(XP(k)):b-Ak<=0?he.intervalId.set(YP(k)):ee+m2>=window.innerHeight?he.intervalId.set(Xz(window)):ee-m2<=0?he.intervalId.set(JP(window)):ve+m2>=window.innerWidth?he.intervalId.set(XP(window)):ve-m2<=0&&he.intervalId.set(YP(window)))})},Rk=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},sD=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);Rk(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&F(re.fromDom(o))},Mk=e=>e.button===0,Qz=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),e9=(e,n)=>o=>{if(Mk(o)){const r=gs(n.dom.getParents(o.target),Gz).getOr(null);if(Pe(r)&&qz(n.dom,n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:Dk(n,r,r.offsetWidth,r.offsetHeight),intervalId:ea(jz)})}}},QP=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),FP(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===ob.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(n,o)})},t9=(e,n)=>{const o=Hi((c,u)=>QP(n,c,u),0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){if(n.dispatch("dragstart",jP(c,u.element)).isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=Qz(u,nD(n,c));KP(u.ghost,n.getBody()),Jz(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},rD=e=>{const n=e.getSel();if(Pe(n)){const r=n.getRangeAt(0).startContainer;return ft(r)?r.parentNode:r}else return null},eI=(e,n)=>o=>{e.on(r=>{var c;if(r.intervalId.clear(),r.dragging){if(Kz(n,rD(n.selection),r.element)){const u=Yz(r.element),f=(c=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&c!==void 0?c:n.getBody();n.dispatch("drop",Wz(o,f)).isDefaultPrevented()||n.undoManager.transact(()=>{sD(n.dom,r.element),n.insertContent(n.dom.getOuterHTML(u)),n._selectionOverrides.hideFakeCaret()})}n.dispatch("dragend",GP(o,n.getBody()))}}),aD(e)},tI=(e,n,o)=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){const c=o.fold(()=>Zz(r.element),u=>GP(u,r.element));n.dispatch("dragend",c)}}),aD(e)},n9=(e,n)=>o=>tI(e,n,H.some(o)),aD=e=>{e.on(n=>{n.intervalId.clear(),Rk(n.ghost)}),e.clear()},o9=e=>{const n=Wa(),o=tr.DOM,r=document,c=e9(n,e),u=t9(n,e),f=eI(n,e),b=n9(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===sn.ESC&&tI(n,e,H.none())})},dZ=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(qt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&t0(e,"Dropped file type is not supported"))}},o=c=>{_1(e,c.target)&&n(c)},r=()=>{const c=tr.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];Ve(y,k=>{c.bind(f,k,o),u.bind(b,k,n)}),e.on("remove",()=>{Ve(y,k=>{c.unbind(f,k,o),u.unbind(b,k,n)})})};e.on("init",()=>{Ki.setEditorTimeout(e,r,0)})},s9=e=>{o9(e),IE(e)&&dZ(e)},r9=e=>{const n=Hi(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=r0(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},a9=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Xr(o)){const r=Bf(e.getBody(),o),c=cs(r)?r:o;e.selection.getNode()!==c&&LC(e,c).each(u=>e.selection.setRng(u))}})})},b0=cs,nI=(e,n)=>Bf(e.getBody(),n),oI=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=QE(e,r,o.isBlock,()=>op(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=St=>Pe(St)&&o.hasClass(St,"mce-offscreen-selection"),k=St=>St!==r&&(b0(St)||Xr(St))&&o.isChildOf(St,r)&&o.isEditable(St.parentNode),N=St=>{St&&n.setRng(St)},R=(St,$e,Be,Ut=!0)=>e.dispatch("ShowCaret",{target:$e,direction:St,before:Be}).isDefaultPrevented()?null:(Ut&&n.scrollIntoView($e,St===-1),c.show(Be,$e)),L=St=>{St.hasAttribute("data-mce-caret")&&(Od(St),n.scrollIntoView(St))},Q=()=>{e.on("click",$e=>{o.isEditable($e.target)||($e.preventDefault(),e.focus())}),e.on("blur NewBlock",_e),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",$e=>{const Be=$e.target,Ut=nI(e,Be);b0(Ut)?($e.preventDefault(),LC(e,Ut).each(we)):k(Be)&&LC(e,Be).each(we)},!0),e.on("mousedown",$e=>{const Be=$e.target;if(Be!==r&&Be.nodeName!=="HTML"&&!o.isChildOf(Be,r)||!j1(e,$e.clientX,$e.clientY))return;_e(),At();const Ut=nI(e,Be);b0(Ut)?($e.preventDefault(),LC(e,Ut).each(we)):FP(r,$e.clientX,$e.clientY).each(gn=>{$e.preventDefault();const An=R(1,gn.node,gn.position===ob.Before,!1);N(An),Ht(Ut)?Ut.focus():e.getBody().focus()})}),e.on("keypress",$e=>{sn.modifierPressed($e)||b0(n.getNode())&&$e.preventDefault()}),e.on("GetSelectionRange",$e=>{let Be=$e.range;if(b){if(!b.parentNode){b=null;return}Be=Be.cloneRange(),Be.selectNode(b),$e.range=Be}}),e.on("SetSelectionRange",$e=>{$e.range=ee($e.range);const Be=we($e.range,$e.forward);Be&&($e.range=Be)});const St=$e=>Ht($e)&&$e.id==="mcepastebin";e.on("AfterSetSelectionRange",$e=>{const Be=$e.range,Ut=Be.startContainer.parentElement;!j(Be)&&!St(Ut)&&At(),y(Ut)||_e()}),s9(e),r9(e),a9(e)},te=St=>Po(St)||bm(St)||_d(St),j=St=>te(St.startContainer)||te(St.endContainer),ee=St=>{const $e=e.schema.getVoidElements(),Be=o.createRng(),Ut=St.startContainer,gn=St.startOffset,An=St.endContainer,ao=St.endOffset;return kn($e,Ut.nodeName.toLowerCase())?gn===0?Be.setStartBefore(Ut):Be.setStartAfter(Ut):Be.setStart(Ut,gn),kn($e,An.nodeName.toLowerCase())?ao===0?Be.setEndBefore(An):Be.setEndAfter(An):Be.setEnd(An,ao),Be},ve=(St,$e)=>{const Be=re.fromDom(e.getBody()),Ut=e.getDoc(),gn=Tt(Be,"#"+u).getOrThunk(()=>{const Mo=re.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Ut);return Pr(Mo,"id",u),Mr(Be,Mo),Mo}),An=o.createRng();Ns(gn),Lu(gn,[re.fromText(Os,Ut),re.fromDom($e),re.fromText(Os,Ut)]),An.setStart(gn.dom.firstChild,1),An.setEnd(gn.dom.lastChild,0),og(gn,{top:o.getPos(St,e.getBody()).y+"px"}),Fn(gn);const ao=n.getSel();return ao&&(ao.removeAllRanges(),ao.addRange(An)),An},he=St=>{const $e=St.cloneNode(!0),Be=e.dispatch("ObjectSelected",{target:St,targetClone:$e});if(Be.isDefaultPrevented())return null;const Ut=ve(St,Be.targetClone),gn=re.fromDom(St);return Ve(Cc(re.fromDom(e.getBody()),`*[${f}]`),An=>{os(gn,An)||Sr(An,f)}),o.getAttrib(St,f)||St.setAttribute(f,"1"),b=St,At(),Ut},we=(St,$e)=>{if(!St)return null;if(St.collapsed){if(!j(St)){const An=$e?1:-1,ao=Wh(An,r,St),Mo=ao.getNode(!$e);if(Pe(Mo)){if(Rm(Mo))return R(An,Mo,$e?!ao.isAtEnd():!1,!1);if(ws(Mo)&&cs(Mo.nextSibling)){const Us=o.createRng();return Us.setStart(Mo,0),Us.setEnd(Mo,0),Us}}const ps=ao.getNode($e);if(Pe(ps)){if(Rm(ps))return R(An,ps,$e?!1:!ao.isAtEnd(),!1);if(ws(ps)&&cs(ps.previousSibling)){const Us=o.createRng();return Us.setStart(ps,1),Us.setEnd(ps,1),Us}}}return null}let Be=St.startContainer,Ut=St.startOffset;const gn=St.endOffset;if(ft(Be)&&Ut===0&&b0(Be.parentNode)&&(Be=Be.parentNode,Ut=o.nodeIndex(Be),Be=Be.parentNode),!Ht(Be))return null;if(gn===Ut+1&&Be===St.endContainer){const An=Be.childNodes[Ut];if(k(An))return he(An)}return null},_e=()=>{b&&b.removeAttribute(f),Tt(re.fromDom(e.getBody()),"#"+u).each(Ls),b=null},qe=()=>{c.destroy(),b=null},At=()=>{c.hide()};return Pf(e)||Q(),{showCaret:R,showBlockCaretContainer:L,hideFakeCaret:At,destroy:qe}},c9=(e,n)=>{let o=n;for(let r=e.previousSibling;ft(r);r=r.previousSibling)o+=r.data.length;return o},sI=(e,n,o,r,c)=>{if(ft(o)&&(r<0||r>o.data.length))return[];const u=c&&ft(o)?[c9(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},cD=(e,n,o,r,c,u,f=!1)=>{const b=sI(e,n,o,r,f),y=sI(e,n,c,u,f);return{start:b,end:y}},rI=(e,n)=>{const o=n.slice(),r=o.pop();return Go(r)?qo(o,(u,f)=>u.bind(b=>H.from(b.childNodes[f])),H.some(e)).bind(u=>ft(u)&&(r<0||r>u.data.length)?H.none():H.some({node:u,offset:r})):H.none()},aI=(e,n)=>rI(e,n.start).bind(({node:o,offset:r})=>rI(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),cI=(e,n,o,r=!1)=>cD(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),g2=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),g2(e,r,o)}},Nk=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(ft(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),ft(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),g2(e,c,o),c!==u&&g2(e,u,o))},Bk=(e,n)=>H.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),lI=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:jb(r).concat(e.blockPatterns),inlinePatterns:Xp(r).concat(e.inlinePatterns)}},$k=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},l9=e=>/^\s[^\s]/.test(e),iI=(e,n,o)=>{l$(n,0,n).each(c=>{const u=c.container;i$(u,o.start.length,n).each(y=>{const k=e.createRng();k.setStart(u,0),k.setEnd(y.container,y.offset),Nk(e,k,N=>N===n)});const f=re.fromDom(u),b=Ir(f);l9(b)&&Rp(f,b.slice(1))})},i9=(e,n)=>{const o=e.dom,r=n.pattern,c=aI(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const y=b.get(f);return at(y)&&In(y).exists(k=>kn(k,"block"))};return Bk(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{iI(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{iI(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},uI=e=>Gt(e,(n,o)=>o.start.length-n.start.length),Pk=(e,n)=>{const o=uI(e),r=n.replace(Os," ");return gs(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},dI=(e,n,o,r)=>{var c;const u=e.dom,f=Ui(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return Pk(o.blockPatterns,b).map(y=>et.trim(b).length===y.start.length?[]:[{pattern:y,range:cD(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},mI=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();Ve(n,r=>i9(e,r)),e.selection.moveToBookmark(o)},fI=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Ik=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},lD=(e,n,o)=>{const r=aI(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,k=f.parentNode;return{prefix:n,end:k.insertBefore(fI(e,n+"-end"),f),start:y.insertBefore(fI(e,n+"-start"),b)}},gI=(e,n,o)=>{g2(e,e.get(n.prefix+"-end"),o),g2(e,e.get(n.prefix+"-start"),o)},iD=e=>e.start.length===0,u9=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},Fk=(e,n,o,r)=>{const c=n.start;return nk(e,r.container,r.offset,u9(c),o).bind(f=>{var b,y;const k=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(k!==-1&&f.offset>=k+c.length){const R=e.createRng();return R.setStart(f.container,f.offset-c.length),R.setEnd(f.container,f.offset),H.some(R)}else{const R=f.offset-c.length;return C4(f.container,R,o).map(L=>{const Q=e.createRng();return Q.setStart(L.container,L.offset),Q.setEnd(f.container,f.offset),Q}).filter(L=>L.toString()===c).orThunk(()=>Fk(e,n,o,qm(f.container,0)))}})},d9=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),H.some(f)}return w4(o,r,c).bind(f=>Fk(e,n,c,f).bind(y=>{var k;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return H.none();if(f.offset===0&&((k=y.endContainer.textContent)===null||k===void 0?void 0:k.length)===y.endOffset)return H.none()}return H.some(y)}))},m9=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return C4(b,y-o.pattern.end.length,n).bind(k=>{const N=cD(c,u,k.container,k.offset,b,y,r);if(iD(f))return H.some({matches:[{pattern:f,startRng:N,endRng:N}],position:k});{const R=Lk(e,o.remainingPatterns,k.container,k.offset,n,r),L=R.getOr({matches:[],position:k}),Q=L.position;return d9(c,f,Q.container,Q.offset,n,R.isNone()).map(j=>{const ee=cI(c,u,j,r);return{matches:L.matches.concat([{pattern:f,startRng:ee,endRng:N}]),position:qm(j.startContainer,j.startOffset)}})}})},Lk=(e,n,o,r,c,u)=>{const f=e.dom;return w4(o,r,f.getRoot()).bind(b=>{const y=$k(f,c,o,r);for(let k=0;k<n.length;k++){const N=n[k];if(!zc(y,N.end))continue;const R=n.slice();R.splice(k,1);const L=m9(e,c,{pattern:N,remainingPatterns:R,position:b},u);if(L.isNone()&&r>0)return Lk(e,n,o,r-1,c,u);if(L.isSome())return L}return H.none()})},hI=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?Ve(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},f9=(e,n,o,r)=>{const c=Ik(e.dom,o);Nk(e.dom,c,r),hI(e,n,c)},g9=(e,n,o,r,c)=>{const u=e.dom,f=Ik(u,r),b=Ik(u,o);Nk(u,b,c),Nk(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},k=Ik(u,y);hI(e,n,k)},pI=(e,n)=>{const o=ay("mce_textpattern"),r=Ka(n,(c,u)=>{const f=lD(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Ka(r,(c,u)=>{const f=r.length-c.length-1,b=iD(u.pattern)?u.endMarker:lD(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},bI=e=>Gt(e,(n,o)=>o.end.length-n.end.length),uD=(e,n)=>{const o=us(e,r=>ro(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},Hk=(e,n,o,r,c,u)=>{const f=Lk(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=Lk(e,bI(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return uD(f,b)},vI=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=pI(o,n);Ve(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;iD(u.pattern)?f9(e,u.pattern,u.endMarker,b):g9(e,u.pattern,u.startMarker,u.endMarker,b),gI(o,u.endMarker,b),gI(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},dD=(e,n)=>{const o=e.selection.getRng();return Bk(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=lI(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=Hk(e,r,o.startContainer,u,f,!0),y=dI(e,r,f,!0);return y.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Jr),vI(e,b),mI(e,y);const k=e.selection.getRng(),N=w4(k.startContainer,k.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),N.each(R=>{const L=R.container;L.data.charAt(R.offset-1)===Jr&&(L.deleteData(R.offset-1,1),g2(e.dom,L.parentNode,Q=>Q===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},h9=(e,n)=>{const o=e.selection.getRng();Bk(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=$k(e.dom,r,o.startContainer,c),f=lI(n,r,u),b=Hk(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{vI(e,b)})})},yI=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},wI=(e,n)=>yI(e,n,(o,r)=>o===r.keyCode&&!sn.modifierPressed(r)),p9=(e,n)=>yI(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),b9=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>Gb(UE(e),WE(e)),c=()=>GE(e);e.on("keydown",f=>{if(f.keyCode===13&&!sn.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&dD(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&h9(e,f)}};e.on("keyup",f=>{wI(o,f)&&u()}),e.on("keypress",f=>{p9(n,f)&&Ki.setEditorTimeout(e,u)})},v9=e=>{b9(e)},y9=e=>{const n=et.each,o=sn.BACKSPACE,r=sn.DELETE,c=e.dom,u=e.selection,f=e.parser,b=Lo.browser,y=b.isFirefox(),k=b.isChromium()||b.isSafari(),N=Lo.deviceType.isiPhone()||Lo.deviceType.isiPad(),R=Lo.os.isMacOS()||Lo.os.isiOS(),L=(It,En)=>{try{e.getDoc().execCommand(It,!1,String(En))}catch{}},Q=It=>It.isDefaultPrevented(),te=()=>{const It=On=>{const Lt=c.create("body"),To=On.cloneContents();return Lt.appendChild(To),u.serializer.serialize(Lt,{format:"html"})},En=On=>{const Lt=It(On),To=c.createRng();To.selectNode(e.getBody());const ko=It(To);return Lt===ko};e.on("keydown",On=>{const Lt=On.keyCode;if(!Q(On)&&(Lt===r||Lt===o)&&e.selection.isEditable()){const To=e.selection.isCollapsed(),ko=e.getBody();if(To&&!c.isEmpty(ko)||!To&&!En(e.selection.getRng()))return;On.preventDefault(),e.setContent(""),ko.firstChild&&c.isBlock(ko.firstChild)?e.selection.setCursorLocation(ko.firstChild,0):e.selection.setCursorLocation(ko,0),e.nodeChanged()}})},j=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ee=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",It=>{let En;if(It.target===e.getDoc().documentElement)if(En=u.getRng(),e.getBody().focus(),It.type==="mousedown"){if(Po(En.startContainer))return;u.placeCaretAt(It.clientX,It.clientY)}else u.setRng(En)})},ve=()=>{e.on("keydown",It=>{if(!Q(It)&&It.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const En=u.getNode(),On=En.previousSibling;if(En.nodeName==="HR"){c.remove(En),It.preventDefault();return}On&&On.nodeName&&On.nodeName.toLowerCase()==="hr"&&(c.remove(On),It.preventDefault())}}})},he=()=>{Range.prototype.getClientRects||e.on("mousedown",It=>{if(!Q(It)&&It.target.nodeName==="HTML"){const En=e.getBody();En.blur(),Ki.setEditorTimeout(e,()=>{En.focus()})}})},we=()=>{const It=Iy(e);e.on("click",En=>{const On=En.target;/^(IMG|HR)$/.test(On.nodeName)&&c.isEditable(On.parentNode)&&(En.preventDefault(),e.selection.select(On),e.nodeChanged()),On.nodeName==="A"&&c.hasClass(On,It)&&On.childNodes.length===0&&c.isEditable(On.parentNode)&&(En.preventDefault(),u.select(On))})},_e=()=>{const It=()=>{const On=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const Lt=u.getStart();Lt!==e.getBody()&&(c.setAttrib(Lt,"style",null),n(On,To=>{Lt.setAttributeNode(To.cloneNode(!0))}))}},En=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",On=>{let Lt;return!Q(On)&&(On.keyCode===8||On.keyCode===46)&&En()?(Lt=It(),e.getDoc().execCommand("delete",!1),Lt(),On.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",On=>{if(!Q(On)&&En()){const Lt=It();Ki.setEditorTimeout(e,()=>{Lt()})}})},qe=()=>{e.on("keydown",It=>{if(!Q(It)&&It.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const En=u.getNode().previousSibling;if(En&&En.nodeName&&En.nodeName.toLowerCase()==="table")return It.preventDefault(),!1}return!0})},At=()=>{e.on("keydown",It=>{if(Q(It)||It.keyCode!==sn.BACKSPACE)return;let En=u.getRng();const On=En.startContainer,Lt=En.startOffset,To=c.getRoot();let ko=On;if(!(!En.collapsed||Lt!==0)){for(;ko.parentNode&&ko.parentNode.firstChild===ko&&ko.parentNode!==To;)ko=ko.parentNode;ko.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,ko),En=c.createRng(),En.setStart(On,0),En.setEnd(On,0),u.setRng(En))}})},St=()=>{const It=()=>{L("StyleWithCSS",!1),L("enableInlineTableEditing",!1),SS(e)||L("enableObjectResizing",!1)};Hh(e)||e.on("BeforeExecCommand mousedown",It)},$e=()=>{const It=()=>{n(c.select("a:not([data-mce-block])"),En=>{var On;let Lt=En.parentNode;const To=c.getRoot();if((Lt==null?void 0:Lt.lastChild)===En){for(;Lt&&!c.isBlock(Lt);){if(((On=Lt.parentNode)===null||On===void 0?void 0:On.lastChild)!==Lt||Lt===To)return;Lt=Lt.parentNode}c.add(Lt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",En=>{(En.type==="setcontent"||En.command==="mceInsertLink")&&It()})},Be=()=>{e.on("init",()=>{L("DefaultParagraphSeparator",Ui(e))})},Ut=It=>{const En=It.getBody(),On=It.selection.getRng();return On.startContainer===On.endContainer&&On.startContainer===En&&On.startOffset===0&&On.endOffset===En.childNodes.length},gn=()=>{e.on("keyup focusin mouseup",It=>{!sn.modifierPressed(It)&&!Ut(e)&&u.normalize()},!0)},An=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ao=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Mo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",It=>{let En;It.target.nodeName==="HTML"&&(En=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(En),e.selection.normalize(),e.nodeChanged())}))},ps=()=>{R&&e.on("keydown",It=>{sn.metaKeyPressed(It)&&!It.shiftKey&&(It.keyCode===37||It.keyCode===39)&&(It.preventDefault(),e.selection.getSel().modify("move",It.keyCode===37?"backward":"forward","lineboundary"))})},Us=()=>{e.on("click",It=>{let En=It.target;do if(En.tagName==="A"){It.preventDefault();return}while(En=En.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ra=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",It=>{It.preventDefault()})})},Lc=()=>{f.addNodeFilter("br",It=>{let En=It.length;for(;En--;)It[En].attr("class")==="Apple-interchange-newline"&&It[En].remove()})},fc=Wt,wt=()=>{if(!y||e.removed)return!1;const It=e.selection.getSel();return!It||!It.rangeCount||It.rangeCount===0},un=()=>{k&&(ee(),we(),ra(),j(),N&&(ao(),Mo(),Us())),y&&(he(),St(),An(),ps())},jo=()=>{At(),te(),Lo.windowsPhone||gn(),k&&(ee(),we(),Be(),ra(),qe(),Lc(),N?(ao(),Mo(),Us()):j()),y&&(ve(),he(),_e(),St(),$e(),An(),ps(),qe())};return Pf(e)?un():jo(),{refreshContentEditable:fc,isHidden:wt}},mD=tr.DOM,w9=(e,n)=>{const o=re.fromDom(e.getBody()),r=mm(Ql(o)),c=re.fromTag("style");Pr(c,"type","text/css"),Mr(c,re.fromText(n)),Mr(r,c),e.on("remove",()=>{Ls(c)})},C9=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Vk=e=>Ko(e,n=>Dn(n)===!1),CI=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return Vk({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),remove_trailing_brs:n("remove_trailing_brs"),inline_styles:n("inline_styles"),root_name:C9(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},zk=e=>{const n=e.options.get;return Vk({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},S9=e=>{const n=e.options.get;return{...CI(e),...zk(e),...Vk({url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},x9=e=>{const n=mp(CI(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),BS(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Ei("br",1))}}),n},T9=e=>{const n=VE(e);n&&Ki.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},k9=e=>{const n=e.dom.getRoot();!e.inline&&(!lw(e)||e.selection.getStart(!0)===n)&&si(n).each(o=>{const r=o.getNode(),c=Nr(r)?si(r).getOr(o):o;e.selection.setRng(c.toRange())})},E9=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Vs(e),e.focus(!0),k9(e),e.nodeChanged({initial:!0});const n=DS(e);fe(n)&&n.call(e,e),T9(e)},SI=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,Uk=(e,n,o)=>{const r=[SI(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},xI=e=>{const n=SI(e),o=Dy(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";et.each(e.contentStyles,k=>{y+=k+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(Uk(e,r,o)).then(u).catch(u),b=RE(e);return b&&w9(e,b),f},_9=e=>{const n=e.getDoc(),o=e.getBody();Sw(e),zE(e)||(n.body.spellcheck=!1,mD.setAttrib(o,"spellcheck","false")),e.quirks=y9(e),xw(e);const r=ME(e);r!==void 0&&(o.dir=r);const c=Vh(e);c&&e.on("BeforeSetContent",u=>{et.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},O9=e=>{Pf(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},fD=e=>{e.removed!==!0&&(O9(e),E9(e))},TI=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(mD.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Hh(e),e.readonly||(e.inline&&mD.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=bA(e),e.schema=Ci(zk(e)),e.dom=tr(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:wS(e),referrerPolicy:Fh(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=x9(e),e.serializer=fA(S9(e),e),e.selection=th(e.dom,e.getWin(),e.serializer,e),e.annotator=C1(e),e.formatter=PC(e),e.undoManager=CA(e),e._nodeChangeDispatcher=new GV(e),e._selectionOverrides=oI(e),LB(e),RP(e),zB(e),Pf(e)||(Mz(e),v9(e));const c=jV(e);$7(e,c),L7(e),b8(e),DP(e);const u=p6(e);_9(e),u.fold(()=>{xI(e).then(()=>fD(e))},f=>{e.setProgressState(!0),xI(e).then(()=>{f().then(b=>{e.setProgressState(!1),fD(e),Yd(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),fD(e),Yd(e)})})})},A9=mt,D9=(e,n,o)=>sg(e,n,A9,o),gD=tr.DOM,R9=(e,n,o,r)=>{const c=re.fromTag("iframe");return r.each(u=>Pr(c,"tabindex",u)),oc(c,o),oc(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),$u(c,"tox-edit-area__iframe"),c},kI=e=>{let n=EE(e)+"<html><head>";cc(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=_E(e),r=bS(e),c=e.translate(AS(e));return vS(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+vS(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},M9=(e,n)=>{const o=e.translate("Rich Text Area"),r=ol(re.fromDom(e.getElement()),"tabindex").bind(hc),c=R9(e.id,o,yt(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=kI(e),gD.add(n.iframeContainer,c)},EI=e=>{const n=e.iframeElement,o=D9(re.fromDom(n),"load",()=>{o.unbind(),e.contentDocument=n.contentDocument,TI(e)});if(Lo.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close()}else n.srcdoc=e.iframeHTML},N9=(e,n)=>{M9(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=gD.isHidden(n.editorContainer)),e.getElement().style.display="none",gD.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,EI(e)},_I=tr.DOM,OI=(e,n,o)=>{const r=Xd.get(o),c=Xd.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=et.trim(o),r&&et.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,fe(u.init)&&(u.init(e,c),n.push(o))}catch(u){NN(e,o,u)}}},h2=e=>e.replace(/^\-/,""),B9=e=>{const n=[];Ve(Py(e),o=>{OI(e,n,h2(o))})},AI=e=>{const n=et.trim(Xb(e)),o=e.ui.registry.getAll().icons,r={...ET.get("default").icons,...ET.get(n).icons};pt(r,(c,u)=>{kn(o,u)||e.ui.registry.addIcon(u,c)})},$9=e=>{const n=Pd(e);if(G(n)){const o=Lf.get(n);e.theme=o(e,Lf.urls[n])||{},fe(e.theme.init)&&e.theme.init(e,Lf.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},P9=e=>{const n=Zi(e),o=e0.get(n);e.model=o(e,e0.urls[n])},I9=e=>{const n=e.theme.renderUI;return n?n():pD(e)},F9=e=>{const n=e.getElement(),r=Pd(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},hD=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),L9=e=>{const n=_I.create("div");return _I.insertAfter(n,e),hD(n,n)},pD=e=>{const n=e.getElement();return e.inline?hD(null):L9(n)},H9=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,G(Pd(e))?I9(e):fe(Pd(e))?F9(e):pD(e)},V9=(e,n)=>{const o={show:H.from(n.show).getOr(Wt),hide:H.from(n.hide).getOr(Wt),isEnabled:H.from(n.isEnabled).getOr(mt),setEnabled:r=>{e.mode.isReadOnly()||H.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},z9=async e=>{e.dispatch("ScriptsLoaded"),AI(e),$9(e),P9(e),B9(e);const n=await H9(e);V9(e,H.from(n.api).getOr({})),e.editorContainer=n.editorContainer,s8(e),e.inline?TI(e):N9(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},sb=tr.DOM,DI=e=>e.charAt(0)==="-",U9=(e,n)=>{const o=lc(n),r=DE(n);if(!Gu.hasCode(o)&&o!=="en"){const c=Vo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{RN(n,c,o)})}},W9=(e,n)=>{const o=Pd(e);if(G(o)&&!DI(o)&&!kn(Lf.urls,o)){const r=ev(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Lf.load(o,c).catch(()=>{RT(e,c,o)})}},Z9=(e,n)=>{const o=Zi(e);if(o!=="plugin"&&!kn(e0.urls,o)){const r=Hs(e),c=G(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;e0.load(o,c).catch(()=>{MN(e,c,o)})}},j9=e=>H.from(Jb(e)).filter(Vo).map(n=>({url:n,name:H.none()})),bD=(e,n,o)=>H.from(n).filter(r=>Vo(r)&&!ET.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:H.some(r)})),vD=(e,n,o)=>{const r=bD(n,"default",o),c=j9(n).orThunk(()=>bD(n,Xb(n),""));Ve(Js([r,c]),u=>{e.add(u.url).catch(()=>{DN(n,u.url,u.name.getOrUndefined())})})},RI=(e,n)=>{const o=(r,c)=>{Xd.load(r,c).catch(()=>{AN(e,c,r)})};pt(Dg(e),(r,c)=>{o(c,r),e.options.set("plugins",Py(e).concat(c))}),Ve(Py(e),r=>{r=et.trim(r),r&&!Xd.urls[r]&&!DI(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},MI=e=>{const n=Pd(e);return!G(n)||Pe(Lf.get(n))},G9=e=>{const n=Zi(e);return Pe(e0.get(n))},q9=(e,n)=>{const o=km.ScriptLoader,r=()=>{!e.removed&&MI(e)&&G9(e)&&z9(e)};W9(e,n),Z9(e,n),U9(o,e),vD(o,e,n),RI(e,n),o.loadQueue().then(r,r)},K9=(e,n)=>$2.forElement(e,{contentCssCors:$y(n),referrerPolicy:Fh(n)}),NI=e=>{const n=e.id;Gu.setCode(lc(e));const o=()=>{sb.unbind(window,"ready",o),e.render()};if(!Tm.Event.domLoaded){sb.bind(window,"ready",o);return}if(!e.getElement())return;const r=re.fromDom(e.getElement()),c=im(r);e.on("remove",()=>{Vr(r.dom.attributes,f=>Sr(r,f.name)),oc(r,c)}),e.ui.styleSheetLoader=K9(r,e),By(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||sb.getParent(n,"form");u&&(e.formElement=u,_S(e)&&!lg(e.getElement())&&(sb.insertAfter(sb.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},sb.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),OS(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=pA(e),e.notificationManager=gp(e),PS(e)&&e.on("GetContent",f=>{f.save&&(f.content=sb.encode(f.content))}),NE(e)&&e.on("submit",()=>{e.initialized&&e.save()}),BE(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),q9(e,e.suffix)},BI=(e,n)=>({sections:rt(e),options:rt(n)}),$I=wo().deviceType,PI=$I.isPhone(),yD=$I.isTablet(),Cp=e=>{if(Ye(e))return[];{const n=at(e)?e:e.split(/[ ,]/),o=jt(n,gc);return mn(o,Vo)}},Wk=(e,n)=>{const o=Xa(n,(r,c)=>qt(e,c));return BI(o.t,o.f)},ah=(e,n,o={})=>{const r=e.sections(),c=Uo(r,n).getOr({});return et.extend({},o,c)},v0=(e,n)=>kn(e.sections(),n),y0=(e,n)=>v0(e,n)?e.sections()[n]:{},II=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Uo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Y9=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?et.extend({},e.external_plugins,r):r},X9=(e,n)=>[...Cp(e),...Cp(n)],FI=(e,n,o,r)=>e&&v0(n,"mobile")?r:o,J9=(e,n,o,r)=>{const c=Cp(o.forced_plugins),u=Cp(r.plugins),f=y0(n,"mobile"),b=f.plugins?Cp(f.plugins):u,y=FI(e,n,u,b),k=X9(c,y);return et.extend(r,{forced_plugins:c,plugins:k})},wD=(e,n)=>e&&v0(n,"mobile"),Zk=(e,n,o,r,c)=>{var u;const f=e?{mobile:II((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=Wk(["mobile"],rk(f,c)),y=et.extend(o,r,b.options(),wD(e,b)?ah(b,"mobile"):{},{external_plugins:Y9(r,b.options())});return J9(e,b,r,y)},Sp=(e,n)=>Zk(PI||yD,PI,n,e,n),rb=(e,n)=>IW(e,n),LI=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{Ve("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},Q9=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return ro(c,u=>Pe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},eU=e=>{LI(e),Q9(e)},tU=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Lo.os.isMacOS()||Lo.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},nU=(e,n,o)=>{const r=re.fromDom(e.getRoot());return Lv(r,Se.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Yw(r,Se.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},oU=e=>{if(typeof e!="string"){const n=et.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},sU=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?nU(r,o.getRng(),n):n},p2=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=oU(n);JO(e,{...r,content:sU(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=A6(e,c.content,r);TC(e,u,c),e.addVisual()})}},rU=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{p2(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{p2(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{p2(e,r)},mceInsertContent:(n,o,r)=>{p2(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},aU={"font-size":"size","font-family":"face"},cU=hi("font"),mZ=(e,n,o)=>{const r=u=>$c(u,e).orThunk(()=>cU(u)?Uo(aU,e).bind(f=>ol(u,f)):H.none()),c=u=>os(re.fromDom(n),u);return Jx(re.fromDom(o),u=>r(u),c)},lU=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),CD=(e,n)=>H.from(tr.DOM.getStyle(n,e,!0)),HI=e=>(n,o)=>H.from(o).map(re.fromDom).filter(_s).bind(r=>mZ(e,n,r.dom).or(CD(e,r.dom))).getOr(""),iU=HI("font-size"),VI=O(lU,HI("font-family")),uU=e=>si(e.getBody()).bind(n=>{const o=n.container();return H.from(ft(o)?o.parentNode:o)}),zI=e=>H.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?H.none():H.from(e.selection.getStart(!0))}),dU=(e,n)=>zI(e).orThunk(je(uU,e)).map(re.fromDom).filter(_s).bind(n),b2=(e,n)=>dU(e,Oo(H.some,n)),UI=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=qE(e),c=KE(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},mU=e=>{const n=e.split(/\s*,\s*/);return jt(n,o=>o.indexOf(" ")!==-1&&!(ds(o,'"')||ds(o,"'"))?`'${o}'`:o).join(",")},fU=(e,n)=>{const o=UI(e,n);e.formatter.toggle("fontname",{value:mU(o)}),e.nodeChanged()},gU=e=>b2(e,n=>VI(e.getBody(),n.dom)).getOr(""),WI=(e,n)=>{e.formatter.toggle("fontsize",{value:UI(e,n)}),e.nodeChanged()},SD=e=>b2(e,n=>iU(e.getBody(),n.dom)).getOr(""),ZI=e=>b2(e,n=>{const o=re.fromDom(e.getBody()),r=Jx(n,u=>$c(u,"line-height"),je(os,o)),c=()=>{const u=parseFloat(pi(n,"line-height")),f=parseFloat(pi(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),xD=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},hU=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{fU(e,c)},FontSize:(o,r,c)=>{WI(e,c)},LineHeight:(o,r,c)=>{xD(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(G(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},fZ=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>gU(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>SD(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>ZI(e))},gZ=e=>{hU(e),fZ(e)},pU=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},jI=e=>{e.editorCommands.addCommands({Indent:()=>{KT(e)},Outdent:()=>{n4(e)}}),e.editorCommands.addCommands({Outdent:()=>M7(e)},"state")},bU=e=>{const n=(o,r,c)=>{const u=G(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Xe(u)&&G(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")},mceInsertLink:n,createLink:n})},vU=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},yU=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},hZ=e=>{vU(e),yU(e)},pZ=e=>{e.editorCommands.addCommands({insertParagraph:()=>{g0(Z$,e)},mceInsertNewLine:(n,o,r)=>{Ck(e,r)},InsertLineBreak:(n,o,r)=>{g0(a2,e)}})},GI=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>Ht(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),ys);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},qI=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{M5(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},wU=e=>{eU(e),tU(e),pU(e),GI(e),rU(e),bU(e),jI(e),pZ(e),hZ(e),gZ(e),qI(e)},CU=["toggleview"],KI=e=>qt(CU,e.toLowerCase());class SU{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():_l(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const k=this.commands.exec[f];return fe(k)?(k(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!KI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return fe(r)?r(o):!1}queryCommandValue(n){if(!KI(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return fe(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;pt(n,(c,u)=>{Ve(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const w0="data-mce-contenteditable",bZ=(e,n,o)=>{pd(e,n)&&!o?gd(e,n):o&&$u(e,n)},TD=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},kD=(e,n)=>{e.dom.contentEditable=n?"true":"false"},xU=e=>{Ve(Cc(e,'*[contenteditable="true"]'),n=>{Pr(n,w0,"true"),kD(n,!1)})},ab=e=>{Ve(Cc(e,`*[${w0}="true"]`),n=>{Sr(n,w0),kD(n,!0)})},ED=e=>{H.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},jk=e=>{e.selection.setRng(e.selection.getRng())},YI=(e,n)=>{const o=re.fromDom(e.getBody());bZ(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),ED(e),e.readonly=!0,kD(o,!1),xU(o)):(e.readonly=!1,kD(o,!0),ab(o),TD(e,"StyleWithCSS",!1),TD(e,"enableInlineTableEditing",!1),TD(e,"enableObjectResizing",!1),r3(e)&&e.focus(),jk(e),e.nodeChanged())},xp=e=>e.readonly,_D=e=>{e.parser.addAttributeFilter("contenteditable",n=>{xp(e)&&Ve(n,o=>{o.attr(w0,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(w0,n=>{xp(e)&&Ve(n,o=>{o.attr("contenteditable",o.attr(w0))})}),e.serializer.addTempAttr(w0)},TU=e=>{e.serializer?_D(e):e.on("PreInit",()=>{_D(e)})},kU=e=>e.type==="click",EU=["copy"],_U=e=>qt(EU,e.type),cb=(e,n)=>_n(n,"a",r=>os(r,re.fromDom(e.getBody()))).bind(r=>ol(r,"href")),OU=(e,n)=>{if(kU(n)&&!sn.metaKeyPressed(n)){const o=re.fromDom(n.target);cb(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Ys(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else _U(n)&&e.dispatch(n.type,n)},XI=e=>{e.on("ShowCaret",n=>{xp(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{xp(e)&&n.preventDefault()})},AU=et.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class C0{constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||De}static isNative(n){return!!AU[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=Ah(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=De),o){const u={func:o,removed:!1};c&&et.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let k=this.bindings[y];k||(k=[],this.toggleEvent(y,!0)),r?k=[u,...k]:k=[...k,u],this.bindings[y]=k}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return pt(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=ks(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,Ve(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else pt(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const v2=e=>(e._eventDispatcher||(e._eventDispatcher=new C0({scope:e,toggleEvent:(n,o)=>{C0.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),OD={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Ah(e.toLowerCase(),n??{},r);const c=v2(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return v2(this).on(e,n,o)},off(e,n){return v2(this).off(e,n)},once(e,n){return v2(this).once(e,n)},hasEventListeners(e){return v2(this).has(e)}},Gk=tr.DOM;let Tp;const qk=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=My(e);return o?(e.eventRoot||(e.eventRoot=Gk.select(o)[0]),e.eventRoot):e.getBody()},DU=e=>!e.hidden&&!xp(e),JI=(e,n,o)=>{DU(e)?e.dispatch(n,o):xp(e)&&OU(e,o)},QI=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=qk(e,n);if(My(e)){if(Tp||(Tp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Tp&&(pt(Tp,(c,u)=>{e.dom.unbind(qk(e,u))}),Tp=null)})),Tp[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||Gk.isChildOf(u,y))&&JI(f[b],n,c)}};Tp[n]=r,Gk.bind(o,n,r)}else{const r=c=>{JI(e,n,c)};Gk.bind(o,n,r),e.delegates[n]=r}},Kk={...OD,bindPendingEventDelegates(){const e=this;et.each(e._pendingNativeEvents,n=>{QI(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?QI(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(qk(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(pt(e.delegates,(r,c)=>{e.dom.unbind(qk(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},RU=e=>G(e)?{value:e.split(/[ ,]/),valid:!0}:zn(e,G)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},MU=e=>{const n=(()=>{switch(e){case"array":return at;case"boolean":return ht;case"function":return fe;case"number":return Go;case"object":return Xe;case"string":return G;case"string[]":return RU;case"object[]":return o=>zn(o,Xe);case"regexp":return o=>Ke(o,RegExp);default:return mt}})();return o=>y2(o,n,`The value must be a ${e}.`)},mc=e=>G(e.processor),e5=(e,n)=>{const o=ya(n.message)?"":`. ${n.message}`;return e+o},t5=e=>e.valid,y2=(e,n,o="")=>{const r=n(e);return ht(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},n5=(e,n,o)=>{if(!Dn(n)){const r=y2(n,o);if(t5(r))return r.value;console.error(e5(`Invalid default value passed for the "${e}" option`,r))}},AD=(e,n)=>{const o={},r={},c=(R,L,Q)=>{const te=y2(L,Q);return t5(te)?(r[R]=te.value,!0):(console.warn(e5(`Invalid value passed for the ${R} option`,te)),!1)},u=(R,L)=>{const Q=mc(L)?MU(L.processor):L.processor,te=n5(R,L.default,Q);o[R]={...L,default:te,processor:Q},Uo(r,R).orThunk(()=>Uo(n,R)).each(ee=>c(R,ee,Q))},f=R=>kn(o,R);return{register:u,isRegistered:f,get:R=>Uo(r,R).orThunk(()=>Uo(o,R).map(L=>L.default)).getOrUndefined(),set:(R,L)=>{if(f(R)){const Q=o[R];return Q.immutable?(console.error(`"${R}" is an immutable option and cannot be updated`),!1):c(R,L,Q.processor)}else return console.warn(`"${R}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:R=>{const L=f(R);return L&&delete r[R],L},isSet:R=>kn(r,R)}},NU=["design","readonly"],o5=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&YI(e,u.editorReadOnly),n.set(r),Cw(e,r)},BU=(e,n,o,r)=>{if(r!==o.get()){if(!kn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?o5(e,o,n,r):e.on("init",()=>o5(e,o,n,r))}},$U=(e,n,o)=>{if(qt(NU,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},PU=e=>{const n=Na("design"),o=Na({design:{activate:Wt,deactivate:Wt,editorReadOnly:!1},readonly:{activate:Wt,deactivate:Wt,editorReadOnly:!0}});return TU(e),XI(e),{isReadOnly:()=>xp(e),set:r=>BU(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set($U(o.get(),r,c))}}},DD=et.each,RD=et.explode,IU={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},lb=et.makeMap("alt,ctrl,shift,meta,access"),Km=e=>e in lb,FU=e=>{const n={},o=Lo.os.isMacOS()||Lo.os.isiOS();DD(RD(e.toLowerCase(),"+"),u=>{Km(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=IU[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in lb)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class s5{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(DD(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return DD(RD(et.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:et.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=et.map(RD(n,">"),FU);return u[u.length-1]=et.extend(u[u.length-1],{func:r,scope:c||this.editor}),et.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const LU=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(N,R)=>(L,Q)=>{N[L.toLowerCase()]={...Q,type:R}},k=(N,R)=>r[N.toLowerCase()]=R;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:k,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},HU=()=>{const e=LU();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},ib=tr.DOM,r5=et.extend,VU=et.each;class Yk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,r5(this,Kk);const c=this;this.id=n,this.hidden=!1;const u=Sp(r.defaultOptions,o);this.options=AD(c,u),pS(c);const f=this.options.get;f("deprecation_warnings")&&fp(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const k=Fh(c);k&&(km.ScriptLoader._setReferrerPolicy(k),tr.DOM.styleSheetLoader._setReferrerPolicy(k));const N=$y(c);Pe(N)&&tr.DOM.styleSheetLoader._setContentCssCors(N),Cs.languageLoad=f("language_load"),Cs.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Gm(cc(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=By(c),this.hasVisual=FE(c),this.shortcuts=new s5(this),this.editorCommands=new SU(this),wU(this);const R=f("cache_suffix");R&&(Lo.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:HU(),styleSheetLoader:void 0,show:Wt,hide:Wt,setEnabled:Wt,isEnabled:mt},this.mode=PU(c),r.dispatch("SetupEditor",{editor:this});const L=Rg(c);fe(L)&&L.call(c,c)}render(){NI(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return op(this)}translate(n){return Gu.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(Pe(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:mt,default:o})),!c.isSet(n)&&!Dn(o)?o:c.get(n)}hasPlugin(n,o){return qt(Py(this),n)?o?Xd.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(ib.show(n.getContainer()),ib.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(ib.hide(n.getContainer()),ib.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=lg(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,lg(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=ib.getParent(o.id,"form");b&&VU(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return SN(this,n,o)}getContent(n){return gA(this,n)}insertContent(n,o){o&&(n=r5({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?SN(this,this.startContent,{format:"raw"}):SN(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||ib.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ib.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=HE(c);return fe(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||Xe(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){rb(this,n)}remove(){Y6(this)}destroy(n){X6(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const S0=tr.DOM,MD=et.each;let a5=!1,Xk,Ai=[];const Jk=e=>{const n=e.type;MD(kp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},c5=e=>{if(e!==a5){const n=tr.DOM;e?(n.bind(window,"resize",Jk),n.bind(window,"scroll",Jk)):(n.unbind(window,"resize",Jk),n.unbind(window,"scroll",Jk)),a5=e}},l5=e=>{const n=Ai;return Ai=mn(Ai,o=>e!==o),kp.activeEditor===e&&(kp.activeEditor=Ai.length>0?Ai[0]:null),kp.focusedEditor===e&&(kp.focusedEditor=null),n.length!==Ai.length},vZ=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(l5(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},zU=document.compatMode!=="CSS1Compat",kp={...OD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.1",releaseDate:"2023-03-29",i18n:Gu,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Gm.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Gm(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Gm(e.baseURL),e.suffix=o,A5(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&pt(r,(c,u)=>{Cs.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=et.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(N,R)=>N.inline&&R.tagName.toLowerCase()in r,u=N=>{let R=N.id;return R||(R=Uo(N,"name").filter(L=>!S0.get(L)).getOrThunk(S0.uniqueId),N.setAttribute("id",R)),R},f=N=>{const R=e[N];if(R)return R.apply(n,[])},b=N=>Lo.browser.isIE()||Lo.browser.isEdge()?($C("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):zU?($C("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):G(N.selector)?S0.select(N.selector):Pe(N.target)?[N.target]:[];let y=N=>{o=N};const k=()=>{let N=0;const R=[];let L;const Q=(te,j,ee)=>{const ve=new Yk(te,j,n);R.push(ve),ve.on("init",()=>{++N===L.length&&y(R)}),ve.targetElm=ve.targetElm||ee,ve.render()};S0.unbind(window,"ready",k),f("onpageload"),L=rr(b(e)),et.each(L,te=>{vZ(n.get(te.id))}),L=et.grep(L,te=>!n.get(te.id)),L.length===0?y([]):MD(L,te=>{c(e,te)?$C("Could not initialize inline editor on invalid inline target element",te):Q(u(te),e,te)})};return S0.bind(window,"ready",k),new Promise(N=>{o?N(o):y=R=>{N(R)}})},get(e){return arguments.length===0?Ai.slice(0):G(e)?gs(Ai,n=>n.id===e).getOr(null):Go(e)&&Ai[e]?Ai[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Ai.push(e),c5(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Xk||(Xk=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",Xk))),e},createEditor(e,n){return this.add(new Yk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Ai.length-1;r>=0;r--)n.remove(Ai[r]);return}if(G(e)){MD(S0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,q(n.get(o.id))?null:(l5(o)&&n.dispatch("RemoveEditor",{editor:o}),Ai.length===0&&window.removeEventListener("beforeunload",Xk),o.remove(),c5(Ai.length>0),o)},execCommand(e,n,o){var r;const c=this,u=Xe(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new Yk(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{MD(Ai,e=>{e.save()})},addI18n:(e,n)=>{Gu.add(e,n)},translate:e=>Gu.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Gm(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Gm(this.baseURL)}};kp.setup();const UU=(()=>{const e=Wa(),n=u=>({items:u,types:Ss(u),getType:f=>Uo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),i5=Math.min,x0=Math.max,Qk=Math.round,u5=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,k=(o||"").split("");return k[0]==="b"&&(c+=y),k[1]==="r"&&(r+=b),k[0]==="c"&&(c+=Qk(y/2)),k[1]==="c"&&(r+=Qk(b/2)),k[3]==="b"&&(c-=f),k[4]==="r"&&(r-=u),k[3]==="c"&&(c-=Qk(f/2)),k[4]==="c"&&(r-=Qk(u/2)),T0(r,c,u,f)},WU=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=u5(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},ZU=(e,n,o)=>T0(e.x-n,e.y-o,e.w+n*2,e.h+o*2),jU=(e,n)=>{const o=x0(e.x,n.x),r=x0(e.y,n.y),c=i5(e.x+e.w,n.x+n.w),u=i5(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:T0(o,r,c-o,u-r)},GU=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,k=x0(0,n.x-r),N=x0(0,n.y-c),R=x0(0,u-b),L=x0(0,f-y);return r+=k,c+=N,o&&(u+=k,f+=N,r-=R,c-=L),u-=R,f-=L,T0(r,c,u-r,f-c)},T0=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),qU={inflate:ZU,relativePosition:u5,findBestRelativePosition:WU,intersect:jU,clamp:GU,create:T0,fromClientRect:e=>T0(e.left,e.top,e.width,e.height)},KU=(e,n,o=1e3)=>{let r=!1,c=null;const u=k=>(...N)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),k.apply(null,N))},f=u(e),b=u(n);return{start:(...k)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,k),o))},resolve:f,reject:b}},XU=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,y=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const k=new Promise((N,R)=>{const L=KU(N,R);n[u]=L.resolve,km.ScriptLoader.loadScript(f).then(()=>L.start(y),()=>L.reject(b))});return e[u]=k,k}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),JU=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let w2;try{const e="__storage_test__";w2=window.localStorage,w2.setItem(e,e),w2.removeItem(e)}catch{w2=JU()}var QU=w2;const eW={geom:{Rect:qU},util:{Delay:Ki,Tools:et,VK:sn,URI:Gm,EventDispatcher:C0,Observable:OD,I18n:Gu,LocalStorage:QU,ImageUploader:m8},dom:{EventUtils:Tm,TreeWalker:xa,TextSeeker:fr,DOMUtils:tr,ScriptLoader:km,RangeUtils:Qh,Serializer:fA,StyleSheetLoader:hg,ControlSelection:px,BookmarkManager:ri,Selection:th,Event:Tm.Event},html:{Styles:Mb,Entities:hf,Node:Ei,Schema:Ci,DomParser:mp,Writer:w3,Serializer:sp},Env:Lo,AddOnManager:Cs,Annotator:C1,Formatter:PC,UndoManager:CA,EditorCommands:SU,WindowManager:pA,NotificationManager:gp,EditorObservable:Kk,Shortcuts:s5,Editor:Yk,FocusManager:tp,EditorManager:kp,DOM:tr.DOM,ScriptLoader:km.ScriptLoader,PluginManager:Xd,ThemeManager:Lf,ModelManager:e0,IconManager:ET,Resource:XU,FakeClipboard:UU,trim:et.trim,isArray:et.isArray,is:et.is,toArray:et.toArray,makeMap:et.makeMap,each:et.each,map:et.map,grep:et.grep,inArray:et.inArray,extend:et.extend,walk:et.walk,resolve:et.resolve,explode:et.explode,_addCacheSuffix:et._addCacheSuffix},d5=et.extend(kp,eW),tW=e=>{try{ge.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(d5),tW(d5)})()})(JG);(function(){var ge=tinymce.util.Tools.resolve("tinymce.ModelManager");const bt=(i,m,h)=>{var v;return h(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},vn=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&bt(i,String,(h,v)=>v.isPrototypeOf(h))?"string":m},Dt=i=>m=>vn(m)===i,zt=i=>m=>typeof m===i,Xt=i=>m=>i===m,Mn=Dt("string"),Et=Dt("object"),Mt=Dt("array"),Ln=Xt(null),hn=zt("boolean"),tn=Xt(void 0),fn=i=>i==null,dt=i=>!fn(i),Pt=zt("function"),it=zt("number"),tt=()=>{},pn=(i,m)=>(...h)=>i(m.apply(null,h)),Ke=(i,m)=>h=>i(m(h)),G=i=>()=>i,Xe=i=>i,Ot=(i,m)=>i===m;function at(i,...m){return(...h)=>{const v=m.concat(h);return i.apply(null,v)}}const q=i=>m=>!i(m),ht=i=>()=>{throw new Error(i)},Dn=i=>i(),Ye=G(!1),Pe=G(!0);class fe{constructor(m,h){this.tag=m,this.value=h}static some(m){return new fe(!0,m)}static none(){return fe.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?fe.some(m(this.value)):fe.none()}bind(m){return this.tag?m(this.value):fe.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:fe.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return dt(m)?fe.some(m):fe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}fe.singletonNone=new fe(!1);const Go=Array.prototype.slice,zn=Array.prototype.indexOf,Wt=Array.prototype.push,O=(i,m)=>zn.call(i,m),Oo=(i,m)=>O(i,m)>-1,rt=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const T=i[h];if(m(T,h))return!0}return!1},Fo=(i,m)=>{const h=[];for(let v=0;v<i;v++)h.push(m(v));return h},cn=(i,m)=>{const h=i.length,v=new Array(h);for(let T=0;T<h;T++){const A=i[T];v[T]=m(A,T)}return v},je=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const T=i[h];m(T,h)}},po=(i,m)=>{for(let h=i.length-1;h>=0;h--){const v=i[h];m(v,h)}},es=(i,m)=>{const h=[],v=[];for(let T=0,A=i.length;T<A;T++){const P=i[T];(m(P,T)?h:v).push(P)}return{pass:h,fail:v}},Bo=(i,m)=>{const h=[];for(let v=0,T=i.length;v<T;v++){const A=i[v];m(A,v)&&h.push(A)}return h},Ts=(i,m,h)=>(po(i,(v,T)=>{h=m(h,v,T)}),h),De=(i,m,h)=>(je(i,(v,T)=>{h=m(h,v,T)}),h),mt=(i,m,h)=>{for(let v=0,T=i.length;v<T;v++){const A=i[v];if(m(A,v))return fe.some(A);if(h(A,v))break}return fe.none()},H=(i,m)=>mt(i,m,Ye),Yr=(i,m)=>{for(let h=0,v=i.length;h<v;h++){const T=i[h];if(m(T,h))return fe.some(h)}return fe.none()},Pn=i=>{const m=[];for(let h=0,v=i.length;h<v;++h){if(!Mt(i[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+i);Wt.apply(m,i[h])}return m},is=(i,m)=>Pn(cn(i,m)),Bn=(i,m)=>{for(let h=0,v=i.length;h<v;++h){const T=i[h];if(m(T,h)!==!0)return!1}return!0},Zn=i=>{const m=Go.call(i,0);return m.reverse(),m},qt=(i,m)=>{const h={};for(let v=0,T=i.length;v<T;v++){const A=i[v];h[String(A)]=m(A,v)}return h},ro=(i,m)=>{const h=Go.call(i,0);return h.sort(m),h},jt=(i,m)=>m>=0&&m<i.length?fe.some(i[m]):fe.none(),Ve=i=>jt(i,0),Vr=i=>jt(i,i.length-1),ks=(i,m)=>{for(let h=0;h<i.length;h++){const v=m(i[h],h);if(v.isSome())return v}return fe.none()},mn=Object.keys,Ka=Object.hasOwnProperty,qo=(i,m)=>{const h=mn(i);for(let v=0,T=h.length;v<T;v++){const A=h[v],P=i[A];m(P,A)}},Ya=(i,m)=>gs(i,(h,v)=>({k:v,v:m(h,v)})),gs=(i,m)=>{const h={};return qo(i,(v,T)=>{const A=m(v,T);h[A.k]=A.v}),h},ir=i=>(m,h)=>{i[h]=m},Oa=(i,m,h,v)=>{qo(i,(T,A)=>{(m(T,A)?h:v)(T,A)})},_r=(i,m)=>{const h={};return Oa(i,m,ir(h),tt),h},us=(i,m)=>{const h=[];return qo(i,(v,T)=>{h.push(m(v,T))}),h},ts=i=>us(i,Xe),ot=(i,m)=>Je(i,m)?fe.from(i[m]):fe.none(),Je=(i,m)=>Ka.call(i,m),Gt=(i,m)=>Je(i,m)&&i[m]!==void 0&&i[m]!==null,nn=i=>{for(const m in i)if(Ka.call(i,m))return!1;return!0},In=typeof window<"u"?window:Function("return this;")(),Ao=(i,m)=>{let h=m??In;for(let v=0;v<i.length&&h!==void 0&&h!==null;++v)h=h[i[v]];return h},Rs=(i,m)=>{const h=i.split(".");return Ao(h,m)},pa=(i,m)=>Rs(i,m),rr=(i,m)=>{const h=pa(i,m);if(h==null)throw new Error(i+" not available on this browser");return h},Ss=Object.getPrototypeOf,Or=i=>rr("HTMLElement",i),pt=i=>{const m=Rs("ownerDocument.defaultView",i);return Et(i)&&(Or(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(Ss(i).constructor.name))},oo=8,ba=9,ar=11,Hc=1,Xa=3,Ko=i=>i.dom.nodeName.toLowerCase(),Ja=i=>i.dom.nodeType,va=i=>m=>Ja(m)===i,Uo=i=>Ja(i)===oo||Ko(i)==="#comment",kn=i=>zr(i)&&pt(i.dom),zr=va(Hc),Aa=va(Xa),Qa=va(ba),ec=va(ar),Is=i=>m=>zr(m)&&Ko(m)===i,ur=(i,m,h)=>{if(Mn(h)||hn(h)||it(h))i.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",i),new Error("Attribute value was not simple")},bs=(i,m,h)=>{ur(i.dom,m,h)},pr=(i,m)=>{const h=i.dom;qo(m,(v,T)=>{ur(h,T,v)})},de=(i,m)=>{qo(m,(h,v)=>{h.fold(()=>{Me(i,v)},T=>{ur(i.dom,v,T)})})},se=(i,m)=>{const h=i.dom.getAttribute(m);return h===null?void 0:h},Ie=(i,m)=>fe.from(se(i,m)),Me=(i,m)=>{i.dom.removeAttribute(m)},Kt=i=>De(i.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),bn=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const T="HTML does not have a single root node";throw console.error(T,i),new Error(T)}return qn(v.childNodes[0])},to=(i,m)=>{const v=(m||document).createElement(i);return qn(v)},Zo=(i,m)=>{const v=(m||document).createTextNode(i);return qn(v)},qn=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},pe={fromHtml:bn,fromTag:to,fromText:Zo,fromDom:qn,fromPoint:(i,m,h)=>fe.from(i.dom.elementFromPoint(m,h)).map(qn)},Ho=(i,m)=>{const h=i.dom;if(h.nodeType!==Hc)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},br=i=>i.nodeType!==Hc&&i.nodeType!==ba&&i.nodeType!==ar||i.childElementCount===0,dr=(i,m)=>{const h=m===void 0?document:m.dom;return br(h)?[]:cn(h.querySelectorAll(i),pe.fromDom)},Vc=(i,m)=>{const h=m===void 0?document:m.dom;return br(h)?fe.none():fe.from(h.querySelector(i)).map(pe.fromDom)},bo=(i,m)=>i.dom===m.dom,ml=(i,m)=>{const h=i.dom,v=m.dom;return h===v?!1:h.contains(v)},vr=Ho,mr=i=>pe.fromDom(i.dom.ownerDocument),Ys=i=>Qa(i)?i:mr(i),xs=i=>pe.fromDom(Ys(i).dom.documentElement),ds=i=>pe.fromDom(Ys(i).dom.defaultView),zc=i=>fe.from(i.dom.parentNode).map(pe.fromDom),tc=i=>fe.from(i.dom.parentElement).map(pe.fromDom),gc=(i,m)=>{const h=Pt(m)?m:Ye;let v=i.dom;const T=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const A=v.parentNode,P=pe.fromDom(A);if(T.push(P),h(P)===!0)break;v=A}return T},el=i=>fe.from(i.dom.previousSibling).map(pe.fromDom),tl=i=>fe.from(i.dom.nextSibling).map(pe.fromDom),Vo=i=>cn(i.dom.childNodes,pe.fromDom),ya=(i,m)=>{const h=i.dom.childNodes;return fe.from(h[m]).map(pe.fromDom)},Ac=i=>ya(i,0),hc=(i,m)=>{zc(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},Da=(i,m)=>{tl(i).fold(()=>{zc(i).each(T=>{Es(T,m)})},v=>{hc(v,m)})},yr=(i,m)=>{Ac(i).fold(()=>{Es(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},Es=(i,m)=>{i.dom.appendChild(m.dom)},au=(i,m,h)=>{ya(i,h).fold(()=>{Es(i,m)},v=>{hc(v,m)})},Kl=(i,m)=>{hc(i,m),Es(m,i)},Yo=(i,m)=>{je(m,(h,v)=>{const T=v===0?i:m[v-1];Da(T,h)})},aa=(i,m)=>{je(m,h=>{Es(i,h)})},wa=i=>{i.dom.textContent="",je(Vo(i),m=>{Xs(m)})},Xs=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Yl=i=>{const m=Vo(i);m.length>0&&Yo(i,m),Xs(i)},nc=(i,m)=>pe.fromDom(i.dom.cloneNode(m)),ca=i=>nc(i,!1),pc=i=>nc(i,!0),fi=(i,m)=>{const h=pe.fromTag(m),v=Kt(i);return pr(h,v),h},fl=(i,m)=>{const h=fi(i,m),v=Vo(pc(i));return aa(h,v),h},gi=(i,m)=>{const h=fi(i,m);Da(i,h);const v=Vo(i);return aa(h,v),Xs(i),h},Ca=["tfoot","thead","tbody","colgroup"],Dc=i=>Oo(Ca,i),Xl=(i,m)=>({rows:i,columns:m}),Uc=(i,m)=>({row:i,column:m}),Jl=(i,m,h)=>({element:i,rowspan:m,colspan:h}),W=(i,m,h,v)=>({element:i,rowspan:m,colspan:h,isNew:v}),ie=(i,m,h,v,T,A)=>({element:i,rowspan:m,colspan:h,row:v,column:T,isLocked:A}),be=(i,m,h)=>({element:i,cells:m,section:h}),Fe=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),ct=(i,m,h)=>({element:i,isNew:m,isLocked:h}),yn=(i,m,h,v)=>({element:i,cells:m,section:h,isNew:v}),ns=(i,m,h,v)=>({startRow:i,startCol:m,finishRow:h,finishCol:v}),wr=(i,m,h)=>({element:i,colspan:m,column:h}),wo=(i,m)=>({element:i,columns:m}),Cr=i=>ec(i)&&dt(i.dom.host),$o=Pt(Element.prototype.attachShadow)&&Pt(Node.prototype.getRootNode),Zs=G($o),Rc=$o?i=>pe.fromDom(i.dom.getRootNode()):Ys,bc=i=>{const m=Rc(i);return Cr(m)?fe.some(m):fe.none()},Hn=i=>pe.fromDom(i.dom.host),Lo=i=>{if(Zs()&&dt(i.target)){const m=pe.fromDom(i.target);if(zr(m)&&Ur(m)&&i.composed&&i.composedPath){const h=i.composedPath();if(h)return Ve(h)}}return fe.from(i.target)},Ur=i=>dt(i.dom.shadowRoot),$=i=>{const m=Aa(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return bc(pe.fromDom(m)).fold(()=>h.body.contains(m),Ke($,Hn))},K=()=>ne(pe.fromDom(document)),ne=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return pe.fromDom(m)},Re=(i,m,h)=>Bo(gc(i,h),m),Nt=(i,m)=>Bo(Vo(i),m),Yn=(i,m)=>{let h=[];return je(Vo(i),v=>{m(v)&&(h=h.concat([v])),h=h.concat(Yn(v,m))}),h},Zt=(i,m,h)=>Re(i,v=>Ho(v,m),h),Ar=(i,m)=>Nt(i,h=>Ho(h,m)),Wr=(i,m)=>dr(m,i);var et=(i,m,h,v,T)=>i(h,v)?fe.some(h):Pt(T)&&T(h)?fe.none():m(h,v,T);const Dr=(i,m,h)=>{let v=i.dom;const T=Pt(h)?h:Ye;for(;v.parentNode;){v=v.parentNode;const A=pe.fromDom(v);if(m(A))return fe.some(A);if(T(A))break}return fe.none()},Js=(i,m,h)=>et((T,A)=>A(T),Dr,i,m,h),Zr=(i,m)=>{const h=T=>m(pe.fromDom(T));return H(i.dom.childNodes,h).map(pe.fromDom)},dd=(i,m)=>{const h=v=>{for(let T=0;T<v.childNodes.length;T++){const A=pe.fromDom(v.childNodes[T]);if(m(A))return fe.some(A);const P=h(v.childNodes[T]);if(P.isSome())return P}return fe.none()};return h(i.dom)},fo=(i,m,h)=>Dr(i,v=>Ho(v,m),h),Y=(i,m)=>Zr(i,h=>Ho(h,m)),oe=(i,m)=>Vc(m,i),xe=(i,m,h)=>et((T,A)=>Ho(T,A),fo,i,m,h),ze=(i,m,h=Ot)=>i.exists(v=>h(v,m)),Qt=i=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(h);return m},Do=(i,m)=>i!=null?m(i):fe.none(),Fs=(i,m)=>i?fe.some(m):fe.none(),vo=(i,m,h)=>m===""||i.length>=m.length&&i.substr(h,h+m.length)===m,Ms=(i,m,h=0,v)=>{const T=i.indexOf(m,h);return T!==-1?tn(v)?!0:T+m.length<=v:!1},la=(i,m)=>vo(i,m,0),vs=(i,m)=>vo(i,m,i.length-m.length),Wc=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),hs=i=>i.length>0,ia=i=>{const m=parseFloat(i);return isNaN(m)?fe.none():fe.some(m)},Qs=i=>i.style!==void 0&&Pt(i.style.getPropertyValue),Dl=(i,m,h)=>{if(!Mn(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",i),new Error("CSS value must be a string: "+h);Qs(i)&&i.style.setProperty(m,h)},Ri=(i,m)=>{Qs(i)&&i.style.removeProperty(m)},_s=(i,m,h)=>{const v=i.dom;Dl(v,m,h)},yc=(i,m)=>{const h=i.dom;qo(m,(v,T)=>{Dl(h,T,v)})},Rl=(i,m)=>{const h=i.dom,T=window.getComputedStyle(h).getPropertyValue(m);return T===""&&!$(i)?md(h,m):T},md=(i,m)=>Qs(i)?i.style.getPropertyValue(m):"",hi=(i,m)=>{const h=i.dom,v=md(h,m);return fe.from(v).filter(T=>T.length>0)},nl=(i,m)=>{const h=i.dom;Ri(h,m),ze(Ie(i,"style").map(Wc),"")&&Me(i,"style")},Pr=(i,m)=>{const h=i.dom,v=m.dom;Qs(h)&&Qs(v)&&(v.style.cssText=h.style.cssText)},oc=(i,m,h=0)=>Ie(i,m).map(v=>parseInt(v,10)).getOr(h),Mc=(i,m)=>oc(i,m,1),ol=i=>Is("col")(i)?oc(i,"span",1)>1:Mc(i,"colspan")>1,Ha=i=>Mc(i,"rowspan")>1,Sr=(i,m)=>parseInt(Rl(i,m),10),Zc=G(10),im=G(10),cu=(i,m)=>lu(i,m,Pe),lu=(i,m,h)=>is(Vo(i),v=>Ho(v,m)?h(v)?[v]:[]:lu(v,m,h)),ef=(i,m,h=Ye)=>{if(h(m))return fe.none();if(Oo(i,Ko(m)))return fe.some(m);const v=T=>Ho(T,"table")||h(T);return fo(m,i.join(","),v)},gl=(i,m)=>ef(["td","th"],i,m),iu=i=>cu(i,"th,td"),fd=i=>Ho(i,"colgroup")?Ar(i,"col"):is($u(i),m=>Ar(m,"col")),Rr=(i,m)=>xe(i,"table",m),um=i=>cu(i,"tr"),$u=i=>Rr(i).fold(G([]),m=>Ar(m,"colgroup")),Pu=(i,m)=>cn(i,h=>{if(Ko(h)==="colgroup"){const v=cn(fd(h),T=>{const A=oc(T,"span",1);return Jl(T,1,A)});return be(h,v,"colgroup")}else{const v=cn(iu(h),T=>{const A=oc(T,"rowspan",1),P=oc(T,"colspan",1);return Jl(T,A,P)});return be(h,v,m(h))}}),gd=i=>zc(i).map(m=>{const h=Ko(m);return Dc(h)?h:"tbody"}).getOr("tbody"),hd=i=>{const m=um(i),v=[...$u(i),...m];return Pu(v,gd)},pd=(i,m)=>Pu(i,()=>m),Iu=i=>{let m=!1,h;return(...v)=>(m||(m=!0,h=i.apply(null,v)),h)},tf=(i,m,h,v)=>{const T=i.isiOS()&&/ipad/i.test(h)===!0,A=i.isiOS()&&!T,P=i.isiOS()||i.isAndroid(),U=P||v("(pointer:coarse)"),J=T||!A&&P&&v("(min-device-width:768px)"),ce=A||P&&!J,Ce=m.isSafari()&&i.isiOS()&&/safari/i.test(h)===!1,lt=!ce&&!J&&!Ce;return{isiPad:G(T),isiPhone:G(A),isTablet:G(J),isPhone:G(ce),isTouch:G(U),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:G(Ce),isDesktop:G(lt)}},nf=(i,m)=>{for(let h=0;h<i.length;h++){const v=i[h];if(v.test(m))return v}},uu=(i,m)=>{const h=nf(i,m);if(!h)return{major:0,minor:0};const v=T=>Number(m.replace(h,"$"+T));return bd(v(1),v(2))},Ep=(i,m)=>{const h=String(m).toLowerCase();return i.length===0?re():uu(i,h)},re=()=>bd(0,0),bd=(i,m)=>({major:i,minor:m}),Nc={nu:bd,detect:Ep,unknown:re},Qf=(i,m)=>ks(m.brands,h=>{const v=h.brand.toLowerCase();return H(i,T=>{var A;return v===((A=T.brand)===null||A===void 0?void 0:A.toLowerCase())}).map(T=>({current:T.name,version:Nc.nu(parseInt(h.version,10),0)}))}),_p=(i,m)=>{const h=String(m).toLowerCase();return H(i,v=>v.search(h))},Op=(i,m)=>_p(i,m).map(h=>{const v=Nc.detect(h.versionRegexes,m);return{current:h.name,version:v}}),os=(i,m)=>_p(i,m).map(h=>{const v=Nc.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Ml=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wc=i=>m=>Ms(m,i),sl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>Ms(i,"edge/")&&Ms(i,"chrome")&&Ms(i,"safari")&&Ms(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ml],search:i=>Ms(i,"chrome")&&!Ms(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>Ms(i,"msie")||Ms(i,"trident")},{name:"Opera",versionRegexes:[Ml,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wc("firefox")},{name:"Safari",versionRegexes:[Ml,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(Ms(i,"safari")||Ms(i,"mobile/"))&&Ms(i,"applewebkit")}],uh=[{name:"Windows",search:wc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>Ms(i,"iphone")||Ms(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:wc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wc("linux"),versionRegexes:[]},{name:"Solaris",search:wc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:wc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Mi={browsers:G(sl),oses:G(uh)},hl="Edge",dm="Chromium",eg="IE",dh="Opera",jc="Firefox",vd="Safari",mh=()=>rl({current:void 0,version:Nc.unknown()}),rl=i=>{const m=i.current,h=i.version,v=T=>()=>m===T;return{current:m,version:h,isEdge:v(hl),isChromium:v(dm),isIE:v(eg),isOpera:v(dh),isFirefox:v(jc),isSafari:v(vd)}},Ra={unknown:mh,nu:rl,edge:G(hl),chromium:G(dm),ie:G(eg),opera:G(dh),firefox:G(jc),safari:G(vd)},yd="Windows",wd="iOS",Nl="Android",Bc="Linux",of="macOS",sf="Solaris",rf="FreeBSD",af="ChromeOS",Ql=()=>mm({current:void 0,version:Nc.unknown()}),mm=i=>{const m=i.current,h=i.version,v=T=>()=>m===T;return{current:m,version:h,isWindows:v(yd),isiOS:v(wd),isAndroid:v(Nl),isMacOS:v(of),isLinux:v(Bc),isSolaris:v(sf),isFreeBSD:v(rf),isChromeOS:v(af)}},fh={unknown:Ql,nu:mm,windows:G(yd),ios:G(wd),android:G(Nl),linux:G(Bc),macos:G(of),solaris:G(sf),freebsd:G(rf),chromeos:G(af)},gh={detect:(i,m,h)=>{const v=Mi.browsers(),T=Mi.oses(),A=m.bind(J=>Qf(v,J)).orThunk(()=>Op(v,i)).fold(Ra.unknown,Ra.nu),P=os(T,i).fold(fh.unknown,fh.nu),U=tf(P,A,i,h);return{browser:A,os:P,deviceType:U}}},fm=i=>window.matchMedia(i).matches;let tg=Iu(()=>gh.detect(navigator.userAgent,fe.from(navigator.userAgentData),fm));const Ni=()=>tg(),ng=(i,m)=>{const h=(U,J)=>{if(!it(J)&&!J.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+J);const ce=U.dom;Qs(ce)&&(ce.style[i]=J+"px")},v=U=>{const J=m(U);if(J<=0||J===null){const ce=Rl(U,i);return parseFloat(ce)||0}return J},T=v,A=(U,J)=>De(J,(ce,Ce)=>{const lt=Rl(U,Ce),Bt=lt===void 0?0:parseInt(lt,10);return isNaN(Bt)?ce:ce+Bt},0);return{set:h,get:v,getOuter:T,aggregate:A,max:(U,J,ce)=>{const Ce=A(U,ce);return J>Ce?J-Ce:0}}},js=(i,m)=>ia(i).getOr(m),E=(i,m,h)=>js(Rl(i,m),h),M=(i,m,h,v)=>{const T=E(i,`padding-${h}`,0),A=E(i,`padding-${v}`,0),P=E(i,`border-${h}-width`,0),U=E(i,`border-${v}-width`,0);return m-T-A-P-U},z=(i,m)=>{const h=i.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:M(i,v,"left","right")},ue=i=>E(i,"height",i.dom.offsetHeight),me=i=>E(i,"width",i.dom.offsetWidth),Tt=i=>z(i,"content-box"),_n=ng("width",i=>i.dom.offsetWidth),Un=i=>_n.get(i),go=i=>_n.getOuter(i),Ct=Tt,ms=me,Sa=(i,m,h)=>{const v=i.cells,T=v.slice(0,m),A=v.slice(m),P=T.concat(h).concat(A);return og(i,P)},pl=(i,m,h)=>Sa(i,m,[h]),gm=(i,m,h)=>{const v=i.cells;v[m]=h},og=(i,m)=>yn(i.element,m,i.section,i.isNew),pi=(i,m)=>{const h=i.cells,v=cn(h,m);return yn(i.element,v,i.section,i.isNew)},bl=(i,m)=>i.cells[m],$c=(i,m)=>bl(i,m).element,Bl=i=>i.cells.length,Va=i=>{const m=es(i,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},pb=(i,m,h)=>{const v=cn(i.cells,h);return yn(m(i.element),v,i.section,!0)},as="data-snooker-locked-cols",Fu=i=>Ie(i,as).bind(m=>fe.from(m.match(/\d+/g))).map(m=>qt(m,Pe)),Cd=i=>{const m=De(Va(i).rows,(v,T)=>(je(T.cells,(A,P)=>{A.isLocked&&(v[P]=!0)}),v),{}),h=us(m,(v,T)=>parseInt(T,10));return ro(h)},Mr=(i,m)=>i+","+m,bb=(i,m,h)=>fe.from(i.access[Mr(m,h)]),D0=(i,m,h)=>{const v=Lu(i,T=>h(m,T.element));return v.length>0?fe.some(v[0]):fe.none()},Lu=(i,m)=>{const h=is(i.all,v=>v.cells);return Bo(h,m)},Ns=i=>{const m={};let h=0;return je(i.cells,v=>{const T=v.colspan;Fo(T,A=>{const P=h+A;m[P]=wr(v.element,T,P)}),h+=T}),m},Ls=i=>{const m={},h=[],T=Ve(i).map(_t=>_t.element).bind(Rr).bind(Fu).getOr({});let A=0,P=0,U=0;const{pass:J,fail:ce}=es(i,_t=>_t.section==="colgroup");je(ce,_t=>{const Ge=[];je(_t.cells,Rt=>{let Ze=0;for(;m[Mr(U,Ze)]!==void 0;)Ze++;const Jt=Gt(T,Ze.toString()),Fn=ie(Rt.element,Rt.rowspan,Rt.colspan,U,Ze,Jt);for(let no=0;no<Rt.colspan;no++)for(let zs=0;zs<Rt.rowspan;zs++){const Ec=U+zs,jr=Ze+no,ci=Mr(Ec,jr);m[ci]=Fn,P=Math.max(P,jr+1)}Ge.push(Fn)}),A++,h.push(be(_t.element,Ge,_t.section)),U++});const{columns:Ce,colgroups:lt}=Vr(J).map(_t=>{const Ge=Ns(_t);return{colgroups:[wo(_t.element,ts(Ge))],columns:Ge}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Xl(A,P),access:m,all:h,columns:Ce,colgroups:lt}},Co={fromTable:i=>{const m=hd(i);return Ls(m)},generate:Ls,getAt:bb,findItem:D0,filterItems:Lu,justCells:i=>is(i.all,m=>m.cells),justColumns:i=>ts(i.columns),hasColumns:i=>mn(i.columns).length>0,getColumnAt:(i,m)=>fe.from(i.columns[m])},hh=(i,m=Pe)=>{const h=i.grid,v=Fo(h.columns,Xe),T=Fo(h.rows,Xe);return cn(v,A=>Ap(()=>is(T,ce=>Co.getAt(i,ce,A).filter(Ce=>Ce.column===A).toArray()),ce=>ce.colspan===1&&m(ce.element),()=>Co.getAt(i,0,A)))},Ap=(i,m,h)=>{const v=i();return H(v,m).orThunk(()=>fe.from(v[0]).orThunk(h)).map(P=>P.element)},R0=i=>{const m=i.grid,h=Fo(m.rows,Xe),v=Fo(m.columns,Xe);return cn(h,T=>Ap(()=>is(v,J=>Co.getAt(i,T,J).filter(ce=>ce.row===T).fold(G([]),ce=>[ce])),J=>J.rowspan===1,()=>Co.getAt(i,T,0)))},M0=(i,m)=>{if(m<0||m>=i.length-1)return fe.none();const h=i[m].fold(()=>{const T=Zn(i.slice(0,m));return ks(T,(A,P)=>A.map(U=>({value:U,delta:P+1})))},T=>fe.some({value:T,delta:0})),v=i[m+1].fold(()=>{const T=i.slice(m+1);return ks(T,(A,P)=>A.map(U=>({value:U,delta:P+1})))},T=>fe.some({value:T,delta:1}));return h.bind(T=>v.map(A=>{const P=A.delta+T.delta;return Math.abs(A.value-T.value)/P}))},sg=(i,m)=>h=>vb(h)==="rtl"?m:i,vb=i=>Rl(i,"direction")==="rtl"?"rtl":"ltr",rg=ng("height",i=>{const m=i.dom;return $(i)?m.getBoundingClientRect().height:m.offsetHeight}),bi=i=>rg.get(i),yb=i=>rg.getOuter(i),ph=ue,wb=(i,m)=>({left:i,top:m,translate:(v,T)=>wb(i+v,m+T)}),Bi=wb,Dp=i=>{const m=i.getBoundingClientRect();return Bi(m.left,m.top)},$i=(i,m)=>i!==void 0?i:m!==void 0?m:0,pm=i=>{const m=i.dom.ownerDocument,h=m.body,v=m.defaultView,T=m.documentElement;if(h===i.dom)return Bi(h.offsetLeft,h.offsetTop);const A=$i(v==null?void 0:v.pageYOffset,T.scrollTop),P=$i(v==null?void 0:v.pageXOffset,T.scrollLeft),U=$i(T.clientTop,h.clientTop),J=$i(T.clientLeft,h.clientLeft);return N0(i).translate(P-J,A-U)},N0=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?Bi(v.offsetLeft,v.offsetTop):$(i)?Dp(m):Bi(0,0)},bh=(i,m)=>({row:i,y:m}),vh=(i,m)=>({col:i,x:m}),Cb=i=>pm(i).left+go(i),yh=i=>pm(i).left,Cc=(i,m)=>vh(i,yh(m)),wh=(i,m)=>vh(i,Cb(m)),xa=i=>pm(i).top,Sc=(i,m)=>bh(i,xa(m)),Cn=(i,m)=>bh(i,xa(m)+yb(m)),Ht=(i,m,h)=>{if(h.length===0)return[];const v=cn(h.slice(1),(A,P)=>A.map(U=>i(P,U))),T=h[h.length-1].map(A=>m(h.length-1,A));return v.concat([T])},ag=i=>-i,al={delta:Xe,positions:i=>Ht(Sc,Cn,i),edge:xa},$l=sg({delta:Xe,edge:yh,positions:i=>Ht(Cc,wh,i)},{delta:ag,edge:Cb,positions:i=>Ht(wh,Cc,i)}),vl={delta:(i,m)=>$l(m).delta(i,m),positions:(i,m)=>$l(m).positions(i,m),edge:i=>$l(i).edge(i)},Sh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Nr=(()=>{const i="[0-9]+",h="[eE]"+("[+-]?"+i),v="\\.",T=U=>`(?:${U})?`,P=`[+-]?(?:${["Infinity",i+v+T(i)+T(h),v+i+T(h),i+T(h)].join("|")})`;return new RegExp(`^(${P})(.*)$`)})(),cf=(i,m)=>rt(m,h=>rt(Sh[h],v=>i===v)),lg=(i,m)=>fe.from(Nr.exec(i)).bind(v=>{const T=Number(v[1]),A=v[2];return cf(A,m)?fe.some({value:T,unit:A}):fe.none()}),ft=/(\d+(\.\d+)?)%/,B0=/(\d+(\.\d+)?)px|em/,Sb=Is("col"),Pl=(i,m,h)=>{const v=tc(i).getOrThunk(()=>ne(mr(i)));return m(i)/h(v)*100},lf=(i,m)=>{_s(i,"width",m+"px")},kd=(i,m)=>{_s(i,"width",m+"%")},xr=(i,m)=>{_s(i,"height",m+"px")},xb=i=>ph(i)+"px",ys=(i,m,h,v)=>{const T=Rr(i).map(A=>{const P=h(A);return Math.floor(m/100*P)}).getOr(m);return v(i,T),T},cs=(i,m,h,v)=>{const T=parseFloat(i);return vs(i,"%")&&Ko(m)!=="table"?ys(m,T,h,v):T},xc=i=>{const m=xb(i);return m?cs(m,i,bi,xr):bi(i)},uf=(i,m,h)=>{const v=h(i),T=Mc(i,m);return v/T},Xr=(i,m)=>hi(i,m).orThunk(()=>Ie(i,m).map(h=>h+"px")),Ed=i=>Xr(i,"width"),Jr=i=>Xr(i,"height"),Os=i=>Pl(i,Un,Ct),ig=i=>Sb(i)?Un(i):ms(i),Qe=i=>uf(i,"rowspan",xc),ei=i=>Ed(i).bind(h=>lg(h,["fixed","relative","empty"])),xh=(i,m,h)=>{_s(i,"width",m+h)},Ir=i=>Un(i)+"px",Pi=i=>Pl(i,Un,Ct)+"%",Rp=i=>Ed(i).exists(m=>ft.test(m)),vi=i=>Ed(i).exists(m=>B0.test(m)),$0=i=>Ed(i).isNone(),Hu=G(ft),Tb=Is("col"),yl=i=>Ed(i).getOrThunk(()=>ig(i)+"px"),ss=i=>Jr(i).getOrThunk(()=>Qe(i)+"px"),du=i=>cn(Co.justColumns(i),m=>fe.from(m.element)),ug=i=>{const m=Ni().browser,h=m.isChromium()||m.isFirefox();return Tb(i)?h:!0},Pc=(i,m,h,v,T,A)=>i.filter(v).fold(()=>A(M0(h,m)),P=>T(P)),Ii=(i,m,h,v)=>{const T=hh(i),A=Co.hasColumns(i)?du(i):T,P=[fe.some(vl.edge(m))].concat(cn(vl.positions(T,m),J=>J.map(ce=>ce.x))),U=q(ol);return cn(A,(J,ce)=>Pc(J,ce,P,U,Ce=>{if(ug(Ce))return h(Ce);{const lt=Do(T[ce],Xe);return Pc(lt,ce,P,U,Bt=>v(fe.some(Un(Bt))),v)}},v))},Tc=i=>i.map(m=>m+"px").getOr(""),kb=(i,m)=>Ii(i,m,yl,Tc),Ic=(i,m,h)=>Ii(i,m,Os,v=>v.fold(()=>h.minCellWidth(),T=>T/h.pixelWidth()*100)),Vu=(i,m,h)=>Ii(i,m,ig,v=>v.getOrThunk(h.minCellWidth)),Te=(i,m,h,v,T)=>{const A=R0(i),P=[fe.some(h.edge(m))].concat(cn(h.positions(A,m),U=>U.map(J=>J.y)));return cn(A,(U,J)=>Pc(U,J,P,q(Ha),v,T))},cl=(i,m,h)=>Te(i,m,h,Qe,v=>v.getOrThunk(im)),mu=(i,m,h)=>Te(i,m,h,ss,Tc),wl=(i,m)=>()=>$(i)?m(i):parseFloat(hi(i,"width").getOr("0")),Il=i=>{const m=wl(i,Un),h=G(0);return{width:m,pixelWidth:m,getWidths:(T,A)=>Vu(T,i,A),getCellDelta:h,singleColumnWidth:G([0]),minCellWidth:h,setElementWidth:tt,adjustTableWidth:tt,isRelative:!0,label:"none"}},za=i=>{const m=wl(i,J=>parseFloat(Pi(J))),h=wl(i,Un);return{width:m,pixelWidth:h,getWidths:(J,ce)=>Ic(J,i,ce),getCellDelta:J=>J/h()*100,singleColumnWidth:(J,ce)=>[100-J],minCellWidth:()=>Zc()/h()*100,setElementWidth:kd,adjustTableWidth:J=>{const ce=m(),Ce=J/100*ce,lt=ce+Ce;kd(i,lt)},isRelative:!0,label:"percent"}},Ta=i=>{const m=wl(i,Un);return{width:m,pixelWidth:m,getWidths:(P,U)=>Vu(P,i,U),getCellDelta:Xe,singleColumnWidth:(P,U)=>[Math.max(Zc(),P+U)-P],minCellWidth:Zc,setElementWidth:lf,adjustTableWidth:P=>{const U=m()+P;lf(i,U)},isRelative:!1,label:"pixel"}},P0=(i,m)=>Hu().exec(m)!==null?za(i):Ta(i),C={getTableSize:i=>Ed(i).fold(()=>Il(i),h=>P0(i,h)),pixelSize:Ta,percentageSize:za,noneSize:Il},S=(i,m,h,v,T,A)=>({minRow:i,minCol:m,maxRow:h,maxCol:v,allCells:T,selectedCells:A}),F=(i,m)=>{const h=i.grid.columns;let T=i.grid.rows,A=h,P=0,U=0;const J=[],ce=[];return qo(i.access,Ce=>{if(J.push(Ce),m(Ce)){ce.push(Ce);const lt=Ce.row,Bt=lt+Ce.rowspan-1,_t=Ce.column,Ge=_t+Ce.colspan-1;lt<T?T=lt:Bt>P&&(P=Bt),_t<A?A=_t:Ge>U&&(U=Ge)}}),S(T,A,P,U,J,ce)},Z=(i,m,h)=>{const v=i[h].element,T=pe.fromTag("td");Es(T,pe.fromTag("br")),(m?Es:yr)(v,T)},ae=(i,m,h,v)=>{const T=Bo(i,U=>U.section!=="colgroup"),A=m.grid.columns,P=m.grid.rows;for(let U=0;U<P;U++){let J=!1;for(let ce=0;ce<A;ce++)U<h.minRow||U>h.maxRow||ce<h.minCol||ce>h.maxCol||(Co.getAt(m,U,ce).filter(v).isNone()?Z(T,J,U):J=!0)}},We=(i,m,h,v)=>{qo(h.columns,P=>{(P.column<m.minCol||P.column>m.maxCol)&&Xs(P.element)});const T=Bo(cu(i,"tr"),P=>P.dom.childElementCount===0);je(T,Xs),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&je(cu(i,"th,td"),P=>{Me(P,"rowspan"),Me(P,"colspan")}),Me(i,as),Me(i,"data-snooker-col-series"),C.getTableSize(i).adjustTableWidth(v)},ut=(i,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const T=Vu(m,i,h),A=De(T,(ce,Ce)=>ce+Ce,0),J=De(T.slice(v.minCol,v.maxCol+1),(ce,Ce)=>ce+Ce,0)/A*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(J)},Yt=(i,m)=>{const h=Bt=>Ho(Bt.element,m),v=pc(i),T=hd(v),A=C.getTableSize(i),P=Co.generate(T),U=F(P,h),J="th:not("+m+"),td:not("+m+")",ce=lu(v,"th,td",Bt=>Ho(Bt,J));je(ce,Xs),ae(T,P,U,h);const Ce=Co.fromTable(i),lt=ut(i,Ce,A,U);return We(v,U,P,lt),v},jn=" ",ws=((i,m)=>{const h=A=>{if(!i(A))throw new Error("Can only get "+m+" value of a "+m+" node");return v(A).getOr("")},v=A=>i(A)?fe.from(A.dom.nodeValue):fe.none();return{get:h,getOption:v,set:(A,P)=>{if(!i(A))throw new Error("Can only set raw "+m+" value of a "+m+" node");A.dom.nodeValue=P}}})(Aa,"text"),Po=i=>ws.get(i),er=i=>ws.getOption(i),Fl=(i,m)=>ws.set(i,m),sc=i=>Ko(i)==="img"?1:er(i).fold(()=>Vo(i).length,m=>m.length),Fi=i=>er(i).filter(m=>m.trim().length!==0||m.indexOf(jn)>-1).isSome(),fu=i=>kn(i)&&se(i,"contenteditable")==="false",bm=["img","br"],_d=i=>Fi(i)||Oo(bm,Ko(i))||fu(i),Li=i=>dd(i,_d),Od=i=>kh(i,_d),kh=(i,m)=>{const h=v=>{const T=Vo(v);for(let A=T.length-1;A>=0;A--){const P=T[A];if(m(P))return fe.some(P);const U=h(P);if(U.isSome())return U}return fe.none()};return h(i)},dg={scope:["row","col"]},df=i=>()=>{const m=pe.fromTag("td",i.dom);return Es(m,pe.fromTag("br",i.dom)),m},Ma=i=>()=>pe.fromTag("col",i.dom),gu=i=>()=>pe.fromTag("colgroup",i.dom),Io=i=>()=>pe.fromTag("tr",i.dom),Bs=(i,m,h)=>{const v=fl(i,m);return qo(h,(T,A)=>{T===null?Me(v,A):bs(v,A,T)}),v},Gc=i=>i,Qr=(i,m,h)=>Li(i).map(T=>{const A=h.join(","),P=Zt(T,A,U=>bo(U,i));return Ts(P,(U,J)=>{const ce=ca(J);return Es(U,ce),ce},m)}).getOr(m),Cl=(i,m)=>{qo(dg,(h,v)=>Ie(i,v).filter(T=>Oo(h,T)).each(T=>bs(m,v,T)))},mg=(i,m,h)=>{const v=(P,U)=>{Pr(P.element,U),nl(U,"height"),P.colspan!==1&&nl(U,"width")},T=P=>{const U=pe.fromTag(Ko(P.element),m.dom),J=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ce=J.length>0?Qr(P.element,U,J):U;return Es(ce,pe.fromTag("br")),v(P,U),Cl(P.element,U),i(P.element,U),U};return{col:P=>{const U=pe.fromTag(Ko(P.element),m.dom);return v(P,U),i(P.element,U),U},colgroup:gu(m),row:Io(m),cell:T,replace:Bs,colGap:Ma(m),gap:df(m)}},zu=i=>({col:Ma(i),colgroup:gu(i),row:Io(i),cell:df(i),replace:Gc,colGap:Ma(i),gap:df(i)}),yi=(i,m)=>{const v=(m||document).createElement("div");return v.innerHTML=i,Vo(pe.fromDom(v))},mf=i=>cn(i,pe.fromDom),I0=i=>xe(i,"[contenteditable]"),Ll=(i,m=!1)=>$(i)?i.dom.isContentEditable:I0(i).fold(G(m),h=>D2(h)==="true"),D2=i=>i.dom.contentEditable,Hl=i=>pe.fromDom(i.getBody()),Uu=i=>m=>bo(m,Hl(i)),wi=i=>{Me(i,"data-mce-style");const m=h=>Me(h,"data-mce-style");je(iu(i),m),je(fd(i),m),je(um(i),m)},Eb=i=>pe.fromDom(i.selection.getStart()),fg=i=>i.getBoundingClientRect().width,R2=i=>i.getBoundingClientRect().height,iE=(i,m)=>{const h=i.dom.getStyle(m,"width")||i.dom.getAttrib(m,"width");return fe.from(h).filter(hs)},da=i=>/^(\d+(\.\d+)?)%$/.test(i),_b=i=>/^(\d+(\.\d+)?)px$/.test(i),Ad=i=>Js(i,Is("table")).exists(Ll),F0=(i,m)=>{const h=m.column,v=m.column+m.colspan-1,T=m.row,A=m.row+m.rowspan-1;return h<=i.finishCol&&v>=i.startCol&&T<=i.finishRow&&A>=i.startRow},L0=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,gg=(i,m)=>{let h=!0;const v=at(L0,m);for(let T=m.startRow;T<=m.finishRow;T++)for(let A=m.startCol;A<=m.finishCol;A++)h=h&&Co.getAt(i,T,A).exists(v);return h?fe.some(m):fe.none()},$s=(i,m)=>ns(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),Dd=(i,m,h)=>{const v=Co.findItem(i,m,bo),T=Co.findItem(i,h,bo);return v.bind(A=>T.map(P=>$s(A,P)))},Mp=(i,m,h)=>Dd(i,m,h).bind(v=>gg(i,v)),H0=(i,m,h,v)=>Co.findItem(i,m,bo).bind(T=>{const A=h>0?T.row+T.rowspan-1:T.row,P=v>0?T.column+T.colspan-1:T.column;return Co.getAt(i,A+h,P+v).map(J=>J.element)}),Eh=(i,m,h)=>Dd(i,m,h).map(v=>{const T=Co.filterItems(i,at(F0,v));return cn(T,A=>A.element)}),Np=(i,m)=>{const h=(v,T)=>ml(T,v);return Co.findItem(i,m,h).map(v=>v.element)},Bp=(i,m,h)=>Rr(i).bind(v=>{const T=vm(v);return H0(T,i,m,h)}),uE=(i,m,h)=>{const v=vm(i);return Eh(v,m,h)},V0=(i,m,h,v,T)=>{const A=vm(i),P=bo(i,h)?fe.some(m):Np(A,m),U=bo(i,T)?fe.some(v):Np(A,v);return P.bind(J=>U.bind(ce=>Eh(A,J,ce)))},z0=(i,m,h)=>{const v=vm(i);return Mp(v,m,h)},vm=Co.fromTable;var Rd=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ym=()=>{const i=ce=>pe.fromDom(ce.dom.cloneNode(!1)),m=ce=>Ys(ce).dom,h=ce=>zr(ce)?Ko(ce)==="body"?!0:Oo(Rd,Ko(ce)):!1,v=ce=>zr(ce)?Oo(["br","img","hr","input"],Ko(ce)):!1,T=ce=>zr(ce)&&se(ce,"contenteditable")==="false",A=(ce,Ce)=>ce.dom.compareDocumentPosition(Ce.dom),P=(ce,Ce)=>{const lt=Kt(ce);pr(Ce,lt)},U=ce=>{const Ce=Ko(ce);return Oo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ce)},J=ce=>zr(ce)?Ie(ce,"lang"):fe.none();return{up:G({selector:fo,closest:xe,predicate:Dr,all:gc}),down:G({selector:Wr,predicate:Yn}),styles:G({get:Rl,getRaw:hi,set:_s,remove:nl}),attrs:G({get:se,set:bs,remove:Me,copyTo:P}),insert:G({before:hc,after:Da,afterAll:Yo,append:Es,appendAll:aa,prepend:yr,wrap:Kl}),remove:G({unwrap:Yl,remove:Xs}),create:G({nu:pe.fromTag,clone:i,text:pe.fromText}),query:G({comparePosition:A,prevSibling:el,nextSibling:tl}),property:G({children:Vo,name:Ko,parent:zc,document:m,isText:Aa,isComment:Uo,isElement:zr,isSpecial:U,getLanguage:J,getText:Po,setText:Fl,isBoundary:h,isEmptyTag:v,isNonEditable:T}),eq:bo,is:vr}};const ff=(i,m,h,v)=>{const T=h[0],A=h.slice(1);return v(i,m,T,A)},$p=(i,m,h)=>h.length>0?ff(i,m,h,Ob):fe.none(),Ob=(i,m,h,v)=>{const T=m(i,h);return Ts(v,(A,P)=>{const U=m(i,P);return wm(i,A,U)},T)},wm=(i,m,h)=>m.bind(v=>h.filter(at(i.eq,v))),M2=(i,m)=>at(i.eq,m),N2=(i,m,h,v=Ye)=>{const T=[m].concat(i.up().all(m)),A=[h].concat(i.up().all(h)),P=Ce=>Yr(Ce,v).fold(()=>Ce,Bt=>Ce.slice(0,Bt+1)),U=P(T),J=P(A),ce=H(U,Ce=>rt(J,M2(i,Ce)));return{firstpath:U,secondpath:J,shared:ce}},U0=$p,B2=N2,Pp=ym(),Xo=(i,m)=>U0(Pp,(h,v)=>i(v),m),wn=(i,m,h)=>B2(Pp,i,m,h),Cm=i=>fo(i,"table"),hg=(i,m,h)=>{const v=T=>A=>h!==void 0&&h(A)||bo(A,T);return bo(i,m)?fe.some({boxes:fe.some([i]),start:i,finish:m}):Cm(i).bind(T=>Cm(m).bind(A=>{if(bo(T,A))return fe.some({boxes:uE(T,i,m),start:i,finish:m});if(ml(T,A)){const P=Zt(m,"td,th",v(T)),U=P.length>0?P[P.length-1]:m;return fe.some({boxes:V0(T,i,T,m,A),start:i,finish:U})}else if(ml(A,T)){const P=Zt(i,"td,th",v(A)),U=P.length>0?P[P.length-1]:i;return fe.some({boxes:V0(A,i,T,m,A),start:i,finish:U})}else return wn(i,m).shared.bind(P=>xe(P,"table",h).bind(U=>{const J=Zt(m,"td,th",v(U)),ce=J.length>0?J[J.length-1]:m,Ce=Zt(i,"td,th",v(U)),lt=Ce.length>0?Ce[Ce.length-1]:i;return fe.some({boxes:V0(U,i,T,m,A),start:lt,finish:ce})}))}))},Ab=(i,m)=>{const h=Wr(i,m);return h.length>0?fe.some(h):fe.none()},$2=(i,m)=>H(i,h=>Ho(h,m)),W0=(i,m,h)=>oe(i,m).bind(v=>oe(i,h).bind(T=>Xo(Cm,[v,T]).map(A=>({first:v,last:T,table:A})))),Gs=(i,m)=>fo(i,"table").bind(h=>oe(h,m).bind(v=>hg(v,i).bind(T=>T.boxes.map(A=>({boxes:A,start:T.start,finish:T.finish}))))),P2=(i,m,h,v,T)=>$2(i,T).bind(A=>Bp(A,m,h).bind(P=>Gs(P,v))),Z0=(i,m)=>Ab(i,m),I2=(i,m,h)=>W0(i,m,h).bind(v=>{const T=J=>bo(i,J),A="thead,tfoot,tbody,table",P=fo(v.first,A,T),U=fo(v.last,A,T);return P.bind(J=>U.bind(ce=>bo(J,ce)?z0(v.table,v.first,v.last):fe.none()))}),nt=Xe,j0=i=>{const m=(v,T)=>Ie(v,T).exists(A=>parseInt(A,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&Bn(i,h)?fe.some(i):fe.none()},G0=(i,m,h)=>m.length<=1?fe.none():I2(i,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),pg="data-mce-selected",Db="td["+pg+"],th["+pg+"]",Sm="["+pg+"]",Ip="data-mce-first-selected",bg="td["+Ip+"],th["+Ip+"]",q0="data-mce-last-selected",hu="td["+q0+"],th["+q0+"]",Br=Sm,Vl={selected:pg,selectedSelector:Db,firstSelected:Ip,firstSelectedSelector:bg,lastSelected:q0,lastSelectedSelector:hu},Fp=(i,m,h)=>({element:h,mergable:G0(m,i,Vl),unmergable:j0(i),selection:nt(i)}),Wu=(i,m,h)=>({element:i,clipboard:m,generators:h}),F2=(i,m,h,v)=>({selection:nt(i),clipboard:h,generators:v}),K0=i=>Rr(i).bind(m=>Z0(m,Vl.firstSelectedSelector)).fold(G(i),m=>m[0]),gf=i=>(m,h)=>{const v=Ko(m),T=v==="col"||v==="colgroup"?K0(m):m;return xe(T,i,h)},Y0=gf("th,td,caption"),L2=gf("th,td"),xm=i=>mf(i.model.table.getSelectedCells()),hf=i=>Bo(xm(i),m=>Ho(m,Vl.selectedSelector)),Zu=i=>Rr(i[0]).map(m=>{const h=Yt(m,Br);return wi(h),[h]}),Rb=(i,m)=>cn(m,h=>i.selection.serializer.serialize(h.dom,{})).join(""),dE=i=>cn(i,m=>m.dom.innerText).join(""),_h=(i,m)=>{i.on("BeforeGetContent",h=>{const v=T=>{h.preventDefault(),Zu(T).each(A=>{h.content=h.format==="text"?dE(A):Rb(i,A)})};if(h.selection===!0){const T=hf(i);T.length>=1&&v(T)}}),i.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=xm(i);Ve(v).each(T=>{Rr(T).each(A=>{const P=Bo(yi(h.content),J=>Ko(J)!=="meta"),U=Is("table");if(P.length===1&&U(P[0])){h.preventDefault();const J=pe.fromDom(i.getDoc()),ce=zu(J),Ce=Wu(T,P[0],ce);m.pasteCells(A,Ce).each(()=>{i.focus()})}})})}})},Ua=(i,m)=>({element:i,offset:m}),en=(i,m,h)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?h(m).bind(v=>en(i,v,h).orThunk(()=>fe.some(v))):fe.none(),X0=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,H2=(i,m)=>{const h=en(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(h))return Ua(h,X0(i,h));const v=i.property().children(h);return v.length>0?H2(i,v[v.length-1]):Ua(h,X0(i,h))},qc=H2,J0=ym(),V2=i=>qc(J0,i),Q0=(i,m)=>{ol(i)||ei(i).each(v=>{const T=v.value/2;xh(i,T,v.unit),xh(m,T,v.unit)})},Md=i=>cn(i,G(0)),Ci=(i,m,h,v,T)=>T(i.slice(0,m)).concat(v).concat(T(i.slice(h))),Mb=i=>(m,h,v,T)=>{if(i(v)){const A=Math.max(T,m[h]-Math.abs(v)),P=Math.abs(A-m[h]);return v>=0?P:-P}else return v},vg=Mb(i=>i<0),mE=Mb(Pe),z2=()=>{const i=(U,J,ce,Ce,lt)=>{const Bt=vg(U,J,Ce,lt);return Ci(U,J,ce+1,[Bt,0],Md)},m=(U,J,ce,Ce)=>{const lt=(100+ce)/100,Bt=Math.max(Ce,(U[J]+ce)/lt);return cn(U,(_t,Ge)=>(Ge===J?Bt:_t/lt)-_t)},h=(U,J,ce,Ce,lt,Bt)=>Bt?m(U,J,Ce,lt):i(U,J,ce,Ce,lt);return{resizeTable:(U,J)=>U(J),clampTableDelta:vg,calcLeftEdgeDeltas:h,calcMiddleDeltas:(U,J,ce,Ce,lt,Bt,_t)=>h(U,ce,Ce,lt,Bt,_t),calcRightEdgeDeltas:(U,J,ce,Ce,lt,Bt)=>{if(Bt)return m(U,ce,Ce,lt);{const _t=vg(U,ce,Ce,lt);return Md(U.slice(0,ce)).concat([_t])}},calcRedestributedWidths:(U,J,ce,Ce)=>{if(Ce){const Bt=(J+ce)/J,_t=cn(U,Ge=>Ge/Bt);return{delta:Bt*100-100,newSizes:_t}}else return{delta:ce,newSizes:U}}}},Lp=()=>{const i=(P,U,J,ce,Ce)=>{const lt=ce>=0?J:U,Bt=mE(P,lt,ce,Ce);return Ci(P,U,J+1,[Bt,-Bt],Md)};return{resizeTable:(P,U,J)=>{J&&P(U)},clampTableDelta:(P,U,J,ce,Ce)=>{if(Ce){if(J>=0)return J;{const lt=De(P,(Bt,_t)=>Bt+_t-ce,0);return Math.max(-lt,J)}}else return vg(P,U,J,ce)},calcLeftEdgeDeltas:i,calcMiddleDeltas:(P,U,J,ce,Ce,lt)=>i(P,J,ce,Ce,lt),calcRightEdgeDeltas:(P,U,J,ce,Ce,lt)=>{if(lt)return Md(P);{const Bt=ce/P.length;return cn(P,G(Bt))}},calcRedestributedWidths:(P,U,J,ce)=>({delta:0,newSizes:P})}},Oh=i=>Co.fromTable(i).grid,Ah=Is("th"),yg=i=>Bn(i,m=>Ah(m.element)),U2=(i,m)=>i&&m?"sectionCells":i?"section":"cells",Nb=i=>{const m=i.section==="thead",h=ze(wg(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:U2(m,h)}:{type:"body"}},wg=i=>{const m=Bo(i,h=>Ah(h.element));return m.length===0?fe.some("td"):m.length===i.length?fe.some("th"):fe.none()},Bb=i=>{const m=cn(i,T=>Nb(T).type),h=Oo(m,"header"),v=Oo(m,"footer");if(!h&&!v)return fe.some("body");{const T=Oo(m,"body");return h&&!T&&!v?fe.some("header"):!h&&!T&&v?fe.some("footer"):fe.none()}},ti=i=>ks(i.all,m=>{const h=Nb(m);return h.type==="header"?fe.from(h.subType):fe.none()}),zl=(i,m,h)=>ct(h(i.element,m),!0,i.isLocked),Tm=(i,m)=>i.section!==m?yn(i.element,i.cells,m,i.isNew):i,$b=()=>({transformRow:Tm,transformCell:(i,m,h)=>{const v=h(i.element,m),T=Ko(v)!=="td"?gi(v,"td"):v;return ct(T,i.isNew,i.isLocked)}}),W2=()=>({transformRow:Tm,transformCell:zl}),Hp=()=>({transformRow:(i,m)=>Tm(i,m==="thead"?"tbody":m),transformCell:zl}),Dh={getTableSectionType:(i,m)=>{const h=Co.fromTable(i);switch(ti(h).getOr(m)){case"section":return $b();case"sectionCells":return W2();case"cells":return Hp()}},section:$b,sectionCells:W2,cells:Hp,fallback:()=>({transformRow:Xe,transformCell:zl})},Nd=(i,m,h,v)=>{h===v?Me(i,m):bs(i,m,h)},ey=(i,m,h)=>{Vr(Ar(i,m)).fold(()=>yr(i,h),v=>Da(v,h))},fE=(i,m)=>{const h=Y(i,m).getOrThunk(()=>{const v=pe.fromTag(m,mr(i).dom);return m==="thead"?ey(i,"caption,colgroup",v):m==="colgroup"?ey(i,"caption",v):Es(i,v),v});return wa(h),h},Z2=(i,m)=>{const h=[],v=[],T=_t=>cn(_t,Ge=>{Ge.isNew&&h.push(Ge.element);const Rt=Ge.element;return wa(Rt),je(Ge.cells,Ze=>{Ze.isNew&&v.push(Ze.element),Nd(Ze.element,"colspan",Ze.colspan,1),Nd(Ze.element,"rowspan",Ze.rowspan,1),Es(Rt,Ze.element)}),Rt}),A=_t=>is(_t,Ge=>cn(Ge.cells,Rt=>(Nd(Rt.element,"span",Rt.colspan,1),Rt.element))),P=(_t,Ge)=>{const Rt=fE(i,Ge),Jt=(Ge==="colgroup"?A:T)(_t);aa(Rt,Jt)},U=_t=>{Y(i,_t).each(Xs)},J=(_t,Ge)=>{_t.length>0?P(_t,Ge):U(Ge)},ce=[],Ce=[],lt=[],Bt=[];return je(m,_t=>{switch(_t.section){case"thead":ce.push(_t);break;case"tbody":Ce.push(_t);break;case"tfoot":lt.push(_t);break;case"colgroup":Bt.push(_t);break}}),J(Bt,"colgroup"),J(ce,"thead"),J(Ce,"tbody"),J(lt,"tfoot"),{newRows:h,newCells:v}},ty=i=>cn(i,m=>{const h=ca(m.element);return je(m.cells,v=>{const T=pc(v.element);Nd(T,"colspan",v.colspan,1),Nd(T,"rowspan",v.rowspan,1),Es(h,T)}),h}),tr=(i,m)=>cn(i,h=>bl(h,m)),gE=(i,m)=>i[m],j2=(i,m)=>{if(i.length===0)return 0;const h=i[0];return Yr(i,T=>!m(h.element,T.element)).getOr(i.length)},hE=(i,m,h,v)=>{const T=gE(i,m),A=T.section==="colgroup",P=j2(T.cells.slice(h),v),U=A?1:j2(tr(i.slice(m),h),v);return{colspan:P,rowspan:U}},Ib=(i,m)=>{const h=cn(i,T=>cn(T.cells,Ye)),v=(T,A,P,U)=>{for(let J=T;J<T+P;J++)for(let ce=A;ce<A+U;ce++)h[J][ce]=!0};return cn(i,(T,A)=>{const P=is(T.cells,(U,J)=>{if(h[A][J]===!1){const ce=hE(i,A,J,m);return v(A,J,ce.rowspan,ce.colspan),[W(U.element,ce.rowspan,ce.colspan,U.isNew)]}else return[]});return Fe(T.element,P,T.section,T.isNew)})},Rh=(i,m,h)=>{const v=[];je(i.colgroups,T=>{const A=[];for(let P=0;P<i.grid.columns;P++){const U=Co.getColumnAt(i,P).map(J=>ct(J.element,h,!1)).getOrThunk(()=>ct(m.colGap(),!0,!1));A.push(U)}v.push(yn(T.element,A,"colgroup",h))});for(let T=0;T<i.grid.rows;T++){const A=[];for(let J=0;J<i.grid.columns;J++){const ce=Co.getAt(i,T,J).map(Ce=>ct(Ce.element,h,Ce.isLocked)).getOrThunk(()=>ct(m.gap(),!0,!1));A.push(ce)}const P=i.all[T],U=yn(P.element,A,P.section,h);v.push(U)}return v},km=(i,m)=>Rh(i,m,!1),Na=i=>Ib(i,bo),Em=(i,m)=>ks(i.all,h=>H(h.cells,v=>bo(m,v.element))),ny=(i,m,h)=>{const v=cn(m.selection,A=>gl(A).bind(P=>Em(i,P)).filter(h)),T=Qt(v);return Fs(T.length>0,T)},Ba=(i,m,h,v,T)=>(A,P,U,J)=>{const ce=Co.fromTable(A),Ce=fe.from(J==null?void 0:J.section).getOrThunk(Dh.fallback);return m(ce,P).map(Bt=>{const _t=km(ce,U),Ge=i(_t,Bt,bo,T(U),Ce),Rt=Cd(Ge.grid),Ze=Na(Ge.grid);return{info:Bt,grid:Ze,cursor:Ge.cursor,lockedColumns:Rt}}).bind(Bt=>{const _t=Z2(A,Bt.grid),Ge=fe.from(J==null?void 0:J.sizing).getOrThunk(()=>C.getTableSize(A)),Rt=fe.from(J==null?void 0:J.resize).getOrThunk(Lp);return h(A,Bt.grid,Bt.info,{sizing:Ge,resize:Rt,section:Ce}),v(A),Me(A,as),Bt.lockedColumns.length>0&&bs(A,as,Bt.lockedColumns.join(",")),fe.some({cursor:Bt.cursor,newRows:_t.newRows,newCells:_t.newCells})})},oy=(i,m)=>gl(m.element).bind(h=>Em(i,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Fb=(i,m)=>ny(i,m,Pe).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),WD=(i,m)=>m.mergable,G2=(i,m)=>m.unmergable,pf=(i,m)=>ny(i,m,Pe),bf=(i,m)=>ny(i,m,h=>!h.isLocked),Lb=(i,m)=>Em(i,m).exists(h=>!h.isLocked),q2=(i,m)=>Bn(m,h=>Lb(i,h)),ZD=(i,m)=>WD(i,m).filter(h=>q2(i,h.cells)),Gu=(i,m)=>G2(i,m).filter(h=>q2(i,h)),Cs=(i,m,h,v)=>{const T=Va(i).rows;if(T.length===0)return i;for(let A=m.startRow;A<=m.finishRow;A++)for(let P=m.startCol;P<=m.finishCol;P++){const U=T[A],J=bl(U,P).isLocked;gm(U,P,ct(v(),!1,J))}return i},K2=(i,m,h,v)=>{const T=Va(i).rows;let A=!0;for(let P=0;P<T.length;P++)for(let U=0;U<Bl(T[0]);U++){const J=T[P],ce=bl(J,U),Ce=ce.element,lt=h(Ce,m);lt&&!A?gm(J,U,ct(v(),!0,ce.isLocked)):lt&&(A=!1)}return i},ea=(i,m)=>De(i,(h,v)=>rt(h,T=>m(T.element,v.element))?h:h.concat([v]),[]),Wa=(i,m,h,v)=>(m>0&&m<i[0].cells.length&&je(i,T=>{const A=T.cells[m-1];let P=0;const U=v();for(;T.cells.length>m+P&&h(A.element,T.cells[m+P].element);)gm(T,m+P,ct(U,!0,T.cells[m+P].isLocked)),P++}),i),Hi=(i,m,h,v)=>{const T=Va(i).rows;if(m>0&&m<T.length){const A=T[m-1].cells,P=ea(A,h);je(P,U=>{let J=fe.none();for(let ce=m;ce<T.length;ce++)for(let Ce=0;Ce<Bl(T[0]);Ce++){const lt=T[ce],Bt=bl(lt,Ce);h(Bt.element,U.element)&&(J.isNone()&&(J=fe.some(v())),J.each(Ge=>{gm(lt,Ce,ct(Ge,!0,Bt.isLocked))}))}})}return i},Sl=i=>{const m=A=>A(i),h=G(i),v=()=>T,T={tag:!0,inner:i,fold:(A,P)=>P(i),isValue:Pe,isError:Ye,map:A=>_m.value(A(i)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:A=>{A(i)},toOptional:()=>fe.some(i)};return T},Cg=i=>{const m=()=>h,h={tag:!1,inner:i,fold:(v,T)=>v(i),isValue:Ye,isError:Pe,map:m,mapError:v=>_m.error(v(i)),bind:m,exists:Ye,forall:Pe,getOr:Xe,or:Xe,getOrThunk:Dn,orThunk:Dn,getOrDie:ht(String(i)),each:tt,toOptional:fe.none};return h},_m={value:Sl,error:Cg,fromOption:(i,m)=>i.fold(()=>Cg(m),Sl)},Si=(i,m,h)=>{if(i.row>=m.length||i.column>Bl(m[0]))return _m.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),T=v[0].cells.slice(i.column),A=Bl(h[0]),P=h.length;return _m.value({rowDelta:v.length-P,colDelta:T.length-A})},pu=(i,m)=>{const h=Bl(i[0]),v=Bl(m[0]);return{rowDelta:0,colDelta:h-v}},Nh=(i,m)=>{const h=i.length,v=m.length;return{rowDelta:h-v,colDelta:0}},Vp=(i,m,h,v)=>{const T=m.section==="colgroup"?h.col:h.cell;return Fo(i,A=>ct(T(),!0,v(A)))},sy=(i,m,h,v)=>{const T=i[i.length-1];return i.concat(Fo(m,()=>{const A=T.section==="colgroup"?h.colgroup:h.row,P=pb(T,A,Xe),U=Vp(P.cells.length,P,h,J=>Je(v,J.toString()));return og(P,U)}))},Y2=(i,m,h,v)=>cn(i,T=>{const A=Vp(m,T,h,Ye);return Sa(T,v,A)}),X2=(i,m,h)=>cn(i,v=>De(h,(T,A)=>{const P=Vp(1,v,m,Pe)[0];return pl(T,A,P)},v)),Bh=(i,m,h)=>{const v=m.colDelta<0?Y2:Xe,T=m.rowDelta<0?sy:Xe,A=Cd(i),P=Bl(i[0]),U=rt(A,Ce=>Ce===P-1),J=v(i,Math.abs(m.colDelta),h,U?P-1:P),ce=Cd(J);return T(J,Math.abs(m.rowDelta),h,qt(ce,Pe))},ry=(i,m,h,v)=>{const T=bl(i[m],h),A=at(v,T.element),P=i[m];return i.length>1&&Bl(P)>1&&(h>0&&A($c(P,h-1))||h<P.cells.length-1&&A($c(P,h+1))||m>0&&A($c(i[m-1],h))||m<i.length-1&&A($c(i[m+1],h)))},pE=(i,m,h,v,T,A)=>{const P=i.row,U=i.column,J=h.length,ce=Bl(h[0]),Ce=P+J,lt=U+ce+A.length,Bt=qt(A,Pe);for(let _t=P;_t<Ce;_t++){let Ge=0;for(let Rt=U;Rt<lt;Rt++){if(Bt[Rt]){Ge++;continue}ry(m,_t,Rt,T)&&K2(m,$c(m[_t],Rt),T,v.cell);const Ze=Rt-U-Ge,Jt=bl(h[_t-P],Ze),Fn=Jt.element,no=v.replace(Fn);gm(m[_t],Rt,ct(no,!0,Jt.isLocked))}}return m},bE=(i,m,h)=>{const v=Bl(m[0]),T=Va(m).cols.length+i.row,A=Fo(v-i.column,U=>U+i.column),P=H(A,U=>Bn(h,J=>J!==U)).getOr(v-1);return{row:T,column:P}},J2=(i,m,h)=>Bo(h,v=>v>=i.column&&v<=Bl(m[0])+i.column),Q2=(i,m,h,v,T)=>{const A=Cd(m),P=bE(i,m,A),U=Va(h).rows,J=J2(P,U,A);return Si(P,m,U).map(Ce=>{const lt={...Ce,colDelta:Ce.colDelta-J.length},Bt=Bh(m,lt,v),_t=Cd(Bt),Ge=J2(P,U,_t);return pE(P,Bt,U,v,T,Ge)})},ay=(i,m,h,v,T)=>{Wa(m,i,T,v.cell);const A=Nh(h,m),P=Bh(h,A,v),U=Nh(m,P),J=Bh(m,U,v);return cn(J,(ce,Ce)=>Sa(ce,i,P[Ce].cells))},eS=(i,m,h,v,T)=>{Hi(m,i,T,v.cell);const A=Cd(m),P=pu(m,h),U={...P,colDelta:P.colDelta-A.length},J=Bh(m,U,v),{cols:ce,rows:Ce}=Va(J),lt=Cd(J),Bt=pu(h,m),_t={...Bt,colDelta:Bt.colDelta+lt.length},Ge=X2(h,v,lt),Rt=Bh(Ge,_t,v);return[...ce,...Ce.slice(0,i),...Rt,...Ce.slice(i,Ce.length)]},vE=(i,m,h,v)=>pb(i,T=>v(T,h),m),cy=(i,m,h,v,T)=>{const{rows:A,cols:P}=Va(i),U=A.slice(0,m),J=A.slice(m),ce=vE(A[h],(Ce,lt)=>m>0&&m<A.length&&v($c(A[m-1],lt),$c(A[m],lt))?bl(A[m],lt):ct(T(Ce.element,v),!0,Ce.isLocked),v,T);return[...P,...U,ce,...J]},Sg=(i,m,h,v,T,A,P)=>{if(h==="colgroup"||!v){const U=bl(i,T);return ct(P(U.element,A),!0,!1)}else return bl(i,m)},ly=(i,m,h,v,T)=>cn(i,A=>{const P=m>0&&m<Bl(A)&&v($c(A,m-1),$c(A,m)),U=Sg(A,m,A.section,P,h,v,T);return pl(A,m,U)}),yE=(i,m)=>is(i,h=>{const v=h.cells,T=Ts(m,(A,P)=>P>=0&&P<A.length?A.slice(0,P).concat(A.slice(P+1)):A,v);return T.length>0?[yn(h.element,T,h.section,h.isNew)]:[]}),wE=(i,m,h)=>{const{rows:v,cols:T}=Va(i);return[...T,...v.slice(0,m),...v.slice(h+1)]},tS=(i,m,h,v)=>$c(i[m],h)!==void 0&&m>0&&v($c(i[m-1],h),$c(i[m],h)),fr=(i,m,h)=>m>0&&h($c(i,m-1),$c(i,m)),vf=(i,m,h,v)=>tS(i,m,h,v)||fr(i[m],h,v),xg=(i,m)=>Bn(m,Xe)&&yg(i.cells)?Pe:(v,T,A)=>!(Ko(v.element)==="th"&&m[A]),nS=(i,m)=>Bn(m,Xe)&&yg(i)?Pe:(v,T,A)=>!(Ko(v.element)==="th"&&m[T]),Hb=(i,m,h,v)=>{const T=P=>P==="row"?Ha(m):ol(m),A=P=>T(P)?`${P}group`:P;return i?Ah(m)?A(h):null:v&&Ah(m)?A(h==="row"?"col":"row"):null},Kc=(i,m)=>(h,v,T)=>fe.some(Hb(i,h.element,"col",m[T])),Ul=(i,m)=>(h,v)=>fe.some(Hb(i,h.element,"row",m[v])),Tg=(i,m,h)=>ct(h(i.element,m),!0,i.isLocked),Vb=(i,m,h,v,T,A,P)=>{const U=J=>rt(m,ce=>h(J.element,ce.element));return cn(i,(J,ce)=>pi(J,(Ce,lt)=>{if(U(Ce)){const Bt=P(Ce,ce,lt)?T(Ce,h,v):Ce;return A(Bt,ce,lt).each(_t=>{de(Bt.element,{scope:fe.from(_t)})}),Bt}else return Ce}))},iy=(i,m,h)=>is(i,(v,T)=>vf(i,T,m,h)?[]:[bl(v,m)]),oS=(i,m,h)=>{const v=i[m];return is(v.cells,(T,A)=>vf(i,m,A,h)?[]:[T])},sS=(i,m,h,v,T)=>{const A=Va(i).rows,P=is(m,Ce=>iy(A,Ce,v)),U=cn(A,Ce=>yg(Ce.cells)),J=nS(P,U),ce=Ul(h,U);return Vb(i,P,v,T,Tg,ce,J)},rS=(i,m,h,v,T,A,P)=>{const{cols:U,rows:J}=Va(i),ce=J[m[0]],Ce=is(m,Ze=>oS(J,Ze,T)),lt=cn(ce.cells,(Ze,Jt)=>yg(iy(J,Jt,T))),Bt=[...J];je(m,Ze=>{Bt[Ze]=P.transformRow(J[Ze],h)});const _t=[...U,...Bt],Ge=xg(ce,lt),Rt=Kc(v,lt);return Vb(_t,Ce,T,A,P.transformCell,Rt,Ge)},bu=(i,m,h,v)=>{const T=Va(i).rows,A=cn(m,P=>bl(T[P.row],P.column));return Vb(i,A,h,v,Tg,fe.none,Pe)},Tr={generate:i=>{if(!Mt(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],h={};return je(i,(v,T)=>{const A=mn(v);if(A.length!==1)throw new Error("one and only one name per case");const P=A[0],U=v[P];if(h[P]!==void 0)throw new Error("duplicate key detected:"+P);if(P==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Mt(U))throw new Error("case arguments must be an array");m.push(P),h[P]=(...J)=>{const ce=J.length;if(ce!==U.length)throw new Error("Wrong number of arguments to case "+P+". Expected "+U.length+" ("+U+"), got "+ce);return{fold:(...lt)=>{if(lt.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+lt.length);return lt[T].apply(null,J)},match:lt=>{const Bt=mn(lt);if(m.length!==Bt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Bt.join(","));if(!Bn(m,Ge=>Oo(Bt,Ge)))throw new Error("Not all branches were specified when using match. Specified: "+Bt.join(", ")+`
Required: `+m.join(", "));return lt[P].apply(null,J)},log:lt=>{console.log(lt,{constructors:m,constructor:P,params:J})}}}}),h}},qu={...Tr.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},CE=(i,m)=>i.length===0?qu.none():i.length===1?qu.only(0):m===0?qu.left(0,1):m===i.length-1?qu.right(m-1,m):m>0&&m<i.length-1?qu.middle(m-1,m,m+1):qu.none(),aS=(i,m,h,v,T)=>{const A=i.slice(0),P=CE(i,m),U=G(cn(A,G(0))),J=Bt=>v.singleColumnWidth(A[Bt],h),ce=(Bt,_t)=>T.calcLeftEdgeDeltas(A,Bt,_t,h,v.minCellWidth(),v.isRelative),Ce=(Bt,_t,Ge)=>T.calcMiddleDeltas(A,Bt,_t,Ge,h,v.minCellWidth(),v.isRelative),lt=(Bt,_t)=>T.calcRightEdgeDeltas(A,Bt,_t,h,v.minCellWidth(),v.isRelative);return P.fold(U,J,ce,Ce,lt)},uy=(i,m,h)=>{let v=0;for(let T=i;T<m;T++)v+=h[T]!==void 0?h[T]:0;return v},kg=(i,m)=>{const h=Co.justCells(i);return cn(h,v=>{const T=uy(v.column,v.column+v.colspan,m);return{element:v.element,width:T,colspan:v.colspan}})},dy=(i,m)=>{const h=Co.justColumns(i);return cn(h,(v,T)=>({element:v.element,width:m[T],colspan:v.colspan}))},$h=(i,m)=>{const h=Co.justCells(i);return cn(h,v=>{const T=uy(v.row,v.row+v.rowspan,m);return{element:v.element,height:T,rowspan:v.rowspan}})},Eg=(i,m)=>cn(i.all,(h,v)=>({element:h.element,height:m[v]})),SE=i=>Ts(i,(m,h)=>m+h,0),zp=(i,m)=>Co.hasColumns(i)?dy(i,m):kg(i,m),Up=(i,m,h)=>{const v=zp(i,m);je(v,T=>{h.setElementWidth(T.element,T.width)})},my=(i,m,h,v,T)=>{const A=Co.fromTable(i),P=T.getCellDelta(m),U=T.getWidths(A,T),J=h===A.grid.columns-1,ce=v.clampTableDelta(U,h,P,T.minCellWidth(),J),Ce=aS(U,h,ce,T,v),lt=cn(Ce,(Bt,_t)=>Bt+U[_t]);Up(A,lt,T),v.resizeTable(T.adjustTableWidth,ce,J)},zb=(i,m,h,v)=>{const T=Co.fromTable(i),A=cl(T,i,v),P=cn(A,(Ce,lt)=>h===lt?Math.max(m+Ce,im()):Ce),U=$h(T,P),J=Eg(T,P);je(J,Ce=>{xr(Ce.element,Ce.height)}),je(U,Ce=>{xr(Ce.element,Ce.height)});const ce=SE(P);xr(i,ce)},Wp=(i,m,h,v,T)=>{const A=Co.generate(m),P=v.getWidths(A,v),U=v.pixelWidth(),{newSizes:J,delta:ce}=T.calcRedestributedWidths(P,U,h.pixelDelta,v.isRelative);Up(A,J,v),v.adjustTableWidth(ce)},fy=(i,m,h,v)=>{const T=Co.generate(m),A=v.getWidths(T,v);Up(T,A,v)},yf=i=>De(i,(h,v)=>rt(h,A=>A.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),Ph=Is("col"),cS=Is("colgroup"),lS=i=>Ko(i)==="tr"||cS(i),iS=i=>{const m=oc(i,"colspan",1),h=oc(i,"rowspan",1);return{element:i,colspan:m,rowspan:h}},Ku=(i,m=iS)=>{const h=U=>Ph(U.element)?i.col(U):i.cell(U),v=U=>cS(U.element)?i.colgroup(U):i.row(U),T=U=>{if(lS(U))return v({element:U});{const J=U,ce=h(m(J));return A=fe.some({item:J,replacement:ce}),ce}};let A=fe.none();return{getOrInit:(U,J)=>A.fold(()=>T(U),ce=>J(U,ce.item)?ce.replacement:T(U))}},Vi=i=>m=>{const h=[],v=(P,U)=>H(h,J=>U(J.item,P)),T=P=>{const U=i==="td"?{scope:null}:{},J=m.replace(P,i,U);return h.push({item:P,sub:J}),J};return{replaceOrInit:(P,U)=>{if(lS(P)||Ph(P))return P;{const J=P;return v(J,U).fold(()=>T(J),ce=>U(P,ce.item)?ce.sub:T(J))}}}},Zp=i=>Ie(i,"scope").map(m=>m.substr(0,3)),gr={modification:Ku,transform:Vi,merging:i=>({unmerge:v=>{const T=Zp(v);return T.each(A=>bs(v,"scope",A)),()=>{const A=i.cell({element:v,colspan:1,rowspan:1});return nl(A,"width"),nl(v,"width"),T.each(P=>bs(A,"scope",P)),A}},merge:v=>{const T=()=>{const A=Qt(cn(v,Zp));if(A.length===0)return fe.none();{const P=A[0],U=["row","col"];return rt(A,ce=>ce!==P&&Oo(U,ce))?fe.none():fe.from(P)}};return nl(v[0],"width"),T().fold(()=>Me(v[0],"scope"),A=>bs(v[0],"scope",A+"group")),G(v[0])}})},_g=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],gy=(i,m)=>{const h=i.property().name(m);return Oo(["ol","ul"],h)},qs=(i,m)=>{const h=i.property().name(m);return Oo(_g,h)},vu=(i,m)=>Oo(["br","img","hr","input"],i.property().name(m)),jp=ym(),Za=i=>qs(jp,i),Am=i=>gy(jp,i),hy=i=>vu(jp,i),xE=i=>{const m=Is("br"),h=J=>Bn(J,ce=>m(ce)||Aa(ce)&&Po(ce).trim().length===0),v=J=>Ko(J)==="li"||Dr(J,Am).isSome(),T=J=>tl(J).map(ce=>Za(ce)?!0:hy(ce)?Ko(ce)!=="img":!1).getOr(!1),A=J=>Od(J).bind(ce=>{const Ce=T(ce);return zc(ce).map(lt=>Ce===!0||v(lt)||m(ce)||Za(lt)&&!bo(J,lt)?[]:[pe.fromTag("br")])}).getOr([]),U=(()=>{const J=is(i,ce=>{const Ce=Vo(ce);return h(Ce)?[]:Ce.concat(A(ce))});return J.length===0?[pe.fromTag("br")]:J})();wa(i[0]),aa(i[0],U)},py=i=>Ll(i,!0),Gp=i=>{iu(i).length===0&&Xs(i)},Og=(i,m)=>({grid:i,cursor:m}),by=i=>ks(i,m=>ks(m.cells,h=>{const v=h.element;return Fs(py(v),v)})),Ub=(i,m,h)=>{var v,T;const A=Va(i).rows;return fe.from((T=(v=A[m])===null||v===void 0?void 0:v.cells[h])===null||T===void 0?void 0:T.element).filter(py).orThunk(()=>by(A))},xl=(i,m,h)=>{const v=Ub(i,m,h);return Og(i,v)},qp=i=>De(i,(h,v)=>rt(h,A=>A.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),vy=(i,m,h,v)=>{const T=m[0].row,A=qp(m),P=Ts(A,(U,J)=>({grid:cy(U.grid,T,J.row+U.delta,h,v.getOrInit),delta:U.delta+1}),{grid:i,delta:0}).grid;return xl(P,T,m[0].column)},Kp=(i,m,h,v)=>{const T=qp(m),A=T[T.length-1],P=A.row+A.rowspan,U=Ts(T,(J,ce)=>cy(J,P,ce.row,h,v.getOrInit),i);return xl(U,P,m[0].column)},Ih=(i,m,h,v)=>{const T=m.details,A=yf(T),P=A[0].column,U=Ts(A,(J,ce)=>({grid:ly(J.grid,P,ce.column+J.delta,h,v.getOrInit),delta:J.delta+1}),{grid:i,delta:0}).grid;return xl(U,T[0].row,P)},ni=(i,m,h,v)=>{const T=m.details,A=T[T.length-1],P=A.column+A.colspan,U=yf(T),J=Ts(U,(ce,Ce)=>ly(ce,P,Ce.column,h,v.getOrInit),i);return xl(J,T[0].row,P)},TE=(i,m,h,v)=>{const T=yf(m),A=cn(T,U=>U.column),P=sS(i,A,!0,h,v.replaceOrInit);return xl(P,m[0].row,m[0].column)},rc=(i,m,h,v)=>{const T=bu(i,m,h,v.replaceOrInit);return xl(T,m[0].row,m[0].column)},uS=(i,m,h,v)=>{const T=yf(m),A=cn(T,U=>U.column),P=sS(i,A,!1,h,v.replaceOrInit);return xl(P,m[0].row,m[0].column)},Dm=(i,m,h,v)=>{const T=bu(i,m,h,v.replaceOrInit);return xl(T,m[0].row,m[0].column)},Yp=(i,m)=>(h,v,T,A,P)=>{const U=qp(v),J=cn(U,Ce=>Ce.row),ce=rS(h,J,i,m,T,A.replaceOrInit,P);return xl(ce,v[0].row,v[0].column)},dS=Yp("thead",!0),yy=Yp("tbody",!1),wy=Yp("tfoot",!1),Cy=(i,m,h,v)=>{const T=yf(m.details),A=yE(i,cn(T,U=>U.column)),P=A.length>0?A[0].cells.length-1:0;return xl(A,T[0].row,Math.min(T[0].column,P))},Sy=(i,m,h,v)=>{const T=qp(m),A=wE(i,T[0].row,T[T.length-1].row),P=A.length>0?A.length-1:0;return xl(A,Math.min(m[0].row,P),m[0].column)},mS=(i,m,h,v)=>{const T=m.cells;xE(T);const A=Cs(i,m.bounds,h,v.merge(T));return Og(A,fe.from(T[0]))},kE=(i,m,h,v)=>{const A=Ts(m,(P,U)=>K2(P,U,h,v.unmerge(U)),i);return Og(A,fe.from(m[0]))},ac=(i,m,h,v)=>{const A=((J,ce)=>{const Ce=Co.fromTable(J);return Rh(Ce,ce,!0)})(m.clipboard,m.generators),P=Uc(m.row,m.column);return Q2(P,i,A,m.generators,h).fold(()=>Og(i,fe.some(m.element)),J=>xl(J,m.row,m.column))},$a=(i,m,h)=>{const v=pd(i,h.section),T=Co.generate(v);return Rh(T,m,!0)},Tl=(i,m,h,v)=>{const T=Va(i).rows,A=m.cells[0].column,P=T[m.cells[0].row],U=$a(m.clipboard,m.generators,P),J=ay(A,i,U,m.generators,h);return xl(J,m.cells[0].row,m.cells[0].column)},oi=(i,m,h,v)=>{const T=Va(i).rows,A=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,P=T[m.cells[0].row],U=$a(m.clipboard,m.generators,P),J=ay(A,i,U,m.generators,h);return xl(J,m.cells[0].row,m.cells[0].column)},Fr=(i,m,h,v)=>{const T=Va(i).rows,A=m.cells[0].row,P=T[A],U=$a(m.clipboard,m.generators,P),J=eS(A,i,U,m.generators,h);return xl(J,m.cells[0].row,m.cells[0].column)},kc=(i,m,h,v)=>{const T=Va(i).rows,A=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,P=T[m.cells[0].row],U=$a(m.clipboard,m.generators,P),J=eS(A,i,U,m.generators,h);return xl(J,m.cells[0].row,m.cells[0].column)},yu=(i,m)=>{const h=Co.fromTable(i);return pf(h,m).bind(T=>{const A=T[T.length-1],P=T[0].column,U=A.column+A.colspan,J=Pn(cn(h.all,ce=>Bo(ce.cells,Ce=>Ce.column>=P&&Ce.column<U)));return wg(J)}).getOr("")},xy=(i,m)=>{const h=Co.fromTable(i);return pf(h,m).bind(wg).getOr("")},fS=(i,m)=>{const h=Co.fromTable(i);return pf(h,m).bind(T=>{const A=T[T.length-1],P=T[0].row,U=A.row+A.rowspan,J=h.all.slice(P,U);return Bb(J)}).getOr("")},Wb=(i,m,h,v)=>fy(i,m,h,v.sizing),Zb=(i,m,h,v)=>Wp(i,m,h,v.sizing,v.resize),jb=(i,m)=>rt(m,h=>h.column===0&&h.isLocked),Xp=(i,m)=>rt(m,h=>h.column+h.colspan>=i.grid.columns&&h.isLocked),Gb=(i,m)=>{const h=hh(i),v=yf(m);return De(v,(T,A)=>{const U=h[A.column].map(go).getOr(0);return T+U},0)},Ty=i=>(m,h)=>pf(m,h).filter(v=>!(i?jb:Xp)(m,v)).map(v=>({details:v,pixelDelta:Gb(m,v)})),jD=(i,m)=>bf(i,m).map(h=>({details:h,pixelDelta:-Gb(i,h)})),qb=i=>(m,h)=>Fb(m,h).filter(v=>!(i?jb:Xp)(m,v.cells)),ky=gr.transform("th"),Kb=gr.transform("td"),Ey=Ba(vy,pf,tt,tt,gr.modification),gS=Ba(Kp,pf,tt,tt,gr.modification),on=Ba(Ih,Ty(!0),Zb,tt,gr.modification),_y=Ba(ni,Ty(!1),Zb,tt,gr.modification),hS=Ba(Cy,jD,Zb,Gp,gr.modification),pS=Ba(Sy,pf,tt,Gp,gr.modification),yt=Ba(TE,bf,tt,tt,ky),EE=Ba(uS,bf,tt,tt,Kb),cc=Ba(dS,bf,tt,tt,ky),_E=Ba(yy,bf,tt,tt,Kb),bS=Ba(wy,bf,tt,tt,Kb),vS=Ba(rc,bf,tt,tt,ky),zi=Ba(Dm,bf,tt,tt,Kb),Ui=Ba(mS,ZD,Wb,tt,gr.merging),Jp=Ba(kE,Gu,Wb,tt,gr.merging),wu=Ba(ac,oy,Wb,tt,gr.modification),Oy=Ba(Tl,qb(!0),tt,tt,gr.modification),Qp=Ba(oi,qb(!1),tt,tt,gr.modification),$d=Ba(Fr,Fb,tt,tt,gr.modification),Yu=Ba(kc,Fb,tt,tt,gr.modification),Yb=yu,Wi=xy,OE=fS,Xb=(i,m)=>i.dispatch("NewRow",{node:m}),Jb=(i,m)=>i.dispatch("NewCell",{node:m}),wf=(i,m,h)=>{i.dispatch("TableModified",{...h,table:m})},yS=(i,m,h,v,T)=>{i.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:T})},Ay=i=>{i.dispatch("TableSelectionClear")},AE=(i,m,h,v,T)=>{i.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:T})},wS=(i,m,h,v,T)=>{i.dispatch("ObjectResized",{target:m,width:h,height:v,origin:T})},Fh={structure:!1,style:!0},lc={structure:!0,style:!1},DE={structure:!0,style:!0},Ag=i=>m=>m.options.get(i),CS="100%",Qb=i=>{var m;const h=i.dom,v=(m=h.getParent(i.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:i.getBody();return Ct(pe.fromDom(v))+"px"},RE=(i,m)=>Hs(i)||!ll(i)?m:Zi(i)?{...m,width:Qb(i)}:{...m,width:CS},Dy=(i,m)=>Hs(i)||ll(i)?m:Zi(i)?{...m,width:Qb(i)}:{...m,width:CS},ME=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=Oo(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=Oo(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0})},e1=i=>fe.from(i.options.get("table_clone_elements")),SS=i=>{const m=i.options.get("object_resizing");return Oo(m.split(","),"table")},xS=Ag("table_header_type"),Ry=Ag("table_column_resizing"),My=i=>Ry(i)==="preservetable",TS=i=>Ry(i)==="resizetable",Pd=Ag("table_sizing_mode"),ev=i=>Pd(i)==="relative",Zi=i=>Pd(i)==="fixed",Hs=i=>Pd(i)==="responsive",Lh=Ag("table_resize_bars"),ll=Ag("table_style_by_css"),Ny=i=>{const m=i.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:Dy(i,h)},kS=i=>{const m=i.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:RE(i,h)},ES=Ag("table_use_colgroups"),t1=(i,m)=>ev(i)?C.percentageSize(m):Zi(i)?C.pixelSize(m):C.getTableSize(m),By=(i,m,h)=>{const v=_l=>Ko(Hl(_l))==="table",T=_l=>!v(i)||Oh(_l).rows>1,A=_l=>!v(i)||Oh(_l).columns>1,P=e1(i),U=TS(i)?tt:Q0,J=_l=>{switch(xS(i)){case"section":return Dh.section();case"sectionCells":return Dh.sectionCells();case"cells":return Dh.cells();default:return Dh.getTableSectionType(_l,"section")}},ce=(_l,Ex)=>Ex.cursor.fold(()=>{const tp=iu(_l);return Ve(tp).filter($).map(qi=>{h.clearSelectedCells(_l.dom);const Fc=i.dom.createRng();return Fc.selectNode(qi.dom),i.selection.setRng(Fc),bs(qi,"data-mce-selected","1"),Fc})},tp=>{const qi=V2(tp),Fc=i.dom.createRng();return Fc.setStart(qi.element.dom,qi.offset),Fc.setEnd(qi.element.dom,qi.offset),i.selection.setRng(Fc),h.clearSelectedCells(_l.dom),fe.some(Fc)}),Ce=(_l,Ex,tp,qi)=>(Fc,Ki,_x=!1)=>{wi(Fc);const Ox=pe.fromDom(i.getDoc()),M_=mg(tp,Ox,P),N_={sizing:t1(i,Fc),resize:TS(i)?z2():Lp(),section:J(Fc)};return Ex(Fc)?_l(Fc,Ki,M_,N_).bind(jw=>{m.refresh(Fc.dom),je(jw.newRows,Kg=>{Xb(i,Kg.dom)}),je(jw.newCells,Kg=>{Jb(i,Kg.dom)});const np=ce(Fc,jw);return $(Fc)&&(wi(Fc),_x||wf(i,Fc.dom,qi)),np.map(Kg=>({rng:Kg,effect:qi}))}):fe.none()},lt=Ce(pS,T,tt,lc),Bt=Ce(hS,A,tt,lc),_t=Ce(Ey,Pe,tt,lc),Ge=Ce(gS,Pe,tt,lc),Rt=Ce(on,Pe,U,lc),Ze=Ce(_y,Pe,U,lc),Jt=Ce(Ui,Pe,tt,lc),Fn=Ce(Jp,Pe,tt,lc),no=Ce(Oy,Pe,tt,lc),zs=Ce(Qp,Pe,tt,lc),Ec=Ce($d,Pe,tt,lc),jr=Ce(Yu,Pe,tt,lc),ci=Ce(wu,Pe,tt,DE),Mf=Ce(vS,Pe,tt,lc),E1=Ce(zi,Pe,tt,lc),Zw=Ce(yt,Pe,tt,lc),Fv=Ce(EE,Pe,tt,lc),As=Ce(cc,Pe,tt,lc),kl=Ce(_E,Pe,tt,lc),El=Ce(bS,Pe,tt,lc);return{deleteRow:lt,deleteColumn:Bt,insertRowsBefore:_t,insertRowsAfter:Ge,insertColumnsBefore:Rt,insertColumnsAfter:Ze,mergeCells:Jt,unmergeCells:Fn,pasteColsBefore:no,pasteColsAfter:zs,pasteRowsBefore:Ec,pasteRowsAfter:jr,pasteCells:ci,makeCellsHeader:Mf,unmakeCellsHeader:E1,makeColumnsHeader:Zw,unmakeColumnsHeader:Fv,makeRowsHeader:As,makeRowsBody:kl,makeRowsFooter:El,getTableRowType:OE,getTableCellType:Wi,getTableColType:Yb}},_S=(i,m,h)=>{const v=oc(i,m,1);h===1||v<=1?Me(i,m):bs(i,m,Math.min(h,v))},OS=(i,m)=>h=>{const v=h.column+h.colspan-1,T=h.column;return v>=i&&T<m},NE=(i,m,h)=>{if(Co.hasColumns(i)){const v=Bo(Co.justColumns(i),OS(m,h)),T=cn(v,P=>{const U=pc(P.element);return _S(U,"span",h-m),U}),A=pe.fromTag("colgroup");return aa(A,T),[A]}else return[]},BE=(i,m,h)=>cn(i.all,v=>{const T=Bo(v.cells,OS(m,h)),A=cn(T,U=>{const J=pc(U.element);return _S(J,"colspan",h-m),J}),P=pe.fromTag("tr");return aa(P,A),P}),$E=(i,m)=>{const h=Co.fromTable(i);return bf(h,m).map(T=>{const A=T[T.length-1],P=T[0].column,U=A.column+A.colspan,J=NE(h,P,U),ce=BE(h,P,U);return[...J,...ce]})},PE=(i,m,h)=>{const v=Co.fromTable(i);return pf(v,m).bind(A=>{const P=Rh(v,h,!1),J=Va(P).rows.slice(A[0].row,A[A.length-1].row+A[A.length-1].rowspan),ce=is(J,lt=>{const Bt=Bo(lt.cells,_t=>!_t.isLocked);return Bt.length>0?[{...lt,cells:Bt}]:[]}),Ce=Na(ce);return Fs(Ce.length>0,Ce)}).map(A=>ty(A))},Hh=Tr.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),$y=(i,m,h)=>{const v=h.substring(0,h.length-i.length),T=parseFloat(v);return v===T.toString()?m(T):Hh.invalid(h)},Dg={...Hh,from:i=>vs(i,"%")?$y("%",Hh.percent,i):vs(i,"px")?$y("px",Hh.pixels,i):Hh.invalid(i)},IE=(i,m)=>cn(i,h=>Dg.from(h).fold(()=>h,T=>T/m*100+"%",T=>T+"%")),FE=(i,m,h)=>{const v=h/m;return cn(i,T=>Dg.from(T).fold(()=>T,P=>P*v+"px",P=>P/100*h+"px"))},LE=(i,m)=>{const h=i.fold(()=>G(""),v=>{const T=v/m;return G(T+"px")},()=>{const v=100/m;return G(v+"%")});return Fo(m,h)},Iy=(i,m,h)=>i.fold(()=>m,v=>FE(m,h,v),v=>IE(m,h)),AS=(i,m,h)=>{const v=Dg.from(h),T=Bn(i,A=>A==="0px")?LE(v,i.length):Iy(v,i,m);return VE(T)},Rg=(i,m)=>i.length===0?m:Ts(i,(h,v)=>Dg.from(v).fold(G(0),Xe,Xe)+h,0),DS=(i,m)=>{const h=Math.floor(i);return{value:h+m,remainder:i-h}},HE=(i,m)=>Dg.from(i).fold(G(i),h=>h+m+"px",h=>h+m+"%"),VE=i=>{if(i.length===0)return i;const m=Ts(i,(v,T)=>{const A=Dg.from(T).fold(()=>({value:T,remainder:0}),P=>DS(P,"px"),P=>({value:P+"%",remainder:0}));return{output:[A.value].concat(v.output),remainder:v.remainder+A.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([HE(h[h.length-1],Math.round(m.remainder))])},zE=Dg.from,Vh=(i,m,h)=>{je(m,v=>{const T=i.slice(v.column,v.colspan+v.column),A=Rg(T,Zc());_s(v.element,"width",A+h)})},tv=(i,m,h)=>{je(m,(v,T)=>{const A=Rg([i[T]],Zc());_s(v.element,"width",A+h)})},Mg=(i,m,h,v)=>{je(h,T=>{const A=i.slice(T.row,T.rowspan+T.row),P=Rg(A,im());_s(T.element,"height",P+v)}),je(m,(T,A)=>{_s(T.element,"height",i[A])})},nv=i=>zE(i).fold(G("px"),G("px"),G("%")),RS=(i,m,h)=>{const v=Co.fromTable(i),T=v.all,A=Co.justCells(v),P=Co.justColumns(v);m.each(U=>{const J=nv(U),ce=Un(i),Ce=kb(v,i),lt=AS(Ce,ce,U);Co.hasColumns(v)?tv(lt,P,J):Vh(lt,A,J),_s(i,"width",U)}),h.each(U=>{const J=nv(U),ce=bi(i),Ce=mu(v,i,al),lt=AS(Ce,ce,U);Mg(lt,T,A,J),_s(i,"height",U)})},Id=Rp,ov=vi,MS=$0,Xu=i=>{Me(i,"width")},Cf=i=>{const m=Pi(i);RS(i,fe.some(m),fe.none()),Xu(i)},Fy=i=>{const m=Ir(i);RS(i,fe.some(m),fe.none()),Xu(i)},NS=i=>{nl(i,"width");const m=fd(i),h=m.length>0?m:iu(i);je(h,v=>{nl(v,"width"),Xu(v)}),Xu(i)},UE={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},WE=()=>pe.fromTag("th"),Ly=()=>pe.fromTag("td"),ZE=()=>pe.fromTag("col"),jE=(i,m,h,v)=>{const T=pe.fromTag("tr");for(let A=0;A<i;A++){const P=v<m||A<h?WE():Ly();A<h&&bs(P,"scope","row"),v<m&&bs(P,"scope","col"),Es(P,pe.fromTag("br")),Es(T,P)}return T},BS=i=>{const m=pe.fromTag("colgroup");return Fo(i,()=>Es(m,ZE())),m},$S=(i,m,h,v)=>Fo(i,T=>jE(m,h,v,T)),sv=(i,m,h,v,T,A=UE)=>{const P=pe.fromTag("table"),U=T!=="cells";yc(P,A.styles),pr(P,A.attributes),A.colGroups&&Es(P,BS(m));const J=Math.min(i,h);if(U&&h>0){const _t=pe.fromTag("thead");Es(P,_t);const Rt=$S(h,m,T==="sectionCells"?J:0,v);aa(_t,Rt)}const ce=pe.fromTag("tbody");Es(P,ce);const Ce=U?i-J:i,Bt=$S(Ce,m,U?0:h,v);return aa(ce,Bt),P},GE=i=>i.dom.innerHTML,qE=i=>{const m=pe.fromTag("div"),h=pe.fromDom(i.dom.cloneNode(!0));return Es(m,h),GE(m)},KE=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},PS=(i,m)=>{oe(m,"td,th").each(at(KE,i))},Hy=(i,m)=>{je(Wr(m,"tr"),h=>{Xb(i,h.dom),je(Wr(h,"th,td"),v=>{Jb(i,v.dom)})})},IS=i=>Mn(i)&&i.indexOf("%")!==-1,YE=(i,m,h,v,T)=>{const A=kS(i),P={styles:A,attributes:Ny(i),colGroups:ES(i)};return i.undoManager.ignore(()=>{const U=sv(h,m,T,v,xS(i),P);bs(U,"data-mce-id","__mce");const J=qE(U);i.insertContent(J),i.addVisual()}),oe(Hl(i),'table[data-mce-id="__mce"]').map(U=>(Zi(i)?Fy(U):Hs(i)?NS(U):(ev(i)||IS(A.width))&&Cf(U),wi(U),Me(U,"data-mce-id"),Hy(i,U),PS(i,U),U.dom)).getOrNull()},FS=(i,m,h,v={})=>{const T=A=>it(A)&&A>0;if(T(m)&&T(h)){const A=v.headerRows||0,P=v.headerColumns||0;return YE(i,h,m,P,A)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var n1=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Vy="x-tinymce/dom-table-",zy=Vy+"rows",zh=Vy+"columns",rv=i=>{const m=n1.FakeClipboardItem(i);n1.write([m])},Uy=i=>{var m;const h=(m=n1.read())!==null&&m!==void 0?m:[];return ks(h,v=>fe.from(v.getType(i)))},LS=i=>{Uy(i).isSome()&&n1.clear()},HS=i=>{i.fold(Ng,m=>rv({[zy]:m}))},VS=()=>Uy(zy),Ng=()=>LS(zy),zS=i=>{i.fold(XE,m=>rv({[zh]:m}))},o1=()=>Uy(zh),XE=()=>LS(zh),Wy=i=>Y0(Eb(i),Uu(i)).filter(Ad),US=i=>L2(Eb(i),Uu(i)).filter(Ad),JE=(i,m)=>{const h=Uu(i),v=()=>Wy(i).each(Ze=>{Rr(Ze,h).filter(q(h)).each(Jt=>{const Fn=pe.fromText("");if(Da(Jt,Fn),Xs(Jt),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const no=i.dom.createRng();no.setStart(Fn.dom,0),no.setEnd(Fn.dom,0),i.selection.setRng(no),i.nodeChanged()}})}),T=Ze=>Wy(i).each(Jt=>{Hs(i)||Zi(i)||ev(i)||Rr(Jt,h).each(no=>{Ze==="relative"&&!Id(no)?Cf(no):Ze==="fixed"&&!ov(no)?Fy(no):Ze==="responsive"&&!MS(no)&&NS(no),wi(no),wf(i,no.dom,lc)})}),A=Ze=>Rr(Ze,h),P=Ze=>US(i).bind(Jt=>A(Jt).map(Fn=>Ze(Fn,Jt))),U=(Ze,Jt)=>{P(Fn=>{i.formatter.toggle("tableclass",{value:Jt},Fn.dom),wf(i,Fn.dom,Fh)})},J=(Ze,Jt)=>{P(Fn=>{const no=xm(i),Ec=Bn(no,jr=>i.formatter.match("tablecellclass",{value:Jt},jr.dom))?i.formatter.remove:i.formatter.apply;je(no,jr=>Ec("tablecellclass",{value:Jt},jr.dom)),wf(i,Fn.dom,Fh)})},ce=()=>{Wy(i).each(Ze=>{Rr(Ze,h).each(Jt=>{Y(Jt,"caption").fold(()=>{const Fn=pe.fromTag("caption");Es(Fn,pe.fromText("Caption")),au(Jt,Fn,0),i.selection.setCursorLocation(Fn.dom,0)},Fn=>{Is("caption")(Ze)&&Vc("td",Jt).each(no=>i.selection.setCursorLocation(no.dom,0)),Xs(Fn)}),wf(i,Jt.dom,lc)})})},Ce=Ze=>{i.focus()},lt=(Ze,Jt=!1)=>P((Fn,no)=>{const zs=Fp(xm(i),Fn,no);Ze(Fn,zs,Jt).each(Ce)}),Bt=()=>P((Ze,Jt)=>{const Fn=Fp(xm(i),Ze,Jt),no=mg(tt,pe.fromDom(i.getDoc()),fe.none());return PE(Ze,Fn,no)}),_t=()=>P((Ze,Jt)=>{const Fn=Fp(xm(i),Ze,Jt);return $E(Ze,Fn)}),Ge=(Ze,Jt)=>Jt().each(Fn=>{const no=cn(Fn,zs=>pc(zs));P((zs,Ec)=>{const jr=zu(pe.fromDom(i.getDoc())),ci=F2(xm(i),Ec,no,jr);Ze(zs,ci).each(Ce)})}),Rt=Ze=>(Jt,Fn)=>ot(Fn,"type").each(no=>{lt(Ze(no),Fn.no_events)});qo({mceTableSplitCells:()=>lt(m.unmergeCells),mceTableMergeCells:()=>lt(m.mergeCells),mceTableInsertRowBefore:()=>lt(m.insertRowsBefore),mceTableInsertRowAfter:()=>lt(m.insertRowsAfter),mceTableInsertColBefore:()=>lt(m.insertColumnsBefore),mceTableInsertColAfter:()=>lt(m.insertColumnsAfter),mceTableDeleteCol:()=>lt(m.deleteColumn),mceTableDeleteRow:()=>lt(m.deleteRow),mceTableCutCol:()=>_t().each(Ze=>{zS(Ze),lt(m.deleteColumn)}),mceTableCutRow:()=>Bt().each(Ze=>{HS(Ze),lt(m.deleteRow)}),mceTableCopyCol:()=>_t().each(Ze=>zS(Ze)),mceTableCopyRow:()=>Bt().each(Ze=>HS(Ze)),mceTablePasteColBefore:()=>Ge(m.pasteColsBefore,o1),mceTablePasteColAfter:()=>Ge(m.pasteColsAfter,o1),mceTablePasteRowBefore:()=>Ge(m.pasteRowsBefore,VS),mceTablePasteRowAfter:()=>Ge(m.pasteRowsAfter,VS),mceTableDelete:v,mceTableCellToggleClass:J,mceTableToggleClass:U,mceTableToggleCaption:ce,mceTableSizingMode:(Ze,Jt)=>T(Jt),mceTableCellType:Rt(Ze=>Ze==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Rt(Ze=>Ze==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Rt(Ze=>{switch(Ze){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(Ze,Jt)=>i.addCommand(Jt,Ze)),i.addCommand("mceInsertTable",(Ze,Jt)=>{FS(i,Jt.rows,Jt.columns,Jt.options)}),i.addCommand("mceTableApplyCellStyle",(Ze,Jt)=>{const Fn=Ec=>"tablecell"+Ec.toLowerCase().replace("-","");if(!Et(Jt))return;const no=Bo(xm(i),Ad);if(no.length===0)return;const zs=_r(Jt,(Ec,jr)=>i.formatter.has(Fn(jr))&&Mn(Ec));nn(zs)||(qo(zs,(Ec,jr)=>{const ci=Fn(jr);je(no,Mf=>{Ec===""?i.formatter.remove(ci,{value:null},Mf.dom,!0):i.formatter.apply(ci,{value:Ec},Mf.dom)})}),A(no[0]).each(Ec=>wf(i,Ec.dom,Fh)))})},QE=(i,m)=>{const h=Uu(i),v=T=>L2(Eb(i)).bind(A=>Rr(A,h).map(P=>{const U=Fp(xm(i),P,A);return T(P,U)})).getOr("");qo({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(T,A)=>i.addQueryValueHandler(A,T))},av=Tr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),s1=(i,m,h,v)=>i.fold(m,h,v),Rm=i=>i.fold(Xe,Xe,Xe),e_=av.before,Zy=av.on,WS=av.after,Yc={before:e_,on:Zy,after:WS,cata:s1,getStart:Rm},Bg={create:(i,m)=>({selection:i,kill:m})},t_=(i,m)=>{const h=i.document.createRange();return h.selectNode(m.dom),h},r1=(i,m)=>{const h=i.document.createRange();return jS(h,m),h},jS=(i,m)=>i.selectNodeContents(m.dom),Uh=(i,m)=>{m.fold(h=>{i.setStartBefore(h.dom)},(h,v)=>{i.setStart(h.dom,v)},h=>{i.setStartAfter(h.dom)})},$g=(i,m)=>{m.fold(h=>{i.setEndBefore(h.dom)},(h,v)=>{i.setEnd(h.dom,v)},h=>{i.setEndAfter(h.dom)})},a1=(i,m,h)=>{const v=i.document.createRange();return Uh(v,m),$g(v,h),v},Sf=(i,m,h,v,T)=>{const A=i.document.createRange();return A.setStart(m.dom,h),A.setEnd(v.dom,T),A},n_=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),Pa=i=>{const m=i.getClientRects(),h=m.length>0?m[0]:i.getBoundingClientRect();return h.width>0||h.height>0?fe.some(h).map(n_):fe.none()},xi=Tr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cv=(i,m,h)=>m(pe.fromDom(h.startContainer),h.startOffset,pe.fromDom(h.endContainer),h.endOffset),GS=(i,m)=>m.match({domRange:h=>({ltr:G(h),rtl:fe.none}),relative:(h,v)=>({ltr:Iu(()=>a1(i,h,v)),rtl:Iu(()=>fe.some(a1(i,v,h)))}),exact:(h,v,T,A)=>({ltr:Iu(()=>Sf(i,h,v,T,A)),rtl:Iu(()=>fe.some(Sf(i,T,A,h,v)))})}),qS=(i,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(T=>T.collapsed===!1).map(T=>xi.rtl(pe.fromDom(T.endContainer),T.endOffset,pe.fromDom(T.startContainer),T.startOffset)).getOrThunk(()=>cv(i,xi.ltr,h)):cv(i,xi.ltr,h)},jy=(i,m)=>{const h=GS(i,m);return qS(i,h)},Pg=(i,m)=>jy(i,m).match({ltr:(v,T,A,P)=>{const U=i.document.createRange();return U.setStart(v.dom,T),U.setEnd(A.dom,P),U},rtl:(v,T,A,P)=>{const U=i.document.createRange();return U.setStart(A.dom,P),U.setEnd(v.dom,T),U}});xi.ltr,xi.rtl;const Ig={create:(i,m,h,v)=>({start:i,soffset:m,finish:h,foffset:v})},Wh={create:(i,m,h,v)=>({start:Yc.on(i,m),finish:Yc.on(h,v)})},l1=(i,m)=>{const h=Pg(i,m);return Ig.create(pe.fromDom(h.startContainer),h.startOffset,pe.fromDom(h.endContainer),h.endOffset)},Fg=Wh.create,Gy=(i,m,h,v,T,A,P)=>bo(h,T)&&v===A?fe.none():xe(h,"td,th",m).bind(U=>xe(T,"td,th",m).bind(J=>Zh(i,m,U,J,P))),Zh=(i,m,h,v,T)=>bo(h,v)?fe.none():hg(h,v,m).bind(A=>{const P=A.boxes.getOr([]);return P.length>1?(T(i,P,A.start,A.finish),fe.some(Bg.create(fe.some(Fg(h,0,h,sc(h))),!0))):fe.none()}),ic=(i,m,h,v,T)=>{const A=P=>(T.clearBeforeUpdate(h),T.selectRange(h,P.boxes,P.start,P.finish),P.boxes);return P2(v,i,m,T.firstSelectedSelector,T.lastSelectedSelector).map(A)},qy=(i,m)=>({item:i,mode:m}),Ju=(i,m,h,v=Fd)=>i.property().parent(m).map(T=>qy(T,v)),Fd=(i,m,h,v=xf)=>h.sibling(i,m).map(T=>qy(T,v)),xf=(i,m,h,v=xf)=>{const T=i.property().children(m);return h.first(T).map(P=>qy(P,v))},Lg=[{current:Ju,next:Fd,fallback:fe.none()},{current:Fd,next:xf,fallback:fe.some(Ju)},{current:xf,next:xf,fallback:fe.some(Fd)}],lv=(i,m,h,v,T=Lg)=>H(T,P=>P.current===h).bind(P=>P.current(i,m,v,P.next).orThunk(()=>P.fallback.bind(U=>lv(i,m,U,v)))),uv={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?fe.some(h[h.length-1]):fe.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?fe.some(h[0]):fe.none()})},i1=(i,m,h,v,T,A)=>lv(i,m,v,T).bind(U=>A(U.item)?fe.none():h(U.item)?fe.some(U.item):i1(i,U.item,h,U.mode,T,A)),KS=(i,m,h,v)=>i1(i,m,h,Fd,uv.left(),v),dv=(i,m,h,v)=>i1(i,m,h,Fd,uv.right(),v),Cu=i=>m=>i.property().children(m).length===0,s_=(i,m,h)=>Ky(i,m,Cu(i),h),r_=(i,m,h)=>Yy(i,m,Cu(i),h),Ky=KS,Yy=dv,u1=ym(),YS=(i,m)=>s_(u1,i,m),XS=(i,m)=>r_(u1,i,m),ji=(i,m,h)=>Ky(u1,i,m,h),mv=(i,m,h)=>Yy(u1,i,m,h),JS=(i,m,h)=>Dr(i,m,h).isSome(),Ld=Tr.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ti=(i,m,h)=>{const v=i.getRect(m),T=i.getRect(h);return T.right>v.left&&T.left<v.right},Su=i=>xe(i,"tr"),kf={...Ld,verify:(i,m,h,v,T,A,P)=>xe(v,"td,th",P).bind(U=>xe(m,"td,th",P).map(J=>bo(U,J)?bo(v,U)&&sc(U)===T?A(J):Ld.none("in same cell"):Xo(Su,[U,J]).fold(()=>Ti(i,J,U)?Ld.success():A(J),ce=>A(J)))).getOr(Ld.none("default")),cata:(i,m,h,v,T)=>i.fold(m,h,v,T)},Lr=(i,m,h,v)=>({parent:i,children:m,element:h,index:v}),Mm=i=>zc(i).bind(m=>{const h=Vo(m);return d1(h,i).map(v=>Lr(m,h,i,v))}),d1=(i,m)=>Yr(i,at(bo,m)),Hg=Is("br"),fv=(i,m,h)=>m(i,h).bind(v=>Aa(v)&&Po(v).trim().length===0?fv(v,m,h):fe.some(v)),gv=(i,m,h)=>h.traverse(m).orThunk(()=>fv(m,h.gather,i)).map(h.relative),Xy=(i,m)=>ya(i,m).filter(Hg).orThunk(()=>ya(i,m-1).filter(Hg)),hv=(i,m,h,v)=>Xy(m,h).bind(T=>v.traverse(T).fold(()=>fv(T,v.gather,i).map(v.relative),A=>Mm(A).map(P=>Yc.on(P.parent,P.index)))),QS=(i,m,h,v)=>(Hg(m)?gv(i,m,v):hv(i,m,h,v)).map(A=>({start:A,finish:A})),a_=i=>kf.cata(i,m=>fe.none(),()=>fe.none(),m=>fe.some(Ua(m,0)),m=>fe.some(Ua(m,sc(m)))),Hd=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),m1=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),Jy=(i,m,h)=>({left:i.left+m,top:i.top+h,right:i.right+m,bottom:i.bottom+h}),Vd=i=>i.top,Qy=i=>i.bottom,f1=(i,m,h)=>h>=0&&h<sc(m)?i.getRangedRect(m,h,m,h+1):h>0?i.getRangedRect(m,h-1,m,h):fe.none(),Ef=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),ew=(i,m)=>fe.some(i.getRect(m)),ex=(i,m,h)=>zr(m)?ew(i,m).map(Ef):Aa(m)?f1(i,m,h).map(Ef):fe.none(),tw=(i,m)=>zr(m)?ew(i,m).map(Ef):Aa(m)?i.getRangedRect(m,0,m,sc(m)).map(Ef):fe.none(),_f=5,c_=100,zd=Tr.generate([{none:[]},{retry:["caret"]}]),ki=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,tx=(i,m,h)=>Js(m,Za).fold(Ye,v=>tw(i,v).exists(T=>ki(h,T))),pv=(i,m,h,v,T)=>{const A=Hd(T,_f);return Math.abs(h.bottom-v.bottom)<1||h.top>T.bottom?zd.retry(A):h.top===T.bottom?zd.retry(Hd(T,1)):tx(i,m,T)?zd.retry(Jy(A,_f,0)):zd.none()},nw={point:Vd,adjuster:(i,m,h,v,T)=>{const A=m1(T,_f);return Math.abs(h.top-v.top)<1||h.bottom<T.top?zd.retry(A):h.bottom===T.top?zd.retry(m1(T,1)):tx(i,m,T)?zd.retry(Jy(A,_f,0)):zd.none()},move:m1,gather:YS},l_={point:Qy,adjuster:pv,move:Hd,gather:XS},nx=(i,m,h)=>i.elementFromPoint(m,h).filter(v=>Ko(v)==="table").isSome(),ow=(i,m,h,v,T)=>bv(i,m,h,m.move(v,_f),T),bv=(i,m,h,v,T)=>T===0?fe.some(v):nx(i,v.left,m.point(v))?ow(i,m,h,v,T-1):i.situsFromPoint(v.left,m.point(v)).bind(A=>A.start.fold(fe.none,P=>tw(i,P).bind(U=>m.adjuster(i,P,U,h,v).fold(fe.none,J=>bv(i,m,h,J,T-1))).orThunk(()=>fe.some(v)),fe.none)),i_=(i,m,h)=>i.point(m)>h.getInnerHeight()?fe.some(i.point(m)-h.getInnerHeight()):i.point(m)<0?fe.some(-i.point(m)):fe.none(),u_=(i,m,h)=>{const v=i.move(h,_f),T=bv(m,i,h,v,c_).getOr(v);return i_(i,T,m).fold(()=>m.situsFromPoint(T.left,i.point(T)),A=>(m.scrollBy(0,A),m.situsFromPoint(T.left,i.point(T)-A)))},vv={tryUp:at(u_,nw),tryDown:at(u_,l_),getJumpSize:G(_f)},ox=20,qD=(i,m,h)=>i.getSelection().bind(v=>QS(m,v.finish,v.foffset,h).fold(()=>fe.some(Ua(v.finish,v.foffset)),T=>{const A=i.fromSitus(T),P=kf.verify(i,v.finish,v.foffset,A.finish,A.foffset,h.failure,m);return a_(P)})),jh=(i,m,h,v,T,A)=>A===0?fe.none():Gh(i,m,h,v,T).bind(P=>{const U=i.fromSitus(P),J=kf.verify(i,h,v,U.finish,U.foffset,T.failure,m);return kf.cata(J,()=>fe.none(),()=>fe.some(P),ce=>bo(h,ce)&&v===0?So(i,h,v,m1,T):jh(i,m,ce,0,T,A-1),ce=>bo(h,ce)&&v===sc(ce)?So(i,h,v,Hd,T):jh(i,m,ce,sc(ce),T,A-1))}),So=(i,m,h,v,T)=>ex(i,m,h).bind(A=>Nm(i,T,v(A,vv.getJumpSize()))),Nm=(i,m,h)=>{const v=Ni().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,h):fe.none()},Gh=(i,m,h,v,T)=>ex(i,h,v).bind(A=>Nm(i,T,A)),sw=(i,m,h)=>qD(i,m,h).bind(v=>jh(i,m,v.element,v.offset,h,ox).map(i.fromSitus)),d_=(i,m)=>JS(i,h=>zc(h).exists(v=>bo(v,m))),h1=(i,m,h,v,T)=>xe(v,"td,th",m).bind(A=>xe(A,"table",m).bind(P=>d_(T,P)?sw(i,m,h).bind(U=>xe(U.finish,"td,th",m).map(J=>({start:A,finish:J,range:U}))):fe.none())),Vg=(i,m,h,v,T,A)=>A(v,m).orThunk(()=>h1(i,m,h,v,T).map(P=>{const U=P.range;return Bg.create(fe.some(Fg(U.start,U.soffset,U.finish,U.foffset)),!0)})),zg=(i,m)=>xe(i,"tr",m).bind(h=>xe(h,"table",m).bind(v=>{const T=Wr(v,"tr");return bo(h,T[0])?ji(v,A=>Od(A).isSome(),m).map(A=>{const P=sc(A);return Bg.create(fe.some(Fg(A,P,A,P)),!0)}):fe.none()})),rw=(i,m)=>xe(i,"tr",m).bind(h=>xe(h,"table",m).bind(v=>{const T=Wr(v,"tr");return bo(h,T[T.length-1])?mv(v,A=>Li(A).isSome(),m).map(A=>Bg.create(fe.some(Fg(A,0,A,0)),!0)):fe.none()})),aw=(i,m,h,v,T,A,P)=>h1(i,h,v,T,A).bind(U=>Zh(m,h,U.start,U.finish,P)),cw=i=>{let m=i;return{get:()=>m,set:T=>{m=T}}},sx=i=>{const m=cw(fe.none()),h=()=>m.get().each(i);return{clear:()=>{h(),m.set(fe.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:U=>{h(),m.set(fe.some(U))}}},p1=()=>{const i=sx(tt);return{...i,on:h=>i.get().each(h)}},yv=(i,m)=>xe(i,"td,th",m),lw=i=>tc(i).exists(Ll),iw=(i,m,h,v)=>{const T=p1(),A=T.clear,P=Ce=>{T.on(lt=>{v.clearBeforeUpdate(m),yv(Ce.target,h).each(Bt=>{hg(lt,Bt,h).each(_t=>{const Ge=_t.boxes.getOr([]);if(Ge.length===1){const Rt=Ge[0],Ze=D2(Rt)==="false",Jt=ze(I0(Ce.target),Rt,bo);Ze&&Jt&&(v.selectRange(m,Ge,Rt,Rt),i.selectContents(Rt))}else Ge.length>1&&(v.selectRange(m,Ge,_t.start,_t.finish),i.selectContents(Bt))})})})};return{clearstate:A,mousedown:Ce=>{v.clear(m),yv(Ce.target,h).filter(lw).each(T.set)},mouseover:Ce=>{P(Ce)},mouseup:Ce=>{P(Ce),A()}}},wv={traverse:tl,gather:XS,relative:Yc.before,retry:vv.tryDown,failure:kf.failedDown},b1={traverse:el,gather:YS,relative:Yc.before,retry:vv.tryUp,failure:kf.failedUp},Bm=i=>m=>m===i,rx=Bm(38),Ud=Bm(40),Of=i=>i>=37&&i<=40,m_={isBackward:Bm(37),isForward:Bm(39)},ax={isBackward:Bm(39),isForward:Bm(37)},uw=i=>{const m=i!==void 0?i.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return Bi(h,v)},qh=(i,m,h)=>{const T=(h!==void 0?h.dom:document).defaultView;T&&T.scrollBy(i,m)},Kh=Tr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),f_=i=>Kh.exact(i.start,i.soffset,i.finish,i.foffset),g_=i=>i.match({domRange:m=>pe.fromDom(m.startContainer),relative:(m,h)=>Yc.getStart(m),exact:(m,h,v,T)=>m}),cx=Kh.domRange,Af=Kh.relative,dw=Kh.exact,mw=i=>{const m=g_(i);return ds(m)},Cv=Ig.create,Ug={domRange:cx,relative:Af,exact:dw,exactFromRange:f_,getWin:mw,range:Cv},Sv=(i,m,h)=>{var v,T;return fe.from((T=(v=i.dom).caretPositionFromPoint)===null||T===void 0?void 0:T.call(v,m,h)).bind(A=>{if(A.offsetNode===null)return fe.none();const P=i.dom.createRange();return P.setStart(A.offsetNode,A.offset),P.collapse(),fe.some(P)})},Ft=(i,m,h)=>{var v,T;return fe.from((T=(v=i.dom).caretRangeFromPoint)===null||T===void 0?void 0:T.call(v,m,h))},uc=(()=>document.caretPositionFromPoint?Sv:document.caretRangeFromPoint?Ft:fe.none)(),xv=(i,m,h)=>{const v=pe.fromDom(i.document);return uc(v,m,h).map(T=>Ig.create(pe.fromDom(T.startContainer),T.startOffset,pe.fromDom(T.endContainer),T.endOffset))},cr=(i,m)=>{const h=Ko(i);return h==="input"?Yc.after(i):Oo(["br","img"],h)?m===0?Yc.before(i):Yc.after(i):Yc.on(i,m)},xu=(i,m)=>{const h=i.fold(Yc.before,cr,Yc.after),v=m.fold(Yc.before,cr,Yc.after);return Ug.relative(h,v)},lx=(i,m,h,v)=>{const T=cr(i,m),A=cr(h,v);return Ug.relative(T,A)},Wl=(i,m,h,v)=>{const A=mr(i).dom.createRange();return A.setStart(i.dom,m),A.setEnd(h.dom,v),A},Ia=(i,m,h,v)=>{const T=Wl(i,m,h,v),A=bo(i,h)&&m===v;return T.collapsed&&!A},Tv=i=>fe.from(i.getSelection()),kv=(i,m)=>{Tv(i).each(h=>{h.removeAllRanges(),h.addRange(m)})},$m=(i,m,h,v,T)=>{const A=Sf(i,m,h,v,T);kv(i,A)},ix=(i,m,h,v,T,A)=>{m.collapse(h.dom,v),m.extend(T.dom,A)},fw=(i,m)=>jy(i,m).match({ltr:(h,v,T,A)=>{$m(i,h,v,T,A)},rtl:(h,v,T,A)=>{Tv(i).each(P=>{if(P.setBaseAndExtent)P.setBaseAndExtent(h.dom,v,T.dom,A);else if(P.extend)try{ix(i,P,h,v,T,A)}catch{$m(i,T,A,h,v)}else $m(i,T,A,h,v)})}}),ux=(i,m,h,v,T)=>{const A=lx(m,h,v,T);fw(i,A)},gw=(i,m,h)=>{const v=xu(m,h);fw(i,v)},hw=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),h=i.getRangeAt(i.rangeCount-1);return fe.some(Ig.create(pe.fromDom(m.startContainer),m.startOffset,pe.fromDom(h.endContainer),h.endOffset))}else return fe.none()},pw=i=>{if(i.anchorNode===null||i.focusNode===null)return hw(i);{const m=pe.fromDom(i.anchorNode),h=pe.fromDom(i.focusNode);return Ia(m,i.anchorOffset,h,i.focusOffset)?fe.some(Ig.create(m,i.anchorOffset,h,i.focusOffset)):hw(i)}},v1=(i,m,h=!0)=>{const T=(h?r1:t_)(i,m);kv(i,T)},Ev=i=>Tv(i).filter(m=>m.rangeCount>0).bind(pw),y1=i=>Ev(i).map(m=>Ug.exact(m.start,m.soffset,m.finish,m.foffset)),w1=(i,m)=>{const h=Pg(i,m);return Pa(h)},_v=(i,m,h)=>xv(i,m,h),dx=i=>{Tv(i).each(m=>m.removeAllRanges())},Pm=i=>({elementFromPoint:(Ze,Jt)=>pe.fromPoint(pe.fromDom(i.document),Ze,Jt),getRect:Ze=>Ze.dom.getBoundingClientRect(),getRangedRect:(Ze,Jt,Fn,no)=>{const zs=Ug.exact(Ze,Jt,Fn,no);return w1(i,zs)},getSelection:()=>y1(i).map(Ze=>l1(i,Ze)),fromSitus:Ze=>{const Jt=Ug.relative(Ze.start,Ze.finish);return l1(i,Jt)},situsFromPoint:(Ze,Jt)=>_v(i,Ze,Jt).map(Fn=>Wh.create(Fn.start,Fn.soffset,Fn.finish,Fn.foffset)),clearSelection:()=>{dx(i)},collapseSelection:(Ze=!1)=>{y1(i).each(Jt=>Jt.fold(Fn=>Fn.collapse(Ze),(Fn,no)=>{const zs=Ze?Fn:no;gw(i,zs,zs)},(Fn,no,zs,Ec)=>{const jr=Ze?Fn:zs,ci=Ze?no:Ec;ux(i,jr,ci,jr,ci)}))},setSelection:Ze=>{ux(i,Ze.start,Ze.soffset,Ze.finish,Ze.foffset)},setRelativeSelection:(Ze,Jt)=>{gw(i,Ze,Jt)},selectNode:Ze=>{v1(i,Ze,!1)},selectContents:Ze=>{v1(i,Ze)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>uw(pe.fromDom(i.document)).top,scrollBy:(Ze,Jt)=>{qh(Ze,Jt,pe.fromDom(i.document))}}),Wd=(i,m)=>({rows:i,cols:m}),Wg=(i,m,h,v)=>{const T=Pm(i),A=iw(T,m,h,v);return{clearstate:A.clearstate,mousedown:A.mousedown,mouseover:A.mouseover,mouseup:A.mouseup}},Yh=i=>Js(i,kn).exists(Ll),bw=(i,m)=>Yh(i)||Yh(m),h_=(i,m,h,v)=>{const T=Pm(i),A=()=>(v.clear(m),fe.none());return{keydown:(J,ce,Ce,lt,Bt,_t)=>{const Ge=J.raw,Rt=Ge.which,Ze=Ge.shiftKey===!0;return Ab(m,v.selectedSelector).fold(()=>(Of(Rt)&&!Ze&&v.clearBeforeUpdate(m),Of(Rt)&&Ze&&!bw(ce,lt)?fe.none:Ud(Rt)&&Ze?at(aw,T,m,h,wv,lt,ce,v.selectRange):rx(Rt)&&Ze?at(aw,T,m,h,b1,lt,ce,v.selectRange):Ud(Rt)?at(Vg,T,h,wv,lt,ce,rw):rx(Rt)?at(Vg,T,h,b1,lt,ce,zg):fe.none),Fn=>{const no=zs=>()=>ks(zs,jr=>ic(jr.rows,jr.cols,m,Fn,v)).fold(()=>W0(m,v.firstSelectedSelector,v.lastSelectedSelector).map(jr=>{const ci=Ud(Rt)||_t.isForward(Rt)?Yc.after:Yc.before;return T.setRelativeSelection(Yc.on(jr.first,0),ci(jr.table)),v.clear(m),Bg.create(fe.none(),!0)}),jr=>fe.some(Bg.create(fe.none(),!0)));return Of(Rt)&&Ze&&!bw(ce,lt)?fe.none:Ud(Rt)&&Ze?no([Wd(1,0)]):rx(Rt)&&Ze?no([Wd(-1,0)]):_t.isBackward(Rt)&&Ze?no([Wd(0,-1),Wd(-1,0)]):_t.isForward(Rt)&&Ze?no([Wd(0,1),Wd(1,0)]):Of(Rt)&&!Ze?A:fe.none})()},keyup:(J,ce,Ce,lt,Bt)=>Ab(m,v.selectedSelector).fold(()=>{const _t=J.raw,Ge=_t.which;return _t.shiftKey===!0&&Of(Ge)&&bw(ce,lt)?Gy(m,h,ce,Ce,lt,Bt,v.selectRange):fe.none()},fe.none)}},mx=(i,m,h,v)=>{const T=Pm(i);return(A,P)=>{v.clearBeforeUpdate(m),hg(A,P,h).each(U=>{const J=U.boxes.getOr([]);v.selectRange(m,J,U.start,U.finish),T.selectContents(P),T.collapseSelection()})}},Ov=(i,m)=>{const h=se(i,m);return h===void 0||h===""?[]:h.split(" ")},fx=(i,m,h)=>{const T=Ov(i,m).concat([h]);return bs(i,m,T.join(" ")),!0},Av=(i,m,h)=>{const v=Bo(Ov(i,m),T=>T!==h);return v.length>0?bs(i,m,v.join(" ")):Me(i,m),!1},ja=i=>i.dom.classList!==void 0,Tu=i=>Ov(i,"class"),Gi=(i,m)=>fx(i,"class",m),C1=(i,m)=>Av(i,"class",m),ri=(i,m)=>{ja(i)?i.dom.classList.add(m):Gi(i,m)},gx=i=>{(ja(i)?i.dom.classList:Tu(i)).length===0&&Me(i,"class")},vw=(i,m)=>{ja(i)?i.dom.classList.remove(m):C1(i,m),gx(i)},yw=(i,m)=>ja(i)&&i.dom.classList.contains(m),ww=(i,m)=>{je(m,h=>{vw(i,h)})},p_=i=>m=>{ri(m,i)},Cw=i=>m=>{ww(m,i)},Sw={byClass:i=>{const m=p_(i.selected),h=Cw([i.selected,i.lastSelected,i.firstSelected]),v=A=>{const P=Wr(A,i.selectedSelector);je(P,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(A,P,U,J)=>{v(A),je(P,m),ri(U,i.firstSelected),ri(J,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,h)=>{const v=J=>{Me(J,i.selected),Me(J,i.firstSelected),Me(J,i.lastSelected)},T=J=>{bs(J,i.selected,"1")},A=J=>{P(J),h()},P=J=>{const ce=Wr(J,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);je(ce,v)};return{clearBeforeUpdate:P,clear:A,selectRange:(J,ce,Ce,lt)=>{A(J),je(ce,T),bs(Ce,i.firstSelected,"1"),bs(lt,i.lastSelected,"1"),m(ce,Ce,lt)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},xw=(i,m,h,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return h(i.elements)}},Vs=()=>({tag:"none"}),Zd=i=>({tag:"multiple",elements:i}),Tw=i=>({tag:"single",element:i}),kw=(i,m,h)=>({get:()=>Z0(i(),h).fold(()=>m().fold(Vs,Tw),Zd)}),Ew=(i,m)=>{const h=i.slice(0,m[m.length-1].row+1),v=Na(h);return is(v,T=>{const A=T.cells.slice(0,m[m.length-1].column+1);return cn(A,P=>P.element)})},_w=(i,m)=>{const h=i.slice(m[0].row+m[0].rowspan-1,i.length),v=Na(h);return is(v,T=>{const A=T.cells.slice(m[0].column+m[0].colspan-1,T.cells.length);return cn(A,P=>P.element)})},Ow=(i,m,h)=>{const v=Co.fromTable(i);return pf(v,m).map(A=>{const P=Rh(v,h,!1),{rows:U}=Va(P),J=Ew(U,A),ce=_w(U,A);return{upOrLeftCells:J,downOrRightCells:ce}})},Aw=(i,m,h,v,T,A,P)=>({target:i,x:m,y:h,stop:v,prevent:T,kill:A,raw:P}),Dw=i=>{const m=pe.fromDom(Lo(i).getOr(i.target)),h=()=>i.stopPropagation(),v=()=>i.preventDefault(),T=pn(v,h);return Aw(m,i.clientX,i.clientY,h,v,T,i)},y_=(i,m)=>h=>{i(h)&&m(Dw(h))},hx=(i,m,h,v,T)=>{const A=y_(h,v);return i.dom.addEventListener(m,A,T),{unbind:at(Rw,i,m,A,T)}},w_=(i,m,h,v)=>hx(i,m,h,v,!1),Rw=(i,m,h,v)=>{i.dom.removeEventListener(m,h,v)},C_=Pe,Df=(i,m,h)=>w_(i,m,C_,h),sn=Dw,Im=i=>!yw(pe.fromDom(i.target),"ephox-snooker-resizer-bar"),S_=(i,m)=>{const h=kw(()=>pe.fromDom(i.getBody()),()=>L2(Eb(i),Uu(i)),Vl.selectedSelector),v=(J,ce,Ce)=>{Rr(ce).each(Bt=>{const _t=e1(i),Ge=mg(tt,pe.fromDom(i.getDoc()),_t),Rt=xm(i),Ze=Ow(Bt,{selection:Rt},Ge);yS(i,J,ce,Ce,Ze)})},T=()=>Ay(i),A=Sw.byAttr(Vl,v,T);return i.on("init",J=>{const ce=i.getWin(),Ce=Hl(i),lt=Uu(i),Bt=()=>{const As=i.selection,kl=pe.fromDom(As.getStart()),El=pe.fromDom(As.getEnd());Xo(Rr,[kl,El]).fold(()=>A.clear(Ce),tt)},_t=Wg(ce,Ce,lt,A),Ge=h_(ce,Ce,lt,A),Rt=mx(ce,Ce,lt,A),Ze=As=>As.raw.shiftKey===!0;i.on("TableSelectorChange",As=>Rt(As.start,As.finish));const Jt=(As,kl)=>{Ze(As)&&(kl.kill&&As.kill(),kl.selection.each(El=>{const Eu=Ug.relative(El.start,El.finish),li=Pg(ce,Eu);i.selection.setRng(li)}))},Fn=As=>{const kl=sn(As);if(kl.raw.shiftKey&&Of(kl.raw.which)){const El=i.selection.getRng(),Eu=pe.fromDom(El.startContainer),li=pe.fromDom(El.endContainer);Ge.keyup(kl,Eu,El.startOffset,li,El.endOffset).each(Nf=>{Jt(kl,Nf)})}},no=As=>{const kl=sn(As);m.hide();const El=i.selection.getRng(),Eu=pe.fromDom(El.startContainer),li=pe.fromDom(El.endContainer),Nf=sg(m_,ax)(pe.fromDom(i.selection.getStart()));Ge.keydown(kl,Eu,El.startOffset,li,El.endOffset,Nf).each(_l=>{Jt(kl,_l)}),m.show()},zs=As=>As.button===0,Ec=As=>As.buttons===void 0?!0:(As.buttons&1)!==0,jr=As=>{_t.clearstate()},ci=As=>{zs(As)&&Im(As)&&_t.mousedown(sn(As))},Mf=As=>{Ec(As)&&Im(As)&&_t.mouseover(sn(As))},E1=As=>{zs(As)&&Im(As)&&_t.mouseup(sn(As))},Fv=(()=>{const As=cw(pe.fromDom(Ce)),kl=cw(0);return{touchEnd:Eu=>{const li=pe.fromDom(Eu.target);if(Is("td")(li)||Is("th")(li)){const Nf=As.get(),_l=kl.get();bo(Nf,li)&&Eu.timeStamp-_l<300&&(Eu.preventDefault(),Rt(li,li))}As.set(li),kl.set(Eu.timeStamp)}}})();i.on("dragstart",jr),i.on("mousedown",ci),i.on("mouseover",Mf),i.on("mouseup",E1),i.on("touchend",Fv.touchEnd),i.on("keyup",Fn),i.on("keydown",no),i.on("NodeChange",Bt)}),i.on("PreInit",()=>{i.serializer.addTempAttr(Vl.firstSelected),i.serializer.addTempAttr(Vl.lastSelected)}),{getSelectedCells:()=>xw(h.get(),G([]),J=>cn(J,ce=>ce.dom),J=>[J.dom]),clearSelectedCells:J=>A.clear(pe.fromDom(J))}},ma=i=>{let m=[];return{bind:A=>{if(A===void 0)throw new Error("Event bind error: undefined handler");m.push(A)},unbind:A=>{m=Bo(m,P=>P!==A)},trigger:(...A)=>{const P={};je(i,(U,J)=>{P[U]=A[J]}),je(m,U=>{U(P)})}}},ta=i=>{const m=Ya(i,v=>({bind:v.bind,unbind:v.unbind})),h=Ya(i,v=>v.trigger);return{registry:m,trigger:h}},Rf=(i,m)=>{let h=null;const v=()=>{Ln(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...A)=>{v(),h=setTimeout(()=>{h=null,i.apply(null,A)},m)}}},Dv=i=>i.slice(0).sort(),px=(i,m)=>{throw new Error("All required keys ("+Dv(i).join(", ")+") were not specified. Specified keys were: "+Dv(m).join(", ")+".")},x_=i=>{throw new Error("Unsupported keys for object: "+Dv(i).join(", "))},Ro=(i,m)=>{if(!Mt(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");je(m,h=>{if(!Mn(h))throw new Error("The value "+h+" in the "+i+" fields was not a string.")})},bx=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Dv(i).join(", ")+") were not.")},Rv=i=>{const m=Dv(i);H(m,(v,T)=>T<m.length-1&&v===m[T+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},Zg=(i,m)=>vx(i,m,{validate:Pt,label:"function"}),vx=(i,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Ro("required",m),Rv(m),v=>{const T=mn(v);Bn(m,U=>Oo(T,U))||px(m,T),i(m,T);const P=Bo(m,U=>!h.validate(v[U],U));return P.length>0&&bx(P,h.label),v}},T_=(i,m)=>{const h=Bo(m,v=>!Oo(i,v));h.length>0&&x_(h)},Mw=i=>Zg(T_,i),k_=Mw(["compare","extract","mutate","sink"]),KD=Mw(["element","start","stop","destroy"]),yx=Mw(["forceDrop","drop","move","delayDrop"]),Nw=()=>{let i=fe.none();const m=()=>{i=fe.none()},h=(A,P)=>{const U=i.map(J=>A.compare(J,P));return i=fe.some(P),U},v=(A,P)=>{P.extract(A).each(J=>{h(P,J).each(Ce=>{T.trigger.move(Ce)})})},T=ta({move:ma(["info"])});return{onEvent:v,reset:m,events:T.registry}},Bw=()=>{const i=ta({move:ma(["info"])});return{onEvent:tt,reset:tt,events:i.registry}},wx=()=>{const i=Bw(),m=Nw();let h=i;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=i},isOn:()=>h===m,onEvent:(U,J)=>{h.onEvent(U,J)},events:m.events}},YD=(i,m,h)=>{let v=!1;const T=ta({start:ma([]),stop:ma([])}),A=wx(),P=()=>{Ge.stop(),A.isOn()&&(A.off(),T.trigger.stop())},U=Rf(P,200),J=Ze=>{Ge.start(Ze),A.on(),T.trigger.start()},ce=Ze=>{U.cancel(),A.onEvent(Ze,m)};A.events.move.bind(Ze=>{m.mutate(i,Ze.info)});const Ce=()=>{v=!0},lt=()=>{v=!1},Bt=()=>v,_t=Ze=>(...Jt)=>{v&&Ze.apply(null,Jt)},Ge=m.sink(yx({forceDrop:P,drop:_t(P),move:_t(ce),delayDrop:_t(U.throttle)}),h),Rt=()=>{Ge.destroy()};return{element:Ge.element,go:J,on:Ce,off:lt,isActive:Bt,destroy:Rt,events:T.registry}},Mv=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},E_=Mv("ephox-dragster").resolve,__=i=>{const m={layerClass:E_("blocker"),...i},h=pe.fromTag("div");return bs(h,"role","presentation"),yc(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),ri(h,E_("blocker")),ri(h,m.layerClass),{element:G(h),destroy:()=>{Xs(h)}}};var O_=k_({compare:(i,m)=>Bi(m.left-i.left,m.top-i.top),extract:i=>fe.some(Bi(i.x,i.y)),sink:(i,m)=>{const h=__(m),v=Df(h.element(),"mousedown",i.forceDrop),T=Df(h.element(),"mouseup",i.drop),A=Df(h.element(),"mousemove",i.move),P=Df(h.element(),"mouseout",i.delayDrop),U=()=>{h.destroy(),T.unbind(),A.unbind(),P.unbind(),v.unbind()},J=Ce=>{Es(Ce,h.element())},ce=()=>{Xs(h.element())};return KD({element:h.element,start:J,stop:ce,destroy:U})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const S1=(i,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:O_;return YD(i,v,m)},Nv=Mv("ephox-snooker").resolve,A_=()=>{const i=ta({drag:ma(["xDelta","yDelta"])});return{mutate:(h,v)=>{i.trigger.drag(h,v)},events:i.registry}},D_=()=>{const i=ta({drag:ma(["xDelta","yDelta","target"])});let m=fe.none();const h=A_();return h.events.drag.bind(A=>{m.each(P=>{i.trigger.drag(A.xDelta,A.yDelta,P)})}),{assign:A=>{m=fe.some(A)},get:()=>m,mutate:h.mutate,events:i.registry}},Pw=(i,m,h,v,T)=>{const A=pe.fromTag("div");return yc(A,{position:"absolute",left:m-v/2+"px",top:h+"px",height:T+"px",width:v+"px"}),pr(A,{"data-column":i,role:"presentation"}),A},Xh=(i,m,h,v,T)=>{const A=pe.fromTag("div");return yc(A,{position:"absolute",left:m+"px",top:h-T/2+"px",height:T+"px",width:v+"px"}),pr(A,{"data-row":i,role:"presentation"}),A},Jh=Nv("resizer-bar"),Iw=Nv("resizer-rows"),Bv=Nv("resizer-cols"),Fw=7,Lw=(i,m)=>is(i.all,(h,v)=>m(h.element)?[v]:[]),R_=(i,m)=>{const h=[];return Fo(i.grid.columns,v=>{Co.getColumnAt(i,v).map(A=>A.element).forall(m)&&h.push(v)}),Bo(h,v=>{const T=Co.filterItems(i,A=>A.column===v);return Bn(T,A=>m(A.element))})},$v=i=>{const m=Wr(i.parent(),"."+Jh);je(m,Xs)},Hw=(i,m,h)=>{const v=i.origin();je(m,T=>{T.each(A=>{const P=h(v,A);ri(P,Jh),Es(i.parent(),P)})})},Vw=(i,m,h,v)=>{Hw(i,m,(T,A)=>{const P=Pw(A.col,A.x-T.left,h.top-T.top,Fw,v);return ri(P,Bv),P})},Jo=(i,m,h,v)=>{Hw(i,m,(T,A)=>{const P=Xh(A.row,h.left-T.left,A.y-T.top,v,Fw);return ri(P,Iw),P})},Cx=(i,m,h,v,T)=>{const A=pm(h),P=m.isResizable,U=v.length>0?al.positions(v,h):[],J=U.length>0?Lw(i,P):[],ce=Bo(U,(_t,Ge)=>rt(J,Rt=>Ge===Rt));Jo(m,ce,A,go(h));const Ce=T.length>0?vl.positions(T,h):[],lt=Ce.length>0?R_(i,P):[],Bt=Bo(Ce,(_t,Ge)=>rt(lt,Rt=>Ge===Rt));Vw(m,Bt,A,yb(h))},jd=(i,m)=>{if($v(i),i.isResizable(m)){const h=Co.fromTable(m),v=R0(h),T=hh(h);Cx(h,i,m,v,T)}},Qu=(i,m)=>{const h=Wr(i.parent(),"."+Jh);je(h,m)},x1=i=>{Qu(i,m=>{_s(m,"display","none")})},ai=i=>{Qu(i,m=>{_s(m,"display","block")})},Pv=i=>yw(i,Iw),jg=i=>yw(i,Bv),T1=Nv("resizer-bar-dragging"),Lm=i=>{const m=D_(),h=S1(m,{});let v=fe.none();const T=(Ge,Rt)=>fe.from(se(Ge,Rt));m.events.drag.bind(Ge=>{T(Ge.target,"data-row").each(Rt=>{const Ze=Sr(Ge.target,"top");_s(Ge.target,"top",Ze+Ge.yDelta+"px")}),T(Ge.target,"data-column").each(Rt=>{const Ze=Sr(Ge.target,"left");_s(Ge.target,"left",Ze+Ge.xDelta+"px")})});const A=(Ge,Rt)=>{const Ze=Sr(Ge,Rt),Jt=oc(Ge,"data-initial-"+Rt,0);return Ze-Jt};h.events.stop.bind(()=>{m.get().each(Ge=>{v.each(Rt=>{T(Ge,"data-row").each(Ze=>{const Jt=A(Ge,"top");Me(Ge,"data-initial-top"),_t.trigger.adjustHeight(Rt,Jt,parseInt(Ze,10))}),T(Ge,"data-column").each(Ze=>{const Jt=A(Ge,"left");Me(Ge,"data-initial-left"),_t.trigger.adjustWidth(Rt,Jt,parseInt(Ze,10))}),jd(i,Rt)})})});const P=(Ge,Rt)=>{_t.trigger.startAdjust(),m.assign(Ge),bs(Ge,"data-initial-"+Rt,Sr(Ge,Rt)),ri(Ge,T1),_s(Ge,"opacity","0.2"),h.go(i.parent())},U=Df(i.parent(),"mousedown",Ge=>{Pv(Ge.target)&&P(Ge.target,"top"),jg(Ge.target)&&P(Ge.target,"left")}),J=Ge=>bo(Ge,i.view()),ce=Ge=>xe(Ge,"table",J).filter(Ll),Ce=Df(i.view(),"mouseover",Ge=>{ce(Ge.target).fold(()=>{$(Ge.target)&&$v(i)},Rt=>{h.isActive()&&(v=fe.some(Rt),jd(i,Rt))})}),lt=()=>{U.unbind(),Ce.unbind(),h.destroy(),$v(i)},Bt=Ge=>{jd(i,Ge)},_t=ta({adjustHeight:ma(["table","delta","row"]),adjustWidth:ma(["table","delta","column"]),startAdjust:ma([])});return{destroy:lt,refresh:Bt,on:h.on,off:h.off,hideBars:at(x1,i),showBars:at(ai,i),events:_t.registry}},Iv={create:(i,m,h)=>{const v=al,T=vl,A=Lm(i),P=ta({beforeResize:ma(["table","type"]),afterResize:ma(["table","type"]),startDrag:ma([])});return A.events.adjustHeight.bind(U=>{const J=U.table;P.trigger.beforeResize(J,"row");const ce=v.delta(U.delta,J);zb(J,ce,U.row,v),P.trigger.afterResize(J,"row")}),A.events.startAdjust.bind(U=>{P.trigger.startDrag()}),A.events.adjustWidth.bind(U=>{const J=U.table;P.trigger.beforeResize(J,"col");const ce=T.delta(U.delta,J),Ce=h(J);my(J,ce,U.column,m,Ce),P.trigger.afterResize(J,"col")}),{on:A.on,off:A.off,refreshBars:A.refresh,hideBars:A.hideBars,showBars:A.showBars,destroy:A.destroy,events:P.registry}}},ku={only:(i,m)=>{const h=Qa(i)?xs(i):i;return{parent:G(h),view:G(i),origin:G(Bi(0,0)),isResizable:m}},detached:(i,m,h)=>{const v=()=>pm(m);return{parent:G(m),view:G(i),origin:v,isResizable:h}},body:(i,m,h)=>({parent:G(m),view:G(i),origin:G(Bi(0,0)),isResizable:h})},Gg=()=>{const i=pe.fromTag("div");return yc(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Es(K(),i),i},Sx=(i,m)=>i.inline?ku.body(pe.fromDom(i.getBody()),Gg(),m):ku.only(pe.fromDom(i.getDoc()),m),k1=(i,m)=>{i.inline&&Xs(m.parent())},Wo=i=>dt(i)&&i.nodeName==="TABLE",xx="bar-",Tx=i=>se(i,"data-mce-resize")!=="false",Uw=i=>{const m=Co.fromTable(i);Co.hasColumns(m)||je(iu(i),h=>{const v=Rl(h,"width");_s(h,"width",v),Me(h,"width")})},Ww=i=>{const m=p1(),h=p1(),v=p1();let T,A;const P=Ge=>t1(i,Ge),U=()=>My(i)?Lp():z2(),J=Ge=>Oh(Ge).columns,ce=(Ge,Rt,Ze)=>{const Jt=vs(Rt,"e");if(A===""&&Cf(Ge),Ze!==T&&A!==""){_s(Ge,"width",A);const Fn=U(),no=P(Ge),zs=My(i)||Jt?J(Ge)-1:0;my(Ge,Ze-T,zs,Fn,no)}else if(da(A)){const Fn=parseFloat(A.replace("%","")),no=Ze*Fn/T;_s(Ge,"width",no+"%")}_b(A)&&Uw(Ge)},Ce=()=>{h.on(Ge=>{Ge.destroy()}),v.on(Ge=>{k1(i,Ge)})};return i.on("init",()=>{const Ge=Sx(i,Tx);if(v.set(Ge),SS(i)&&Lh(i)){const Rt=U(),Ze=Iv.create(Ge,Rt,P);Ze.on(),Ze.events.startDrag.bind(Jt=>{m.set(i.selection.getRng())}),Ze.events.beforeResize.bind(Jt=>{const Fn=Jt.table.dom;AE(i,Fn,fg(Fn),R2(Fn),xx+Jt.type)}),Ze.events.afterResize.bind(Jt=>{const Fn=Jt.table,no=Fn.dom;wi(Fn),m.on(zs=>{i.selection.setRng(zs),i.focus()}),wS(i,no,fg(no),R2(no),xx+Jt.type),i.undoManager.add()}),h.set(Ze)}}),i.on("ObjectResizeStart",Ge=>{const Rt=Ge.target;if(Wo(Rt)){const Ze=pe.fromDom(Rt);je(i.dom.select(".mce-clonedresizable"),Jt=>{i.dom.addClass(Jt,"mce-"+Ry(i)+"-columns")}),!ov(Ze)&&Zi(i)?Fy(Ze):!Id(Ze)&&ev(i)&&Cf(Ze),MS(Ze)&&la(Ge.origin,xx)&&Cf(Ze),T=Ge.width,A=Hs(i)?"":iE(i,Rt).getOr("")}}),i.on("ObjectResized",Ge=>{const Rt=Ge.target;if(Wo(Rt)){const Ze=pe.fromDom(Rt),Jt=Ge.origin;la(Jt,"corner-")&&ce(Ze,Jt,Ge.width),wi(Ze),wf(i,Ze.dom,Fh)}}),i.on("SwitchMode",()=>{h.on(Ge=>{i.mode.isReadOnly()?Ge.hideBars():Ge.showBars()})}),i.on("dragstart dragend",Ge=>{h.on(Rt=>{Ge.type==="dragstart"?(Rt.hideBars(),Rt.off()):(Rt.on(),Rt.showBars())})}),i.on("remove",()=>{Ce()}),{refresh:Ge=>{h.on(Rt=>Rt.refreshBars(pe.fromDom(Ge)))},hide:()=>{h.on(Ge=>Ge.hideBars())},show:()=>{h.on(Ge=>Ge.showBars())}}},ep=i=>{ME(i);const m=Ww(i),h=S_(i,m),v=By(i,m,h);return JE(i,v),QE(i,v),_h(i,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},qg=i=>({table:ep(i)});var kx=()=>{ge.add("dom",qg)};kx()})();(function(){const ge=Object.getPrototypeOf,bt=(t,s,a)=>{var l;return a(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},vn=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&bt(t,String,(a,l)=>l.isPrototypeOf(a))?"string":s},Dt=t=>s=>vn(s)===t,zt=t=>s=>typeof s===t,Xt=t=>s=>t===s,Mn=(t,s)=>Mt(t)&&bt(t,s,(a,l)=>ge(a)===l),Et=Dt("string"),Mt=Dt("object"),Ln=t=>Mn(t,Object),hn=Dt("array"),tn=Xt(null),fn=zt("boolean"),dt=Xt(void 0),Pt=t=>t==null,it=t=>!Pt(t),tt=zt("function"),pn=zt("number"),Ke=(t,s)=>{if(hn(t)){for(let a=0,l=t.length;a<l;++a)if(!s(t[a]))return!1;return!0}return!1},G=()=>{},Xe=t=>()=>t(),Ot=(t,s)=>(...a)=>t(s.apply(null,a)),at=(t,s)=>a=>t(s(a)),q=t=>()=>t,ht=t=>t,Dn=(t,s)=>t===s;function Ye(t,...s){return(...a)=>{const l=s.concat(a);return t.apply(null,l)}}const Pe=t=>s=>!t(s),fe=t=>()=>{throw new Error(t)},Go=t=>t(),zn=q(!1),Wt=q(!0);class O{constructor(s,a){this.tag=s,this.value=a}static some(s){return new O(!0,s)}static none(){return O.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?O.some(s(this.value)):O.none()}bind(s){return this.tag?s(this.value):O.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:O.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return it(s)?O.some(s):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const Oo=Array.prototype.slice,rt=Array.prototype.indexOf,Fo=Array.prototype.push,cn=(t,s)=>rt.call(t,s),je=(t,s)=>{const a=cn(t,s);return a===-1?O.none():O.some(a)},po=(t,s)=>cn(t,s)>-1,es=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return!0}return!1},Bo=(t,s)=>{const a=[];for(let l=0;l<t;l++)a.push(s(l));return a},Ts=(t,s)=>{const a=[];for(let l=0;l<t.length;l+=s){const d=Oo.call(t,l,l+s);a.push(d)}return a},De=(t,s)=>{const a=t.length,l=new Array(a);for(let d=0;d<a;d++){const g=t[d];l[d]=s(g,d)}return l},mt=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];s(d,a)}},H=(t,s)=>{for(let a=t.length-1;a>=0;a--){const l=t[a];s(l,a)}},Yr=(t,s)=>{const a=[],l=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:l).push(p)}return{pass:a,fail:l}},Pn=(t,s)=>{const a=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&a.push(g)}return a},is=(t,s,a)=>(H(t,(l,d)=>{a=s(a,l,d)}),a),Bn=(t,s,a)=>(mt(t,(l,d)=>{a=s(a,l,d)}),a),Zn=(t,s,a)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return O.some(g);if(a(g,l))break}return O.none()},qt=(t,s)=>Zn(t,s,zn),ro=(t,s)=>{for(let a=0,l=t.length;a<l;a++){const d=t[a];if(s(d,a))return O.some(a)}return O.none()},jt=t=>{const s=[];for(let a=0,l=t.length;a<l;++a){if(!hn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Fo.apply(s,t[a])}return s},Ve=(t,s)=>jt(De(t,s)),Vr=(t,s)=>{for(let a=0,l=t.length;a<l;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},ks=t=>{const s=Oo.call(t,0);return s.reverse(),s},mn=(t,s)=>Pn(t,a=>!po(s,a)),Ka=(t,s)=>{const a={};for(let l=0,d=t.length;l<d;l++){const g=t[l];a[String(g)]=s(g,l)}return a},qo=t=>[t],Ya=(t,s)=>{const a=Oo.call(t,0);return a.sort(s),a},gs=(t,s)=>s>=0&&s<t.length?O.some(t[s]):O.none(),ir=t=>gs(t,0),Oa=t=>gs(t,t.length-1),_r=tt(Array.from)?Array.from:t=>Oo.call(t),us=(t,s)=>{for(let a=0;a<t.length;a++){const l=s(t[a],a);if(l.isSome())return l}return O.none()},ts=Object.keys,ot=Object.hasOwnProperty,Je=(t,s)=>{const a=ts(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];s(p,g)}},Gt=(t,s)=>nn(t,(a,l)=>({k:l,v:s(a,l)})),nn=(t,s)=>{const a={};return Je(t,(l,d)=>{const g=s(l,d);a[g.k]=g.v}),a},In=t=>(s,a)=>{t[a]=s},Ao=(t,s,a,l)=>{Je(t,(d,g)=>{(s(d,g)?a:l)(d,g)})},Rs=(t,s)=>{const a={},l={};return Ao(t,s,In(a),In(l)),{t:a,f:l}},pa=(t,s)=>{const a={};return Ao(t,s,In(a),G),a},rr=(t,s)=>{const a=[];return Je(t,(l,d)=>{a.push(s(l,d))}),a},Ss=(t,s)=>{const a=ts(t);for(let l=0,d=a.length;l<d;l++){const g=a[l],p=t[g];if(s(p,g,t))return O.some(p)}return O.none()},Or=t=>rr(t,ht),pt=(t,s)=>oo(t,s)?O.from(t[s]):O.none(),oo=(t,s)=>ot.call(t,s),ba=(t,s)=>oo(t,s)&&t[s]!==void 0&&t[s]!==null,ar=(t,s,a=Dn)=>t.exists(l=>a(l,s)),Hc=(t,s,a=Dn)=>Ja(t,s,a).getOr(t.isNone()&&s.isNone()),Xa=t=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(a);return s},Ko=t=>{const s=[];for(let a=0;a<t.length;a++){const l=t[a];if(l.isSome())s.push(l.getOrDie());else return O.none()}return O.some(s)},Ja=(t,s,a)=>t.isSome()&&s.isSome()?O.some(a(t.getOrDie(),s.getOrDie())):O.none(),va=(t,s,a,l)=>t.isSome()&&s.isSome()&&a.isSome()?O.some(l(t.getOrDie(),s.getOrDie(),a.getOrDie())):O.none(),Uo=(t,s)=>t!=null?O.some(s(t)):O.none(),kn=(t,s)=>t?O.some(s):O.none(),zr=(t,s)=>t+s,Aa=(t,s)=>t.substring(s),Qa=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,ec=(t,s)=>bs(t,s)?Aa(t,s.length):t,Is=(t,s)=>pr(t,s)?t:zr(t,s),ur=(t,s,a=0,l)=>{const d=t.indexOf(s,a);return d!==-1?dt(l)?!0:d+s.length<=l:!1},bs=(t,s)=>Qa(t,s,0),pr=(t,s)=>Qa(t,s,t.length-s.length),se=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),Ie=t=>t.length>0,Me=t=>!Ie(t),Kt=t=>t.style!==void 0&&tt(t.style.getPropertyValue),bn=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return qn(l.childNodes[0])},to=(t,s)=>{const l=(s||document).createElement(t);return qn(l)},Zo=(t,s)=>{const l=(s||document).createTextNode(t);return qn(l)},qn=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},pe={fromHtml:bn,fromTag:to,fromText:Zo,fromDom:qn,fromPoint:(t,s,a)=>O.from(t.dom.elementFromPoint(s,a)).map(qn)},Ho=typeof window<"u"?window:Function("return this;")(),br=(t,s)=>{let a=s??Ho;for(let l=0;l<t.length&&a!==void 0&&a!==null;++l)a=a[t[l]];return a},dr=(t,s)=>{const a=t.split(".");return br(a,s)},Vc=(t,s)=>dr(t,s),bo=(t,s)=>{const a=Vc(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},ml=Object.getPrototypeOf,vr=t=>bo("HTMLElement",t),mr=t=>{const s=dr("ownerDocument.defaultView",t);return Mt(t)&&(vr(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(ml(t).constructor.name))},Ys=9,xs=11,ds=1,zc=3,tc=t=>t.dom.nodeName.toLowerCase(),gc=t=>t.dom.nodeType,el=t=>s=>gc(s)===t,tl=t=>Vo(t)&&mr(t.dom),Vo=el(ds),ya=el(zc),Ac=el(Ys),hc=el(xs),Da=t=>s=>Vo(s)&&tc(s)===t,yr=(t,s)=>{const a=t.dom;if(a.nodeType!==ds)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Es=t=>t.nodeType!==ds&&t.nodeType!==Ys&&t.nodeType!==xs||t.childElementCount===0,au=(t,s)=>{const a=s===void 0?document:s.dom;return Es(a)?[]:De(a.querySelectorAll(t),pe.fromDom)},Kl=(t,s)=>{const a=s===void 0?document:s.dom;return Es(a)?O.none():O.from(a.querySelector(t)).map(pe.fromDom)},Yo=(t,s)=>t.dom===s.dom,aa=(t,s)=>{const a=t.dom,l=s.dom;return a===l?!1:a.contains(l)},wa=t=>pe.fromDom(t.dom.ownerDocument),Xs=t=>Ac(t)?t:wa(t),Yl=t=>pe.fromDom(Xs(t).dom.documentElement),nc=t=>pe.fromDom(Xs(t).dom.defaultView),ca=t=>O.from(t.dom.parentNode).map(pe.fromDom),pc=t=>O.from(t.dom.parentElement).map(pe.fromDom),fi=(t,s)=>{const a=tt(s)?s:zn;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,p=pe.fromDom(g);if(d.push(p),a(p)===!0)break;l=g}return d},fl=t=>O.from(t.dom.offsetParent).map(pe.fromDom),gi=t=>O.from(t.dom.nextSibling).map(pe.fromDom),Ca=t=>De(t.dom.childNodes,pe.fromDom),Dc=(t,s)=>{const a=t.dom.childNodes;return O.from(a[s]).map(pe.fromDom)},Xl=t=>Dc(t,0),Uc=(t,s)=>({element:t,offset:s}),Jl=(t,s)=>{const a=Ca(t);return a.length>0&&s<a.length?Uc(a[s],0):Uc(t,s)},W=t=>hc(t)&&it(t.dom.host),ie=tt(Element.prototype.attachShadow)&&tt(Node.prototype.getRootNode),be=q(ie),Fe=ie?t=>pe.fromDom(t.dom.getRootNode()):Xs,ct=t=>W(t)?t:pe.fromDom(Xs(t).dom.body),yn=t=>ns(t).isSome(),ns=t=>{const s=Fe(t);return W(s)?O.some(s):O.none()},wr=t=>pe.fromDom(t.dom.host),wo=t=>{if(be()&&it(t.target)){const s=pe.fromDom(t.target);if(Vo(s)&&Cr(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return ir(a)}}return O.from(t.target)},Cr=t=>it(t.dom.shadowRoot),$o=t=>{const s=ya(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return ns(pe.fromDom(s)).fold(()=>a.body.contains(s),at($o,wr))},Zs=()=>Rc(pe.fromDom(document)),Rc=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return pe.fromDom(s)},bc=(t,s,a)=>{if(Et(a)||fn(a)||pn(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},Hn=(t,s,a)=>{bc(t.dom,s,a)},Lo=(t,s)=>{const a=t.dom;Je(s,(l,d)=>{bc(a,d,l)})},Ur=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},$=(t,s)=>O.from(Ur(t,s)),K=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ne=(t,s)=>{t.dom.removeAttribute(s)},Re=t=>Bn(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Nt=(t,s,a)=>{if(!Et(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);Kt(t)&&t.style.setProperty(s,a)},Yn=(t,s)=>{Kt(t)&&t.style.removeProperty(s)},Zt=(t,s,a)=>{const l=t.dom;Nt(l,s,a)},Ar=(t,s)=>{const a=t.dom;Je(s,(l,d)=>{Nt(a,d,l)})},Wr=(t,s)=>{const a=t.dom;Je(s,(l,d)=>{l.fold(()=>{Yn(a,d)},g=>{Nt(a,d,g)})})},et=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!$o(t)?Dr(a,s):d},Dr=(t,s)=>Kt(t)?t.style.getPropertyValue(s):"",Js=(t,s)=>{const a=t.dom,l=Dr(a,s);return O.from(l).filter(d=>d.length>0)},Zr=t=>{const s={},a=t.dom;if(Kt(a))for(let l=0;l<a.style.length;l++){const d=a.style.item(l);s[d]=a.style[d]}return s},dd=(t,s,a)=>{const l=pe.fromTag(t);return Zt(l,s,a),Js(l,s).isSome()},fo=(t,s)=>{const a=t.dom;Yn(a,s),ar($(t,"style").map(se),"")&&ne(t,"style")},Y=t=>t.dom.offsetWidth,oe=(t,s)=>{const a=(w,x)=>{if(!pn(x)&&!x.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+x);const _=w.dom;Kt(_)&&(_.style[t]=x+"px")},l=w=>{const x=s(w);if(x<=0||x===null){const _=et(w,t);return parseFloat(_)||0}return x},d=l,g=(w,x)=>Bn(x,(_,D)=>{const B=et(w,D),I=B===void 0?0:parseInt(B,10);return isNaN(I)?_:_+I},0);return{set:a,get:l,getOuter:d,aggregate:g,max:(w,x,_)=>{const D=g(w,_);return x>D?x-D:0}}},xe=oe("height",t=>{const s=t.dom;return $o(t)?s.getBoundingClientRect().height:s.offsetHeight}),ze=t=>xe.get(t),Qt=t=>xe.getOuter(t),Do=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=xe.max(t,s,a);Zt(t,"max-height",l+"px")},Fs=(t,s)=>({left:t,top:s,translate:(l,d)=>Fs(t+l,s+d)}),vo=Fs,Ms=t=>{const s=t.getBoundingClientRect();return vo(s.left,s.top)},la=(t,s)=>t!==void 0?t:s!==void 0?s:0,vs=t=>{const s=t.dom.ownerDocument,a=s.body,l=s.defaultView,d=s.documentElement;if(a===t.dom)return vo(a.offsetLeft,a.offsetTop);const g=la(l==null?void 0:l.pageYOffset,d.scrollTop),p=la(l==null?void 0:l.pageXOffset,d.scrollLeft),w=la(d.clientTop,a.clientTop),x=la(d.clientLeft,a.clientLeft);return vc(t).translate(p-x,g-w)},vc=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?vo(l.offsetLeft,l.offsetTop):$o(t)?Ms(s):vo(0,0)},Wc=oe("width",t=>t.dom.offsetWidth),hs=(t,s)=>Wc.set(t,s),ia=t=>Wc.get(t),Qs=t=>Wc.getOuter(t),Dl=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=Wc.max(t,s,a);Zt(t,"max-width",l+"px")},Ri=t=>{let s=!1,a;return(...l)=>(s||(s=!0,a=t.apply(null,l)),a)},_s=(t,s,a,l)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),w=p||l("(pointer:coarse)"),x=d||!g&&p&&l("(min-device-width:768px)"),_=g||p&&!x,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,B=!_&&!x&&!D;return{isiPad:q(d),isiPhone:q(g),isTablet:q(x),isPhone:q(_),isTouch:q(w),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:q(D),isDesktop:q(B)}},yc=(t,s)=>{for(let a=0;a<t.length;a++){const l=t[a];if(l.test(s))return l}},Rl=(t,s)=>{const a=yc(t,s);if(!a)return{major:0,minor:0};const l=d=>Number(s.replace(a,"$"+d));return nl(l(1),l(2))},md=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?hi():Rl(t,a)},hi=()=>nl(0,0),nl=(t,s)=>({major:t,minor:s}),Pr={nu:nl,detect:md,unknown:hi},oc=(t,s)=>us(s.brands,a=>{const l=a.brand.toLowerCase();return qt(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Pr.nu(parseInt(a.version,10),0)}))}),Mc=(t,s)=>{const a=String(s).toLowerCase();return qt(t,l=>l.search(a))},ol=(t,s)=>Mc(t,s).map(a=>{const l=Pr.detect(a.versionRegexes,s);return{current:a.name,version:l}}),Ha=(t,s)=>Mc(t,s).map(a=>{const l=Pr.detect(a.versionRegexes,s);return{current:a.name,version:l}}),Sr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zc=t=>s=>ur(s,t),im=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>ur(t,"edge/")&&ur(t,"chrome")&&ur(t,"safari")&&ur(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Sr],search:t=>ur(t,"chrome")&&!ur(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>ur(t,"msie")||ur(t,"trident")},{name:"Opera",versionRegexes:[Sr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zc("firefox")},{name:"Safari",versionRegexes:[Sr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(ur(t,"safari")||ur(t,"mobile/"))&&ur(t,"applewebkit")}],cu=[{name:"Windows",search:Zc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>ur(t,"iphone")||ur(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Zc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zc("linux"),versionRegexes:[]},{name:"Solaris",search:Zc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Zc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],lu={browsers:q(im),oses:q(cu)},ef="Edge",gl="Chromium",iu="IE",fd="Opera",Rr="Firefox",um="Safari",$u=()=>Pu({current:void 0,version:Pr.unknown()}),Pu=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isEdge:l(ef),isChromium:l(gl),isIE:l(iu),isOpera:l(fd),isFirefox:l(Rr),isSafari:l(um)}},gd={unknown:$u,nu:Pu,edge:q(ef),chromium:q(gl),ie:q(iu),opera:q(fd),firefox:q(Rr),safari:q(um)},hd="Windows",pd="iOS",Iu="Android",tf="Linux",nf="macOS",uu="Solaris",Ep="FreeBSD",re="ChromeOS",bd=()=>Nc({current:void 0,version:Pr.unknown()}),Nc=t=>{const s=t.current,a=t.version,l=d=>()=>s===d;return{current:s,version:a,isWindows:l(hd),isiOS:l(pd),isAndroid:l(Iu),isMacOS:l(nf),isLinux:l(tf),isSolaris:l(uu),isFreeBSD:l(Ep),isChromeOS:l(re)}},Qf={unknown:bd,nu:Nc,windows:q(hd),ios:q(pd),android:q(Iu),linux:q(tf),macos:q(nf),solaris:q(uu),freebsd:q(Ep),chromeos:q(re)},Op={detect:(t,s,a)=>{const l=lu.browsers(),d=lu.oses(),g=s.bind(x=>oc(l,x)).orThunk(()=>ol(l,t)).fold(gd.unknown,gd.nu),p=Ha(d,t).fold(Qf.unknown,Qf.nu),w=_s(p,g,t,a);return{browser:g,os:p,deviceType:w}}},os=t=>window.matchMedia(t).matches;let Ml=Ri(()=>Op.detect(navigator.userAgent,O.from(navigator.userAgentData),os));const wc=()=>Ml(),sl=(t,s,a,l,d,g,p)=>({target:t,x:s,y:a,stop:l,prevent:d,kill:g,raw:p}),uh=t=>{const s=pe.fromDom(wo(t).getOr(t.target)),a=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=Ot(l,a);return sl(s,t.clientX,t.clientY,a,l,d,t)},Mi=(t,s)=>a=>{t(a)&&s(uh(a))},hl=(t,s,a,l,d)=>{const g=Mi(a,l);return t.dom.addEventListener(s,g,d),{unbind:Ye(dh,t,s,g,d)}},dm=(t,s,a,l)=>hl(t,s,a,l,!1),eg=(t,s,a,l)=>hl(t,s,a,l,!0),dh=(t,s,a,l)=>{t.dom.removeEventListener(s,a,l)},jc=(t,s)=>{ca(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},vd=(t,s)=>{gi(t).fold(()=>{ca(t).each(d=>{rl(d,s)})},l=>{jc(l,s)})},mh=(t,s)=>{Xl(t).fold(()=>{rl(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},rl=(t,s)=>{t.dom.appendChild(s.dom)},Ra=(t,s,a)=>{Dc(t,a).fold(()=>{rl(t,s)},l=>{jc(l,s)})},yd=(t,s)=>{mt(s,a=>{rl(t,a)})},wd=t=>{t.dom.textContent="",mt(Ca(t),s=>{Nl(s)})},Nl=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Bc=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return vo(a,l)},of=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},sf=t=>{const s=t===void 0?window:t;return wc().browser.isFirefox()?O.none():O.from(s.visualViewport)},rf=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),af=t=>{const s=t===void 0?window:t,a=s.document,l=Bc(pe.fromDom(a));return sf(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return rf(l.left,l.top,g,p)},d=>rf(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},Ql=()=>pe.fromDom(document),mm=(t,s)=>t.view(s).fold(q([]),l=>{const d=t.owner(l),g=mm(t,d);return[l].concat(g)}),fh=(t,s)=>{const a=s.owner(t),l=mm(s,a);return O.some(l)};var fm=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?O.none():O.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(pe.fromDom)},owner:t=>wa(t)});const tg=t=>{const s=Ql(),a=Bc(s);return fh(t,fm).fold(Ye(vs,t),d=>{const g=vc(t),p=is(d,(w,x)=>{const _=vc(x);return{left:w.left+_.left,top:w.top+_.top}},{left:0,top:0});return vo(p.left+g.left+a.left,p.top+g.top+a.top)})},Ni=(t,s,a)=>({point:t,width:s,height:a}),ng=(t,s,a,l)=>({x:t,y:s,width:a,height:l}),js=(t,s,a,l)=>({x:t,y:s,width:a,height:l,right:t+a,bottom:s+l}),E=t=>{const s=vs(t),a=Qs(t),l=Qt(t);return js(s.left,s.top,a,l)},M=t=>{const s=tg(t),a=Qs(t),l=Qt(t);return js(s.left,s.top,a,l)},z=(t,s)=>{const a=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),p=d-a,w=g-l;return js(a,l,p,w)},ue=(t,s)=>Bn(s,(a,l)=>z(a,l),t),me=()=>af(window);var Tt=tinymce.util.Tools.resolve("tinymce.ThemeManager");const _n=t=>{const s=g=>g(t),a=q(t),l=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:Wt,isError:zn,map:g=>Ct.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(t)},toOptional:()=>O.some(t)};return d},Un=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:zn,isError:Wt,map:s,mapError:l=>Ct.error(l(t)),bind:s,exists:zn,forall:Wt,getOr:ht,or:ht,getOrThunk:Go,orThunk:Go,getOrDie:fe(String(t)),each:G,toOptional:O.none};return a},Ct={value:_n,error:Un,fromOption:(t,s)=>t.fold(()=>Un(s),_n)};var ms;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(ms||(ms={}));const Sa=(t,s,a)=>t.stype===ms.Error?s(t.serror):a(t.svalue),pl=t=>{const s=[],a=[];return mt(t,l=>{Sa(l,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},gm=(t,s)=>t.stype===ms.Error?{stype:ms.Error,serror:s(t.serror)}:t,og=(t,s)=>t.stype===ms.Value?{stype:ms.Value,svalue:s(t.svalue)}:t,pi=(t,s)=>t.stype===ms.Value?s(t.svalue):t,bl=(t,s)=>t.stype===ms.Error?s(t.serror):t,$c=t=>({stype:ms.Value,svalue:t}),Bl=t=>({stype:ms.Error,serror:t}),as={fromResult:t=>t.fold(Bl,$c),toResult:t=>Sa(t,Ct.error,Ct.value),svalue:$c,partition:pl,serror:Bl,bind:pi,bindError:bl,map:og,mapError:gm,fold:Sa},Fu=(t,s,a,l)=>({tag:"field",key:t,newKey:s,presence:a,prop:l}),Cd=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Mr=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},bb=(t,s)=>s,D0=(t,s)=>Ln(t)&&Ln(s)?Ns(t,s):s,Lu=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)oo(d,g)&&(a[g]=t(a[g],d[g]))}return a},Ns=Lu(D0),Ls=Lu(bb),ua=()=>({tag:"required",process:{}}),Sd=t=>({tag:"defaultedThunk",process:t}),xd=t=>Sd(q(t)),hm=()=>({tag:"option",process:{}}),Td=t=>({tag:"mergeWithThunk",process:t}),Co=t=>Td(q(t)),hh=(t,s)=>t.length>0?as.svalue(Ns(s,Ls.apply(void 0,t))):as.svalue(s),Ap=t=>Ot(as.serror,jt)(t),sg={consolidateObj:(t,s)=>{const a=as.partition(t);return a.errors.length>0?Ap(a.errors):hh(a.values,s)},consolidateArr:t=>{const s=as.partition(t);return s.errors.length>0?Ap(s.errors):as.svalue(s.values)}},vb=t=>Mt(t)&&ts(t).length>100?" removed due to size":JSON.stringify(t,null,2),rg=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:q("... (only showing first ten failures)")}]):t;return De(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},bi=(t,s)=>as.serror([{path:t,getErrorInfo:s}]),yb=(t,s,a)=>bi(t,()=>'Could not find valid *required* value for "'+s+'" in '+vb(a)),ph=(t,s)=>bi(t,()=>'Choice schema did not contain choice key: "'+s+'"'),wb=(t,s,a)=>bi(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+vb(s)),Bi=(t,s)=>bi(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Dp=(t,s)=>bi(t,q(s)),$i=t=>{const s=(l,d)=>as.bindError(t(d),g=>Dp(l,g)),a=q("val");return{extract:s,toString:a}},pm=$i(as.svalue),N0=(t,s,a,l)=>pt(s,a).fold(()=>yb(t,a,s),l),bh=(t,s,a,l)=>{const d=pt(t,s).getOrThunk(()=>a(t));return l(d)},vh=(t,s,a)=>a(pt(t,s)),Cb=(t,s,a,l)=>{const d=pt(t,s).map(g=>g===!0?a(t):g);return l(d)},yh=(t,s,a,l,d)=>{const g=w=>d.extract(s.concat([l]),w),p=w=>w.fold(()=>as.svalue(O.none()),x=>{const _=d.extract(s.concat([l]),x);return as.map(_,O.some)});switch(t.tag){case"required":return N0(s,a,l,g);case"defaultedThunk":return bh(a,l,t.process,g);case"option":return vh(a,l,p);case"defaultedOptionThunk":return Cb(a,l,t.process,p);case"mergeWithThunk":return bh(a,l,q({}),w=>{const x=Ns(t.process(a),w);return g(x)})}},Cc=(t,s,a)=>{const l={},d=[];for(const g of a)Mr(g,(p,w,x,_)=>{const D=yh(x,t,s,p,_);as.fold(D,B=>{d.push(...B)},B=>{l[w]=B})},(p,w)=>{l[p]=w(s)});return d.length>0?as.serror(d):as.svalue(l)},wh=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),xa=t=>ts(pa(t,it)),Sc=t=>{const s=Cn(t),a=is(t,(d,g)=>Mr(g,p=>Ns(d,{[p]:!0}),q(d)),{});return{extract:(d,g)=>{const p=fn(g)?[]:xa(g),w=Pn(p,x=>!ba(a,x));return w.length===0?s.extract(d,g):Bi(d,w)},toString:s.toString}},Cn=t=>({extract:(l,d)=>Cc(l,d,t),toString:()=>`obj{
`+De(t,d=>Mr(d,(g,p,w,x)=>g+" -> "+x.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),Ht=t=>({extract:(l,d)=>{const g=De(d,(p,w)=>t.extract(l.concat(["["+w+"]"]),p));return sg.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),ag=(t,s)=>{const a=s!==void 0?s:ht;return{extract:(g,p)=>{const w=[];for(const x of t){const _=x.extract(g,p);if(_.stype===ms.Value)return{stype:ms.Value,svalue:a(_.svalue)};w.push(_)}return sg.consolidateArr(w)},toString:()=>"oneOf("+De(t,g=>g.toString()).join(", ")+")"}},al=(t,s)=>{const a=(g,p)=>Ht($i(t)).extract(g,p);return{extract:(g,p)=>{const w=ts(p),x=a(g,w);return as.bind(x,_=>{const D=De(_,B=>Fu(B,B,ua(),s));return Cn(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},cg=(t,s)=>{const a=Ri(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},Ch=Ot(Ht,Cn),$l=q(pm),vl=(t,s)=>$i(a=>{const l=typeof a;return t(a)?as.svalue(a):as.serror(`Expected type: ${s} but got: ${l}`)}),Sh=vl(pn,"number"),Nr=vl(Et,"string"),cf=vl(fn,"boolean"),lg=vl(tt,"function"),ft=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>ft(t[s]));default:return!1}},B0=$i(t=>ft(t)?as.svalue(t):as.serror("Expected value to be acceptable for sending via postMessage")),Sb=(t,s,a,l)=>pt(a,l).fold(()=>wb(t,a,l),g=>g.extract(t.concat(["branch: "+l]),s)),Pl=(t,s)=>({extract:(d,g)=>pt(g,t).fold(()=>ph(d,t),w=>Sb(d,g,s,w)),toString:()=>"chooseOn("+t+"). Possible values: "+ts(s)}),lf=()=>Ht(pm),kd=t=>$i(s=>t(s).fold(as.serror,as.svalue)),xr=(t,s)=>al(a=>as.fromResult(t(a)),s),xb=(t,s,a)=>{const l=s.extract([t],a);return as.mapError(l,d=>({input:a,errors:d}))},ys=(t,s,a)=>as.toResult(xb(t,s,a)),cs=t=>t.fold(s=>{throw new Error(uf(s))},ht),xc=(t,s,a)=>cs(ys(t,s,a)),uf=t=>`Errors: 
`+rg(t.errors).join(`
`)+`

Input object: `+vb(t.input),Xr=(t,s)=>Pl(t,Gt(s,Cn)),Ed=(t,s)=>cg(t,s),Jr=Fu,Os=Cd,ig=t=>kd(s=>po(t,s)?Ct.value(s):Ct.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Qe=t=>Jr(t,t,ua(),$l()),ei=(t,s)=>Jr(t,t,ua(),s),xh=t=>ei(t,Sh),Ir=t=>ei(t,Nr),Pi=(t,s)=>Jr(t,t,ua(),ig(s)),Rp=t=>ei(t,cf),vi=t=>ei(t,lg),$0=(t,s)=>Jr(t,t,hm(),$i(a=>as.serror("The field: "+t+" is forbidden. "+s))),Hu=(t,s)=>Jr(t,t,ua(),Cn(s)),Tb=(t,s)=>Jr(t,t,ua(),Ch(s)),yl=(t,s)=>Jr(t,t,ua(),Ht(s)),ss=t=>Jr(t,t,hm(),$l()),du=(t,s)=>Jr(t,t,hm(),s),ug=t=>du(t,Sh),Pc=t=>du(t,Nr),Ii=(t,s)=>du(t,ig(s)),Tc=t=>du(t,lg),kb=(t,s)=>du(t,Ht(s)),Ic=(t,s)=>du(t,Cn(s)),Vu=(t,s)=>du(t,Sc(s)),Te=(t,s)=>Jr(t,t,xd(s),$l()),cl=(t,s,a)=>Jr(t,t,xd(s),a),mu=(t,s)=>cl(t,s,Sh),wl=(t,s)=>cl(t,s,Nr),Il=(t,s,a)=>cl(t,s,ig(a)),za=(t,s)=>cl(t,s,cf),Ta=(t,s)=>cl(t,s,lg),P0=(t,s)=>cl(t,s,B0),Th=(t,s,a)=>cl(t,s,Ht(a)),C=(t,s,a)=>cl(t,s,Cn(a)),S=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Z={generate:t=>{if(!hn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return mt(t,(l,d)=>{const g=ts(l);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],w=l[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!hn(w))throw new Error("case arguments must be an array");s.push(p),a[p]=(...x)=>{const _=x.length;if(_!==w.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+w.length+" ("+w+"), got "+_);return{fold:(...B)=>{if(B.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+B.length);return B[d].apply(null,x)},match:B=>{const I=ts(B);if(s.length!==I.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+I.join(","));if(!Vr(s,X=>po(I,X)))throw new Error("Not all branches were specified when using match. Specified: "+I.join(", ")+`
Required: `+s.join(", "));return B[p].apply(null,x)},log:B=>{console.log(B,{constructors:s,constructor:p,params:x})}}}}),a}};Z.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ae=t=>{const s=[],a=[];return mt(t,l=>{l.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},We=(t,s)=>{const a={};return Je(t,(l,d)=>{po(s,d)||(a[d]=l)}),a},ut=(t,s)=>({[t]:s}),Yt=t=>{const s={};return mt(t,a=>{s[a.key]=a.value}),s},jn=(t,s)=>We(t,s),Xn=(t,s)=>ut(t,s),ws=t=>Yt(t),Po=(t,s)=>t.length===0?Ct.value(s):Ct.value(Ns(s,Ls.apply(void 0,t))),er=t=>Ct.error(jt(t)),Fl=(t,s)=>{const a=ae(t);return a.errors.length>0?er(a.errors):Po(a.values,s)},sc=t=>tt(t)?t:zn,Fi=(t,s,a)=>{let l=t.dom;const d=sc(a);for(;l.parentNode;){l=l.parentNode;const g=pe.fromDom(l),p=s(g);if(p.isSome())return p;if(d(g))break}return O.none()},fu=(t,s,a)=>{const l=s(t),d=sc(a);return l.orThunk(()=>d(t)?O.none():Fi(t,s,d))},bm=(t,s)=>Yo(t.element,s.event.target),_d={can:Wt,abort:zn,run:G},Li=t=>{if(!ba(t,"can")&&!ba(t,"abort")&&!ba(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{..._d,...t}},Od=(t,s)=>(...a)=>Bn(t,(l,d)=>l&&s(d).apply(void 0,a),!0),kh=(t,s)=>(...a)=>Bn(t,(l,d)=>l||s(d).apply(void 0,a),!1),dg=t=>tt(t)?{can:Wt,abort:zn,run:t}:t,df=t=>{const s=Od(t,d=>d.can),a=kh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{mt(t,g=>{g.run.apply(void 0,d)})}}},Ma=q,gu=Ma("touchstart"),Io=Ma("touchmove"),Bs=Ma("touchend"),Gc=Ma("touchcancel"),Qr=Ma("mousedown"),Cl=Ma("mousemove"),mg=Ma("mouseout"),zu=Ma("mouseup"),yi=Ma("mouseover"),mf=Ma("focusin"),I0=Ma("focusout"),Ll=Ma("keydown"),D2=Ma("keyup"),Hl=Ma("input"),Uu=Ma("change"),wi=Ma("click"),Eb=Ma("transitioncancel"),fg=Ma("transitionend"),R2=Ma("transitionstart"),iE=Ma("selectstart"),da=t=>q("alloy."+t),_b={tap:da("tap")},Ad=da("focus"),F0=da("blur.post"),L0=da("paste.post"),gg=da("receive"),$s=da("execute"),Dd=da("focus.item"),Mp=_b.tap,H0=da("longpress"),Eh=da("sandbox.close"),Np=da("typeahead.cancel"),Bp=da("system.init"),uE=da("system.touchmove"),V0=da("system.touchend"),z0=da("system.scroll"),vm=da("system.resize"),Rd=da("system.attached"),ym=da("system.detached"),ff=da("system.dismissRequested"),$p=da("system.repositionRequested"),Ob=da("focusmanager.shifted"),wm=da("slotcontainer.visibility"),M2=da("system.external.element.scroll"),N2=da("change.tab"),U0=da("dismiss.tab"),B2=da("highlight"),Pp=da("dehighlight"),Xo=(t,s)=>{Ab(t,t.element,s,{})},wn=(t,s,a)=>{Ab(t,t.element,s,a)},Cm=t=>{Xo(t,$s())},hg=(t,s,a)=>{Ab(t,s,a,{})},Ab=(t,s,a,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(a,s,d)},$2=(t,s,a,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(a,s,d)},W0=(t,s,a,l)=>{t.getSystem().triggerEvent(a,s,l.event)},Gs=t=>ws(t),P2=(t,s)=>({key:t,value:Li({abort:s})}),Z0=(t,s)=>({key:t,value:Li({can:s})}),I2=t=>({key:t,value:Li({run:(s,a)=>{a.event.prevent()}})}),nt=(t,s)=>({key:t,value:Li({run:s})}),j0=(t,s,a)=>({key:t,value:Li({run:(l,d)=>{s.apply(void 0,[l,d].concat(a))}})}),G0=t=>s=>nt(t,s),pg=t=>s=>({key:t,value:Li({run:(a,l)=>{bm(a,l)&&s(a,l)}})}),Db=(t,s)=>nt(t,(a,l)=>{a.getSystem().getByUid(s).each(d=>{W0(d,d.element,t,l)})}),Sm=(t,s,a)=>{const l=s.partUids[a];return Db(t,l)},Ip=(t,s)=>nt(t,(a,l)=>{const d=l.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>fu(d.target,w=>a.getSystem().getByDom(w).toOptional(),zn).getOr(a));s(a,g,l)}),bg=t=>nt(t,(s,a)=>{a.cut()}),q0=t=>nt(t,(s,a)=>{a.stop()}),hu=(t,s)=>pg(t)(s),Br=pg(Rd()),Vl=pg(ym()),Fp=pg(Bp()),Wu=G0($s()),F2=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,Ca(pe.fromDom(l))},K0=t=>t.dom.innerHTML,gf=(t,s)=>{const l=wa(t).dom,d=pe.fromDom(l.createDocumentFragment()),g=F2(s,l);yd(d,g),wd(t),rl(t,d)},Y0=t=>{const s=pe.fromTag("div"),a=pe.fromDom(t.dom.cloneNode(!0));return rl(s,a),K0(s)},L2=(t,s)=>pe.fromDom(t.dom.cloneNode(s)),xm=t=>L2(t,!1),hf=t=>{if(W(t))return"#shadow-root";{const s=xm(t);return Y0(s)}},Zu=t=>hf(t),Rb=(t,s,a)=>Yo(s,t.element)&&!Yo(s,a),dE=Gs([Z0(Ad(),(t,s)=>{const a=s.event,l=a.originator,d=a.target;return Rb(t,l,d)?(console.warn(Ad()+` did not get interpreted by the desired target. 
Originator: `+Zu(l)+`
Target: `+Zu(d)+`
Check the `+Ad()+" event handlers"),!1):!0})]);var _h=Object.freeze({__proto__:null,events:dE});let Ua=0;const en=t=>{const a=new Date().getTime(),l=Math.floor(Math.random()*1e9);return Ua++,t+"_"+l+Ua+String(a)},X0=q("alloy-id-"),H2=q("data-alloy-id"),qc=X0(),J0=H2(),V2=(t,s)=>{const a=en(qc+t);return Q0(s,a),a},Q0=(t,s)=>{Object.defineProperty(t.dom,J0,{value:s,writable:!0})},Md=t=>{const s=Vo(t)?t.dom[J0]:null;return O.from(s)},Ci=t=>en(t),Mb=ht,vg=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Zu(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:q("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:zn}},mE=vg(),z2=(t,s,a)=>{const l=a.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),p=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Lp(p.slice(0,1).concat(p.slice(3)))}),t},Lp=t=>De(t,s=>pr(s,"/*")?s.substring(0,s.length-2):s),Oh=(t,s)=>{const a=t.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Lp(g)}),t},Ah=(t,s)=>{const a=s.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Lp(g.slice(1))}),t},yg=en("alloy-premade"),U2=t=>(Object.defineProperty(t.element.dom,yg,{value:t.uid,writable:!0}),Xn(yg,t)),Nb=t=>oo(t.dom,yg),wg=t=>pt(t,yg),Bb=t=>Ah((s,...a)=>t(s.getApis(),s,...a),t),ti={init:()=>zl({readState:q("No State required")})},zl=t=>t,Tm=(t,s)=>{const a=De(s,d=>Ic(d.name(),[Qe("config"),Te("state",ti)])),l=ys("component.behaviours",Cn(a),t.behaviours).fold(d=>{throw new Error(uf(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},ht);return{list:s,data:Gt(l,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return q(g)})}},$b=t=>t.list,W2=t=>t.data,Hp=(t,s)=>{const a={};return Je(t,(l,d)=>{Je(l,(g,p)=>{const w=pt(a,p).getOr([]);a[p]=w.concat([s(d,g)])})}),a},ju=t=>({classes:dt(t.classes)?[]:t.classes,attributes:dt(t.attributes)?{}:t.attributes,styles:dt(t.styles)?{}:t.styles}),Pb=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Dh=(t,s,a,l)=>{const d={...s};mt(a,D=>{d[D.name()]=D.exhibit(t,l)});const g=Hp(d,(D,B)=>({name:D,modification:B})),p=D=>is(D,(B,I)=>({...I.modification,...B}),{}),w=is(g.classes,(D,B)=>B.modification.concat(D),[]),x=p(g.attributes),_=p(g.styles);return ju({classes:w,attributes:x,styles:_})},Nd=(t,s,a,l)=>{try{const d=Ya(a,(g,p)=>{const w=g[s],x=p[s],_=l.indexOf(w),D=l.indexOf(x);if(_===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(l,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(l,null,2));return _<D?-1:D<_?1:0});return Ct.value(d)}catch(d){return Ct.error([d])}},ey=(t,s)=>({handler:t,purpose:s}),fE=(t,s)=>({cHandler:t,purpose:s}),Z2=(t,s)=>fE(Ye.apply(void 0,[t.handler].concat(s)),t.purpose),ty=t=>t.cHandler,tr=(t,s)=>({name:t,handler:s}),gE=(t,s)=>{const a={};return mt(t,l=>{a[l.name()]=l.handlers(s)}),a},j2=(t,s,a)=>{const l={...a,...gE(s,t)};return Hp(l,tr)},hE=(t,s,a,l)=>{const d=j2(t,a,l);return Na(d,s)},Ib=t=>{const s=dg(t);return(a,l,...d)=>{const g=[a,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Rh=(t,s)=>Ct.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(De(s,a=>a.name),null,2)]),km=(t,s,a)=>{const l=s[a];return l?Nd("Event: "+a,"name",t,l).map(d=>{const g=De(d,p=>p.handler);return df(g)}):Rh(a,t)},Na=(t,s)=>{const a=rr(t,(l,d)=>(l.length===1?Ct.value(l[0].handler):km(l,s,d)).map(p=>{const w=Ib(p),x=l.length>1?Pn(s[d],_=>es(l,D=>D.name===_)).join(" > "):l[0].name;return Xn(d,ey(w,x))}));return Fl(a,{})},Em="alloy.base.behaviour",ny=Cn([Jr("dom","dom",ua(),Cn([Qe("tag"),Te("styles",{}),Te("classes",[]),Te("attributes",{}),ss("value"),ss("innerHtml")])),Qe("components"),Qe("uid"),Te("events",{}),Te("apis",{}),Jr("eventOrder","eventOrder",Co({[$s()]:["disabling",Em,"toggling","typeaheadevents"],[Ad()]:[Em,"focusing","keying"],[Bp()]:[Em,"disabling","toggling","representing"],[Hl()]:[Em,"representing","streaming","invalidating"],[ym()]:[Em,"representing","item-events","tooltipping"],[Qr()]:["focusing",Em,"item-type-events"],[gu()]:["focusing",Em,"item-type-events"],[yi()]:["item-type-events","tooltipping"],[gg()]:["receiving","reflecting","tooltipping"]}),$l()),ss("domModification")]),Ba=t=>ys("custom.definition",ny,t),oy=t=>({...t.dom,uid:t.uid,domChildren:De(t.components,s=>s.element)}),Fb=t=>t.domModification.fold(()=>ju({}),ju),WD=t=>t.events,G2=(t,s)=>{const a=Ur(t,s);return a===void 0||a===""?[]:a.split(" ")},pf=(t,s,a)=>{const d=G2(t,s).concat([a]);return Hn(t,s,d.join(" ")),!0},bf=(t,s,a)=>{const l=Pn(G2(t,s),d=>d!==a);return l.length>0?Hn(t,s,l.join(" ")):ne(t,s),!1},Lb=t=>t.dom.classList!==void 0,q2=t=>G2(t,"class"),ZD=(t,s)=>pf(t,"class",s),Gu=(t,s)=>bf(t,"class",s),Cs=(t,s)=>{Lb(t)?t.dom.classList.add(s):ZD(t,s)},K2=t=>{(Lb(t)?t.dom.classList:q2(t)).length===0&&ne(t,"class")},ea=(t,s)=>{Lb(t)?t.dom.classList.remove(s):Gu(t,s),K2(t)},Wa=(t,s)=>Lb(t)&&t.dom.classList.contains(s),Hi=(t,s)=>{mt(s,a=>{Cs(t,a)})},Sl=(t,s)=>{mt(s,a=>{ea(t,a)})},Cg=(t,s)=>Vr(s,a=>Wa(t,a)),Mh=t=>{const s=t.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(a[l]=d)}return a},_m=t=>Lb(t)?Mh(t):q2(t),Si=t=>t.dom.value,pu=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Nh=(t,s,a)=>Dc(t,s).map(d=>{if(a.exists(p=>!Yo(p,d))){const p=a.map(tc).getOr("span"),w=pe.fromTag(p);return jc(d,w),w}else return d}),Vp=(t,s,a)=>{a.fold(()=>rl(t,s),l=>{Yo(l,s)||(jc(l,s),Nl(l))})},sy=(t,s,a)=>{const l=De(s,a),d=Ca(t);return mt(d.slice(l.length),Nl),l},Y2=(t,s,a,l)=>{const d=Dc(t,s),g=l(a,d),p=Nh(t,s,d);return Vp(t,g.element,p),g},X2=(t,s,a)=>sy(t,s,(l,d)=>Y2(t,d,l,a)),Bh=(t,s)=>sy(t,s,(a,l)=>{const d=Dc(t,l);return Vp(t,a,d),a}),ry=(t,s)=>{const a=ts(t),l=ts(s),d=mn(l,a),g=Rs(t,(p,w)=>!oo(s,w)||p!==s[w]).t;return{toRemove:d,toSet:g}},pE=(t,s)=>{const{class:a,style:l,...d}=Re(s),{toSet:g,toRemove:p}=ry(t.attributes,d),w=()=>{mt(p,Ne=>ne(s,Ne)),Lo(s,g)},x=Zr(s),{toSet:_,toRemove:D}=ry(t.styles,x),B=()=>{mt(D,Ne=>fo(s,Ne)),Ar(s,_)},I=_m(s),V=mn(I,t.classes),X=mn(t.classes,I),le=()=>{Hi(s,X),Sl(s,V)},Ee=Ne=>{gf(s,Ne)},ye=()=>{const Ne=t.domChildren;Bh(s,Ne)},ke=()=>{const Ne=s,Le=t.value.getOrUndefined();Le!==Si(Ne)&&pu(Ne,Le??"")};return w(),le(),B(),t.innerHtml.fold(ye,Ee),ke(),s},bE=t=>{const s=pe.fromTag(t.tag);Lo(s,t.attributes),Hi(s,t.classes),Ar(s,t.styles),t.innerHtml.each(l=>gf(s,l));const a=t.domChildren;return yd(s,a),t.value.each(l=>{pu(s,l)}),s},J2=(t,s)=>{try{const a=pE(t,s);return O.some(a)}catch{return O.none()}},Q2=t=>t.innerHtml.isSome()&&t.domChildren.length>0,ay=(t,s)=>{const a=d=>tc(d)===t.tag&&!Q2(t)&&!Nb(d),l=s.filter(a).bind(d=>J2(t,d)).getOrThunk(()=>bE(t));return Q0(l,t.uid),l},eS=t=>{const s=pt(t,"behaviours").getOr({});return Ve(ts(s),a=>{const l=s[a];return it(l)?[l.me]:[]})},vE=(t,s)=>Tm(t,s),cy=t=>{const s=eS(t);return vE(t,s)},Sg=(t,s,a)=>{const l=oy(t),d=Fb(t),g={"alloy.base.modification":d},p=s.length>0?Dh(a,g,s,l):d;return Pb(l,p)},ly=(t,s,a)=>{const l={"alloy.base.behaviour":WD(t)};return hE(a,t.eventOrder,s,l).getOrDie()},yE=(t,s)=>{const a=()=>Ne,l=S(mE),d=cs(Ba(t)),g=cy(t),p=$b(g),w=W2(g),x=Sg(d,p,w),_=ay(x,s),D=ly(d,p,w),B=S(d.components),I=Le=>{l.set(Le)},V=()=>{l.set(vg(a))},X=()=>{const Le=Ca(_),kt=Ve(Le,st=>l.get().getByDom(st).fold(()=>[],qo));B.set(kt)},le=Le=>{const kt=w;return(tt(kt[Le.name()])?kt[Le.name()]:()=>{throw new Error("Could not find "+Le.name()+" in "+JSON.stringify(t,null,2))})()},Ee=Le=>tt(w[Le.name()]),ye=()=>d.apis,ke=Le=>w[Le]().map(kt=>kt.state.readState()).getOr("not enabled"),Ne={uid:t.uid,getSystem:l.get,config:le,hasConfigured:Ee,spec:t,readState:ke,getApis:ye,connect:I,disconnect:V,element:_,syncComponents:X,components:B.get,events:D};return Ne},wE=(t,s)=>{const a=pt(t,"components").getOr([]);return s.fold(()=>De(a,Kc),l=>De(a,(d,g)=>Hb(d,Dc(l,g))))},tS=(t,s)=>{const{events:a,...l}=Mb(t),d=wE(l,s),g={...l,events:{..._h,...a},components:d};return Ct.value(yE(g,s))},fr=t=>{const s=pe.fromText(t);return vf({element:s})},vf=t=>{const s=xc("external.component",Sc([Qe("element"),ss("uid")]),t),a=S(vg()),l=w=>{a.set(w)},d=()=>{a.set(vg(()=>p))},g=s.uid.getOrThunk(()=>Ci("external"));Q0(s.element,g);const p={uid:g,getSystem:a.get,config:O.none,hasConfigured:zn,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:q("No state"),syncComponents:G,components:q([]),events:{}};return U2(p)},xg=Ci,nS=t=>oo(t,"uid"),Hb=(t,s)=>wg(t).getOrThunk(()=>{const a=nS(t)?t:{uid:xg(""),...t};return tS(a,s).getOrDie()}),Kc=t=>Hb(t,O.none()),Ul=U2;var Tg=(t,s,a,l,d)=>t(a,l)?O.some(a):tt(d)&&d(a)?O.none():s(a,l,d);const Vb=(t,s,a)=>{let l=t.dom;const d=tt(a)?a:zn;for(;l.parentNode;){l=l.parentNode;const g=pe.fromDom(l);if(s(g))return O.some(g);if(d(g))break}return O.none()},iy=(t,s,a)=>Tg((d,g)=>g(d),Vb,t,s,a),oS=(t,s)=>{const a=d=>s(pe.fromDom(d));return qt(t.dom.childNodes,a).map(pe.fromDom)},sS=(t,s)=>{const a=l=>{for(let d=0;d<l.childNodes.length;d++){const g=pe.fromDom(l.childNodes[d]);if(s(g))return O.some(g);const p=a(l.childNodes[d]);if(p.isSome())return p}return O.none()};return a(t.dom)},rS=(t,s,a)=>iy(t,s,a).isSome(),bu=(t,s,a)=>Vb(t,l=>yr(l,s),a),Om=(t,s)=>oS(t,a=>yr(a,s)),Tr=(t,s)=>Kl(s,t),Bd=(t,s,a)=>Tg((d,g)=>yr(d,g),bu,t,s,a),qu="aria-controls",CE=t=>iy(t,a=>{if(!Vo(a))return!1;const l=Ur(a,"id");return l!==void 0&&l.indexOf(qu)>-1}).bind(a=>{const l=Ur(a,"id"),d=Fe(a);return Tr(d,`[${qu}="${l}"]`)}),aS=()=>{const t=en(qu);return{id:t,link:l=>{Hn(l,qu,t)},unlink:l=>{ne(l,qu)}}},uy=(t,s)=>CE(s).exists(a=>kg(t,a)),kg=(t,s)=>rS(s,a=>Yo(a,t.element),zn)||uy(t,s),dy="unknown";var $h;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})($h||($h={}));const Eg=S({}),SE=(t,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();po(["mousemove","mouseover","mouseout",Bp()],t)||console.log(t,{event:t,time:d-l,target:s.dom,sequence:De(a,g=>po(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Zu(g.target)+")":g.outcome)})}}},zp=(t,s,a)=>{switch(pt(Eg.get(),t).orThunk(()=>{const d=ts(Eg.get());return us(d,g=>t.indexOf(g)>-1?O.some(Eg.get()[g]):O.none())}).getOr($h.NORMAL)){case $h.NORMAL:return a(fy());case $h.LOGGING:{const d=SE(t,s),g=a(d);return d.write(),g}case $h.STOP:return!0}},Up=["alloy/data/Fields","alloy/debugging/Debugging"],my=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return qt(s,a=>a.indexOf("alloy")>0&&!es(Up,l=>a.indexOf(l)>-1)).getOr(dy)}else return dy},zb={logEventCut:G,logEventStopped:G,logNoParent:G,logEventNoHandlers:G,logEventResponse:G,write:G},Wp=(t,s,a)=>zp(t,s,a),fy=q(zb),yf=q([Qe("menu"),Qe("selectedMenu")]),Ph=q([Qe("item"),Qe("selectedItem")]);q(Cn(Ph().concat(yf())));const cS=q(Cn(Ph())),lS=Hu("initSize",[Qe("numColumns"),Qe("numRows")]),iS=()=>ei("markers",cS()),Ku=()=>Hu("markers",[Qe("backgroundMenu")].concat(yf()).concat(Ph())),Vi=t=>Hu("markers",De(t,Qe)),Zp=(t,s,a)=>(my(),Jr(s,s,a,kd(l=>Ct.value((...d)=>l.apply(void 0,d))))),Se=t=>Zp("onHandler",t,xd(G)),gr=t=>Zp("onKeyboardHandler",t,xd(O.none)),_g=t=>Zp("onHandler",t,ua()),gy=t=>Zp("onKeyboardHandler",t,ua()),qs=(t,s)=>Os(t,q(s)),vu=t=>Os(t,ht),jp=q(lS),Za=(t,s,a,l,d,g,p,w=!1)=>({x:t,y:s,bubble:a,direction:l,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:w}),Am=Z.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),hy=(t,s,a,l,d,g,p,w,x)=>t.fold(s,a,l,d,g,p,w,x),xE=(t,s,a,l)=>t.fold(s,s,l,l,s,l,a,a),py=(t,s,a,l)=>t.fold(s,l,s,l,a,a,s,l),Gp=Am.southeast,Og=Am.southwest,by=Am.northeast,Ub=Am.northwest,xl=Am.south,qp=Am.north,vy=Am.east,Kp=Am.west,Ih=(t,s,a,l)=>{const d=t+s;return d>l?a:d<a?l:d},ni=(t,s,a)=>Math.min(Math.max(t,s),a),TE=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},rc=(t,s)=>Ka(["left","right","top","bottom"],a=>pt(s,a).map(l=>TE(t,l))),uS=(t,s,a)=>{const l=(x,_)=>s[x].map(D=>{const B=x==="top"||x==="bottom",I=B?a.top:a.left,X=(x==="left"||x==="top"?Math.max:Math.min)(D,_)+I;return B?ni(X,t.y,t.bottom):ni(X,t.x,t.right)}).getOr(_),d=l("left",t.x),g=l("top",t.y),p=l("right",t.right),w=l("bottom",t.bottom);return js(d,g,p-d,w-g)},Dm="layout",Yp=t=>t.x,dS=(t,s)=>t.x+t.width/2-s.width/2,yy=(t,s)=>t.x+t.width-s.width,wy=(t,s)=>t.y-s.height,Cy=t=>t.y+t.height,Sy=(t,s)=>t.y+t.height/2-s.height/2,mS=t=>t.x+t.width,kE=(t,s)=>t.x-s.width,ac=(t,s,a)=>Za(Yp(t),Cy(t),a.southeast(),Gp(),"southeast",rc(t,{left:1,top:3}),Dm),$a=(t,s,a)=>Za(yy(t,s),Cy(t),a.southwest(),Og(),"southwest",rc(t,{right:0,top:3}),Dm),Tl=(t,s,a)=>Za(Yp(t),wy(t,s),a.northeast(),by(),"northeast",rc(t,{left:1,bottom:2}),Dm),oi=(t,s,a)=>Za(yy(t,s),wy(t,s),a.northwest(),Ub(),"northwest",rc(t,{right:0,bottom:2}),Dm),Fr=(t,s,a)=>Za(dS(t,s),wy(t,s),a.north(),qp(),"north",rc(t,{bottom:2}),Dm),kc=(t,s,a)=>Za(dS(t,s),Cy(t),a.south(),xl(),"south",rc(t,{top:3}),Dm),yu=(t,s,a)=>Za(mS(t),Sy(t,s),a.east(),vy(),"east",rc(t,{left:0}),Dm),xy=(t,s,a)=>Za(kE(t,s),Sy(t,s),a.west(),Kp(),"west",rc(t,{right:1}),Dm),fS=()=>[ac,$a,Tl,oi,kc,Fr,yu,xy],Wb=()=>[$a,ac,oi,Tl,kc,Fr,yu,xy],Zb=()=>[Tl,oi,ac,$a,Fr,kc],jb=()=>[oi,Tl,$a,ac,Fr,kc],Xp=()=>[ac,$a,Tl,oi,kc,Fr],Gb=()=>[$a,ac,oi,Tl,kc,Fr],Ty=(t,s)=>s.universal?t:Pn(t,a=>po(s.channels,a));var qb=Object.freeze({__proto__:null,events:t=>Gs([nt(gg(),(s,a)=>{const l=t.channels,d=ts(l),g=a,p=Ty(d,g);mt(p,w=>{const x=l[w],_=x.schema,D=xc("channel["+w+`] data
Receiver: `+Zu(s.element),_,g.data);x.onReceive(s,D)})})])}),ky=[ei("channels",xr(Ct.value,Sc([_g("onReceive"),Te("schema",$l())])))];const Kb=(t,s,a)=>Wu(l=>{a(l,t,s)}),Ey=(t,s,a)=>Fp((l,d)=>{a(l,t,s)}),gS=(t,s,a,l,d,g)=>{const p=Sc(t),w=Ic(s,[Vu("config",t)]);return pS(p,w,s,a,l,d,g)},on=(t,s,a,l,d,g)=>{const p=t,w=Ic(s,[du("config",t)]);return pS(p,w,s,a,l,d,g)},_y=(t,s,a)=>z2((d,...g)=>{const p=[d].concat(g);return d.config({name:q(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},w=>{const x=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,w.config,w.state].concat(x))})},a,s),hS=t=>({key:t,value:void 0}),pS=(t,s,a,l,d,g,p)=>{const w=B=>ba(B,a)?B[a]():O.none(),x=Gt(d,(B,I)=>_y(a,B,I)),D={...Gt(g,(B,I)=>Oh(B,I)),...x,revoke:Ye(hS,a),config:B=>{const I=xc(a+"-config",t,B);return{key:a,value:{config:I,me:D,configAsRaw:Ri(()=>xc(a+"-config",t,B)),initialConfig:B,state:p}}},schema:q(s),exhibit:(B,I)=>Ja(w(B),pt(l,"exhibit"),(V,X)=>X(I,V.config,V.state)).getOrThunk(()=>ju({})),name:q(a),handlers:B=>w(B).map(I=>pt(l,"events").getOr(()=>({}))(I.config,I.state)).getOr({})};return D},yt=t=>ws(t),EE=Sc([Qe("fields"),Qe("name"),Te("active",{}),Te("apis",{}),Te("state",ti),Te("extra",{})]),cc=t=>{const s=xc("Creating behaviour: "+t.name,EE,t);return gS(s.fields,s.name,s.active,s.apis,s.extra,s.state)},_E=Sc([Qe("branchKey"),Qe("branches"),Qe("name"),Te("active",{}),Te("apis",{}),Te("state",ti),Te("extra",{})]),bS=t=>{const s=xc("Creating behaviour: "+t.name,_E,t);return on(Xr(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},vS=q(void 0),zi=cc({fields:ky,name:"receiving",active:qb});var Jp=Object.freeze({__proto__:null,exhibit:(t,s)=>ju({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const wu=t=>t.dom.focus(),Oy=t=>t.dom.blur(),Qp=t=>{const s=Fe(t).dom;return t.dom===s.activeElement},$d=(t=Ql())=>O.from(t.dom.activeElement).map(pe.fromDom),Yu=t=>$d(Fe(t)).filter(s=>t.dom.contains(s.dom)),Yb=(t,s)=>{const a=Fe(s),l=$d(a).bind(g=>{const p=w=>Yo(g,w);return p(s)?O.some(s):sS(s,p)}),d=t(s);return l.each(g=>{$d(a).filter(p=>Yo(p,g)).fold(()=>{wu(g)},G)}),d},Wi=(t,s,a,l,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:l.map(g),bottom:d.map(g)}},OE=t=>({...t,position:O.some(t.position)}),Xb=(t,s)=>{Wr(t,OE(s))},Jb=Z.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),wf=(t,s,a,l,d,g)=>{const p=s.rect,w=p.x-a,x=p.y-l,_=p.width,D=p.height,B=d-(w+_),I=g-(x+D),V=O.some(w),X=O.some(x),le=O.some(B),Ee=O.some(I),ye=O.none();return hy(s.direction,()=>Wi(t,V,X,ye,ye),()=>Wi(t,ye,X,le,ye),()=>Wi(t,V,ye,ye,Ee),()=>Wi(t,ye,ye,le,Ee),()=>Wi(t,V,X,ye,ye),()=>Wi(t,V,ye,ye,Ee),()=>Wi(t,V,X,ye,ye),()=>Wi(t,ye,X,le,ye))},yS=(t,s)=>t.fold(()=>{const a=s.rect;return Wi("absolute",O.some(a.x),O.some(a.y),O.none(),O.none())},(a,l,d,g)=>wf("absolute",s,a,l,d,g),(a,l,d,g)=>wf("fixed",s,a,l,d,g)),Ay=(t,s)=>{const a=Ye(tg,s),l=t.fold(a,a,()=>{const p=Bc();return tg(s).translate(-p.left,-p.top)}),d=Qs(s),g=Qt(s);return js(l.left,l.top,d,g)},AE=(t,s)=>s.fold(()=>t.fold(me,me,js),a=>t.fold(q(a),q(a),()=>{const l=wS(t,a.x,a.y);return js(l.left,l.top,a.width,a.height)})),wS=(t,s,a)=>{const l=vo(s,a),d=()=>{const g=Bc();return l.translate(-g.left,-g.top)};return t.fold(q(l),q(l),d)},Fh=(t,s,a,l)=>t.fold(s,a,l);Jb.none;const lc=Jb.relative,DE=Jb.fixed,Ag=(t,s)=>({anchorBox:t,origin:s}),CS=(t,s)=>Ag(t,s),Qb="data-alloy-placement",RE=(t,s)=>{Hn(t,Qb,s)},Dy=t=>$(t,Qb),ME=t=>ne(t,Qb),e1=Z.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),SS=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y:w,right:x,bottom:_,width:D,height:B}=t,I=p>=a&&p<=d,V=w>=l&&w<=g,X=I&&V,le=x<=d&&x>=a,Ee=_<=g&&_>=l,ye=le&&Ee,ke=Math.min(D,p>=a?d-p:x-a),Ne=Math.min(B,w>=l?g-w:_-l);return{originInBounds:X,sizeInBounds:ye,visibleW:ke,visibleH:Ne}},xS=(t,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:p,y:w,width:x,height:_}=t,D=Math.max(a,d-x),B=Math.max(l,g-_),I=ni(p,a,D),V=ni(w,l,B),X=Math.min(I+x,d)-I,le=Math.min(V+_,g)-V;return js(I,V,X,le)},Ry=(t,s,a)=>{const l=q(s.bottom-a.y),d=q(a.bottom-s.y),g=xE(t,d,d,l),p=q(s.right-a.x),w=q(a.right-s.x);return{maxWidth:py(t,w,w,p),maxHeight:g}},My=(t,s,a,l)=>{const d=t.bubble,g=d.offset,p=uS(l,t.restriction,g),w=t.x+g.left,x=t.y+g.top,_=js(w,x,s,a),{originInBounds:D,sizeInBounds:B,visibleW:I,visibleH:V}=SS(_,p),X=D&&B,le=X?_:xS(_,p),Ee=le.width>0&&le.height>0,{maxWidth:ye,maxHeight:ke}=Ry(t.direction,le,l),Ne={rect:le,maxHeight:ke,maxWidth:ye,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:x};return X||t.alwaysFit?e1.fit(Ne):e1.nofit(Ne,I,V,Ee)},TS=(t,s,a,l,d,g)=>{const p=l.width,w=l.height,x=(D,B,I,V,X)=>{const le=D(a,l,d,t,g),Ee=My(le,p,w,g);return Ee.fold(q(Ee),(ye,ke,Ne,Le)=>(X===Le?Ne>V||ke>I:!X&&Le)?Ee:e1.nofit(B,I,V,X))};return Bn(s,(D,B)=>{const I=Ye(x,B);return D.fold(q(D),I)},e1.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:Gp(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(ht,ht)},Pd=t=>{const s=S(O.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(O.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:w=>{a(),s.set(O.some(w))}}},ev=()=>Pd(t=>t.destroy()),Zi=()=>Pd(t=>t.unbind()),Hs=()=>{const t=Pd(G);return{...t,on:a=>t.get().each(a)}},Lh=Wt,ll=(t,s,a)=>dm(t,s,Lh,a),Ny=(t,s,a)=>eg(t,s,Lh,a),kS=uh,ES=["top","bottom","right","left"],t1="data-alloy-transition-timer",By=(t,s)=>Cg(t,s.classes),_S=(t,s,a)=>a.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),OS=(t,s)=>{const a=l=>parseFloat(l).toFixed(3);return Ss(s,(l,d)=>{const g=t[d].map(a),p=l.map(a);return!Hc(g,p)}).isSome()},NE=t=>{const s=g=>{const w=et(t,g).split(/\s*,\s*/);return Pn(w,Ie)},a=g=>{if(Et(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return pr(g,"ms")?p:p*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return Bn(d,(g,p,w)=>{const x=a(l[w])+a(p);return Math.max(g,x)},0)},BE=(t,s)=>{const a=Zi(),l=Zi();let d;const g=_=>{var D;const B=(D=_.raw.pseudoElement)!==null&&D!==void 0?D:"";return Yo(_.target,t)&&Me(B)&&po(ES,_.raw.propertyName)},p=_=>{if(Pt(_)||g(_)){a.clear(),l.clear();const D=_==null?void 0:_.raw.type;(Pt(D)||D===fg())&&(clearTimeout(d),ne(t,t1),Sl(t,s.classes))}},w=ll(t,R2(),_=>{g(_)&&(w.unbind(),a.set(ll(t,fg(),p)),l.set(ll(t,Eb(),p)))}),x=NE(t);requestAnimationFrame(()=>{d=setTimeout(p,x+17),Hn(t,t1,d)})},$E=(t,s)=>{Hi(t,s.classes),$(t,t1).each(a=>{clearTimeout(parseInt(a,10)),ne(t,t1)}),BE(t,s)},PE=(t,s,a,l,d,g)=>{const p=_S(l,d,g);if(p||By(t,l)){Zt(t,"position",a.position);const w=Ay(s,t),x=yS(s,{...d,rect:w}),_=Ka(ES,D=>x[D]);OS(a,_)&&(Wr(t,_),p&&$E(t,l),Y(t))}else Sl(t,l.classes)},Hh=t=>({width:Qs(t),height:Qt(t)}),$y=(t,s,a,l)=>{fo(s,"max-height"),fo(s,"max-width");const d=Hh(s);return TS(s,l.preference,t,d,a,l.bounds)},Py=(t,s)=>{const a=s.classes;Sl(t,a.off),Hi(t,a.on)},Dg=(t,s,a)=>{const l=a.maxHeightFunction;l(t,s.maxHeight)},IE=(t,s,a)=>{const l=a.maxWidthFunction;l(t,s.maxWidth)},FE=(t,s,a)=>{const l=yS(a.origin,s);a.transition.each(d=>{PE(t,a.origin,l,d,s,a.lastPlacement)}),Xb(t,l)},LE=(t,s)=>{RE(t,s.placement)},Iy=(t,s)=>{Do(t,Math.floor(s))},AS=q((t,s)=>{Iy(t,s),Ar(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Rg=q((t,s)=>{Iy(t,s)}),DS=(t,s,a)=>t[s]===void 0?a:t[s],HE=(t,s,a,l,d,g,p,w)=>{const x=DS(p,"maxHeightFunction",AS()),_=DS(p,"maxWidthFunction",G),D=t.anchorBox,B=t.origin,I={bounds:AE(B,g),origin:B,preference:l,maxHeightFunction:x,maxWidthFunction:_,lastPlacement:d,transition:w};return VE(D,s,a,I)},VE=(t,s,a,l)=>{const d=$y(t,s,a,l);return FE(s,d,l),LE(s,d),Py(s,d),Dg(s,d,l),IE(s,d,l),{layout:d.layout,placement:d.placement}},zE=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Vh=(t,s,a,l=1)=>{const d=t*l,g=s*l,p=x=>pt(a,x).getOr([]),w=(x,_,D)=>{const B=mn(zE,D);return{offset:vo(x,_),classesOn:Ve(D,p),classesOff:Ve(B,p)}};return{southeast:()=>w(-t,s,["top","alignLeft"]),southwest:()=>w(t,s,["top","alignRight"]),south:()=>w(-t/2,s,["top","alignCentre"]),northeast:()=>w(-t,-s,["bottom","alignLeft"]),northwest:()=>w(t,-s,["bottom","alignRight"]),north:()=>w(-t/2,-s,["bottom","alignCentre"]),east:()=>w(t,-s/2,["valignCentre","left"]),west:()=>w(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>w(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>w(-d,g,["top","alignRight","inset"]),insetNorth:()=>w(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>w(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>w(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>w(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>w(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>w(d,-g/2,["valignCentre","left","inset"])}},tv=()=>Vh(0,0,{}),Mg=ht,nv=(t,s)=>a=>RS(a)==="rtl"?s:t,RS=t=>et(t,"direction")==="rtl"?"rtl":"ltr";var Id;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Id||(Id={}));const ov="data-alloy-vertical-dir",MS=t=>rS(t,s=>Vo(s)&&Ur(s,"data-alloy-vertical-dir")===Id.BottomToTop),Xu=()=>Ic("layouts",[Qe("onLtr"),Qe("onRtl"),ss("onBottomLtr"),ss("onBottomRtl")]),Cf=(t,s,a,l,d,g,p)=>{const w=p.map(MS).getOr(!1),x=s.layouts.map(V=>V.onLtr(t)),_=s.layouts.map(V=>V.onRtl(t)),D=w?s.layouts.bind(V=>V.onBottomLtr.map(X=>X(t))).or(x).getOr(d):x.getOr(a),B=w?s.layouts.bind(V=>V.onBottomRtl.map(X=>X(t))).or(_).getOr(g):_.getOr(l);return nv(D,B)(t)},Fy=(t,s,a)=>{const l=s.hotspot,d=Ay(a,l.element),g=Cf(t.element,s,Xp(),Gb(),Zb(),jb(),O.some(s.hotspot.element));return O.some(Mg({anchorBox:d,bubble:s.bubble.getOr(tv()),overrides:s.overrides,layouts:g}))};var NS=[Qe("hotspot"),ss("bubble"),Te("overrides",{}),Xu(),qs("placement",Fy)];const UE=(t,s,a)=>{const l=wS(a,s.x,s.y),d=js(l.left,l.top,s.width,s.height),g=Cf(t.element,s,fS(),Wb(),fS(),Wb(),O.none());return O.some(Mg({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var WE=[Qe("x"),Qe("y"),Te("height",0),Te("width",0),Te("bubble",tv()),Te("overrides",{}),Xu(),qs("placement",UE)];const Ly=Z.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),ZE=t=>t.fold(ht,(s,a,l)=>s.translate(-a,-l)),jE=t=>t.fold(ht,ht),BS=t=>Bn(t,(s,a)=>s.translate(a.left,a.top),vo(0,0)),$S=t=>{const s=De(t,ZE);return BS(s)},sv=t=>{const s=De(t,jE);return BS(s)},GE=Ly.screen,qE=Ly.absolute,KE=(t,s,a)=>{const l=nc(a.root).dom,d=g=>{const p=wa(g),w=wa(t.element);return Yo(p,w)};return O.from(l.frameElement).map(pe.fromDom).filter(d).map(vs)},PS=(t,s,a)=>{const l=wa(t.element),d=Bc(l),g=KE(t,s,a).getOr(d);return qE(g,d.left,d.top)},Hy=(t,s,a,l)=>{const d=GE(vo(t,s));return O.some(Ni(d,a,l))},IS=(t,s,a,l,d)=>t.map(g=>{const p=[s,g.point],w=Fh(l,()=>sv(p),()=>sv(p),()=>$S(p)),x=ng(w.left,w.top,g.width,g.height),_=a.showAbove?Zb():Xp(),D=a.showAbove?jb():Gb(),B=Cf(d,a,_,D,_,D,O.none());return Mg({anchorBox:x,bubble:a.bubble.getOr(tv()),overrides:a.overrides,layouts:B})}),YE=(t,s,a)=>{const l=PS(t,a,s);return s.node.filter($o).bind(d=>{const g=d.dom.getBoundingClientRect(),p=Hy(g.left,g.top,g.width,g.height),w=s.node.getOr(t.element);return IS(p,l,s,a,w)})};var FS=[Qe("node"),Qe("root"),ss("bubble"),Xu(),Te("overrides",{}),Te("showAbove",!1),qs("placement",YE)];const n1="\uFEFF",Vy=" ",zh={create:(t,s,a,l)=>({start:t,soffset:s,finish:a,foffset:l})},rv=Z.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Uy=(t,s,a,l)=>t.fold(s,a,l),LS=t=>t.fold(ht,ht,ht),HS=rv.before,VS=rv.on,Ng=rv.after,zS={before:HS,on:VS,after:Ng,cata:Uy,getStart:LS},o1=Z.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),XE=t=>o1.exact(t.start,t.soffset,t.finish,t.foffset),Wy=t=>t.match({domRange:s=>pe.fromDom(s.startContainer),relative:(s,a)=>zS.getStart(s),exact:(s,a,l,d)=>s}),US=o1.domRange,JE=o1.relative,QE=o1.exact,av=t=>{const s=Wy(t);return nc(s)},s1=zh.create,Rm={domRange:US,relative:JE,exact:QE,exactFromRange:XE,getWin:av,range:s1},e_=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,l)=>{t.setStart(a.dom,l)},a=>{t.setStartAfter(a.dom)})},Zy=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,l)=>{t.setEnd(a.dom,l)},a=>{t.setEndAfter(a.dom)})},WS=(t,s,a)=>{const l=t.document.createRange();return e_(l,s),Zy(l,a),l},Yc=(t,s,a,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(l.dom,d),g},ZS=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Bg=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?O.some(a).map(ZS):O.none()},t_=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?O.some(s).map(ZS):O.none()},r1=Z.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),jS=(t,s,a)=>s(pe.fromDom(a.startContainer),a.startOffset,pe.fromDom(a.endContainer),a.endOffset),Uh=(t,s)=>s.match({domRange:a=>({ltr:q(a),rtl:O.none}),relative:(a,l)=>({ltr:Ri(()=>WS(t,a,l)),rtl:Ri(()=>O.some(WS(t,l,a)))}),exact:(a,l,d,g)=>({ltr:Ri(()=>Yc(t,a,l,d,g)),rtl:Ri(()=>O.some(Yc(t,d,g,a,l)))})}),$g=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>r1.rtl(pe.fromDom(d.endContainer),d.endOffset,pe.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>jS(t,r1.ltr,a)):jS(t,r1.ltr,a)},a1=(t,s)=>{const a=Uh(t,s);return $g(t,a)},Sf=(t,s)=>a1(t,s).match({ltr:(l,d,g,p)=>{const w=t.document.createRange();return w.setStart(l.dom,d),w.setEnd(g.dom,p),w},rtl:(l,d,g,p)=>{const w=t.document.createRange();return w.setStart(g.dom,p),w.setEnd(l.dom,d),w}});r1.ltr,r1.rtl;const n_=(t,s,a)=>Pn(fi(t,a),s),Pa=(t,s)=>au(s,t),xi=(t,s,a,l)=>{const g=wa(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,l),g},cv=(t,s,a,l)=>{const d=xi(t,s,a,l),g=Yo(t,a)&&s===l;return d.collapsed&&!g},GS=t=>O.from(t.getSelection()),qS=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return O.some(zh.create(pe.fromDom(s.startContainer),s.startOffset,pe.fromDom(a.endContainer),a.endOffset))}else return O.none()},jy=t=>{if(t.anchorNode===null||t.focusNode===null)return qS(t);{const s=pe.fromDom(t.anchorNode),a=pe.fromDom(t.focusNode);return cv(s,t.anchorOffset,a,t.focusOffset)?O.some(zh.create(s,t.anchorOffset,a,t.focusOffset)):qS(t)}},Pg=t=>GS(t).filter(s=>s.rangeCount>0).bind(jy),c1=(t,s)=>{const a=Sf(t,s);return Bg(a)},Ig=(t,s)=>{const a=Sf(t,s);return t_(a)},Wh=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?O.from(g.dom.nodeValue):O.none();return{get:a,getOption:l,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(ya,"text"),l1=t=>Wh.get(t),Fg=(t,s)=>({element:t,offset:s}),Gy=(t,s)=>{const a=Ca(t);if(a.length===0)return Fg(t,s);if(s<a.length)return Fg(a[s],0);{const l=a[a.length-1],d=ya(l)?l1(l).length:Ca(l).length;return Fg(l,d)}},Zh=(t,s)=>ya(t)?Fg(t,s):Gy(t,s),ic=(t,s)=>s.getSelection.getOrThunk(()=>()=>Pg(t))().map(l=>{const d=Zh(l.start,l.soffset),g=Zh(l.finish,l.foffset);return Rm.range(d.element,d.offset,g.element,g.offset)}),qy=(t,s,a)=>{const l=nc(s.root).dom,d=PS(t,a,s),g=ic(l,s).bind(x=>Ig(l,Rm.exactFromRange(x)).orThunk(()=>{const D=pe.fromText(n1);jc(x.start,D);const B=c1(l,Rm.exact(D,0,D,1));return Nl(D),B}).bind(D=>Hy(D.left,D.top,D.width,D.height))),w=ic(l,s).bind(x=>Vo(x.start)?O.some(x.start):pc(x.start)).getOr(t.element);return IS(g,d,s,a,w)};var Ju=[ss("getSelection"),Qe("root"),ss("bubble"),Xu(),Te("overrides",{}),Te("showAbove",!1),qs("placement",qy)];const Fd="link-layout",xf=t=>t.x+t.width,Lg=(t,s)=>t.x-s.width,lv=(t,s)=>t.y-s.height+t.height,iv=t=>t.y,o_=(t,s,a)=>Za(xf(t),iv(t),a.southeast(),Gp(),"southeast",rc(t,{left:0,top:2}),Fd),uv=(t,s,a)=>Za(Lg(t,s),iv(t),a.southwest(),Og(),"southwest",rc(t,{right:1,top:2}),Fd),i1=(t,s,a)=>Za(xf(t),lv(t,s),a.northeast(),by(),"northeast",rc(t,{left:0,bottom:3}),Fd),KS=(t,s,a)=>Za(Lg(t,s),lv(t,s),a.northwest(),Ub(),"northwest",rc(t,{right:1,bottom:3}),Fd),dv=()=>[o_,uv,i1,KS],Cu=()=>[uv,o_,KS,i1],s_=(t,s,a)=>{const l=Ay(a,s.item.element),d=Cf(t.element,s,dv(),Cu(),dv(),Cu(),O.none());return O.some(Mg({anchorBox:l,bubble:tv(),overrides:s.overrides,layouts:d}))};var r_=[Qe("item"),Xu(),Te("overrides",{}),qs("placement",s_)],Ky=Xr("type",{selection:Ju,node:FS,hotspot:NS,submenu:r_,makeshift:WE});const Yy=[yl("classes",Nr),Il("mode","all",["all","layout","placement"])],u1=[Te("useFixed",zn),ss("getBounds")],YS=[ei("anchor",Ky),Ic("transition",Yy)],XS=()=>{const t=document.documentElement;return DE(0,0,t.clientWidth,t.clientHeight)},ji=t=>{const s=vs(t.element),a=t.element.dom.getBoundingClientRect();return lc(s.left,s.top,a.width,a.height)},mv=(t,s,a,l,d,g)=>{const p=CS(s.anchorBox,t);return HE(p,l.element,s.bubble,s.layouts,d,a,s.overrides,g)},JS=(t,s,a,l,d)=>{const g=O.none();Ld(t,s,a,l,d,g)},Ld=(t,s,a,l,d,g)=>{const p=xc("placement.info",Cn(YS),d),w=p.anchor,x=l.element,_=a.get(l.uid);Yb(()=>{Zt(x,"position","fixed");const D=Js(x,"visibility");Zt(x,"visibility","hidden");const B=s.useFixed()?XS():ji(t);w.placement(t,w,B).each(I=>{const V=g.orThunk(()=>s.getBounds.map(Go)),X=mv(B,I,V,l,_,p.transition);a.set(l.uid,X)}),D.fold(()=>{fo(x,"visibility")},I=>{Zt(x,"visibility",I)}),Js(x,"left").isNone()&&Js(x,"top").isNone()&&Js(x,"right").isNone()&&Js(x,"bottom").isNone()&&ar(Js(x,"position"),"fixed")&&fo(x,"position")},x)};var si=Object.freeze({__proto__:null,position:JS,positionWithinBounds:Ld,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,l)=>{const d=l.element;mt(["position","left","right","top","bottom"],g=>fo(d,g)),ME(d),a.clear(l.uid)}}),kf=Object.freeze({__proto__:null,init:()=>{let t={};return zl({readState:()=>t,clear:d=>{it(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>pt(t,d)})}});const Lr=cc({fields:u1,name:"positioning",active:Jp,apis:si,state:kf}),Mm=t=>t.getSystem().isConnected(),d1=t=>{Xo(t,ym());const s=t.components();mt(s,d1)},Hg=t=>{const s=t.components();mt(s,Hg),Xo(t,Rd())},fv=(t,s)=>{t.getSystem().addToWorld(s),$o(t.element)&&Hg(s)},gv=t=>{d1(t),t.getSystem().removeFromWorld(t)},Xy=(t,s)=>{rl(t.element,s.element)},hv=t=>{mt(t.components(),s=>Nl(s.element)),wd(t.element),t.syncComponents()},QS=(t,s,a)=>{const l=t.components();hv(t);const d=a(s),g=mn(l,d);mt(g,p=>{d1(p),t.getSystem().removeFromWorld(p)}),mt(d,p=>{Mm(p)?Xy(t,p):(t.getSystem().addToWorld(p),Xy(t,p),$o(t.element)&&Hg(p))}),t.syncComponents()},a_=(t,s,a)=>{const l=t.components(),d=Ve(s,w=>wg(w).toArray());mt(l,w=>{po(d,w)||gv(w)});const g=a(s),p=mn(l,g);mt(p,w=>{Mm(w)&&gv(w)}),mt(g,w=>{Mm(w)||fv(t,w)}),t.syncComponents()},Hd=(t,s)=>{m1(t,s,rl)},m1=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),$o(t.element)&&Hg(s),t.syncComponents()},Jy=t=>{d1(t),Nl(t.element),t.getSystem().removeFromWorld(t)},Vd=t=>{const s=ca(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());Jy(t),s.each(a=>{a.syncComponents()})},Qy=t=>{const s=t.components();mt(s,Jy),wd(t.element),t.syncComponents()},f1=(t,s)=>{ew(t,s,rl)},Ef=(t,s)=>{ew(t,s,vd)},ew=(t,s,a)=>{a(t,s.element);const l=Ca(s.element);mt(l,d=>{s.getByDom(d).each(Hg)})},ex=t=>{const s=Ca(t.element);mt(s,a=>{t.getByDom(a).each(d1)}),Nl(t.element)},tw=(t,s,a,l)=>{a.get().each(p=>{Qy(t)});const d=s.getAttachPoint(t);Hd(d,t);const g=t.getSystem().build(l);return Hd(t,g),a.set(g),g},_f=(t,s,a,l)=>{const d=tw(t,s,a,l);return s.onOpen(t,d),d},c_=(t,s,a,l)=>a.get().map(()=>tw(t,s,a,l)),zd=(t,s,a,l,d)=>{nx(t,s),_f(t,s,a,l),d(),bv(t,s)},ki=(t,s,a)=>{a.get().each(l=>{Qy(t),Vd(t),s.onClose(t,l),a.clear()})},tx=(t,s,a)=>a.isOpen(),pv=(t,s,a,l)=>tx(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,l)),g1=(t,s,a)=>a.get(),nw=(t,s,a,l)=>{Js(t.element,s).fold(()=>{ne(t.element,a)},d=>{Hn(t.element,a,d)}),Zt(t.element,s,l)},l_=(t,s,a)=>{$(t.element,a).fold(()=>fo(t.element,s),l=>Zt(t.element,s,l))},nx=(t,s,a)=>{const l=s.getAttachPoint(t);Zt(t.element,"position",Lr.getMode(l)),nw(t,"visibility",s.cloakVisibilityAttr,"hidden")},ow=t=>es(["top","left","right","bottom"],s=>Js(t,s).isSome()),bv=(t,s,a)=>{ow(t.element)||fo(t.element,"position"),l_(t,"visibility",s.cloakVisibilityAttr)};var i_=Object.freeze({__proto__:null,cloak:nx,decloak:bv,open:_f,openWhileCloaked:zd,close:ki,isOpen:tx,isPartOf:pv,getState:g1,setContent:c_}),vv=Object.freeze({__proto__:null,events:(t,s)=>Gs([nt(Eh(),(a,l)=>{ki(a,t,s)})])}),ox=[Se("onOpen"),Se("onClose"),Qe("isPartOf"),Qe("getAttachPoint"),Te("cloakVisibilityAttr","data-precloak-visibility")],jh=Object.freeze({__proto__:null,init:()=>{const t=Hs(),s=q("not-implemented");return zl({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const So=cc({fields:ox,name:"sandboxing",active:vv,apis:i_,state:jh}),Nm=q("dismiss.popups"),Gh=q("reposition.popups"),sw=q("mouse.released"),d_=Sc([Te("isExtraPart",zn),Ic("fireEventInstead",[Te("event",ff())])]),h1=t=>{const s=xc("Dismissal",d_,t);return{[Nm()]:{schema:Sc([Qe("target")]),onReceive:(a,l)=>{So.isOpen(a)&&(So.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>So.close(a),g=>Xo(a,g.event)))}}}},Vg=Sc([Ic("fireEventInstead",[Te("event",$p())]),vi("doReposition")]),zg=t=>{const s=xc("Reposition",Vg,t);return{[Gh()]:{onReceive:a=>{So.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>Xo(a,l.event))}}}},rw=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},aw=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var yv=Object.freeze({__proto__:null,onLoad:rw,onUnload:aw,setValue:(t,s,a,l)=>{s.store.manager.setValue(t,s,a,l)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),iw=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Br((l,d)=>{rw(l,t,s)}),Vl((l,d)=>{aw(l,t,s)})]:[Ey(t,s,rw)];return Gs(a)}});const wv=()=>{const t=S(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,l=()=>{t.set(null)};return zl({set:t.set,get:t.get,isNotSet:a,clear:l,readState:s})},b1=()=>zl({readState:G}),Bm=()=>{const t=S({}),s=S({});return zl({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>pt(t.get(),p).orThunk(()=>pt(s.get(),p)),update:p=>{const w=t.get(),x=s.get(),_={},D={};mt(p,B=>{_[B.value]=B,pt(B,"meta").each(I=>{pt(I,"text").each(V=>{D[V]=B})})}),t.set({...w,..._}),s.set({...x,...D})},clear:()=>{t.set({}),s.set({})}})};var Ud=Object.freeze({__proto__:null,memory:wv,dataset:Bm,manual:b1,init:t=>t.store.manager.state(t)});const Of=(t,s,a,l)=>{const d=s.store;a.update([l]),d.setValue(t,l),s.onSetValue(t,l)},m_=(t,s,a)=>{const l=s.store,d=l.getDataKey(t);return a.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},ax=(t,s,a)=>{s.store.initialValue.each(d=>{Of(t,s,a,d)})},uw=(t,s,a)=>{a.clear()};var qh=[ss("initialValue"),Qe("getFallbackEntry"),Qe("getDataKey"),Qe("setValue"),qs("manager",{setValue:Of,getValue:m_,onLoad:ax,onUnload:uw,state:Bm})];const Kh=(t,s,a)=>s.store.getValue(t),f_=(t,s,a,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},g_=(t,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var cx=[Qe("getValue"),Te("setValue",G),ss("initialValue"),qs("manager",{setValue:f_,getValue:Kh,onLoad:g_,onUnload:G,state:ti.init})];const Af=(t,s,a,l)=>{a.set(l),s.onSetValue(t,l)},dw=(t,s,a)=>a.get(),mw=(t,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},Cv=(t,s,a)=>{a.clear()};var Ug=[ss("initialValue"),qs("manager",{setValue:Af,getValue:dw,onLoad:mw,onUnload:Cv,state:wv})],Sv=[cl("store",{mode:"memory"},Xr("mode",{memory:Ug,manual:cx,dataset:qh})),Se("onSetValue"),Te("resetOnDom",!1)];const Ft=cc({fields:Sv,name:"representing",active:iw,apis:yv,extra:{setValueFrom:(t,s)=>{const a=Ft.getValue(s);Ft.setValue(t,a)}},state:Ud}),uc=(t,s)=>C(t,{},De(s,a=>$0(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Os("dump",ht)])),xv=t=>t.dump,cr=(t,s)=>({...yt(s),...t.dump}),xu={field:uc,augment:cr,get:xv},lx="placeholder",Wl=Z.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Ia=t=>oo(t,"uiType"),Tv=(t,s,a,l)=>t.exists(d=>d!==a.owner)?Wl.single(!0,q(a)):pt(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+ts(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),kv=(t,s,a,l)=>Ia(a)&&a.uiType===lx?Tv(t,s,a,l):Wl.single(!1,q(a)),$m=(t,s,a,l)=>kv(t,s,a,l).fold((g,p)=>{const w=Ia(a)?p(s,a.config,a.validated):p(s),x=pt(w,"components").getOr([]),_=Ve(x,D=>$m(t,s,D,l));return[{...w,components:_}]},(g,p)=>{if(Ia(a)){const w=p(s,a.config,a.validated);return a.validated.preprocess.getOr(ht)(w)}else return p(s)}),ix=(t,s,a,l)=>Ve(a,d=>$m(t,s,d,l)),fw=(t,s)=>{let a=!1;const l=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,w)=>p,(p,w)=>p);return{name:q(t),required:g,used:l,replace:d}},ux=(t,s,a,l)=>{const d=Gt(l,(p,w)=>fw(w,p)),g=ix(t,s,a,d);return Je(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},gw=Wl.single,hw=Wl.multiple,pw=q(lx),v1=Z.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Ev=Te("factory",{sketch:ht}),y1=Te("schema",[]),w1=Qe("name"),_v=Jr("pname","pname",Sd(t=>"<alloy."+en(t.name)+">"),$l()),dx=Os("schema",()=>[ss("preprocess")]),Pm=Te("defaults",q({})),Wd=Te("overrides",q({})),Wg=Cn([Ev,y1,w1,_v,Pm,Wd]),Yh=Cn([Ev,y1,w1,Pm,Wd]),bw=Cn([Ev,y1,w1,_v,Pm,Wd]),h_=Cn([Ev,dx,w1,Qe("unit"),_v,Pm,Wd]),mx=t=>t.fold(O.some,O.none,O.some,O.some),Ov=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},fx=t=>t.fold(ht,ht,ht,ht),Av=(t,s)=>a=>{const l=xc("Converting part type",s,a);return t(l)},ja=Av(v1.required,Wg),Tu=Av(v1.external,Yh),Gi=Av(v1.optional,bw),C1=Av(v1.group,h_),ri=q("entirety");var gx=Object.freeze({__proto__:null,required:ja,external:Tu,optional:Gi,group:C1,asNamedPart:mx,name:Ov,asCommon:fx,original:ri});const vw=(t,s,a,l)=>Ns(s.defaults(t,a,l),a,{uid:t.partUids[s.name]},s.overrides(t,a,l)),yw=(t,s,a)=>{const l={},d={};return mt(a,g=>{g.fold(p=>{l[p.pname]=gw(!0,(w,x,_)=>p.factory.sketch(vw(w,p,x,_)))},p=>{const w=s.parts[p.name];d[p.name]=q(p.factory.sketch(vw(s,p,w[ri()]),w))},p=>{l[p.pname]=gw(!1,(w,x,_)=>p.factory.sketch(vw(w,p,x,_)))},p=>{l[p.pname]=hw(!0,(w,x,_)=>{const D=w[p.name];return De(D,B=>p.factory.sketch(Ns(p.defaults(w,B,_),B,p.overrides(w,B))))})})}),{internals:q(l),externals:q(d)}},ww=(t,s)=>{const a={};return mt(s,l=>{mx(l).each(d=>{const g=p_(t,d.pname);a[d.name]=p=>{const w=xc("Part: "+d.name+" in "+t,Cn(d.schema),p);return{...g,config:p,validated:w}}})}),a},p_=(t,s)=>({uiType:pw(),owner:t,name:s}),Cw=(t,s,a)=>({uiType:pw(),owner:t,name:s,config:a,validated:{}}),b_=t=>Ve(t,s=>s.fold(O.none,O.some,O.none,O.none).map(a=>Hu(a.name,a.schema.concat([vu(ri())]))).toArray()),v_=t=>De(t,Ov),Sw=(t,s,a)=>yw(t,s,a),xw=(t,s,a)=>ux(O.some(t),s,s.components,a),Vs=(t,s,a)=>{const l=s.partUids[a];return t.getSystem().getByUid(l).toOptional()},Zd=(t,s,a)=>Vs(t,s,a).getOrDie("Could not find part: "+a),Tw=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return mt(a,p=>{l[p]=q(g.getByUid(d[p]))}),l},kw=(t,s)=>{const a=t.getSystem();return Gt(s.partUids,(l,d)=>q(a.getByUid(l)))},Ew=t=>ts(t.partUids),_w=(t,s,a)=>{const l={},d=s.partUids,g=t.getSystem();return mt(a,p=>{l[p]=q(g.getByUid(d[p]).getOrDie())}),l},Ow=(t,s)=>{const a=v_(s);return ws(De(a,l=>({key:l,value:t+"-"+l})))},Aw=t=>Jr("partUids","partUids",Td(s=>Ow(s.uid,t)),$l());var Dw=Object.freeze({__proto__:null,generate:ww,generateOne:Cw,schemas:b_,names:v_,substitutes:Sw,components:xw,defaultUids:Ow,defaultUidsSchema:Aw,getAllParts:kw,getAllPartNames:Ew,getPart:Vs,getPartOrDie:Zd,getParts:Tw,getPartsOrDie:_w});const y_=(t,s)=>(t.length>0?[Hu("parts",t)]:[]).concat([Qe("uid"),Te("dom",{}),Te("components",[]),vu("originalSpec"),Te("debug.sketcher",{})]).concat(s),hx=(t,s,a,l,d)=>{const g=y_(l,d);return xc(t+" [SpecSchema]",Sc(g.concat(s)),a)},w_=(t,s,a,l)=>{const d=Df(l),g=hx(t,s,d,[],[]);return a(g,d)},Rw=(t,s,a,l,d)=>{const g=Df(d),p=b_(a),w=Aw(a),x=hx(t,s,g,p,[w]),_=Sw(t,x,a),D=xw(t,x,_.internals());return l(x,D,g,_.externals())},C_=t=>oo(t,"uid"),Df=t=>C_(t)?t:{...t,uid:Ci("uid")},sn=t=>t.uid!==void 0,Im=Sc([Qe("name"),Qe("factory"),Qe("configFields"),Te("apis",{}),Te("extraApis",{})]),S_=Sc([Qe("name"),Qe("factory"),Qe("configFields"),Qe("partFields"),Te("apis",{}),Te("extraApis",{})]),ma=t=>{const s=xc("Sketcher for "+t.name,Im,t),a=g=>w_(s.name,s.configFields,s.factory,g),l=Gt(s.apis,Bb),d=Gt(s.extraApis,(g,p)=>Oh(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...l,...d}},ta=t=>{const s=xc("Sketcher for "+t.name,S_,t),a=p=>Rw(s.name,s.configFields,s.partFields,s.factory,p),l=ww(s.name,s.partFields),d=Gt(s.apis,Bb),g=Gt(s.extraApis,(p,w)=>Oh(p,w));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l,...d,...g}},Rf=t=>Da("input")(t)&&Ur(t,"type")!=="radio"||Da("textarea")(t);var px=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const x_=[Qe("find")],Ro=cc({fields:x_,name:"composing",apis:px}),bx=["input","button","textarea","select"],Rv=(t,s,a)=>{(s.disabled()?Nw:Bw)(t,s)},Zg=(t,s)=>s.useNative===!0&&po(bx,tc(t.element)),vx=t=>K(t.element,"disabled"),T_=t=>{Hn(t.element,"disabled","disabled")},Mw=t=>{ne(t.element,"disabled")},k_=t=>Ur(t.element,"aria-disabled")==="true",KD=t=>{Hn(t.element,"aria-disabled","true")},yx=t=>{Hn(t.element,"aria-disabled","false")},Nw=(t,s,a)=>{s.disableClass.each(d=>{Cs(t.element,d)}),(Zg(t,s)?T_:KD)(t),s.onDisabled(t)},Bw=(t,s,a)=>{s.disableClass.each(d=>{ea(t.element,d)}),(Zg(t,s)?Mw:yx)(t),s.onEnabled(t)},wx=(t,s)=>Zg(t,s)?vx(t):k_(t);var Mv=Object.freeze({__proto__:null,enable:Bw,disable:Nw,isDisabled:wx,onLoad:Rv,set:(t,s,a,l)=>{(l?Nw:Bw)(t,s)}}),__=Object.freeze({__proto__:null,exhibit:(t,s)=>ju({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Gs([P2($s(),(a,l)=>wx(a,t)),Ey(t,s,Rv)])}),XD=[Ta("disabled",zn),Te("useNative",!0),ss("disableClass"),Se("onDisabled"),Se("onEnabled")];const Vn=cc({fields:XD,name:"disabling",active:__,apis:Mv}),Fm=(t,s,a,l)=>{const d=Pa(t.element,"."+s.highlightClass);mt(d,g=>{es(l,w=>Yo(w.element,g))||(ea(g,s.highlightClass),t.getSystem().getByDom(g).each(w=>{s.onDehighlight(t,w),Xo(w,Pp())}))})},$w=(t,s,a)=>Fm(t,s,a,[]),O_=(t,s,a,l)=>{Pw(t,s,a,l)&&(ea(l.element,s.highlightClass),s.onDehighlight(t,l),Xo(l,Pp()))},S1=(t,s,a,l)=>{Fm(t,s,a,[l]),Pw(t,s,a,l)||(Cs(l.element,s.highlightClass),s.onHighlight(t,l),Xo(l,B2()))},JD=(t,s,a)=>{Iw(t,s).each(l=>{S1(t,s,a,l)})},Nv=(t,s,a)=>{Bv(t,s).each(l=>{S1(t,s,a,l)})},A_=(t,s,a,l)=>{Jh(t,s,a,l).fold(d=>{throw d},d=>{S1(t,s,a,d)})},D_=(t,s,a,l)=>{const d=$v(t,s);qt(d,l).each(p=>{S1(t,s,a,p)})},Pw=(t,s,a,l)=>Wa(l.element,s.highlightClass),Xh=(t,s,a)=>Tr(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Jh=(t,s,a,l)=>{const d=Pa(t.element,"."+s.itemClass);return O.from(d[l]).fold(()=>Ct.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},Iw=(t,s,a)=>Tr(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Bv=(t,s,a)=>{const l=Pa(t.element,"."+s.itemClass);return(l.length>0?O.some(l[l.length-1]):O.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Fw=(t,s,a,l)=>{const d=Pa(t.element,"."+s.itemClass);return ro(d,p=>Wa(p,s.highlightClass)).bind(p=>{const w=Ih(p,l,0,d.length-1);return t.getSystem().getByDom(d[w]).toOptional()})},Lw=(t,s,a)=>Fw(t,s,a,-1),R_=(t,s,a)=>Fw(t,s,a,1),$v=(t,s,a)=>{const l=Pa(t.element,"."+s.itemClass);return Xa(De(l,d=>t.getSystem().getByDom(d).toOptional()))};var Hw=Object.freeze({__proto__:null,dehighlightAll:$w,dehighlight:O_,highlight:S1,highlightFirst:JD,highlightLast:Nv,highlightAt:A_,highlightBy:D_,isHighlighted:Pw,getHighlighted:Xh,getFirst:Iw,getLast:Bv,getPrevious:Lw,getNext:R_,getCandidates:$v}),Vw=[Qe("highlightClass"),Qe("itemClass"),Se("onHighlight"),Se("onDehighlight")];const Jo=cc({fields:Vw,name:"highlighting",apis:Hw}),Cx=[8],jd=[9],Qu=[13],x1=[27],ai=[32],Pv=[37],jg=[38],T1=[39],Lm=[40],zw=(t,s,a)=>{const l=ks(t.slice(0,s)),d=ks(t.slice(s+1));return qt(l.concat(d),a)},Iv=(t,s,a)=>{const l=ks(t.slice(0,s));return qt(l,a)},Qh=(t,s,a)=>{const l=t.slice(0,s),d=t.slice(s+1);return qt(d.concat(l),a)},_5=(t,s,a)=>{const l=t.slice(s+1);return qt(l,a)},zo=t=>s=>{const a=s.raw;return po(t,a.which)},ku=t=>s=>Vr(t,a=>a(s)),Gg=t=>t.raw.shiftKey===!0,Sx=t=>t.raw.ctrlKey===!0,k1=Pe(Gg),Wo=(t,s)=>({matches:t,classification:s}),xx=(t,s)=>qt(t,l=>l.matches(s)).map(l=>l.classification),Tx=(t,s,a)=>{s.exists(d=>a.exists(g=>Yo(g,d)))||wn(t,Ob(),{prevFocus:s,newFocus:a})},Uw=()=>{const t=a=>Yu(a.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().triggerFocus(l,a.element);const g=t(a);Tx(a,d,g)}}},Ww=()=>{const t=a=>Jo.getHighlighted(a).map(l=>l.element);return{get:t,set:(a,l)=>{const d=t(a);a.getSystem().getByDom(l).fold(G,p=>{Jo.highlight(a,p)});const g=t(a);Tx(a,d,g)}}};var ep;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(ep||(ep={}));const qg=(t,s,a,l,d)=>{const g=()=>t.concat([Te("focusManager",Uw()),cl("focusInside","onFocus",kd(_=>po(["onFocus","onEnterOrSpace","onApi"],_)?Ct.value(_):Ct.error("Invalid value for focusInside"))),qs("handler",x),qs("state",s),qs("sendFocusIn",d)]),p=(_,D,B,I,V)=>{const X=B(_,D,I,V);return xx(X,D.event).bind(le=>le(_,D,I,V))},x={schema:g,processKey:p,toEvents:(_,D)=>{const B=_.focusInside!==ep.OnFocusMode?O.none():d(_).map(X=>nt(Ad(),(le,Ee)=>{X(le,_,D),Ee.stop()})),I=(X,le)=>{const Ee=zo(ai.concat(Qu))(le.event);_.focusInside===ep.OnEnterOrSpaceMode&&Ee&&bm(X,le)&&d(_).each(ye=>{ye(X,_,D),le.stop()})},V=[nt(Ll(),(X,le)=>{p(X,le,a,_,D).fold(()=>{I(X,le)},Ee=>{le.stop()})}),nt(D2(),(X,le)=>{p(X,le,l,_,D).each(Ee=>{le.stop()})})];return Gs(B.toArray().concat(V))}};return x},kx=t=>{const s=[ss("onEscape"),ss("onEnter"),Te("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Te("firstTabstop",0),Te("useTabstopAt",Wt),ss("visibilitySelector")].concat([t]),a=(le,Ee)=>{const ye=le.visibilitySelector.bind(ke=>Bd(Ee,ke)).getOr(Ee);return ze(ye)>0},l=(le,Ee)=>{const ye=Pa(le.element,Ee.selector),ke=Pn(ye,Ne=>a(Ee,Ne));return O.from(ke[Ee.firstTabstop])},d=(le,Ee)=>Ee.focusManager.get(le).bind(ye=>Bd(ye,Ee.selector)),g=(le,Ee)=>a(le,Ee)&&le.useTabstopAt(Ee),p=(le,Ee,ye)=>{l(le,Ee).each(ke=>{Ee.focusManager.set(le,ke)})},w=(le,Ee,ye,ke,Ne)=>Ne(Ee,ye,Le=>g(ke,Le)).fold(()=>ke.cyclic?O.some(!0):O.none(),Le=>(ke.focusManager.set(le,Le),O.some(!0))),x=(le,Ee,ye,ke)=>{const Ne=Pa(le.element,ye.selector);return d(le,ye).bind(Le=>ro(Ne,Ye(Yo,Le)).bind(st=>w(le,Ne,st,ye,ke)))},_=(le,Ee,ye)=>{const ke=ye.cyclic?zw:Iv;return x(le,Ee,ye,ke)},D=(le,Ee,ye)=>{const ke=ye.cyclic?Qh:_5;return x(le,Ee,ye,ke)},B=(le,Ee,ye)=>ye.onEnter.bind(ke=>ke(le,Ee)),I=(le,Ee,ye)=>ye.onEscape.bind(ke=>ke(le,Ee)),V=q([Wo(ku([Gg,zo(jd)]),_),Wo(zo(jd),D),Wo(ku([k1,zo(Qu)]),B)]),X=q([Wo(zo(x1),I)]);return qg(s,ti.init,V,X,()=>O.some(p))};var i=kx(Os("cyclic",zn)),m=kx(Os("cyclic",Wt));const h=(t,s,a)=>(hg(t,a,$s()),O.some(!0)),v=(t,s,a)=>Rf(a)&&zo(ai)(s.event)?O.none():h(t,s,a),T=(t,s)=>O.some(!0),A=[Te("execute",v),Te("useSpace",!1),Te("useEnter",!0),Te("useControlEnter",!1),Te("useDown",!1)],P=(t,s,a)=>a.execute(t,s,t.element),U=(t,s,a,l)=>{const d=a.useSpace&&!Rf(t.element)?ai:[],g=a.useEnter?Qu:[],p=a.useDown?Lm:[],w=d.concat(g).concat(p);return[Wo(zo(w),P)].concat(a.useControlEnter?[Wo(ku([Sx,zo(Qu)]),P)]:[])},J=(t,s,a,l)=>a.useSpace&&!Rf(t.element)?[Wo(zo(ai),T)]:[];var ce=qg(A,ti.init,U,J,()=>O.none());const Ce=()=>{const t=Hs();return zl({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Bt=Object.freeze({__proto__:null,flatgrid:Ce,init:t=>t.state(t)});const _t=t=>(s,a,l,d)=>{const g=t(s.element);return Jt(g,s,a,l,d)},Ge=(t,s)=>{const a=nv(t,s);return _t(a)},Rt=(t,s)=>{const a=nv(s,t);return _t(a)},Ze=t=>(s,a,l,d)=>Jt(t,s,a,l,d),Jt=(t,s,a,l,d)=>l.focusManager.get(s).bind(p=>t(s.element,p,l,d)).map(p=>(l.focusManager.set(s,p),!0)),Fn=Ze,no=Ze,zs=Ze,Ec=t=>t.offsetWidth<=0&&t.offsetHeight<=0,jr=t=>!Ec(t.dom),ci=(t,s)=>ro(t,s).map(a=>({index:a,candidates:t})),Mf=(t,s,a)=>{const l=p=>Yo(p,s),d=Pa(t,a),g=Pn(d,jr);return ci(g,l)},E1=(t,s)=>ro(t,a=>Yo(s,a)),Zw=(t,s,a,l)=>{const d=Math.floor(s/a),g=s%a;return l(d,g).bind(p=>{const w=p.row*a+p.column;return w>=0&&w<t.length?O.some(t[w]):O.none()})},Fv=(t,s,a,l,d)=>Zw(t,s,l,(g,p)=>{const x=g===a-1?t.length-g*l:l,_=Ih(p,d,0,x-1);return O.some({row:g,column:_})}),As=(t,s,a,l,d)=>Zw(t,s,l,(g,p)=>{const w=Ih(g,d,0,a-1),_=w===a-1?t.length-w*l:l,D=ni(p,0,_-1);return O.some({row:w,column:D})}),kl=(t,s,a,l)=>Fv(t,s,a,l,1),El=(t,s,a,l)=>Fv(t,s,a,l,-1),Eu=(t,s,a,l)=>As(t,s,a,l,-1),li=(t,s,a,l)=>As(t,s,a,l,1),Nf=[Qe("selector"),Te("execute",v),gr("onEscape"),Te("captureTab",!1),jp()],_l=(t,s,a)=>{Tr(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},Ex=(t,s)=>s.focusManager.get(t).bind(a=>Bd(a,s.selector)),tp=(t,s,a,l)=>Ex(t,a).bind(d=>a.execute(t,s,d)),qi=t=>(s,a,l,d)=>Mf(s,a,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),Fc=(t,s,a)=>a.captureTab?O.some(!0):O.none(),Ki=(t,s,a)=>a.onEscape(t,s),_x=qi(El),Ox=qi(kl),M_=qi(Eu),N_=qi(li),jw=q([Wo(zo(Pv),Ge(_x,Ox)),Wo(zo(T1),Rt(_x,Ox)),Wo(zo(jg),Fn(M_)),Wo(zo(Lm),no(N_)),Wo(ku([Gg,zo(jd)]),Fc),Wo(ku([k1,zo(jd)]),Fc),Wo(zo(ai.concat(Qu)),tp)]),np=q([Wo(zo(x1),Ki),Wo(zo(ai),T)]);var Kg=qg(Nf,Ce,jw,np,()=>O.some(_l));const QD=(t,s,a,l,d)=>{const g=w=>tc(w)==="button"&&Ur(w,"disabled")==="disabled",p=(w,x,_)=>d(w,x,l,0,_.length-1,_[x],D=>g(_[D])?p(w,D,_):O.from(_[D]));return Mf(t,a,s).bind(w=>{const x=w.index,_=w.candidates;return p(x,x,_)})},Ax=(t,s,a,l)=>QD(t,s,a,l,(d,g,p,w,x,_,D)=>{const B=ni(g+p,w,x);return B===d?O.from(_):D(B)}),_1=(t,s,a,l)=>QD(t,s,a,l,(d,g,p,w,x,_,D)=>{const B=Ih(g,p,w,x);return B===d?O.none():D(B)}),B_=[Qe("selector"),Te("getInitial",O.none),Te("execute",v),gr("onEscape"),Te("executeOnMove",!1),Te("allowVertical",!0),Te("allowHorizontal",!0),Te("cycles",!0)],O5=(t,s)=>s.focusManager.get(t).bind(a=>Bd(a,s.selector)),$_=(t,s,a)=>O5(t,a).bind(l=>a.execute(t,s,l)),A5=(t,s,a)=>{s.getInitial(t).orThunk(()=>Tr(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},e3=(t,s,a)=>(a.cycles?_1:Ax)(t,a.selector,s,-1),t3=(t,s,a)=>(a.cycles?_1:Ax)(t,a.selector,s,1),n3=t=>(s,a,l,d)=>t(s,a,l,d).bind(()=>l.executeOnMove?$_(s,a,l):O.some(!0)),o3=(t,s,a)=>a.onEscape(t,s),P_=(t,s,a,l)=>{const d=[...a.allowHorizontal?Pv:[]].concat(a.allowVertical?jg:[]),g=[...a.allowHorizontal?T1:[]].concat(a.allowVertical?Lm:[]);return[Wo(zo(d),n3(Ge(e3,t3))),Wo(zo(g),n3(Rt(e3,t3))),Wo(zo(Qu),$_),Wo(zo(ai),$_)]},D5=q([Wo(zo(ai),T),Wo(zo(x1),o3)]);var R5=qg(B_,ti.init,P_,D5,()=>O.some(A5));const Dx=(t,s,a)=>O.from(t[s]).bind(l=>O.from(l[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),s3=(t,s,a,l)=>{const g=t[s].length,p=Ih(a,l,0,g-1);return Dx(t,s,p)},op=(t,s,a,l)=>{const d=Ih(a,l,0,t.length-1),g=t[d].length,p=ni(s,0,g-1);return Dx(t,d,p)},r3=(t,s,a,l)=>{const g=t[s].length,p=ni(a+l,0,g-1);return Dx(t,s,p)},a3=(t,s,a,l)=>{const d=ni(a+l,0,t.length-1),g=t[d].length,p=ni(s,0,g-1);return Dx(t,d,p)},I_=(t,s,a)=>s3(t,s,a,1),M5=(t,s,a)=>s3(t,s,a,-1),c3=(t,s,a)=>op(t,a,s,-1),l3=(t,s,a)=>op(t,a,s,1),i3=(t,s,a)=>r3(t,s,a,-1),u3=(t,s,a)=>r3(t,s,a,1),N5=(t,s,a)=>a3(t,a,s,-1),B5=(t,s,a)=>a3(t,a,s,1),$5=[Hu("selectors",[Qe("row"),Qe("cell")]),Te("cycles",!0),Te("previousSelector",O.none),Te("execute",v)],F_=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Tr(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},P5=(t,s,a)=>Yu(t.element).bind(l=>a.execute(t,s,l)),I5=(t,s)=>De(t,a=>Pa(a,s.selectors.cell)),Rx=(t,s)=>(a,l,d)=>{const g=d.cycles?t:s;return Bd(l,d.selectors.row).bind(p=>{const w=Pa(p,d.selectors.cell);return E1(w,l).bind(x=>{const _=Pa(a,d.selectors.row);return E1(_,p).bind(D=>{const B=I5(_,d);return g(B,D,x).map(I=>I.cell)})})})},d3=Rx(M5,i3),L_=Rx(I_,u3),F5=Rx(c3,N5),L5=Rx(l3,B5),H5=q([Wo(zo(Pv),Ge(d3,L_)),Wo(zo(T1),Rt(d3,L_)),Wo(zo(jg),Fn(F5)),Wo(zo(Lm),no(L5)),Wo(zo(ai.concat(Qu)),P5)]),m3=q([Wo(zo(ai),T)]);var V5=qg($5,ti.init,H5,m3,()=>O.some(F_));const z5=[Qe("selector"),Te("execute",v),Te("moveOnTab",!1)],H_=(t,s,a)=>a.focusManager.get(t).bind(l=>a.execute(t,s,l)),U5=(t,s,a)=>{Tr(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},f3=(t,s,a)=>_1(t,a.selector,s,-1),Gw=(t,s,a)=>_1(t,a.selector,s,1),W5=(t,s,a,l)=>a.moveOnTab?zs(f3)(t,s,a,l):O.none(),g3=(t,s,a,l)=>a.moveOnTab?zs(Gw)(t,s,a,l):O.none(),Ei=q([Wo(zo(jg),zs(f3)),Wo(zo(Lm),zs(Gw)),Wo(ku([Gg,zo(jd)]),W5),Wo(ku([k1,zo(jd)]),g3),Wo(zo(Qu),H_),Wo(zo(ai),H_)]),Z5=q([Wo(zo(ai),T)]);var h3=qg(z5,ti.init,Ei,Z5,()=>O.some(U5));const j5=[gr("onSpace"),gr("onEnter"),gr("onShiftEnter"),gr("onLeft"),gr("onRight"),gr("onTab"),gr("onShiftTab"),gr("onUp"),gr("onDown"),gr("onEscape"),Te("stopSpaceKeyup",!1),ss("focusIn")],G5=(t,s,a)=>[Wo(zo(ai),a.onSpace),Wo(ku([k1,zo(Qu)]),a.onEnter),Wo(ku([Gg,zo(Qu)]),a.onShiftEnter),Wo(ku([Gg,zo(jd)]),a.onShiftTab),Wo(ku([k1,zo(jd)]),a.onTab),Wo(zo(jg),a.onUp),Wo(zo(Lm),a.onDown),Wo(zo(Pv),a.onLeft),Wo(zo(T1),a.onRight),Wo(zo(ai),a.onSpace)],p3=(t,s,a)=>[...a.stopSpaceKeyup?[Wo(zo(ai),T)]:[],Wo(zo(x1),a.onEscape)];var q5=qg(j5,ti.init,G5,p3,t=>t.focusIn);const b3=i.schema(),v3=m.schema(),K5=R5.schema(),Y5=Kg.schema(),X5=V5.schema(),J5=ce.schema(),y3=h3.schema(),w3=q5.schema();var sp=Object.freeze({__proto__:null,acyclic:b3,cyclic:v3,flow:K5,flatgrid:Y5,matrix:X5,execution:J5,menu:y3,special:w3});const C3=t=>ba(t,"setGridSize"),Sn=bS({branchKey:"mode",branches:sp,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,a)})},setGridSize:(t,s,a,l,d)=>{C3(a)?a.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:Bt}),Mx=(t,s)=>{Yb(()=>{QS(t,s,()=>De(s,t.getSystem().build))},t.element)},S3=(t,s)=>{Yb(()=>{a_(t,s,()=>X2(t.element,s,t.getSystem().buildOrPatch))},t.element)},Q5=(t,s,a,l)=>{gv(s);const d=Y2(t.element,a,l,t.getSystem().buildOrPatch);fv(t,d),t.syncComponents()},V_=(t,s,a)=>{const l=t.getSystem().build(a);m1(t,l,s)},eF=(t,s,a,l)=>{Vd(s),V_(t,(d,g)=>Ra(d,g,a),l)},x3=(t,s,a,l)=>(s.reuseDom?S3:Mx)(t,l),z_=(t,s,a,l)=>{V_(t,rl,l)},U_=(t,s,a,l)=>{V_(t,mh,l)},tF=(t,s,a,l)=>{const d=Hm(t);qt(d,p=>Yo(l.element,p.element)).each(Vd)},Hm=(t,s)=>t.components(),W_=(t,s,a,l,d)=>{const g=Hm(t);return O.from(g[l]).map(p=>(d.fold(()=>Vd(p),w=>{(s.reuseDom?Q5:eF)(t,p,l,w)}),p))};var oF=Object.freeze({__proto__:null,append:z_,prepend:U_,remove:tF,replaceAt:W_,replaceBy:(t,s,a,l,d)=>{const g=Hm(t);return ro(g,l).bind(p=>W_(t,s,a,p,d))},set:x3,contents:Hm});const Kn=cc({fields:[za("reuseDom",!0)],name:"replacing",apis:oF}),qw=(t,s)=>{const a=Gs(s);return cc({fields:[Qe("enabled")],name:t,active:{events:q(a)}})},Jn=(t,s)=>{const a=qw(t,s);return{key:t,value:{config:{},me:a,configAsRaw:q({}),initialConfig:{},state:ti}}},Z_=(t,s)=>{s.ignore||(wu(t.element),s.onFocus(t))};var rp=Object.freeze({__proto__:null,focus:Z_,blur:(t,s)=>{s.ignore||Oy(t.element)},isFocused:t=>Qp(t.element)}),T3=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return ju(a)},events:t=>Gs([nt(Ad(),(s,a)=>{Z_(s,t),a.stop()})].concat(t.stopMousedown?[nt(Qr(),(s,a)=>{a.event.prevent()})]:[]))}),Yg=[Se("onFocus"),Te("stopMousedown",!1),Te("ignore",!1)];const Rn=cc({fields:Yg,name:"focusing",active:T3,apis:rp}),k3=t=>({init:()=>{const a=S(t);return{get:()=>a.get(),set:w=>a.set(w),clear:()=>a.set(t),readState:()=>a.get()}}}),E3=(t,s,a)=>{const l=s.aria;l.update(t,l,a.get())},_3=(t,s,a)=>{s.toggleClass.each(l=>{a.get()?Cs(t.element,l):ea(t.element,l)})},A1=(t,s,a,l)=>{const d=a.get();a.set(l),_3(t,s,a),E3(t,s,a),d!==l&&s.onToggled(t,l)},j_=(t,s,a)=>{A1(t,s,a,!a.get())},rF=(t,s,a)=>{A1(t,s,a,!0)},aF=(t,s,a)=>{A1(t,s,a,!1)},cF=(t,s,a)=>a.get(),Kw=(t,s,a)=>{A1(t,s,a,s.selected)};var G_=Object.freeze({__proto__:null,onLoad:Kw,toggle:j_,isOn:cF,on:rF,off:aF,set:A1}),lF=Object.freeze({__proto__:null,exhibit:()=>ju({}),events:(t,s)=>{const a=Kb(t,s,j_),l=Ey(t,s,Kw);return Gs(jt([t.toggleOnExecute?[a]:[],[l]]))}});const A3=(t,s,a)=>{Hn(t.element,"aria-pressed",a),s.syncWithExpanded&&q_(t,s,a)},D3=(t,s,a)=>{Hn(t.element,"aria-selected",a)},R3=(t,s,a)=>{Hn(t.element,"aria-checked",a)},q_=(t,s,a)=>{Hn(t.element,"aria-expanded",a)};var iF=[Te("selected",!1),ss("toggleClass"),Te("toggleOnExecute",!0),Se("onToggled"),cl("aria",{mode:"none"},Xr("mode",{pressed:[Te("syncWithExpanded",!1),qs("update",A3)],checked:[qs("update",R3)],expanded:[qs("update",q_)],selected:[qs("update",D3)],none:[qs("update",G)]}))];const lo=cc({fields:iF,name:"toggling",active:lF,apis:G_,state:k3(!1)}),M3=()=>{const t=(s,a)=>{a.stop(),Cm(s)};return[nt(wi(),t),nt(Mp(),t),bg(gu()),bg(Qr())]},Nx=t=>{const s=a=>Wu((l,d)=>{a(l),d.stop()});return Gs(jt([t.map(s).toArray(),M3()]))},N3="alloy.item-hover",B3="alloy.item-focus",K_="alloy.item-toggled",$3=t=>{(Yu(t.element).isNone()||Rn.isFocused(t))&&(Rn.isFocused(t)||Rn.focus(t),wn(t,N3,{item:t}))},P3=t=>{wn(t,B3,{item:t})},uF=(t,s)=>{wn(t,K_,{item:t,state:s})},Lv=q(N3),dF=q(B3),Yw=q(K_),Y_=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),I3=t=>({aria:{mode:"checked"},...pa(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{tt(t.onToggled)&&t.onToggled(s,a),uF(s,a)}}),F3=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:Y_(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:xu.augment(t.itemBehaviours,[t.toggling.fold(lo.revoke,s=>lo.config(I3(s))),Rn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{P3(s)}}),Sn.config({mode:"execution"}),Ft.config({store:{mode:"memory",initialValue:t.data}}),Jn("item-type-events",[...M3(),nt(yi(),$3),nt(Dd(),Rn.focus)])]),components:t.components,eventOrder:t.eventOrder}),mF=[Qe("data"),Qe("components"),Qe("dom"),Te("hasSubmenu",!1),ss("toggling"),xu.field("itemBehaviours",[lo,Rn,Sn,Ft]),Te("ignoreFocus",!1),Te("domModification",{}),qs("builder",F3),Te("eventOrder",{})],fF=t=>({dom:t.dom,components:t.components,events:Gs([q0(Dd())])}),L3=[Qe("dom"),Qe("components"),qs("builder",fF)],X_=q("item-widget"),Bx=q([ja({name:"widget",overrides:t=>({behaviours:yt([Ft.config({store:{mode:"manual",getValue:s=>t.data,setValue:G}})])})})]),gF=t=>{const s=Sw(X_(),t,Bx()),a=xw(X_(),t,s.internals()),l=g=>Vs(g,t,"widget").map(p=>(Sn.focusIn(p),p)),d=(g,p)=>Rf(p.event.target)?O.none():(()=>(t.autofocus&&p.setSource(g.element),O.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:Gs([Wu((g,p)=>{l(g).each(w=>{p.stop()})}),nt(yi(),$3),nt(Dd(),(g,p)=>{t.autofocus?l(g):Rn.focus(g)})]),behaviours:xu.augment(t.widgetBehaviours,[Ft.config({store:{mode:"memory",initialValue:t.data}}),Rn.config({ignore:t.ignoreFocus,onFocus:g=>{P3(g)}}),Sn.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:vS(),onLeft:d,onRight:d,onEscape:(g,p)=>!Rn.isFocused(g)&&!t.autofocus?(Rn.focus(g),O.some(!0)):(t.autofocus&&p.setSource(g.element),O.none())})])}},hF=[Qe("uid"),Qe("data"),Qe("components"),Qe("dom"),Te("autofocus",!1),Te("ignoreFocus",!1),xu.field("widgetBehaviours",[Ft,Rn,Sn]),Te("domModification",{}),Aw(Bx()),qs("builder",gF)],H3=Xr("type",{widget:hF,item:mF,separator:L3}),$x=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),J_=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),Q_=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),pF=q([C1({factory:{sketch:t=>{const s=xc("menu.spec item",H3,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>oo(s,"uid")?s:{...s,uid:Ci("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),bF=q([Qe("value"),Qe("items"),Qe("dom"),Qe("components"),Te("eventOrder",{}),uc("menuBehaviours",[Jo,Ft,Ro,Sn]),cl("movement",{mode:"menu",moveOnTab:!0},Xr("mode",{grid:[jp(),qs("config",$x)],matrix:[qs("config",J_),Qe("rowSelector"),Te("previousSelector",O.none)],menu:[Te("moveOnTab",!0),qs("config",Q_)]})),iS(),Te("fakeFocus",!1),Te("focusManager",Uw()),Se("onHighlight"),Se("onDehighlight")]),V3=q("alloy.menu-focus"),vF=(t,s)=>{const a=Pa(t.element,'[role="menuitemradio"][aria-checked="true"]');mt(a,l=>{Yo(l,s.element)||t.getSystem().getByDom(l).each(d=>{lo.off(d)})})},z3=(t,s,a,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:cr(t.menuBehaviours,[Jo.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Ft.config({store:{mode:"memory",initialValue:t.value}}),Ro.config({find:O.some}),Sn.config(t.movement.config(t,t.movement))]),events:Gs([nt(dF(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(w=>{Jo.highlight(d,w),g.stop(),wn(d,V3(),{menu:d,item:w})})}),nt(Lv(),(d,g)=>{const p=g.event.item;Jo.highlight(d,p)}),nt(Yw(),(d,g)=>{const{item:p,state:w}=g.event;w&&Ur(p.element,"role")==="menuitemradio"&&vF(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),ap=ta({name:"Menu",configFields:bF(),partFields:pF(),factory:z3}),yF=t=>nn(t,(s,a)=>({k:s,v:a})),U3=(t,s,a,l)=>pt(a,l).bind(d=>pt(t,d).bind(g=>{const p=U3(t,s,a,g);return O.some([g].concat(p))})).getOr([]),wF=(t,s)=>{const a={};Je(t,(p,w)=>{mt(p,x=>{a[x]=w})});const l=s,d=yF(s),g=Gt(d,(p,w)=>[w].concat(U3(a,l,d,w)));return Gt(a,p=>pt(g,p).getOr([p]))},CF=()=>{const t=S({}),s=S({}),a=S({}),l=Hs(),d=S({}),g=()=>{t.set({}),s.set({}),a.set({}),l.clear()},p=()=>l.get().isNone(),w=(kt,st)=>{s.set({...s.get(),[kt]:{type:"prepared",menu:st}})},x=(kt,st,$t,an)=>{l.set(kt),t.set($t),s.set(st),d.set(an);const yo=wF(an,$t);a.set(yo)},_=kt=>Ss(t.get(),(st,$t)=>st===kt),D=(kt,st,$t)=>le(kt).bind(an=>_(kt).bind(yo=>st(yo).map(xn=>({triggeredMenu:an,triggeringItem:xn,triggeringPath:$t})))),B=(kt,st)=>{const $t=Pn(ye(kt).toArray(),an=>le(an).isSome());return pt(a.get(),kt).bind(an=>{const yo=ks($t.concat(an)),xn=Ve(yo,(ho,Wn)=>D(ho,st,yo.slice(0,Wn+1)).fold(()=>ar(l.get(),ho)?[]:[O.none()],mo=>[O.some(mo)]));return Ko(xn)})},I=kt=>pt(t.get(),kt).map(st=>{const $t=pt(a.get(),kt).getOr([]);return[st].concat($t)}),V=kt=>pt(a.get(),kt).bind(st=>st.length>1?O.some(st.slice(1)):O.none()),X=kt=>pt(a.get(),kt),le=kt=>Ee(kt).bind(W3),Ee=kt=>pt(s.get(),kt),ye=kt=>pt(t.get(),kt);return{setMenuBuilt:w,setContents:x,expand:I,refresh:X,collapse:V,lookupMenu:Ee,lookupItem:ye,otherMenus:kt=>{const st=d.get();return mn(ts(st),kt)},getPrimary:()=>l.get().bind(le),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:B}},W3=t=>t.type==="prepared"?O.some(t.menu):O.none(),Z3={init:CF,extractPreparedMenu:W3},eO=en("tiered-menu-item-highlight"),j3=en("tiered-menu-item-dehighlight");var ii;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ii||(ii={}));const SF=(t,s)=>{const a=Hs(),l=(vt,rn,Vt)=>Gt(Vt,(Nn,so)=>{const No=()=>ap.sketch({...Nn,value:so,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(_a,rs)=>{wn(_a,eO,{menuComp:_a,itemComp:rs})},onDehighlight:(_a,rs)=>{wn(_a,j3,{menuComp:_a,itemComp:rs})},focusManager:t.fakeFocus?Ww():Uw()});return so===rn?{type:"prepared",menu:vt.getSystem().build(No())}:{type:"notbuilt",nbMenu:No}}),d=Z3.init(),g=vt=>{const rn=l(vt,t.data.primary,t.data.menus),Vt=x();return d.setContents(t.data.primary,rn,t.data.expansions,Vt),d.getPrimary()},p=vt=>Ft.getValue(vt).value,w=(vt,rn,Vt)=>us(rn,Nn=>{if(!Nn.getSystem().isConnected())return O.none();const so=Jo.getCandidates(Nn);return qt(so,No=>p(No)===Vt)}),x=vt=>Gt(t.data.menus,(rn,Vt)=>Ve(rn.items,Nn=>Nn.type==="separator"?[]:[Nn.data.value])),_=Jo.highlight,D=(vt,rn)=>{_(vt,rn),Jo.getHighlighted(rn).orThunk(()=>Jo.getFirst(rn)).each(Vt=>{t.fakeFocus?Jo.highlight(rn,Vt):hg(vt,Vt.element,Dd())})},B=(vt,rn)=>Xa(De(rn,Vt=>vt.lookupMenu(Vt).bind(Nn=>Nn.type==="prepared"?O.some(Nn.menu):O.none()))),I=(vt,rn,Vt)=>{const Nn=B(rn,rn.otherMenus(Vt));mt(Nn,so=>{Sl(so.element,[t.markers.backgroundMenu]),t.stayInDom||Kn.remove(vt,so)})},V=vt=>a.get().getOrThunk(()=>{const rn={},Vt=Pa(vt.element,`.${t.markers.item}`),Nn=Pn(Vt,so=>Ur(so,"aria-haspopup")==="true");return mt(Nn,so=>{vt.getSystem().getByDom(so).each(No=>{const _a=p(No);rn[_a]=No})}),a.set(rn),rn}),X=(vt,rn)=>{const Vt=V(vt);Je(Vt,(Nn,so)=>{const No=po(rn,so);Hn(Nn.element,"aria-expanded",No)})},le=(vt,rn,Vt)=>O.from(Vt[0]).bind(Nn=>rn.lookupMenu(Nn).bind(so=>{if(so.type==="notbuilt")return O.none();{const No=so.menu,_a=B(rn,Vt.slice(1));return mt(_a,rs=>{Cs(rs.element,t.markers.backgroundMenu)}),$o(No.element)||Kn.append(vt,Ul(No)),Sl(No.element,[t.markers.backgroundMenu]),D(vt,No),I(vt,rn,Vt),O.some(No)}}));let Ee;(function(vt){vt[vt.HighlightSubmenu=0]="HighlightSubmenu",vt[vt.HighlightParent=1]="HighlightParent"})(Ee||(Ee={}));const ye=(vt,rn,Vt)=>{if(Vt.type==="notbuilt"){const Nn=vt.getSystem().build(Vt.nbMenu());return d.setMenuBuilt(rn,Nn),Nn}else return Vt.menu},ke=(vt,rn,Vt=Ee.HighlightSubmenu)=>{if(rn.hasConfigured(Vn)&&Vn.isDisabled(rn))return O.some(rn);{const Nn=p(rn);return d.expand(Nn).bind(so=>(X(vt,so),O.from(so[0]).bind(No=>d.lookupMenu(No).bind(_a=>{const rs=ye(vt,No,_a);return $o(rs.element)||Kn.append(vt,Ul(rs)),t.onOpenSubmenu(vt,rn,rs,ks(so)),Vt===Ee.HighlightSubmenu?(Jo.highlightFirst(rs),le(vt,d,so)):(Jo.dehighlightAll(rs),O.some(rn))}))))}},Ne=(vt,rn)=>{const Vt=p(rn);return d.collapse(Vt).bind(Nn=>(X(vt,Nn),le(vt,d,Nn).map(so=>(t.onCollapseMenu(vt,rn,so),so))))},Le=(vt,rn)=>{const Vt=p(rn);return d.refresh(Vt).bind(Nn=>(X(vt,Nn),le(vt,d,Nn)))},kt=(vt,rn)=>Rf(rn.element)?O.none():ke(vt,rn,Ee.HighlightSubmenu),st=(vt,rn)=>Rf(rn.element)?O.none():Ne(vt,rn),$t=(vt,rn)=>Ne(vt,rn).orThunk(()=>t.onEscape(vt,rn).map(()=>vt)),an=vt=>(rn,Vt)=>Bd(Vt.getSource(),`.${t.markers.item}`).bind(Nn=>rn.getSystem().getByDom(Nn).toOptional().bind(so=>vt(rn,so).map(Wt))),yo=Gs([nt(V3(),(vt,rn)=>{const Vt=rn.event.item;d.lookupItem(p(Vt)).each(()=>{const Nn=rn.event.menu;Jo.highlight(vt,Nn);const so=p(rn.event.item);d.refresh(so).each(No=>I(vt,d,No))})}),Wu((vt,rn)=>{const Vt=rn.event.target;vt.getSystem().getByDom(Vt).each(Nn=>{p(Nn).indexOf("collapse-item")===0&&Ne(vt,Nn),ke(vt,Nn,Ee.HighlightSubmenu).fold(()=>{t.onExecute(vt,Nn)},G)})}),Br((vt,rn)=>{g(vt).each(Vt=>{Kn.append(vt,Ul(Vt)),t.onOpenMenu(vt,Vt),t.highlightOnOpen===ii.HighlightMenuAndItem?D(vt,Vt):t.highlightOnOpen===ii.HighlightJustMenu&&_(vt,Vt)})}),nt(eO,(vt,rn)=>{t.onHighlightItem(vt,rn.event.menuComp,rn.event.itemComp)}),nt(j3,(vt,rn)=>{t.onDehighlightItem(vt,rn.event.menuComp,rn.event.itemComp)}),...t.navigateOnHover?[nt(Lv(),(vt,rn)=>{const Vt=rn.event.item;Le(vt,Vt),ke(vt,Vt,Ee.HighlightParent),t.onHover(vt,Vt)})]:[]]),xn=vt=>Jo.getHighlighted(vt).bind(Jo.getHighlighted),ho=vt=>{xn(vt).each(rn=>{Ne(vt,rn)})},Wn=vt=>{d.getPrimary().each(rn=>{D(vt,rn)})},mo=vt=>O.from(vt.components()[0]).filter(rn=>Ur(rn.element,"role")==="menu"),fs={collapseMenu:ho,highlightPrimary:Wn,repositionMenus:vt=>{d.getPrimary().bind(Vt=>xn(vt).bind(Nn=>{const so=p(Nn),No=Or(d.getMenus()),_a=Xa(De(No,Z3.extractPreparedMenu));return d.getTriggeringPath(so,rs=>w(vt,_a,rs))}).map(Nn=>({primary:Vt,triggeringPath:Nn}))).fold(()=>{mo(vt).each(Vt=>{t.onRepositionMenu(vt,Vt,[])})},({primary:Vt,triggeringPath:Nn})=>{t.onRepositionMenu(vt,Vt,Nn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:cr(t.tmenuBehaviours,[Sn.config({mode:"special",onRight:an(kt),onLeft:an(st),onEscape:an($t),focusIn:(vt,rn)=>{d.getPrimary().each(Vt=>{hg(vt,Vt.element,Dd())})}}),Jo.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Ro.config({find:vt=>Jo.getHighlighted(vt)}),Kn.config({})]),eventOrder:t.eventOrder,apis:fs,events:yo}},xF=q("collapse-item"),TF=(t,s,a)=>({primary:t,menus:s,expansions:a}),D1=(t,s)=>({primary:t,menus:Xn(t,s),expansions:{}}),kF=t=>({value:en(xF()),meta:{text:t}}),R1=ma({name:"TieredMenu",configFields:[gy("onExecute"),gy("onEscape"),_g("onOpenMenu"),_g("onOpenSubmenu"),Se("onRepositionMenu"),Se("onCollapseMenu"),Te("highlightOnOpen",ii.HighlightMenuAndItem),Hu("data",[Qe("primary"),Qe("menus"),Qe("expansions")]),Te("fakeFocus",!1),Se("onHighlightItem"),Se("onDehighlightItem"),Se("onHover"),Ku(),Qe("dom"),Te("navigateOnHover",!0),Te("stayInDom",!1),uc("tmenuBehaviours",[Sn,Jo,Ro,Kn]),Te("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:SF,extraApis:{tieredData:TF,singleData:D1,collapseItem:kF}}),M1=(t,s,a,l,d)=>{const g=()=>t.lazySink(s),p=l.type==="horizontal"?{layouts:{onLtr:()=>Xp(),onRtl:()=>Gb()}}:{},w=_=>_.length===2,x=_=>w(_)?p:{};return R1.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(So.close(s),t.onEscape.map(_=>_(s)),O.some(!0)),onExecute:()=>O.some(!0),onOpenMenu:(_,D)=>{Lr.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(_,D,B,I)=>{const V=g().getOrDie();Lr.position(V,B,{anchor:{type:"submenu",item:D,...x(I)}})},onRepositionMenu:(_,D,B)=>{const I=g().getOrDie();Lr.positionWithinBounds(I,D,a,d()),mt(B,V=>{const X=x(V.triggeringPath);Lr.position(I,V.triggeredMenu,{anchor:{type:"submenu",item:V.triggeringItem,...X}})})}})},EF=(t,s)=>{const a=(I,V)=>t.getRelated(I).exists(le=>kg(le,V)),l=(I,V)=>{So.setContent(I,V)},d=(I,V,X)=>{const le=O.none;g(I,V,X,le)},g=(I,V,X,le)=>{const Ee=t.lazySink(I).getOrDie();So.openWhileCloaked(I,V,()=>Lr.positionWithinBounds(Ee,I,X,le())),Ft.setValue(I,O.some({mode:"position",config:X,getBounds:le}))},p=(I,V,X)=>{w(I,V,X,O.none)},w=(I,V,X,le)=>{const Ee=M1(t,I,V,X,le);So.open(I,Ee),Ft.setValue(I,O.some({mode:"menu",menu:Ee}))},x=I=>{So.isOpen(I)&&(Ft.setValue(I,O.none()),So.close(I))},_=I=>So.getState(I),D=I=>{So.isOpen(I)&&Ft.getValue(I).each(V=>{switch(V.mode){case"menu":So.getState(I).each(R1.repositionMenus);break;case"position":const X=t.lazySink(I).getOrDie();Lr.positionWithinBounds(X,I,V.config,V.getBounds());break}})},B={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:p,showMenuWithinBounds:w,hide:x,getContent:_,reposition:D,isOpen:So.isOpen};return{uid:t.uid,dom:t.dom,behaviours:cr(t.inlineBehaviours,[So.config({isPartOf:(I,V,X)=>kg(V,X)||a(I,X),getAttachPoint:I=>t.lazySink(I).getOrDie(),onOpen:I=>{t.onShow(I)},onClose:I=>{t.onHide(I)}}),Ft.config({store:{mode:"memory",initialValue:O.none()}}),zi.config({channels:{...h1({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({})}),...zg({...t.fireRepositionEventInstead.map(I=>({fireEventInstead:{event:I.event}})).getOr({}),doReposition:D})}})]),eventOrder:t.eventOrder,apis:B}},ka=ma({name:"InlineView",configFields:[Qe("lazySink"),Se("onShow"),Se("onHide"),Tc("onEscape"),uc("inlineBehaviours",[So,Ft,zi]),Ic("fireDismissalEventInstead",[Te("event",ff())]),Ic("fireRepositionEventInstead",[Te("event",$p())]),Te("getRelated",O.none),Te("isExtraPart",zn),Te("eventOrder",O.none)],factory:EF,apis:{showAt:(t,s,a,l)=>{t.showAt(s,a,l)},showWithinBounds:(t,s,a,l,d)=>{t.showWithinBounds(s,a,l,d)},showMenuAt:(t,s,a,l)=>{t.showMenuAt(s,a,l)},showMenuWithinBounds:(t,s,a,l,d)=>{t.showMenuWithinBounds(s,a,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var Vm=tinymce.util.Tools.resolve("tinymce.util.Delay");const Xc=ma({name:"Button",factory:t=>{const s=Nx(t.action),a=t.dom.tag,l=g=>pt(t.dom,"attributes").bind(p=>pt(p,g)),d=()=>{if(a==="button"){const g=l("type").getOr("button"),p=l("role").map(w=>({role:w})).getOr({});return{type:g,...p}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:xu.augment(t.buttonBehaviours,[Rn.config({}),Sn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Te("uid",void 0),Qe("dom"),Te("components",[]),xu.field("buttonBehaviours",[Rn,Sn]),ss("action"),ss("role"),Te("eventOrder",{})]}),xo=t=>{const s=sn(t)&&ba(t,"uid")?t.uid:Ci("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var _u=tinymce.util.Tools.resolve("tinymce.util.I18n");const G3={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},tO="temporary-placeholder",nO=t=>()=>pt(t,tO).getOr("!not found!"),Xw=(t,s)=>{const a=t.toLowerCase();if(_u.isRtl()){const l=Is(a,"-rtl");return oo(s,l)?l:a}else return a},q3=(t,s)=>pt(s,Xw(t,s)),K3=(t,s)=>{const a=s();return q3(t,a).getOrThunk(nO(a))},_F=(t,s,a)=>{const l=s();return q3(t,l).or(a).getOrThunk(nO(l))},Px=t=>_u.isRtl()?oo(G3,t):!1,Jw=()=>Jn("add-focusable",[Br(t=>{Om(t.element,"svg").each(s=>Hn(s,"focusable","false"))})]),Y3=(t,s,a,l)=>{var d,g;const p=Px(s)?["tox-icon--flip"]:[],w=pt(a,Xw(s,a)).or(l).getOrThunk(nO(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:w},behaviours:yt([...(g=t.behaviours)!==null&&g!==void 0?g:[],Jw()])}},ed=(t,s,a,l=O.none())=>Y3(s,t,a(),l),X3=(t,s,a)=>{const l=a(),d=qt(t,g=>oo(l,Xw(g,l)));return Y3(s,d.getOr(tO),l,O.none())},OF={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},oO=ma({name:"Notification",factory:t=>{const s=xo({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:yt([Kn.config({})])}),a=V=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${V}%`}}}),l=V=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${V}%`}}),d=xo({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:yt([Kn.config({})])}),w={updateProgress:(V,X)=>{V.getSystem().isConnected()&&d.getOpt(V).each(le=>{Kn.set(le,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(X)]},l(X)])})},updateText:(V,X)=>{if(V.getSystem().isConnected()){const le=s.get(V);Kn.set(le,[fr(X)])}}},x=jt([t.icon.toArray(),t.level.toArray(),t.level.bind(V=>O.from(OF[V])).toArray()]),_=xo(Xc.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[ed("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:V=>{t.onAction(V)}})),D=X3(x,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),B={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:yt([Kn.config({})])},I=[D,B];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(V=>["tox-notification","tox-notification--in",`tox-notification--${V}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:yt([Rn.config({}),Jn("notification-events",[nt(mf(),V=>{_.getOpt(V).each(Rn.focus)})])]),components:I.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[_.asSpec()]:[]),apis:w}},configFields:[ss("level"),Qe("progress"),ss("icon"),Qe("onAction"),Qe("text"),Qe("iconProvider"),Qe("translationProvider"),za("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var sO=(t,s,a)=>{const l=s.backstage.shared,d=()=>{const x=E(pe.fromDom(t.getContentAreaContainer())),_=me(),D=ni(_.x,x.x,x.right),B=ni(_.y,x.y,x.bottom),I=Math.max(x.right,_.right),V=Math.max(x.bottom,_.bottom);return O.some(js(D,B,I-D,V-B))};return{open:(x,_)=>{const D=()=>{_(),ka.hide(I)},B=Kc(oO.sketch({text:x.text,level:po(["success","error","warning","warn","info"],x.type)?x.type:void 0,progress:x.progressBar===!0,icon:x.icon,closeButton:x.closeButton,onAction:D,iconProvider:l.providers.icons,translationProvider:l.providers.translate})),I=Kc(ka.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:l.getSink,fireDismissalEventInstead:{},...l.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(I),pn(x.timeout)&&x.timeout>0&&Vm.setEditorTimeout(t,()=>{D()},x.timeout);const X={close:D,reposition:()=>{const le=Ul(B),Ee={maxHeightFunction:Rg()},ye=t.notificationManager.getNotifications();if(ye[0]===X){const ke={...l.anchors.banner(),overrides:Ee};ka.showWithinBounds(I,le,{anchor:ke},d)}else je(ye,X).each(ke=>{const Ne=ye[ke-1].getEl(),Le={type:"node",root:Zs(),node:O.some(pe.fromDom(Ne)),overrides:Ee,layouts:{onRtl:()=>[kc],onLtr:()=>[kc]}};ka.showWithinBounds(I,le,{anchor:Le},d)})},text:le=>{oO.updateText(B,le)},settings:x,getEl:()=>B.element.dom,progressBar:{value:le=>{oO.updateProgress(B,le)}}};return X},close:x=>{x.close()},getArgs:x=>x.settings}},Qw=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),eC=tinymce.util.Tools.resolve("tinymce.EditorManager"),Xg=tinymce.util.Tools.resolve("tinymce.Env"),Ou;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Ou||(Ou={}));var Hv;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Hv||(Hv={}));const nr=t=>s=>s.options.get(t),tC=t=>s=>O.from(t(s)),Q3=t=>{const s=Xg.deviceType.isPhone(),a=Xg.deviceType.isTablet()||s,l=t.options.register,d=p=>Et(p)||p===!1,g=p=>Et(p)||pn(p);l("skin",{processor:p=>Et(p)||p===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:Qw.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:p=>Et(p)||fn(p),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:p=>fn(p)||Et(p)||hn(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Bo(9,p=>{l("toolbar"+(p+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:Hv.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:p=>p==="both"||fn(p),default:!Xg.deviceType.isTouch()}),l("sidebar_show",{processor:"string"})},eR=nr("readonly"),nC=nr("height"),Ix=nr("width"),Fx=tC(nr("min_width")),oC=tC(nr("min_height")),Lx=tC(nr("max_width")),Hx=tC(nr("max_height")),tR=tC(nr("style_formats")),nR=nr("style_formats_merge"),oR=nr("style_formats_autohide"),rO=nr("content_langs"),sR=nr("removed_menuitems"),Vv=nr("toolbar_mode"),Vx=nr("toolbar_groups"),zx=nr("toolbar_location"),rR=nr("fixed_toolbar_container"),AF=nr("fixed_toolbar_container_target"),Ux=nr("toolbar_persist"),aR=nr("toolbar_sticky_offset"),cR=nr("menubar"),Wx=nr("toolbar"),lR=nr("file_picker_callback"),iR=nr("file_picker_validator_handler"),aO=nr("font_size_input_default_unit"),Zx=nr("file_picker_types"),uR=nr("typeahead_urls"),sC=nr("anchor_top"),dR=nr("anchor_bottom"),mR=nr("draggable_modal"),fR=nr("statusbar"),gR=nr("elementpath"),hR=nr("branding"),pR=nr("resize"),cO=nr("paste_as_text"),bR=nr("sidebar_show"),vR=nr("promotion"),rC=t=>t.options.get("skin")===!1,Bf=t=>t.options.get("menubar")!==!1,yR=t=>{const s=t.options.get("skin_url");if(rC(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return eC.baseURL+"/skins/ui/"+a}},wR=t=>t.options.get("line_height_formats").split(" "),zv=t=>{const s=Wx(t),a=Et(s),l=hn(s)&&s.length>0;return!Uv(t)&&(l||a||s===!0)},lO=t=>{const s=Bo(9,l=>t.options.get("toolbar"+(l+1))),a=Pn(s,Et);return kn(a.length>0,a)},Uv=t=>lO(t).fold(()=>{const s=Wx(t);return Ke(s,Et)&&s.length>0},Wt),iO=t=>zx(t)===Hv.bottom,uO=t=>{var s;if(!t.inline)return O.none();const a=(s=rR(t))!==null&&s!==void 0?s:"";if(a.length>0)return Tr(Zs(),a);const l=AF(t);return it(l)?O.some(pe.fromDom(l)):O.none()},N1=t=>t.inline&&uO(t).isSome(),aC=t=>uO(t).getOrThunk(()=>ct(Fe(pe.fromDom(t.getElement())))),dO=t=>t.inline&&!Bf(t)&&!zv(t)&&!Uv(t),Wv=t=>(t.options.get("toolbar_sticky")||t.inline)&&!N1(t)&&!dO(t),cp=t=>!N1(t)&&t.options.get("ui_mode")==="split",Zv=t=>{const s=t.options.get("menu");return Gt(s,a=>({...a,items:a.items}))};var DF=Object.freeze({__proto__:null,get ToolbarMode(){return Ou},get ToolbarLocation(){return Hv},register:Q3,getSkinUrl:yR,isReadOnly:eR,isSkinDisabled:rC,getHeightOption:nC,getWidthOption:Ix,getMinWidthOption:Fx,getMinHeightOption:oC,getMaxWidthOption:Lx,getMaxHeightOption:Hx,getUserStyleFormats:tR,shouldMergeStyleFormats:nR,shouldAutoHideStyleFormats:oR,getLineHeightFormats:wR,getContentLanguages:rO,getRemovedMenuItems:sR,isMenubarEnabled:Bf,isMultipleToolbars:Uv,isToolbarEnabled:zv,isToolbarPersist:Ux,getMultipleToolbarsOption:lO,getUiContainer:aC,useFixedContainer:N1,isSplitUiMode:cp,getToolbarMode:Vv,isDraggableModal:mR,isDistractionFree:dO,isStickyToolbar:Wv,getStickyToolbarOffset:aR,getToolbarLocation:zx,isToolbarLocationBottom:iO,getToolbarGroups:Vx,getMenus:Zv,getMenubar:cR,getToolbar:Wx,getFilePickerCallback:lR,getFilePickerTypes:Zx,useTypeaheadUrls:uR,getAnchorTop:sC,getAnchorBottom:dR,getFilePickerValidatorHandler:iR,getFontSizeInputDefaultUnit:aO,useStatusBar:fR,useElementPath:gR,promotionEnabled:vR,useBranding:hR,getResize:pR,getPasteAsText:cO,getSidebarShow:bR});const CR="[data-mce-autocompleter]",jx=t=>Bd(t,CR),mO=t=>Tr(t,CR),SR={setup:(t,s)=>{const a=(d,g)=>{wn(d,Ll(),{raw:g})},l=()=>t.getMenu().bind(Jo.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(Cm),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(Jo.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&jx(pe.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var fO;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(fO||(fO={}));var zm=fO;const cC="tox-menu-nav__js",Gx="tox-collection__item",gO="tox-swatch",RF={normal:cC,color:gO},xR="tox-collection__item--enabled",MF="tox-collection__group-heading",TR="tox-collection__item-icon",hO="tox-collection__item-label",NF="tox-collection__item-accessory",kR="tox-collection__item-caret",BF="tox-collection__item-checkmark",lC="tox-collection__item--active",ER="tox-collection__item-container",pO="tox-collection__item-container--column",_R="tox-collection__item-container--row",$F="tox-collection__item-container--align-right",PF="tox-collection__item-container--align-left",OR="tox-collection__item-container--valign-top",IF="tox-collection__item-container--valign-middle",FF="tox-collection__item-container--valign-bottom",AR=t=>pt(RF,t).getOr(cC),LF=t=>t==="color"?"tox-swatches":"tox-menu",bO=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:LF(t),tieredMenu:"tox-tiered-menu"}),B1=t=>{const s=bO(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:AR(t)}},vO=(t,s,a)=>{const l=bO(a);return{tag:"div",classes:jt([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},HF=[ap.parts.items({})],qx=(t,s,a)=>{const l=bO(a);return{dom:{tag:"div",classes:jt([[l.tieredMenu]])},markers:B1(a)}},DR=q([ss("data"),Te("inputAttributes",{}),Te("inputStyles",{}),Te("tag","input"),Te("inputClasses",[]),Se("onSetValue"),Te("styles",{}),Te("eventOrder",{}),uc("inputBehaviours",[Ft,Rn]),Te("selectOnFocus",!0)]),RR=t=>yt([Rn.config({onFocus:t.selectOnFocus?s=>{const a=s.element,l=Si(a);a.dom.setSelectionRange(0,l.length)}:G})]),VF=t=>({...RR(t),...cr(t.inputBehaviours,[Ft.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Si(s.element),setValue:(s,a)=>{Si(s.element)!==a&&pu(s.element,a)}},onSetValue:t.onSetValue})])}),MR=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),zF=(t,s)=>({uid:t.uid,dom:MR(t),components:[],behaviours:VF(t),eventOrder:t.eventOrder}),$1=ma({name:"Input",configFields:DR(),factory:zF}),NR=en("refetch-trigger-event"),BR=en("redirect-menu-item-interaction"),$R="tox-menu__searcher",Kx=t=>Tr(t.element,`.${$R}`).bind(s=>t.getSystem().getByDom(s).toOptional()),iC=Kx,UF=(t,s)=>{Ft.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},Yx=t=>{const s=Ft.getValue(t),a=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},WF=(t,s)=>{$(s.element,"id").each(a=>Hn(t.element,"aria-activedescendant",a))},ZF=t=>{const s=(d,g)=>(g.cut(),O.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return wn(d,BR,p),O.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[Gx]},components:[$1.sketch({inputClasses:[$R,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:yt([Jn(l,[nt(Hl(),d=>{Xo(d,NR)}),nt(Ll(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Sn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,Sn.name()]}})]}},Xx="tox-collection--results__js",PR=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:en("aria-item-search-result-id"),"aria-selected":"false"}}}:t},yO=(t,s)=>a=>{const l=Ts(a,s);return De(l,d=>({dom:t,components:d}))},IR=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ap.parts.items({preprocess:t!=="auto"?yO({tag:"div",classes:["tox-swatches__row"]},t):ht})]}]}),jF=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ap.parts.items({preprocess:yO({tag:"div",classes:["tox-collection__group"]},t)})]}),Jx=(t,s)=>{const a=[];let l=[];return mt(t,(d,g)=>{s(d,g)?(l.length>0&&a.push(l),l=[],(oo(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&a.push(l),De(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},uC=(t,s,a)=>ap.parts.items({preprocess:l=>{const d=De(l,a);return t!=="auto"&&t>1?yO({tag:"div",classes:["tox-collection__group"]},t)(d):Jx(d,(g,p)=>s[p].type==="separator")}}),wO=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[uC(t,s,ht)]}),CO=(t,s,a=!0)=>{const l=en("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Xx].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[uC(t,s,PR)]}},Qx=(t,s,a)=>{const l=en("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[ZF({i18n:_u.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Xx],attributes:{id:l}},components:[uC(t,s,PR)]}]}},FR=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[ap.parts.items({preprocess:a=>Jx(a,(l,d)=>t[d].type==="separator")})]}),td=t=>es(t,s=>"icon"in s&&s.icon!==void 0),Um=t=>(console.error(uf(t)),console.log(t),O.none()),GF=(t,s,a,l,d)=>{const g=FR(a);return{value:t,dom:g.dom,components:g.components,items:a}},SO=(t,s,a,l,d)=>{const g=()=>d.menuType!=="searchable"?wO(l,a):d.searchMode.searchMode==="search-with-field"?Qx(l,a,d.searchMode):CO(l,a);if(d.menuType==="color"){const p=IR(l);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&l==="auto"){const p=wO(l,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&l!=="auto"){const p=jF(l);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:vO(s,l,d.menuType),components:HF,items:a}},Ea=Ir("type"),xO=Ir("name"),lp=Ir("label"),Jg=Ir("text"),LR=Ir("title"),eT=Ir("icon"),jv=Ir("value"),TO=vi("fetch"),qF=vi("getSubmenuItems"),ip=vi("onAction"),kO=vi("onItemAction"),P1=Ta("onSetup",()=>G),HR=Pc("name"),Qg=Pc("text"),Gd=Pc("icon"),tT=Pc("tooltip"),EO=Pc("label"),KF=Pc("shortcut"),YF=Tc("select"),dC=za("active",!1),VR=za("borderless",!1),qd=za("enabled",!0),mC=za("primary",!1),_O=t=>Te("columns",t),I1=Te("meta",{}),nT=Ta("onAction",G),F1=t=>wl("type",t),OO=t=>Jr("name","name",Sd(()=>en(`${t}-name`)),Nr),zR=t=>Jr("value","value",Sd(()=>en(`${t}-value`)),$l()),UR=Cn([Ea,Qg]),XF=t=>ys("separatormenuitem",UR,t),WR=Cn([F1("autocompleteitem"),dC,qd,I1,jv,Qg,Gd]),ZR=t=>ys("Autocompleter.Separator",UR,t),jR=t=>ys("Autocompleter.Item",WR,t),Gv=[qd,tT,Gd,Qg,P1],JF=Cn([Ea,ip].concat(Gv)),GR=t=>ys("toolbarbutton",JF,t),oT=[dC].concat(Gv),AO=Cn(oT.concat([Ea,ip])),sT=t=>ys("ToggleButton",AO,t),DO=[Ta("predicate",zn),Il("scope","node",["node","editor"]),Il("position","selection",["node","selection","line"])],qR=Gv.concat([F1("contextformbutton"),mC,ip,Os("original",ht)]),KR=oT.concat([F1("contextformbutton"),mC,ip,Os("original",ht)]),QF=Gv.concat([F1("contextformbutton")]),RO=oT.concat([F1("contextformtogglebutton")]),eL=Xr("type",{contextformbutton:qR,contextformtogglebutton:KR}),YR=Cn([F1("contextform"),Ta("initValue",q("")),EO,yl("commands",eL),du("launch",Xr("type",{contextformbutton:QF,contextformtogglebutton:RO}))].concat(DO)),XR=t=>ys("ContextForm",YR,t),L1=Cn([F1("contexttoolbar"),Ir("items")].concat(DO)),tL=t=>ys("ContextToolbar",L1,t),MO=[Ea,Ir("src"),Pc("alt"),Th("classes",[],Nr)],rT=Cn(MO),nL=[Ea,Jg,HR,Th("classes",["tox-collection__item-label"],Nr)],JR=Cn(nL),NO=wh(()=>Pl("type",{cardimage:rT,cardtext:JR,cardcontainer:QR})),QR=Cn([Ea,wl("direction","horizontal"),wl("align","left"),wl("valign","middle"),yl("items",NO)]),up=[qd,Qg,KF,zR("menuitem"),I1],eM=Cn([Ea,EO,yl("items",NO),P1,nT].concat(up)),oL=t=>ys("cardmenuitem",eM,t),tM=Cn([Ea,dC,Gd].concat(up)),nM=t=>ys("choicemenuitem",tM,t),BO=[Ea,Ir("fancytype"),nT],oM=[Te("initData",{})].concat(BO),sL=[Tc("select"),C("initData",{},[za("allowCustomColors",!0),wl("storageKey","default"),kb("colors",$l())])].concat(BO),sM=Xr("fancytype",{inserttable:oM,colorswatch:sL}),fC=t=>ys("fancymenuitem",sM,t),rL=Cn([Ea,P1,nT,Gd].concat(up)),aL=t=>ys("menuitem",rL,t),cL=Cn([Ea,qF,P1,Gd].concat(up)),rM=t=>ys("nestedmenuitem",cL,t),aM=Cn([Ea,Gd,dC,P1,ip].concat(up)),lL=t=>ys("togglemenuitem",aM,t),$O=(t,s,a)=>{const l=Pa(t.element,"."+a);if(l.length>0){const d=ro(l,g=>{const p=g.dom.getBoundingClientRect().top,w=l[0].dom.getBoundingClientRect().top;return Math.abs(p-w)>s}).getOr(l.length);return O.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return O.none()},cM=(t,s)=>yt([Jn(t,s)]),gC={namedEvents:cM,unnamedEvents:t=>cM(en("unnamed-events"),t)},hC=en("tooltip.exclusive"),pC=en("tooltip.show"),qv=en("tooltip.hide"),PO=(t,s,a)=>{t.getSystem().broadcastOn([hC],{})};var uL=Object.freeze({__proto__:null,hideAllExclusive:PO,setComponents:(t,s,a,l)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Kn.set(d,l)})}}),lM=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{Vd(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},l=d=>{if(!s.isShowing()){PO(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Gs(t.mode==="normal"?[nt(yi(),w=>{Xo(d,pC)}),nt(mg(),w=>{Xo(d,qv)})]:[]),behaviours:yt([Kn.config({})])});s.setTooltip(p),Hd(g,p),t.onShow(d,p),Lr.position(g,p,{anchor:t.anchor(d)})}};return Gs(jt([[nt(pC,d=>{s.resetTimer(()=>{l(d)},t.delay)}),nt(qv,d=>{s.resetTimer(()=>{a(d)},t.delay)}),nt(gg(),(d,g)=>{const p=g;p.universal||po(p.channels,hC)&&a(d)}),Vl(d=>{a(d)})],t.mode==="normal"?[nt(mf(),d=>{Xo(d,pC)}),nt(F0(),d=>{Xo(d,qv)}),nt(yi(),d=>{Xo(d,pC)}),nt(mg(),d=>{Xo(d,qv)})]:[nt(B2(),(d,g)=>{Xo(d,pC)}),nt(Pp(),d=>{Xo(d,qv)})]]))}}),iM=[Qe("lazySink"),Qe("tooltipDom"),Te("exclusive",!0),Te("tooltipComponents",[]),Te("delay",300),Il("mode","normal",["normal","follow-highlight"]),Te("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:q([kc,Fr,ac,Tl,$a,oi]),onRtl:q([kc,Fr,ac,Tl,$a,oi])}})),Se("onHide"),Se("onShow")],fL=Object.freeze({__proto__:null,init:()=>{const t=Hs(),s=Hs(),a=()=>{t.on(clearTimeout)},l=(g,p)=>{a(),t.set(setTimeout(g,p))},d=q("not-implemented");return zl({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:l,readState:d})}});const uM=cc({fields:iM,name:"tooltipping",active:lM,state:fL,apis:uL}),gL=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),dM="silver.readonly",mM=Cn([Rp("readonly")]),bC=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&mt(d,g=>{g.broadcastOn([Nm()],{target:l})}),mt(d,g=>{g.broadcastOn([dM],{readonly:s})})},fM=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&bC(s,!0)}),t.on("SwitchMode",()=>bC(s,t.mode.isReadOnly())),eR(t)&&t.mode.set("readonly")},dc=()=>zi.config({channels:{[dM]:{schema:mM,onReceive:(t,s)=>{Vn.set(t,s.readonly)}}}}),Kd={item:t=>Vn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Vn.config({disabled:t}),splitButton:t=>Vn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Vn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},Kv=(t,s)=>{const a=t.getApi(s);return l=>{l(a)}},dp=(t,s)=>Br(a=>{Kv(t,a)(d=>{const g=t.onSetup(d);tt(g)&&s.set(g)})}),H1=(t,s)=>Vl(a=>Kv(t,a)(s.get())),hL=(t,s)=>Wu((a,l)=>{Kv(t,a)(t.onAction),!t.triggersSubmenu&&s===zm.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Xo(a,Eh()),l.stop())}),gM={[$s()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Yv=Xa,Xv=(t,s,a,l)=>{const d=S(G);return{type:"item",dom:s.dom,components:Yv(s.optComponents),data:t.data,eventOrder:gM,hasSubmenu:t.triggersSubmenu,itemBehaviours:yt([Jn("item-events",[hL(t,a),dp(t,d),H1(t,d)]),Kd.item(()=>!t.enabled||l.isDisabled()),dc(),Kn.config({})].concat(t.itemBehaviours))}},V1=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),hM=t=>{const s=Xg.os.isMacOS()||Xg.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=De(g,w=>{const x=w.toLowerCase().trim();return oo(d,x)?d[x]:w});return s?p.join(""):p.join("+")},aT=(t,s,a=[TR])=>ed(t,{tag:"div",classes:a},s),pM=t=>({dom:{tag:"div",classes:[hO]},components:[fr(_u.translate(t))]}),bM=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),pL=(t,s)=>({dom:{tag:"div",classes:[hO]},components:[{dom:{tag:t.tag,styles:t.styles},components:[fr(_u.translate(s))]}]}),bL=t=>({dom:{tag:"div",classes:[NF]},components:[fr(hM(t))]}),vM=t=>aT("checkmark",t,[BF]),z1=t=>aT("chevron-right",t,[kR]),IO=t=>aT("chevron-down",t,[kR]),vL=(t,s)=>{const a=t.direction==="vertical"?pO:_R,l=t.align==="left"?PF:$F;return{dom:{tag:"div",classes:[ER,a,l,(()=>{switch(t.valign){case"top":return OR;case"middle":return IF;case"bottom":return FF}})()]},components:s}},cT=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),Wm=(t,s,a)=>{const l="custom",d="remove",g=t.ariaLabel,p=t.value,w=t.iconContent.map(_=>_F(_,s.icons,a));return{dom:(()=>{const _=gO,D=w.getOr(""),I={tag:"div",attributes:g.map(V=>({title:s.translate(V)})).getOr({}),classes:[_]};return p===l?{...I,tag:"button",classes:[...I.classes,"tox-swatches__picker-btn"],innerHtml:D}:p===d?{...I,classes:[...I.classes,"tox-swatch--remove"],innerHtml:D}:it(p)?{...I,attributes:{...I.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:D}:I})(),optComponents:[]}},yM=t=>{const s=t.map(a=>({attributes:{title:_u.translate(a)}})).getOr({});return{tag:"div",classes:[cC,Gx],...s}},yL=(t,s,a,l)=>{const d={tag:"div",classes:[TR]},g=I=>ed(I,d,s.icons,l),p=()=>O.some({dom:d}),w=a?t.iconContent.map(g).orThunk(p):O.none(),x=t.checkMark,_=O.from(t.meta).fold(()=>pM,I=>oo(I,"style")?Ye(pL,I.style):pM),D=t.htmlContent.fold(()=>t.textContent.map(_),I=>O.some(bM(I,[hO])));return{dom:yM(t.ariaLabel),optComponents:[w,D,t.shortcutContent.map(bL),x,t.caret]}},vC=(t,s,a,l=O.none())=>t.presets==="color"?Wm(t,s,l):yL(t,s,a,l),lT=(t,s)=>pt(t,"tooltipWorker").map(a=>[uM.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:Rg}}),mode:"follow-highlight",onShow:(l,d)=>{a(g=>{uM.setComponents(l,[vf({element:pe.fromDom(g)})])})}})]).getOr([]),wL=t=>Qw.DOM.encode(t),wM=(t,s)=>{const a=_u.translate(t),l=wL(a);if(s.length>0){const d=new RegExp(gL(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},CM=(t,s,a,l,d,g,p,w=!0)=>{const x=vC({presets:l,textContent:O.none(),htmlContent:a?t.text.map(_=>wM(_,s)):O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:O.none(),checkMark:O.none(),caret:O.none(),value:t.value},p.providers,w,t.icon);return Xv({data:V1(t),enabled:t.enabled,getApi:q({}),onAction:_=>d(t.value,t.meta),onSetup:q(G),triggersSubmenu:!1,itemBehaviours:lT(t.meta,p)},x,g,p.providers)},SM=(t,s)=>De(t,a=>{switch(a.type){case"cardcontainer":return vL(a,SM(a.items,s));case"cardimage":return cT(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>po(s.cardText.highlightOn,g))?O.from(s.cardText.matchText).getOr(""):"";return bM(wM(a.text,d),a.classes)}}),CL=(t,s,a,l)=>{const d=p=>({isEnabled:()=>!Vn.isDisabled(p),setEnabled:w=>{Vn.set(p,!w),mt(Pa(p.element,"*"),x=>{p.getSystem().getByDom(x).each(_=>{_.hasConfigured(Vn)&&Vn.set(_,!w)})})}}),g={dom:yM(t.label),optComponents:[O.some({dom:{tag:"div",classes:[ER,_R]},components:SM(t.items,l)})]};return Xv({data:V1({text:O.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:O.from(l.itemBehaviours).getOr([])},g,s,a.providers)},SL=(t,s,a,l,d,g,p,w=!0)=>{const x=D=>({setActive:B=>{lo.set(D,B)},isActive:()=>lo.isOn(D),isEnabled:()=>!Vn.isDisabled(D),setEnabled:B=>Vn.set(D,!B)}),_=vC({presets:a,textContent:s?t.text:O.none(),htmlContent:O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:O.none(),checkMark:s?O.some(vM(p.icons)):O.none(),caret:O.none(),value:t.value},p,w);return Ns(Xv({data:V1(t),enabled:t.enabled,getApi:x,onAction:D=>l(t.value),onSetup:D=>(D.setActive(d),G),triggersSubmenu:!1,itemBehaviours:[]},_,g,p),{toggling:{toggleClass:xR,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},_i=ww(X_(),Bx()),Zm=t=>({value:iT(t)}),xM=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,FO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,yC=t=>xM.test(t)||FO.test(t),iT=t=>ec(t,"#").toUpperCase(),xL=t=>yC(t)?O.some({value:iT(t)}):O.none(),TL=t=>({value:t.value.replace(xM,(a,l,d,g)=>l+l+d+d+g+g)}),wC=t=>{const s=TL(t),a=FO.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},Jv=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},CC=t=>{const s=Jv(t.red)+Jv(t.green)+Jv(t.blue);return Zm(s)},eh=Math.min,TM=Math.max,uT=Math.round,Yi=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,LO=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Zl=(t,s,a,l)=>({red:t,green:s,blue:a,alpha:l}),HO=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},Ps=t=>{let s,a,l;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=TM(0,eh(g,1)),p=TM(0,eh(p,1)),g===0)return s=a=l=uT(255*p),Zl(s,a,l,1);const w=d/60,x=p*g,_=x*(1-Math.abs(w%2-1)),D=p-x;switch(Math.floor(w)){case 0:s=x,a=_,l=0;break;case 1:s=_,a=x,l=0;break;case 2:s=0,a=x,l=_;break;case 3:s=0,a=_,l=x;break;case 4:s=_,a=0,l=x;break;case 5:s=x,a=0,l=_;break;default:s=a=l=0}return s=uT(255*(s+D)),a=uT(255*(a+D)),l=uT(255*(l+D)),Zl(s,a,l,1)},jm=t=>{const s=wC(t),a=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return Zl(a,l,d,1)},SC=(t,s,a,l)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),w=parseFloat(l);return Zl(d,g,p,w)},dT=t=>{if(t==="transparent")return O.some(Zl(0,0,0,0));const s=Yi.exec(t);if(s!==null)return O.some(SC(s[1],s[2],s[3],"1"));const a=LO.exec(t);return a!==null?O.some(SC(a[1],a[2],a[3],a[4])):O.none()},mT=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,fT=Zl(255,0,0,1),kL=t=>{t.dispatch("SkinLoaded")},VO=(t,s)=>{t.dispatch("SkinLoadError",s)},EL=t=>{t.dispatch("ResizeEditor")},gT=(t,s)=>{t.dispatch("ResizeContent",s)},kM=(t,s)=>{t.dispatch("ScrollContent",s)},hT=(t,s)=>{t.dispatch("TextColorChange",s)},EM=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},pT=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),_L=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})};var U1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const _M={},OL=(t,s=10)=>{const a=U1.getItem(t),l=Et(a)?JSON.parse(a):[],g=(_=>s-_.length<0?_.slice(0,s):_)(l),p=_=>{je(g,_).each(w),g.unshift(_),g.length>s&&g.pop(),U1.setItem(t,JSON.stringify(g))},w=_=>{g.splice(_,1)};return{add:p,state:()=>g.slice(0)}},OM=t=>pt(_M,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=U1.getItem(s);if(Pt(a)){const d=U1.getItem("tinymce-custom-colors");U1.setItem(s,it(d)?d:"[]")}const l=OL(s,10);return _M[t]=l,l}),AL=t=>De(OM(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),AM=(t,s)=>{OM(t).add(s)},xC=(t,s,a)=>({hue:t,saturation:s,value:a}),zO=t=>{let s=0,a=0,l=0;const d=t.red/255,g=t.green/255,p=t.blue/255,w=Math.min(d,Math.min(g,p)),x=Math.max(d,Math.max(g,p));if(w===x)return l=w,xC(0,0,l*100);const _=d===w?g-p:p===w?d-g:p-d;return s=d===w?3:p===w?1:5,s=60*(s-_/(x-w)),a=(x-w)/x,l=x,xC(Math.round(s),Math.round(a*100),Math.round(l*100))},DL=t=>zO(jm(t)),UO=t=>CC(Ps(t)),RL=t=>xL(t).orThunk(()=>dT(t).map(CC)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,d=l[0],g=l[1],p=l[2],w=l[3];return CC(Zl(d,g,p,w))}),bT="forecolor",WO="hilitecolor",ZO=5,DM=t=>Math.max(ZO,Math.ceil(Math.sqrt(t))),RM=(t,s)=>{const a=DM(s),l=$f("color_cols")(t);return ZO===a?l:a},ML=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+RL(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},$f=t=>s=>s.options.get(t),vT="#000000",Gm=t=>{const s=t.options.register,a=l=>Ke(l,Et)?{value:ML(l),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:DM(Qv(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:RM(t,Qv(t,bT).length)}),s("color_cols_background",{processor:"number",default:RM(t,Qv(t,WO).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:vT}),s("color_default_background",{processor:"string",default:vT})},NL=(t,s)=>s===bT?$f("color_cols_foreground")(t):s===WO?$f("color_cols_background")(t):$f("color_cols")(t),yT=(t,s)=>{const a=NL(t,s);return a>0?a:ZO},jO=$f("custom_colors"),Qv=(t,s)=>s===bT&&t.options.isSet("color_map_foreground")?$f("color_map_foreground")(t):s===WO&&t.options.isSet("color_map_background")?$f("color_map_background")(t):$f("color_map")(t),MM=$f("color_default_foreground"),NM=$f("color_default_background"),BM="rgba(0, 0, 0, 0)",BL=t=>dT(t).exists(s=>s.alpha!==0),$L=t=>fu(t,s=>{if(Vo(s)){const a=et(s,"background-color");return kn(BL(a),a)}else return O.none()}).getOr(BM),$M=(t,s)=>{const a=pe.fromDom(t.selection.getStart()),l=s==="hilitecolor"?$L(a):et(a,"color");return dT(l).map(d=>"#"+CC(d).value)},PL=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},PM=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},IM=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{PL(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{PM(t,s)})},GO=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},qO=(t,s,a,l)=>{a==="custom"?XO(t)(g=>{g.each(p=>{AM(s,p),t.execCommand("mceApplyTextcolor",s,p),l(p)})},$M(t,s).getOr(vT)):a==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(a),t.execCommand("mceApplyTextcolor",s,a))},FM=(t,s,a)=>t.concat(AL(s).concat(GO(a))),LM=(t,s,a)=>l=>{l(FM(t,s,a))},mp=(t,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,a)},HM=(t,s)=>a=>{const l=$M(t,s);return ar(l,a.toUpperCase())},KO=(t,s,a,l,d)=>{t.ui.registry.addSplitButton(s,{tooltip:l,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:HM(t,a),columns:yT(t,a),fetch:LM(Qv(t,a),a,jO(t)),onAction:g=>{qO(t,a,d.get(),G)},onItemAction:(g,p)=>{qO(t,a,p,w=>{d.set(w),hT(t,{name:s,color:w})})},onSetup:g=>{mp(g,s,d.get());const p=w=>{w.name===s&&mp(g,w.name,w.color)};return t.on("TextColorChange",p),()=>{t.off("TextColorChange",p)}}})},YO=(t,s,a,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(mp(g,s,d.get()),G),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:HM(t,a),initData:{storageKey:a},onAction:g=>{qO(t,a,g.value,p=>{d.set(p),hT(t,{name:s,color:p})})}}]})},XO=t=>(s,a)=>{let l=!1;const d=w=>{const _=w.getData().colorpicker;l?(s(O.from(_)),w.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",_]))},g=(w,x)=>{x.name==="hex-valid"&&(l=x.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:G,onCancel:()=>{s(O.none())}})},JO=t=>{IM(t);const s=MM(t),a=NM(t),l=S(s),d=S(a);KO(t,"forecolor","forecolor","Text color",l),KO(t,"backcolor","hilitecolor","Background color",d),YO(t,"forecolor","forecolor","Text color",l),YO(t,"backcolor","hilitecolor","Background color",d)},TC=(t,s,a,l,d,g,p,w)=>{const x=td(s),D=QO(s,a,l,d!=="color"?"normal":"color",g,p,w);return SO(t,x,D,l,{menuType:d})},QO=(t,s,a,l,d,g,p)=>Xa(De(t,w=>w.type==="choiceitem"?nM(w).fold(Um,x=>O.some(SL(x,a===1,l,s,g(x.value),d,p,td(t)))):O.none())),kC=(t,s)=>{const a=B1(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?Tr(d.element,"[aria-checked=true]"):O.none()}},IL=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${gO}`:`.${Gx}`}},VM=(t,s)=>{const a=FL(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...TC(en("menu-value"),a,w=>{t.onAction({value:w})},l,d,zm.CLOSE_ON_EXECUTE,t.select.getOr(zn),s.shared.providers),markers:B1(d),movement:kC(l,d)};return{type:"widget",data:{value:en("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[_i.widget(ap.sketch(p))]}},FL=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>FM(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),l=>l.concat(GO(a)))},zM=en("cell-over"),UM=en("cell-execute"),WM=(t,s,a)=>{const l=p=>wn(p,zM,{row:t,col:s}),d=p=>wn(p,UM,{row:t,col:s}),g=(p,w)=>{w.stop(),d(p)};return Kc({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:a}},behaviours:yt([Jn("insert-table-picker-cell",[nt(yi(),Rn.focus),nt($s(),d),nt(wi(),g),nt(Mp(),g)]),lo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Rn.config({onFocus:l})])})},ZM=(t,s,a)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(WM(d,p,t));l.push(g)}return l},jM=(t,s,a,l,d)=>{for(let g=0;g<l;g++)for(let p=0;p<d;p++)lo.set(t[g][p],g<=s&&p<=a)},LL=t=>Ve(t,s=>De(s,Ul)),GM=(t,s)=>fr(`${s}x${t}`),HL={inserttable:t=>{const l=en("size-label"),d=ZM(l,10,10),g=GM(0,0),p=xo({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:l}},components:[g],behaviours:yt([Kn.config({})])});return{type:"widget",data:{value:en("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[_i.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:LL(d).concat(p.asSpec()),behaviours:yt([Jn("insert-table-picker",[Br(w=>{Kn.set(p.get(w),[g])}),Ip(zM,(w,x,_)=>{const{row:D,col:B}=_.event;jM(d,D,B,10,10),Kn.set(p.get(w),[GM(D+1,B+1)])}),Ip(UM,(w,x,_)=>{const{row:D,col:B}=_.event;t.onAction({numRows:D+1,numColumns:B+1}),Xo(w,Eh())})]),Sn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:VM},VL=(t,s)=>pt(HL,t.fancytype).map(a=>a(t,s)),zL=(t,s,a,l=!0,d=!1)=>{const g=d?IO(a.icons):z1(a.icons),p=x=>({isEnabled:()=>!Vn.isDisabled(x),setEnabled:_=>Vn.set(x,!_),setIconFill:(_,D)=>{Tr(x.element,`svg path[id="${_}"], rect[id="${_}"]`).each(B=>{Hn(B,"fill",D)})}}),w=vC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.some(g),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return Xv({data:V1(t),getApi:p,enabled:t.enabled,onAction:G,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},w,s,a)},UL=(t,s,a,l=!0)=>{const d=p=>({isEnabled:()=>!Vn.isDisabled(p),setEnabled:w=>Vn.set(p,!w)}),g=vC({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.none(),checkMark:O.none(),shortcutContent:t.shortcut},a,l);return Xv({data:V1(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},WL=t=>({type:"separator",dom:{tag:"div",classes:[Gx,MF]},components:t.text.map(fr).toArray()}),ZL=(t,s,a,l=!0)=>{const d=p=>({setActive:w=>{lo.set(p,w)},isActive:()=>lo.isOn(p),isEnabled:()=>!Vn.isDisabled(p),setEnabled:w=>Vn.set(p,!w)}),g=vC({iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,checkMark:O.some(vM(a.icons)),caret:O.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,l);return Ns(Xv({data:V1(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:xR,toggleOnExecute:!1,selected:t.active}})},jL=CM,qM=WL,KM=UL,GL=zL,qL=ZL,KL=VL,YL=CL;var YM=Object.freeze({__proto__:null,getCoupled:(t,s,a,l)=>a.getOrCreate(t,s,l),getExistingCoupled:(t,s,a,l)=>a.getExisting(t,s,l)}),XL=[ei("others",xr(Ct.value,$l()))],JL=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(ts(g.others).length===0)throw new Error("Cannot find any known coupled components");return pt(t,p)},a=(g,p,w)=>s(p,w).getOrThunk(()=>{const _=pt(p.others,w).getOrDie("No information found for coupled component: "+w)(g),D=g.getSystem().build(_);return t[w]=D,D}),l=(g,p,w)=>s(p,w).orThunk(()=>(pt(p.others,w).getOrDie("No information found for coupled component: "+w),O.none())),d=q({});return zl({readState:d,getExisting:l,getOrCreate:a})}});const na=cc({fields:XL,name:"coupling",apis:YM,state:JL}),tA=t=>{let s=O.none(),a=[];const l=_=>tA(D=>{d(B=>{D(_(B))})}),d=_=>{p()?x(_):a.push(_)},g=_=>{p()||(s=O.some(_),w(a),a=[])},p=()=>s.isSome(),w=_=>{mt(_,x)},x=_=>{s.each(D=>{setTimeout(()=>{_(D)},0)})};return t(g),{get:d,map:l,isReady:p}},nA={nu:tA,pure:t=>tA(s=>{s(t)})},XM=t=>{setTimeout(()=>{throw t},0)},W1=t=>{const s=x=>{t().then(x,XM)};return{map:x=>W1(()=>t().then(x)),bind:x=>W1(()=>t().then(_=>x(_).toPromise())),anonBind:x=>W1(()=>t().then(()=>x.toPromise())),toLazy:()=>nA.nu(s),toCached:()=>{let x=null;return W1(()=>(x===null&&(x=t()),x))},toPromise:t,get:s}},il={nu:t=>W1(()=>new Promise(t)),pure:t=>W1(()=>Promise.resolve(t))},JM=q("sink"),QM=q(Gi({name:JM(),overrides:q({dom:{tag:"div"},behaviours:yt([Lr.config({useFixed:Wt})]),events:Gs([bg(Ll()),bg(Qr()),bg(wi())])})})),eN=(t,s)=>{const a=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:a,overrides:d}),g=>({type:l,hotspot:a,overrides:d,layouts:g}))},e6=(t,s,a)=>{const l=t.fetch;return l(a).map(s)},t6=(t,s,a,l,d,g,p)=>{const w=e6(t,s,l),x=EC(l,t);return w.map(_=>_.bind(D=>O.from(R1.sketch({...g.menu(),uid:Ci(""),data:D,highlightOnOpen:p,onOpenMenu:(B,I)=>{const V=x().getOrDie();Lr.position(V,I,{anchor:a}),So.decloak(d)},onOpenSubmenu:(B,I,V)=>{const X=x().getOrDie();Lr.position(X,V,{anchor:{type:"submenu",item:I}}),So.decloak(d)},onRepositionMenu:(B,I,V)=>{const X=x().getOrDie();Lr.position(X,I,{anchor:a}),mt(V,le=>{Lr.position(X,le.triggeredMenu,{anchor:{type:"submenu",item:le.triggeringItem}})})},onEscape:()=>(Rn.focus(l),So.close(d),O.some(!0))}))))},wT=(t,s,a,l,d,g,p)=>{const w=eN(t,a);return t6(t,s,w,a,l,d,p).map(_=>(_.fold(()=>{So.isOpen(l)&&So.close(l)},D=>{So.cloak(l),So.open(l,D),g(l)}),l))},n6=(t,s,a,l,d,g,p)=>(So.close(l),il.pure(l)),oA=(t,s,a,l,d,g)=>{const p=na.getCoupled(a,"sandbox");return(So.isOpen(p)?n6:wT)(t,s,a,p,l,d,g)},o6=(t,s,a)=>{const l=Ro.getCurrent(s).getOr(s),d=ia(t.element);a?Zt(l.element,"min-width",d+"px"):hs(l.element,d)},EC=(t,s)=>t.getSystem().getByUid(s.uid+"-"+JM()).map(a=>()=>Ct.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Ct.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),CT=t=>{So.getState(t).each(s=>{R1.repositionMenus(s)})},_C=(t,s,a)=>{const l=aS(),d=(w,x)=>{const _=eN(t,s);l.link(s.element),t.matchWidth&&o6(_.hotspot,x,t.useMinWidth),t.onOpen(_,w,x),a!==void 0&&a.onOpen!==void 0&&a.onOpen(w,x)},g=(w,x)=>{l.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(w,x)},p=EC(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:xu.augment(t.sandboxBehaviours,[Ft.config({store:{mode:"memory",initialValue:s}}),So.config({onOpen:d,onClose:g,isPartOf:(w,x,_)=>kg(x,_)||kg(s,_),getAttachPoint:()=>p().getOrDie()}),Ro.config({find:w=>So.getState(w).bind(x=>Ro.getCurrent(x))}),zi.config({channels:{...h1({isExtraPart:zn}),...zg({doReposition:CT})}})])}},sA=t=>{const s=na.getCoupled(t,"sandbox");CT(s)},rA=()=>[Te("sandboxClasses",[]),xu.field("sandboxBehaviours",[Ro,zi,So,Ft])],s6=q([Qe("dom"),Qe("fetch"),Se("onOpen"),gr("onExecute"),Te("getHotspot",O.some),Te("getAnchorOverrides",q({})),Xu(),uc("dropdownBehaviours",[lo,na,Sn,Rn]),Qe("toggleClass"),Te("eventOrder",{}),ss("lazySink"),Te("matchWidth",!1),Te("useMinWidth",!1),ss("role")].concat(rA())),aA=q([Tu({schema:[Ku(),Te("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),QM()]),cA=(t,s,a,l)=>{const d=D=>pt(t.dom,"attributes").bind(B=>pt(B,D)),g=D=>{So.getState(D).each(B=>{R1.highlightPrimary(B)})},p=(D,B,I)=>oA(t,ht,D,l,B,I),w=D=>{p(D,g,ii.HighlightMenuAndItem).get(G)},x={expand:D=>{lo.isOn(D)||p(D,G,ii.HighlightNone).get(G)},open:D=>{lo.isOn(D)||p(D,G,ii.HighlightMenuAndItem).get(G)},refetch:D=>na.getExistingCoupled(D,"sandbox").fold(()=>p(D,G,ii.HighlightMenuAndItem).map(G),I=>wT(t,ht,D,I,l,G,ii.HighlightMenuAndItem).map(G)),isOpen:lo.isOn,close:D=>{lo.isOn(D)&&p(D,G,ii.HighlightMenuAndItem).get(G)},repositionMenus:D=>{lo.isOn(D)&&sA(D)}},_=(D,B)=>(Cm(D),O.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.dropdownBehaviours,[lo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),na.config({others:{sandbox:D=>_C(t,D,{onOpen:()=>lo.on(D),onClose:()=>lo.off(D)})}}),Sn.config({mode:"special",onSpace:_,onEnter:_,onDown:(D,B)=>{if(Oi.isOpen(D)){const I=na.getCoupled(D,"sandbox");g(I)}else Oi.open(D);return O.some(!0)},onEscape:(D,B)=>Oi.isOpen(D)?(Oi.close(D),O.some(!0)):O.none()}),Rn.config({})]),events:Nx(O.some(w)),eventOrder:{...t.eventOrder,[$s()]:["disabling","toggling","alloy.base.behaviour"]},apis:x,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Oi=ta({name:"Dropdown",configFields:s6(),partFields:aA(),factory:cA,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),tN=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},r6=t=>{const s=Ft.getValue(t),a=Kx(t).map(Yx);Oi.refetch(s).get(()=>{const l=na.getCoupled(s,"sandbox");a.each(d=>Kx(l).each(g=>UF(g,d)))})},a6=(t,s)=>{c6(t).each(a=>{$2(t,a.element,s.event.eventType,s.event.interactionEvent)})},c6=t=>So.getState(t).bind(Jo.getHighlighted).bind(Jo.getHighlighted),l6=t=>Wa(t.element,Xx)?O.some(t.element):Tr(t.element,"."+Xx),nN=(t,s,a)=>{iC(t).each(l=>{WF(l,a),l6(s).each(g=>{$(g,"id").each(p=>Hn(l.element,"aria-controls",p))})}),Hn(a.element,"aria-selected","true")},i6=(t,s,a)=>{Hn(a.element,"aria-selected","false")},u6=t=>{iC(t).each(s=>Rn.focus(s))},d6=t=>na.getExistingCoupled(t,"sandbox").bind(Kx).map(Yx).map(a=>a.fetchPattern).getOr("");var ST;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(ST||(ST={}));const m6=(t,s,a,l,d)=>{const g=a.shared.providers,p=w=>d?{...w,shortcut:O.none(),icon:w.text.isSome()?O.none():w.icon}:w;switch(t.type){case"menuitem":return aL(t).fold(Um,w=>O.some(KM(p(w),s,g,l)));case"nestedmenuitem":return rM(t).fold(Um,w=>O.some(GL(p(w),s,g,l,d)));case"togglemenuitem":return lL(t).fold(Um,w=>O.some(qL(p(w),s,g,l)));case"separator":return XF(t).fold(Um,w=>O.some(qM(w)));case"fancymenuitem":return fC(t).fold(Um,w=>KL(w,a));default:return console.error("Unknown item in general menu",t),O.none()}},f6=(t,s,a,l,d,g,p)=>{const w=l===1,x=!w||td(t);return Xa(De(t,_=>{switch(_.type){case"separator":return ZR(_).fold(Um,D=>O.some(qM(D)));case"cardmenuitem":return oL(_).fold(Um,D=>O.some(YL({...D,onAction:B=>{D.onAction(B),a(D.value,D.meta)}},d,g,{itemBehaviours:lT(D.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return jR(_).fold(Um,D=>O.some(jL(D,s,w,"normal",a,d,g,x)))}}))},oN=(t,s,a,l,d,g)=>{const p=td(s),w=Xa(De(s,D=>{const B=V=>d?!oo(V,"text"):p,I=V=>m6(V,a,l,B(V),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?I({...D,enabled:!1}):I(D)})),x=tN(g);return(d?GF:SO)(t,p,w,1,x)},lA=t=>R1.singleData(t.value,t),sN=(t,s,a,l)=>{const d=kC(s,l),g=B1(l);return{data:lA({...t,movement:d,menuBehaviours:gC.unnamedEvents(s!=="auto"?[]:[Br((p,w)=>{$O(p,4,g.item).each(({numColumns:x,numRows:_})=>{Sn.setGridSize(p,_,x)})})])}),menu:{markers:B1(l),fakeFocus:a===ST.ContentFocus}}},g6=(t,s)=>jx(pe.fromDom(s.startContainer)).map(a=>{const l=t.createRng();return l.selectNode(a.dom),l}),Pf={register:(t,s)=>{const a=S(!1),l=S(!1),d=Kc(ka.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:yt([Jn("dismissAutocompleter",[nt(ff(),()=>_())])]),lazySink:s.getSink})),g=()=>ka.isOpen(d),p=l.get,w=()=>{g()&&ka.hide(d)},x=()=>ka.getContent(d).bind(X=>gs(X.components(),0)),_=()=>t.execCommand("mceAutocompleterClose"),D=X=>{const le=us(X,Ee=>O.from(Ee.columns)).getOr(1);return Ve(X,Ee=>{const ye=Ee.items;return f6(ye,Ee.matchText,(ke,Ne)=>{const Le=t.selection.getRng();g6(t.dom,Le).each(kt=>{const st={hide:()=>_(),reload:$t=>{w(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:$t})}};a.set(!0),Ee.onAction(st,kt,ke,Ne),a.set(!1)})},le,zm.BUBBLE_TO_SANDBOX,s,Ee.highlightOn)})},B=(X,le)=>{mO(pe.fromDom(t.getBody())).each(Ee=>{const ye=us(X,ke=>O.from(ke.columns)).getOr(1);ka.showMenuAt(d,{anchor:{type:"node",root:pe.fromDom(t.getBody()),node:O.from(Ee)}},sN(SO("autocompleter-value",!0,le,ye,{menuType:"normal"}),ye,ST.ContentFocus,"normal"))}),x().each(Jo.highlightFirst)},I=X=>{const le=D(X);le.length>0?B(X,le):w()};t.on("AutocompleterStart",({lookupData:X})=>{l.set(!0),a.set(!1),I(X)}),t.on("AutocompleterUpdate",({lookupData:X})=>I(X)),t.on("AutocompleterEnd",()=>{w(),l.set(!1),a.set(!1)});const V={cancelIfNecessary:_,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:x};SR.setup(V,t)}},h6=["visible","hidden"],p6=t=>{if(tl(t)){const s=et(t,"overflow");return se(s).length>0&&!po(h6,s)}else return!1},iA=t=>{const s=n_(t,p6);return ir(s).map(a=>({element:a,others:s.slice(1)}))},oa=(t,s)=>cp(t)?iA(s):O.none(),xT=t=>{const s=[...De(t.others,E),me()];return ue(E(t.element),s)},OC=(t,s,a)=>Bd(t,s,a).isSome(),rN=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},aN=5,b6=400,cN=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?O.none():O.some(s.touches[0])},v6=(t,s)=>{const a=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return a>aN||l>aN},y6=t=>{const s=Hs(),a=S(!1),l=rN(_=>{t.triggerEvent(H0(),_),a.set(!0)},b6),d=_=>(cN(_).each(D=>{l.cancel();const B={x:D.clientX,y:D.clientY,target:_.target};l.schedule(_),a.set(!1),s.set(B)}),O.none()),g=_=>(l.cancel(),cN(_).each(D=>{s.on(B=>{v6(D,B)&&s.clear()})}),O.none()),p=_=>{l.cancel();const D=B=>Yo(B.target,_.target);return s.get().filter(D).map(B=>a.get()?(_.prevent(),!1):t.triggerEvent(Mp(),_))},w=ws([{key:gu(),value:d},{key:Io(),value:g},{key:Bs(),value:p}]);return{fireIfReady:(_,D)=>pt(w,D).bind(B=>B(_))}},w6=t=>t.raw.which===Cx[0]&&!po(["input","textarea"],tc(t.target))&&!OC(t.target,'[contenteditable="true"]'),C6=(t,s)=>{const a={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=y6(a),g=De(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),V=>ll(t,V,X=>{d.fireIfReady(X,V).each(Ee=>{Ee&&X.kill()}),a.triggerEvent(V,X)&&X.kill()})),p=Hs(),w=ll(t,"paste",V=>{d.fireIfReady(V,"paste").each(le=>{le&&V.kill()}),a.triggerEvent("paste",V)&&V.kill(),p.set(setTimeout(()=>{a.triggerEvent(L0(),V)},0))}),x=ll(t,"keydown",V=>{a.triggerEvent("keydown",V)?V.kill():a.stopBackspace&&w6(V)&&V.prevent()}),_=ll(t,"focusin",V=>{a.triggerEvent("focusin",V)&&V.kill()}),D=Hs(),B=ll(t,"focusout",V=>{a.triggerEvent("focusout",V)&&V.kill(),D.set(setTimeout(()=>{a.triggerEvent(F0(),V)},0))});return{unbind:()=>{mt(g,V=>{V.unbind()}),x.unbind(),_.unbind(),B.unbind(),w.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},lN=(t,s)=>{const a=pt(t,"target").getOr(s);return S(a)},S6=(t,s)=>{const a=S(!1),l=S(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},x6=t=>{const s=S(!1);return{stop:()=>{s.set(!0)},cut:G,isStopped:s.get,isCut:zn,event:t,setSource:fe("Cannot set source of a broadcasted event"),getSource:fe("Cannot get source of a broadcasted event")}},AC=Z.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),iN=(t,s,a,l,d,g)=>{const p=t(s,l),w=S6(a,d);return p.fold(()=>(g.logEventNoHandlers(s,l),AC.complete()),x=>{const _=x.descHandler;return ty(_)(w),w.isStopped()?(g.logEventStopped(s,x.element,_.purpose),AC.stopped()):w.isCut()?(g.logEventCut(s,x.element,_.purpose),AC.complete()):ca(x.element).fold(()=>(g.logNoParent(s,x.element,_.purpose),AC.complete()),B=>(g.logEventResponse(s,x.element,_.purpose),AC.resume(B)))})},uN=(t,s,a,l,d,g)=>iN(t,s,a,l,d,g).fold(Wt,p=>uN(t,s,a,p,d,g),zn),T6=(t,s,a,l,d)=>{const g=lN(a,l);return iN(t,s,a,l,g,d)},k6=(t,s,a)=>{const l=x6(s);return mt(t,d=>{const g=d.descHandler;ty(g)(l)}),l.isStopped()},E6=(t,s,a,l)=>dN(t,s,a,a.target,l),dN=(t,s,a,l,d)=>{const g=lN(a,l);return uN(t,s,a,l,g,d)},_6=(t,s)=>({element:t,descHandler:s}),O6=(t,s)=>({id:t,descHandler:s}),A6=()=>{const t={},s=(p,w,x)=>{Je(x,(_,D)=>{const B=t[D]!==void 0?t[D]:{};B[w]=Z2(_,p),t[D]=B})},a=(p,w)=>Md(w).bind(x=>pt(p,x)).map(x=>_6(w,x));return{registerId:s,unregisterId:p=>{Je(t,(w,x)=>{oo(w,p)&&delete w[p]})},filterByType:p=>pt(t,p).map(w=>rr(w,(x,_)=>O6(_,x))).getOr([]),find:(p,w,x)=>pt(t,w).bind(_=>fu(x,D=>a(_,D),p))}},D6=()=>{const t=A6(),s={},a=_=>{const D=_.element;return Md(D).getOrThunk(()=>V2("uid-",_.element))},l=(_,D)=>{const B=s[D];if(B===_)g(_);else throw new Error('The tagId "'+D+'" is already used by: '+Zu(B.element)+`
Cannot use it for: `+Zu(_.element)+`
The conflicting element is`+($o(B.element)?" ":" not ")+"already in the DOM")},d=_=>{const D=a(_);ba(s,D)&&l(_,D);const B=[_];t.registerId(B,D,_.events),s[D]=_},g=_=>{Md(_.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(_,D,B)=>t.find(_,D,B),filter:_=>t.filterByType(_),register:d,unregister:g,getById:_=>pt(s,_)}},Yd=ma({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:xv(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Te("components",[]),uc("containerBehaviours",[]),Te("events",{}),Te("domModification",{}),Te("eventOrder",{})]}),uA=t=>{const s=ye=>ca(t.element).fold(Wt,ke=>Yo(ye,ke)),a=D6(),l=(ye,ke)=>a.find(s,ye,ke),d=C6(t.element,{triggerEvent:(ye,ke)=>Wp(ye,ke.target,Ne=>E6(l,ye,ke,Ne))}),g={debugInfo:q("real"),triggerEvent:(ye,ke,Ne)=>{Wp(ye,ke,Le=>dN(l,ye,Ne,ke,Le))},triggerFocus:(ye,ke)=>{Md(ye).fold(()=>{wu(ye)},Ne=>{Wp(Ad(),ye,Le=>(T6(l,Ad(),{originator:ke,kill:G,prevent:G,target:ye},ye,Le),!1))})},triggerEscape:(ye,ke)=>{g.triggerEvent("keydown",ye.element,ke.event)},getByUid:ye=>le(ye),getByDom:ye=>Ee(ye),build:Kc,buildOrPatch:Hb,addToGui:ye=>{x(ye)},removeFromGui:ye=>{_(ye)},addToWorld:ye=>{p(ye)},removeFromWorld:ye=>{w(ye)},broadcast:ye=>{I(ye)},broadcastOn:(ye,ke)=>{V(ye,ke)},broadcastEvent:(ye,ke)=>{X(ye,ke)},isConnected:Wt},p=ye=>{ye.connect(g),ya(ye.element)||(a.register(ye),mt(ye.components(),p),g.triggerEvent(Bp(),ye.element,{target:ye.element}))},w=ye=>{ya(ye.element)||(mt(ye.components(),w),a.unregister(ye)),ye.disconnect()},x=ye=>{Hd(t,ye)},_=ye=>{Vd(ye)},D=()=>{d.unbind(),Nl(t.element)},B=ye=>{const ke=a.filter(gg());mt(ke,Ne=>{const Le=Ne.descHandler;ty(Le)(ye)})},I=ye=>{B({universal:!0,data:ye})},V=(ye,ke)=>{B({universal:!1,channels:ye,data:ke})},X=(ye,ke)=>{const Ne=a.filter(ye);return k6(Ne,ke)},le=ye=>a.getById(ye).fold(()=>Ct.error(new Error('Could not find component with uid: "'+ye+'" in system.')),Ct.value),Ee=ye=>{const ke=Md(ye).getOr("not found");return le(ke)};return p(t),{root:t,element:t.element,destroy:D,add:x,remove:_,getByUid:le,getByDom:Ee,addToWorld:p,removeFromWorld:w,broadcast:I,broadcastOn:V,broadcastEvent:X}},R6=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:De(t.items,s.interpreter)}),M6=q([Te("prefix","form-field"),uc("fieldBehaviours",[Ro,Ft])]),mN=q([Gi({schema:[Qe("dom")],name:"label"}),Gi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Qe("text")],name:"aria-descriptor"}),ja({factory:{sketch:t=>{const s=jn(t,["factory"]);return t.factory.sketch(s)}},schema:[Qe("factory")],name:"field"})]),N6=(t,s,a,l)=>{const d=cr(t.fieldBehaviours,[Ro.config({find:w=>Vs(w,t,"field")}),Ft.config({store:{mode:"manual",getValue:w=>Ro.getCurrent(w).bind(Ft.getValue),setValue:(w,x)=>{Ro.getCurrent(w).each(_=>{Ft.setValue(_,x)})}}})]),g=Gs([Br((w,x)=>{const _=Tw(w,t,["label","field","aria-descriptor"]);_.field().each(D=>{const B=en(t.prefix);_.label().each(I=>{Hn(I.element,"for",B),Hn(D.element,"id",B)}),_["aria-descriptor"]().each(I=>{const V=en(t.prefix);Hn(I.element,"id",V),Hn(D.element,"aria-describedby",V)})})})]),p={getField:w=>Vs(w,t,"field"),getLabel:w=>Vs(w,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},ls=ta({name:"FormField",configFields:M6(),partFields:mN(),factory:N6,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var fN=Object.freeze({__proto__:null,exhibit:(t,s)=>ju({attributes:ws([{key:s.tabAttr,value:"true"}])})}),B6=[Te("tabAttr","data-alloy-tabstop")];const Gr=cc({fields:B6,name:"tabstopping",active:fN});var $6=tinymce.util.Tools.resolve("tinymce.html.Entities");const DC=(t,s,a,l)=>{const d=P6(t,s,a,l);return ls.sketch(d)},gN=(t,s)=>DC(t,s,[],[]),P6=(t,s,a,l)=>({dom:pN(a),components:t.toArray().concat([s]),fieldBehaviours:yt(l)}),hN=()=>pN([]),pN=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),th=(t,s)=>ls.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[fr(s.translate(t))]}),Xi=en("form-component-change"),RC=en("form-close"),Z1=en("form-cancel"),If=en("form-action"),MC=en("form-submit"),dA=en("form-block"),mA=en("form-unblock"),bN=en("form-tabchange"),vN=en("form-resize"),I6=(t,s,a)=>{const l=t.label.map(B=>th(B,s)),d=B=>(I,V)=>{Bd(V.event.target,"[data-collection-item-value]").each(X=>{B(I,V,X,Ur(X,"data-collection-item-value"))})},g=(B,I)=>{const V=De(I,Ee=>{const ye=_u.translate(Ee.text),ke=t.columns===1?`<div class="tox-collection__item-label">${ye}</div>`:"",Ne=`<div class="tox-collection__item-icon">${Ee.icon}</div>`,Le={_:" "," - ":" ","-":" "},kt=ye.replace(/\_| \- |\-/g,$t=>Le[$t]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${$6.encodeAllRaw(Ee.value)}" title="${kt}" aria-label="${kt}">${Ne}${ke}</div>`}),X=t.columns!=="auto"&&t.columns>1?Ts(V,t.columns):[V],le=De(X,Ee=>`<div class="tox-collection__group">${Ee.join("")}</div>`);gf(B.element,le.join(""))},p=d((B,I,V,X)=>{I.stop(),s.isDisabled()||wn(B,If,{name:t.name,value:X})}),w=[nt(yi(),d((B,I,V)=>{wu(V)})),nt(wi(),p),nt(Mp(),p),nt(mf(),d((B,I,V)=>{Tr(B.element,"."+lC).each(X=>{ea(X,lC)}),Cs(V,lC)})),nt(I0(),d(B=>{Tr(B.element,"."+lC).each(I=>{ea(I,lC)})})),Wu(d((B,I,V,X)=>{wn(B,If,{name:t.name,value:X})}))],x=(B,I)=>De(Pa(B.element,".tox-collection__item"),I),_=ls.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ht},behaviours:yt([Vn.config({disabled:s.isDisabled,onDisabled:B=>{x(B,I=>{Cs(I,"tox-collection__item--state-disabled"),Hn(I,"aria-disabled",!0)})},onEnabled:B=>{x(B,I=>{ea(I,"tox-collection__item--state-disabled"),ne(I,"aria-disabled")})}}),dc(),Kn.config({}),Ft.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(B,I)=>{g(B,I),t.columns==="auto"&&$O(B,5,"tox-collection__item").each(({numRows:V,numColumns:X})=>{Sn.setGridSize(B,V,X)}),Xo(B,vN)}}),Gr.config({}),Sn.config(IL(t.columns,"normal")),Jn("collection-events",w)]),eventOrder:{[$s()]:["disabling","alloy.base.behaviour","collection-events"]}});return DC(l,_,["tox-form__group--collection"],[])},F6=["input","textarea"],yN=t=>{const s=tc(t);return po(F6,s)},fA=(t,s)=>{const a=s.getRoot(t).getOr(t.element);ea(a,s.invalidClass),s.notify.each(l=>{yN(t.element)&&Hn(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{gf(d,l.validHtml)}),l.onValid(t)})},wN=(t,s,a,l)=>{const d=s.getRoot(t).getOr(t.element);Cs(d,s.invalidClass),s.notify.each(g=>{yN(t.element)&&Hn(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{gf(p,l)}),g.onInvalid(t,l)})},CN=(t,s,a)=>s.validator.fold(()=>il.pure(Ct.value(!0)),l=>l.validate(t)),gA=(t,s,a)=>(s.notify.each(l=>{l.onValidate(t)}),CN(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(wN(t,s,a,d),Ct.error(d)),d=>(fA(t,s),Ct.value(d))):Ct.error("No longer in system")));var L6=Object.freeze({__proto__:null,markValid:fA,markInvalid:wN,query:CN,run:gA,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Wa(a,s.invalidClass)}}),H6=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>Gs([nt(a.onEvent,l=>{gA(l,t,s).get(ht)})].concat(a.validateOnLoad?[Br(l=>{gA(l,t,s).get(G)})]:[]))).getOr({})}),V6=[Qe("invalidClass"),Te("getRoot",O.none),Ic("notify",[Te("aria","alert"),Te("getContainer",O.none),Te("validHtml",""),Se("onValid"),Se("onInvalid"),Se("onValidate")]),Ic("validator",[Qe("validate"),Te("onEvent","input"),Te("validateOnLoad",!0)])];const Ff=cc({fields:V6,name:"invalidating",active:H6,apis:L6,extra:{validation:t=>s=>{const a=Ft.getValue(s);return il.pure(t(a))}}});var W6=Object.freeze({__proto__:null,events:()=>Gs([P2(iE(),Wt)]),exhibit:()=>ju({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const NC=cc({fields:[],name:"unselecting",active:W6}),xN=(t,s)=>Oi.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:yt([Kd.button(s.providers.isDisabled),dc(),NC.config({}),Gr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>il.nu(l=>t.fetch(l)).map(l=>O.from(lA(Ns(TC(en("menu-value"),l,d=>{t.onItemAction(a,d)},t.columns,t.presets,zm.CLOSE_ON_EXECUTE,zn,s.providers),{movement:kC(t.columns,t.presets)})))),parts:{menu:qx(!1,1,t.presets)}}),TN=en("color-input-change"),kN=en("color-swatch-change"),EN=en("color-picker-cancel"),Z6=(t,s,a,l)=>{const d=ls.parts.field({factory:$1,inputClasses:["tox-textfield"],data:l,onSetValue:_=>Ff.run(_).get(G),inputBehaviours:yt([Vn.config({disabled:s.providers.isDisabled}),dc(),Gr.config({}),Ff.config({invalidClass:"tox-textbox-field-invalid",getRoot:_=>pc(_.element),notify:{onValid:_=>{const D=Ft.getValue(_);wn(_,TN,{color:D})}},validator:{validateOnLoad:!1,validate:_=>{const D=Ft.getValue(_);if(D.length===0)return il.pure(Ct.value(!0));{const B=pe.fromTag("span");Zt(B,"background-color",D);const I=Js(B,"background-color").fold(()=>Ct.error("blah"),V=>Ct.value(D));return il.pure(I)}}}})]),selectOnFocus:!1}),g=t.label.map(_=>th(_,s.providers)),p=(_,D)=>{wn(_,kN,{value:D})},w=(_,D)=>{x.getOpt(_).each(B=>{D==="custom"?a.colorPicker(I=>{I.fold(()=>Xo(B,EN),V=>{p(B,V),AM(t.storageKey,V)})},"#ffffff"):D==="remove"?p(B,""):p(B,D)})},x=xo(xN({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[$a,ac,kc],onLtr:()=>[ac,$a,kc]},components:[],fetch:LM(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:w},s));return ls.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,x.asSpec()]}]),fieldBehaviours:yt([Jn("form-field-events",[nt(TN,(_,D)=>{x.getOpt(_).each(B=>{Zt(B.element,"background-color",D.event.color)}),wn(_,Xi,{name:t.name})}),nt(kN,(_,D)=>{ls.getField(_).each(B=>{Ft.setValue(B,D.event.value),Ro.getCurrent(_).each(Rn.focus)})}),nt(EN,(_,D)=>{ls.getField(_).each(B=>{Ro.getCurrent(_).each(Rn.focus)})})])])})},j6=Gi({schema:[Qe("dom")],name:"label"}),fp=t=>Gi({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:Gs([j0(gu(),(d,g,p)=>l(d,p),[s]),j0(Qr(),(d,g,p)=>l(d,p),[s]),j0(Cl(),(d,g,p)=>{p.mouseIsDown.get()&&l(d,p)},[s])])}))}),TT=fp("top-left"),G6=fp("top"),kT=fp("top-right"),q6=fp("right"),K6=fp("bottom-right"),Y6=fp("bottom"),X6=fp("bottom-left"),HW=fp("left"),ET=ja({name:"thumb",defaults:q({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Gs([Sm(gu(),t,"spectrum"),Sm(Io(),t,"spectrum"),Sm(Bs(),t,"spectrum"),Sm(Qr(),t,"spectrum"),Sm(Cl(),t,"spectrum"),Sm(zu(),t,"spectrum")])})}),e0=ja({schema:[Os("mouseIsDown",()=>S(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,l=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:yt([Sn.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),Rn.config({})]),events:Gs([nt(gu(),l),nt(Io(),l),nt(Qr(),l),nt(Cl(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var _N=[j6,HW,q6,G6,Y6,TT,kT,X6,K6,ET,e0];const BC=q("slider.change.value"),Q6=t=>t.type.indexOf("touch")!==-1,hA=t=>{const s=t.event.raw;if(Q6(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?O.some(a.touches[0]).map(l=>vo(l.clientX,l.clientY)):O.none()}else{const a=s;return a.clientX!==void 0?O.some(a).map(l=>vo(l.clientX,l.clientY)):O.none()}},e8="top",t8="right",n8="bottom",o8="left",j1=t=>t.model.minX,G1=t=>t.model.minY,_T=t=>t.model.minX-1,OT=t=>t.model.minY-1,gp=t=>t.model.maxX,Xd=t=>t.model.maxY,Lf=t=>t.model.maxX+1,AT=t=>t.model.maxY+1,pA=(t,s,a)=>s(t)-a(t),DT=t=>pA(t,gp,j1),t0=t=>pA(t,Xd,G1),ON=t=>DT(t)/2,n0=t=>t0(t)/2,Hf=t=>t.stepSize,AN=t=>t.snapToGrid,DN=t=>t.snapStart,RN=t=>t.rounded,RT=(t,s)=>t[s+"-edge"]!==void 0,MN=t=>RT(t,o8),NN=t=>RT(t,t8),$C=t=>RT(t,e8),BN=t=>RT(t,n8),nh=t=>t.model.value.get(),hp=(t,s)=>({x:t,y:s}),nd=(t,s)=>{wn(t,BC(),{value:s})},s8=(t,s)=>{nd(t,hp(_T(s),OT(s)))},r8=(t,s)=>{nd(t,OT(s))},a8=(t,s)=>{nd(t,hp(ON(s),OT(s)))},$N=(t,s)=>{nd(t,hp(Lf(s),OT(s)))},c8=(t,s)=>{nd(t,Lf(s))},l8=(t,s)=>{nd(t,hp(Lf(s),n0(s)))},i8=(t,s)=>{nd(t,hp(Lf(s),AT(s)))},u8=(t,s)=>{nd(t,AT(s))},d8=(t,s)=>{nd(t,hp(ON(s),AT(s)))},PN=(t,s)=>{nd(t,hp(_T(s),AT(s)))},IN=(t,s)=>{nd(t,_T(s))},m8=(t,s)=>{nd(t,hp(_T(s),n0(s)))},bA=(t,s,a,l)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-l),vA=(t,s,a,l)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+l),yA=(t,s,a)=>Math.max(s,Math.min(a,t)),o0=(t,s,a,l,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/l)*l;return yA(s+p,s-1,a+1)},g=>{const p=(t-g)%l,w=Math.round(p/l),x=Math.floor((t-g)/l),_=Math.floor((a-g)/l),D=Math.min(_,x+w),B=g+D*l;return Math.max(g,B)}),f8=(t,s,a)=>Math.min(a,Math.max(t,s))-s,FN=t=>{const{min:s,max:a,range:l,value:d,step:g,snap:p,snapStart:w,rounded:x,hasMinEdge:_,hasMaxEdge:D,minBound:B,maxBound:I,screenRange:V}=t,X=_?s-1:s,le=D?a+1:a;if(d<B)return X;if(d>I)return le;{const Ee=f8(d,B,I),ye=yA(Ee/V*l+s,X,le);return p&&ye>=s&&ye<=a?o0(ye,s,a,g,w):x?Math.round(ye):ye}},LN=t=>{const{min:s,max:a,range:l,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:w,maxOffset:x,centerMinEdge:_,centerMaxEdge:D}=t;return d<s?g?0:_:d>a?p?w:D:(d-s)/l*x},s0="top",Au="right",MT="bottom",NT="left",g8="width",h8="height",Vf=t=>t.element.dom.getBoundingClientRect(),Jd=(t,s)=>t[s],PC=t=>{const s=Vf(t);return Jd(s,NT)},wA=t=>{const s=Vf(t);return Jd(s,Au)},BT=t=>{const s=Vf(t);return Jd(s,s0)},HN=t=>{const s=Vf(t);return Jd(s,MT)},CA=t=>{const s=Vf(t);return Jd(s,g8)},VN=t=>{const s=Vf(t);return Jd(s,h8)},SA=(t,s,a)=>(t+s)/2-a,xA=(t,s)=>{const a=Vf(t),l=Vf(s),d=Jd(a,NT),g=Jd(a,Au),p=Jd(l,NT);return SA(d,g,p)},TA=(t,s)=>{const a=Vf(t),l=Vf(s),d=Jd(a,s0),g=Jd(a,MT),p=Jd(l,s0);return SA(d,g,p)},$T=(t,s)=>{wn(t,BC(),{value:s})},kA=(t,s,a)=>{const l={min:j1(s),max:gp(s),range:DT(s),value:a,step:Hf(s),snap:AN(s),snapStart:DN(s),rounded:RN(s),hasMinEdge:MN(s),hasMaxEdge:NN(s),minBound:PC(t),maxBound:wA(t),screenRange:CA(t)};return FN(l)},p8=(t,s,a)=>{const l=kA(t,s,a);return $T(t,l),l},b8=(t,s)=>{const a=j1(s);$T(t,a)},v8=(t,s)=>{const a=gp(s);$T(t,a)},y8=(t,s,a)=>{const d=(t>0?vA:bA)(nh(a),j1(a),gp(a),Hf(a));return $T(s,d),O.some(d)},PT=t=>(s,a)=>y8(t,s,a).map(Wt),w8=t=>hA(t).map(a=>a.left),zN=(t,s,a,l,d)=>{const p=CA(t),w=l.bind(D=>O.some(xA(D,t))).getOr(0),x=d.bind(D=>O.some(xA(D,t))).getOr(p),_={min:j1(s),max:gp(s),range:DT(s),value:a,hasMinEdge:MN(s),hasMaxEdge:NN(s),minBound:PC(t),minOffset:0,maxBound:wA(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:x};return LN(_)},EA=(t,s,a,l,d,g)=>{const p=zN(s,g,a,l,d);return PC(s)-PC(t)+p},C8=(t,s,a,l)=>{const d=nh(a),g=EA(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),a),p=ia(s.element)/2;Zt(s.element,"left",g-p+"px")},S8=PT(-1),x8=PT(1),T8=O.none,k8=O.none,E8={"top-left":O.none(),top:O.none(),"top-right":O.none(),right:O.some(c8),"bottom-right":O.none(),bottom:O.none(),"bottom-left":O.none(),left:O.some(IN)};var UN=Object.freeze({__proto__:null,setValueFrom:p8,setToMin:b8,setToMax:v8,findValueOfOffset:kA,getValueFromEvent:w8,findPositionOfValue:EA,setPositionFromValue:C8,onLeft:S8,onRight:x8,onUp:T8,onDown:k8,edgeActions:E8});const IC=(t,s)=>{wn(t,BC(),{value:s})},_A=(t,s,a)=>{const l={min:G1(s),max:Xd(s),range:t0(s),value:a,step:Hf(s),snap:AN(s),snapStart:DN(s),rounded:RN(s),hasMinEdge:$C(s),hasMaxEdge:BN(s),minBound:BT(t),maxBound:HN(t),screenRange:VN(t)};return FN(l)},_8=(t,s,a)=>{const l=_A(t,s,a);return IC(t,l),l},O8=(t,s)=>{const a=G1(s);IC(t,a)},A8=(t,s)=>{const a=Xd(s);IC(t,a)},D8=(t,s,a)=>{const d=(t>0?vA:bA)(nh(a),G1(a),Xd(a),Hf(a));return IC(s,d),O.some(d)},OA=t=>(s,a)=>D8(t,s,a).map(Wt),WN=t=>hA(t).map(a=>a.top),ZN=(t,s,a,l,d)=>{const p=VN(t),w=l.bind(D=>O.some(TA(D,t))).getOr(0),x=d.bind(D=>O.some(TA(D,t))).getOr(p),_={min:G1(s),max:Xd(s),range:t0(s),value:a,hasMinEdge:$C(s),hasMaxEdge:BN(s),minBound:BT(t),minOffset:0,maxBound:HN(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:x};return LN(_)},FC=(t,s,a,l,d,g)=>{const p=ZN(s,g,a,l,d);return BT(s)-BT(t)+p},R8=(t,s,a,l)=>{const d=nh(a),g=FC(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),a),p=ze(s.element)/2;Zt(s.element,"top",g-p+"px")},jN=O.none,M8=O.none,N8=OA(-1),B8=OA(1),$8={"top-left":O.none(),top:O.some(r8),"top-right":O.none(),right:O.none(),"bottom-right":O.none(),bottom:O.some(u8),"bottom-left":O.none(),left:O.none()};var AA=Object.freeze({__proto__:null,setValueFrom:_8,setToMin:O8,setToMax:A8,findValueOfOffset:_A,getValueFromEvent:WN,findPositionOfValue:FC,setPositionFromValue:R8,onLeft:jN,onRight:M8,onUp:N8,onDown:B8,edgeActions:$8});const Qd=(t,s)=>{wn(t,BC(),{value:s})},IT=(t,s)=>({x:t,y:s}),LC=(t,s,a)=>{const l=kA(t,s,a.left),d=_A(t,s,a.top),g=IT(l,d);return Qd(t,g),g},P8=(t,s,a,l)=>{const d=t>0?vA:bA,g=s?nh(l).x:d(nh(l).x,j1(l),gp(l),Hf(l)),p=s?d(nh(l).y,G1(l),Xd(l),Hf(l)):nh(l).y;return Qd(a,IT(g,p)),O.some(g)},r0=(t,s)=>(a,l)=>P8(t,s,a,l).map(Wt),I8=(t,s)=>{const a=j1(s),l=G1(s);Qd(t,IT(a,l))},F8=(t,s)=>{const a=gp(s),l=Xd(s);Qd(t,IT(a,l))},L8=t=>hA(t),GN=(t,s,a,l)=>{const d=nh(a),g=EA(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),a),p=FC(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),a),w=ia(s.element)/2,x=ze(s.element)/2;Zt(s.element,"left",g-w+"px"),Zt(s.element,"top",p-x+"px")},H8=r0(-1,!1),DA=r0(1,!1),RA=r0(-1,!0),MA=r0(1,!0),V8={"top-left":O.some(s8),top:O.some(a8),"top-right":O.some($N),right:O.some(l8),"bottom-right":O.some(i8),bottom:O.some(d8),"bottom-left":O.some(PN),left:O.some(m8)};var Du=Object.freeze({__proto__:null,setValueFrom:LC,setToMin:I8,setToMax:F8,getValueFromEvent:L8,setPositionFromValue:GN,onLeft:H8,onRight:DA,onUp:RA,onDown:MA,edgeActions:V8});const z8=[Te("stepSize",1),Te("onChange",G),Te("onChoose",G),Te("onInit",G),Te("onDragStart",G),Te("onDragEnd",G),Te("snapToGrid",!1),Te("rounded",!0),ss("snapStart"),ei("model",Xr("mode",{x:[Te("minX",0),Te("maxX",100),Os("value",t=>S(t.mode.minX)),Qe("getInitialValue"),qs("manager",UN)],y:[Te("minY",0),Te("maxY",100),Os("value",t=>S(t.mode.minY)),Qe("getInitialValue"),qs("manager",AA)],xy:[Te("minX",0),Te("maxX",100),Te("minY",0),Te("maxY",100),Os("value",t=>S({x:t.mode.minX,y:t.mode.minY})),Qe("getInitialValue"),qs("manager",Du)]})),uc("sliderBehaviours",[Sn,Ft]),Os("mouseIsDown",()=>S(!1))],od=ta({name:"Slider",configFields:z8,partFields:_N,factory:(t,s,a,l)=>{const d=Le=>Zd(Le,t,"thumb"),g=Le=>Zd(Le,t,"spectrum"),p=Le=>Vs(Le,t,"left-edge"),w=Le=>Vs(Le,t,"right-edge"),x=Le=>Vs(Le,t,"top-edge"),_=Le=>Vs(Le,t,"bottom-edge"),D=t.model,B=D.manager,I=(Le,kt)=>{B.setPositionFromValue(Le,kt,t,{getLeftEdge:p,getRightEdge:w,getTopEdge:x,getBottomEdge:_,getSpectrum:g})},V=(Le,kt)=>{D.value.set(kt);const st=d(Le);I(Le,st)},X=(Le,kt)=>{V(Le,kt);const st=d(Le);return t.onChange(Le,st,kt),O.some(!0)},le=Le=>{B.setToMin(Le,t)},Ee=Le=>{B.setToMax(Le,t)},ye=Le=>{const kt=()=>{Vs(Le,t,"thumb").each($t=>{const an=D.value.get();t.onChoose(Le,$t,an)})},st=t.mouseIsDown.get();t.mouseIsDown.set(!1),st&&kt()},ke=(Le,kt)=>{kt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Le,d(Le))},Ne=(Le,kt)=>{kt.stop(),t.onDragEnd(Le,d(Le)),ye(Le)};return{uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.sliderBehaviours,[Sn.config({mode:"special",focusIn:Le=>Vs(Le,t,"spectrum").map(Sn.focusIn).map(Wt)}),Ft.config({store:{mode:"manual",getValue:Le=>D.value.get(),setValue:V}}),zi.config({channels:{[sw()]:{onReceive:ye}}})]),events:Gs([nt(BC(),(Le,kt)=>{X(Le,kt.event.value)}),Br((Le,kt)=>{const st=D.getInitialValue();D.value.set(st);const $t=d(Le);I(Le,$t);const an=g(Le);t.onInit(Le,$t,an,D.value.get())}),nt(gu(),ke),nt(Bs(),Ne),nt(Qr(),ke),nt(zu(),Ne)]),apis:{resetToMin:le,resetToMax:Ee,setValue:V,refresh:I},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),FT=en("rgb-hex-update"),qN=en("slider-update"),KN=en("palette-update"),U8=(t,s)=>{const a=od.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=od.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return od.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:q(0)},components:[a,l],sliderBehaviours:yt([Rn.config({})]),onChange:(d,g,p)=>{wn(d,qN,{value:p})}})},YN="form",W8=[uc("formBehaviours",[Ft])],XN=t=>"<alloy.field."+t+">",Z8=t=>{const s=(()=>{const g=[];return{field:(w,x)=>(g.push(w),Cw(YN,XN(w),x)),record:q(g)}})(),a=t(s),l=s.record(),d=De(l,g=>ja({name:g,pname:XN(g)}));return Rw(YN,W8,d,j8,a)},JN=(t,s)=>t.fold(()=>Ct.error(s),Ct.value),j8=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.formBehaviours,[Ft.config({store:{mode:"manual",getValue:a=>{const l=kw(a,t);return Gt(l,(d,g)=>d().bind(p=>{const w=Ro.getCurrent(p);return JN(w,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Zu(p.element)))}).map(Ft.getValue))},setValue:(a,l)=>{Je(l,(d,g)=>{Vs(a,t,g).each(p=>{Ro.getCurrent(p).each(w=>{Ft.setValue(w,d)})})})}}})]),apis:{getField:(a,l)=>Vs(a,t,l).bind(Ro.getCurrent)}}),a0={getField:Bb((t,s,a)=>t.getField(s,a)),sketch:Z8},QN=en("valid-input"),NA=en("invalid-input"),LT=en("validating-input"),BA="colorcustom.rgb.",$A=(t,s,a,l)=>{const d=(I,V)=>Ff.config({invalidClass:s("invalid"),notify:{onValidate:X=>{wn(X,LT,{type:I})},onValid:X=>{wn(X,QN,{type:I,value:Ft.getValue(X)})},onInvalid:X=>{wn(X,NA,{type:I,value:Ft.getValue(X)})}},validator:{validate:X=>{const le=Ft.getValue(X),Ee=V(le)?Ct.value(!0):Ct.error(t("aria.input.invalid"));return il.pure(Ee)},validateOnLoad:!1}}),g=(I,V,X,le,Ee)=>{const ye=t(BA+"range"),ke=ls.parts.label({dom:{tag:"label",attributes:{"aria-label":le}},components:[fr(X)]}),Ne=ls.parts.field({data:Ee,factory:$1,inputAttributes:{type:"text",...V==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:yt([d(V,I),Gr.config({})]),onSetValue:$t=>{Ff.isInvalid($t)&&Ff.run($t).get(G)}}),Le=[ke,Ne],kt=V!=="hex"?[ls.parts["aria-descriptor"]({text:ye})]:[],st=Le.concat(kt);return{dom:{tag:"div",attributes:{role:"presentation"}},components:st}},p=(I,V)=>{const X=CC(V);return a0.getField(I,"hex").each(le=>{Rn.isFocused(le)||Ft.setValue(I,{hex:X.value})}),X},w=(I,V)=>{const X=V.red,le=V.green,Ee=V.blue;Ft.setValue(I,{red:X,green:le,blue:Ee})},x=xo({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),_=(I,V)=>{x.getOpt(I).each(X=>{Zt(X.element,"background-color","#"+V.value)})};return ma({factory:()=>{const I={red:S(O.some(255)),green:S(O.some(255)),blue:S(O.some(255)),hex:S(O.some("ffffff"))},V=(Wn,mo)=>{const $n=jm(mo);w(Wn,$n),ye($n)},X=Wn=>I[Wn].get(),le=(Wn,mo)=>{I[Wn].set(mo)},Ee=()=>X("red").bind(Wn=>X("green").bind(mo=>X("blue").map($n=>Zl(Wn,mo,$n,1)))),ye=Wn=>{const mo=Wn.red,$n=Wn.green,fs=Wn.blue;le("red",O.some(mo)),le("green",O.some($n)),le("blue",O.some(fs))},ke=(Wn,mo)=>{const $n=mo.event;$n.type!=="hex"?le($n.type,O.none()):l(Wn)},Ne=(Wn,mo)=>{a(Wn);const $n=Zm(mo);le("hex",O.some($n.value));const fs=jm($n);w(Wn,fs),ye(fs),wn(Wn,FT,{hex:$n}),_(Wn,$n)},Le=(Wn,mo,$n)=>{const fs=parseInt($n,10);le(mo,O.some(fs)),Ee().each(vt=>{const rn=p(Wn,vt);wn(Wn,FT,{hex:rn}),_(Wn,rn)})},kt=Wn=>Wn.type==="hex",st=(Wn,mo)=>{const $n=mo.event;kt($n)?Ne(Wn,$n.value):Le(Wn,$n.type,$n.value)},$t=Wn=>({label:t(BA+Wn+".label"),description:t(BA+Wn+".description")}),an=$t("red"),yo=$t("green"),xn=$t("blue"),ho=$t("hex");return Ns(a0.sketch(Wn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[Wn.field("red",ls.sketch(g(HO,"red",an.label,an.description,255))),Wn.field("green",ls.sketch(g(HO,"green",yo.label,yo.description,255))),Wn.field("blue",ls.sketch(g(HO,"blue",xn.label,xn.description,255))),Wn.field("hex",ls.sketch(g(yC,"hex",ho.label,ho.description,"ffffff"))),x.asSpec()],formBehaviours:yt([Ff.config({invalidClass:s("form-invalid")}),Jn("rgb-form-events",[nt(QN,st),nt(NA,ke),nt(LT,ke)])])})),{apis:{updateHex:(Wn,mo)=>{Ft.setValue(Wn,{hex:mo.value}),V(Wn,mo),_(Wn,mo)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(I,V,X)=>{I.updateHex(V,X)}},extraApis:{}})},c0=(t,s)=>{const a=od.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=od.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(_,D)=>{const{width:B,height:I}=_,V=_.getContext("2d");if(V===null)return;V.fillStyle=D,V.fillRect(0,0,B,I);const X=V.createLinearGradient(0,0,B,0);X.addColorStop(0,"rgba(255,255,255,1)"),X.addColorStop(1,"rgba(255,255,255,0)"),V.fillStyle=X,V.fillRect(0,0,B,I);const le=V.createLinearGradient(0,0,0,I);le.addColorStop(0,"rgba(0,0,0,0)"),le.addColorStop(1,"rgba(0,0,0,1)"),V.fillStyle=le,V.fillRect(0,0,B,I)},g=(_,D)=>{const B=_.components()[0].element.dom,I=xC(D,100,100),V=Ps(I);d(B,mT(V))},p=(_,D)=>{const B=zO(jm(D));od.setValue(_,{x:B.saturation,y:100-B.value})};return ma({factory:_=>{const D=q({x:0,y:0}),B=(X,le,Ee)=>{wn(X,KN,{value:Ee})},I=(X,le,Ee,ye)=>{d(Ee.element.dom,mT(fT))},V=yt([Ro.config({find:O.some}),Rn.config({})]);return od.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,l],onChange:B,onInit:I,sliderBehaviours:V})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(_,D,B)=>{g(D,B)},setThumb:(_,D,B)=>{p(D,B)}},extraApis:{}})},eB=(t,s)=>{const a=d=>{const g=$A(t,s,d.onValidHex,d.onInvalidHex),p=c0(t,s),w=st=>(100-st)/100*360,x=st=>100-st/360*100,_={paletteRgba:S(fT),paletteHue:S(0)},D=xo(U8(t,s)),B=xo(p.sketch({})),I=xo(g.sketch({})),V=(st,$t,an)=>{B.getOpt(st).each(yo=>{p.setHue(yo,an)})},X=(st,$t)=>{I.getOpt(st).each(an=>{g.updateHex(an,$t)})},le=(st,$t,an)=>{D.getOpt(st).each(yo=>{od.setValue(yo,x(an))})},Ee=(st,$t)=>{B.getOpt(st).each(an=>{p.setThumb(an,$t)})},ye=(st,$t)=>{const an=jm(st);_.paletteRgba.set(an),_.paletteHue.set($t)},ke=(st,$t,an,yo)=>{ye($t,an),mt(yo,xn=>{xn(st,$t,an)})},Ne=()=>{const st=[X];return($t,an)=>{const yo=an.event.value,xn=_.paletteHue.get(),ho=xC(xn,yo.x,100-yo.y),Wn=UO(ho);ke($t,Wn,xn,st)}},Le=()=>{const st=[V,X];return($t,an)=>{const yo=w(an.event.value),xn=_.paletteRgba.get(),ho=zO(xn),Wn=xC(yo,ho.saturation,ho.value),mo=UO(Wn);ke($t,mo,yo,st)}},kt=()=>{const st=[V,le,Ee];return($t,an)=>{const yo=an.event.hex,xn=DL(yo);ke($t,yo,xn.hue,st)}};return{uid:d.uid,dom:d.dom,components:[B.asSpec(),D.asSpec(),I.asSpec()],behaviours:yt([Jn("colour-picker-events",[nt(FT,kt()),nt(KN,Ne()),nt(qN,Le())]),Ro.config({find:st=>I.getOpt(st)}),Sn.config({mode:"acyclic"})])}};return ma({name:"ColourPicker",configFields:[Qe("dom"),Te("onValidHex",G),Te("onInvalidHex",G)],factory:a})},em={self:()=>Ro.config({find:O.some}),memento:t=>Ro.config({find:t.getOpt}),childAt:t=>Ro.config({find:s=>Dc(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},HT=Cn([Te("preprocess",ht),Te("postprocess",ht)]),K8=(t,s)=>{const a=xc("RepresentingConfigs.memento processors",HT,s);return Ft.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=Ft.getValue(d);return a.postprocess(g)},setValue:(l,d)=>{const g=a.preprocess(d),p=t.get(l);Ft.setValue(p,g)}}})},tB=(t,s,a)=>Ft.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:a}}),VT=(t,s,a)=>tB(t,l=>s(l.element),(l,d)=>a(l.element,d)),sa={memento:K8,withElement:VT,withComp:tB,domValue:t=>VT(t,Si,pu),domHtml:t=>VT(t,K0,gf),memory:t=>Ft.config({store:{mode:"memory",initialValue:t}})},oB={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},J8=t=>s=>t.translate(oB[s]),Q8=(t,s,a)=>{const l=x=>"tox-"+x,d=eB(J8(s),l),g=x=>{wn(x,If,{name:"hex-valid",value:!0})},p=x=>{wn(x,If,{name:"hex-valid",value:!1})},w=xo(d.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[w.asSpec()],behaviours:yt([sa.withComp(a,x=>{const _=w.get(x);return Ro.getCurrent(_).bind(I=>Ft.getValue(I).hex).map(I=>"#"+ec(I,"#")).getOr("")},(x,_)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,B=O.from(D.exec(_)).bind(X=>gs(X,1)),I=w.get(x);Ro.getCurrent(I).fold(()=>{console.log("Can not find form")},X=>{Ft.setValue(X,{hex:B.getOr("")}),a0.getField(X,"hex").each(le=>{Xo(le,Hl())})})}),em.self()])}};var sB=tinymce.util.Tools.resolve("tinymce.Resource");const e7=t=>oo(t,"init"),t7=t=>{const s=Hs(),a=xo({dom:{tag:t.tag}}),l=Hs();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:yt([Jn("custom-editor-events",[Br(d=>{a.getOpt(d).each(g=>{(e7(t)?t.init(g.element.dom):sB.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{l.on(w=>{p.setValue(w)}),l.clear(),s.set(p)})})})]),sa.withComp(O.none(),()=>s.get().fold(()=>l.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>l.set(g),p=>p.setValue(g))}),em.self()]),components:[a.asSpec()]}};var q1=tinymce.util.Tools.resolve("tinymce.util.Tools");const rB=(t,s)=>{const a=q1.explode(s.getOption("images_file_types")),l=d=>es(a,g=>pr(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Pn(_r(t),l)},zf=(t,s,a)=>{const l=(I,V)=>{V.stop()},d=I=>(V,X)=>{mt(I,le=>{le(V,X)})},g=(I,V)=>{var X;if(!Vn.isDisabled(I)){const le=V.event.raw;w(I,(X=le.dataTransfer)===null||X===void 0?void 0:X.files)}},p=(I,V)=>{const X=V.event.raw.target;w(I,X.files)},w=(I,V)=>{V&&(Ft.setValue(I,rB(V,s)),wn(I,Xi,{name:t.name}))},x=xo({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:yt([Jn("input-file-events",[bg(wi()),bg(Mp())])])}),_=I=>({uid:I.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:yt([sa.memory(a.getOr([])),em.self(),Vn.config({}),lo.config({toggleClass:"dragenter",toggleOnExecute:!1}),Jn("dropzone-events",[nt("dragenter",d([l,lo.toggle])),nt("dragleave",d([l,lo.toggle])),nt("dragover",l),nt("drop",d([l,g])),nt(Uu(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[fr(s.translate("Drop an image here"))]},Xc.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[fr(s.translate("Browse for an image")),x.asSpec()],action:V=>{x.get(V).element.dom.click()},buttonBehaviours:yt([Gr.config({}),Kd.button(s.isDisabled),dc()])})]}]}),D=t.label.map(I=>th(I,s)),B=ls.parts.field({factory:{sketch:_}});return DC(D,B,["tox-form__group--stretched"],[])},PA=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:De(t.items,s.interpreter)}),zT=en("alloy-fake-before-tabstop"),l0=en("alloy-fake-after-tabstop"),UT=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:yt([Rn.config({ignore:!0}),Gr.config({})])}),aB=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[UT([zT]),t,UT([l0])],behaviours:yt([em.childAt(1)])}),cB=(t,s)=>{wn(t,Ll(),{raw:{which:9,shiftKey:s}})},n7=(t,s)=>{const a=s.element;Wa(a,zT)?cB(t,!0):Wa(a,l0)&&cB(t,!1)},HC=t=>OC(t,["."+zT,"."+l0].join(","),zn),o7=t=>{const s=S(t.getOr(""));return{getValue:a=>s.get(),setValue:(a,l)=>{s.get()!==l&&Hn(a.element,"srcdoc",l),s.set(l)}}},s7=(t,s,a)=>{const l=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",p={...t.label.map(B=>({title:B})).getOr({}),...a.map(B=>({srcdoc:B})).getOr({}),...l?{sandbox:"allow-scripts allow-same-origin"}:{}},w=o7(a),x=t.label.map(B=>th(B,s)),_=B=>aB({uid:B.uid,dom:{tag:"iframe",attributes:p,classes:d?[g]:[g,`${g}--opaque`]},behaviours:yt([Gr.config({}),Rn.config({}),sa.withComp(a,w.getValue,w.setValue)])}),D=ls.parts.field({factory:{sketch:_}});return DC(x,D,["tox-form__group--stretched"],[])},r7=t=>new Promise((s,a)=>{const l=()=>{g(),s(t)},d=[ll(t,"load",l),ll(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>mt(d,p=>p.unbind());t.dom.complete&&l()}),lB=(t,s,a,l,d)=>{const g=a*d,p=l*d,w=Math.max(0,t/2-g/2),x=Math.max(0,s/2-p/2);return{left:w.toString()+"px",top:x.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},a7=(t,s,a)=>{const l=ia(t),d=ze(t);return Math.min(l/s,d/a,1)},Uf=(t,s)=>{const a=S(s.getOr({url:""})),l=xo({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(x=>({src:x.url})).getOr({})}}),d=xo({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(x,_)=>{const D={url:_.url};_.zoom.each(I=>D.zoom=I),_.cachedWidth.each(I=>D.cachedWidth=I),_.cachedHeight.each(I=>D.cachedHeight=I),a.set(D);const B=()=>{const{cachedWidth:I,cachedHeight:V,zoom:X}=D;if(!dt(I)&&!dt(V)){if(dt(X)){const Ee=a7(x.element,I,V);D.zoom=Ee}const le=lB(ia(x.element),ze(x.element),I,V,D.zoom);d.getOpt(x).each(Ee=>{Ar(Ee.element,le)})}};l.getOpt(x).each(I=>{const V=I.element;_.url!==Ur(V,"src")&&(Hn(V,"src",_.url),ea(x.element,"tox-imagepreview__loaded")),B(),r7(V).then(X=>{x.getSystem().isConnected()&&(Cs(x.element,"tox-imagepreview__loaded"),D.cachedWidth=X.dom.naturalWidth,D.cachedHeight=X.dom.naturalHeight,B())})})},p={};t.height.each(x=>p.height=x);const w=s.map(x=>({url:x.url,zoom:O.from(x.zoom),cachedWidth:O.from(x.cachedWidth),cachedHeight:O.from(x.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:yt([em.self(),sa.withComp(w,()=>a.get(),g)])}},WT=(t,s)=>{const a={dom:{tag:"label",classes:["tox-label"]},components:[fr(s.providers.translate(t.label))]},l=De(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...l],behaviours:yt([em.self(),Kn.config({}),sa.domHtml(O.none()),Sn.config({mode:"acyclic"})])}},iB=en("toolbar.button.execute"),c7=t=>Wu((s,a)=>{Kv(t,s)(l=>{wn(s,iB,{buttonApi:l}),t.onAction(l)})}),pp=en("common-button-display-events"),IA={[$s()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Rd()]:["toolbar-button-events",pp],[Qr()]:["focusing","alloy.base.behaviour",pp]},VC=t=>Zt(t.element,"width",et(t.element,"width")),zC=(t,s,a)=>ed(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),K1=(t,s)=>zC(t,s,[]),tm=(t,s)=>zC(t,s,[Kn.config({})]),FA=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[fr(a.translate(t))],behaviours:yt([Kn.config({})])}),Ru=en("update-menu-text"),Y1=en("update-menu-icon"),LA=(t,s,a)=>{const l=S(G),d=t.text.map(I=>xo(FA(I,s,a.providers))),g=t.icon.map(I=>xo(tm(I,a.providers.icons))),p=(I,V)=>{const X=Ft.getValue(I);return Rn.focus(X),wn(X,"keydown",{raw:V.event.raw}),Oi.close(X),O.some(!0)},w=t.role.fold(()=>({}),I=>({role:I})),x=t.tooltip.fold(()=>({}),I=>{const V=a.providers.translate(I);return{title:V,"aria-label":V}}),_=ed("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),D=en("common-button-display-events");return xo(Oi.sketch({...t.uid?{uid:t.uid}:{},...w,dom:{tag:"button",classes:[s,`${s}--select`].concat(De(t.classes,I=>`${s}--${I}`)),attributes:{...x}},components:Yv([g.map(I=>I.asSpec()),d.map(I=>I.asSpec()),O.some(_)]),matchWidth:!0,useMinWidth:!0,onOpen:(I,V,X)=>{t.searchable&&u6(X)},dropdownBehaviours:yt([...t.dropdownBehaviours,Kd.button(()=>t.disabled||a.providers.isDisabled()),dc(),NC.config({}),Kn.config({}),Jn("dropdown-events",[dp(t,l),H1(t,l)]),Jn(D,[Br((I,V)=>VC(I))]),Jn("menubutton-update-display-text",[nt(Ru,(I,V)=>{d.bind(X=>X.getOpt(I)).each(X=>{Kn.set(X,[fr(a.providers.translate(V.event.text))])})}),nt(Y1,(I,V)=>{g.bind(X=>X.getOpt(I)).each(X=>{Kn.set(X,[tm(V.event.icon,a.providers.icons)])})})])]),eventOrder:Ns(IA,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Rd()]:["toolbar-button-events","dropdown-events",D]}),sandboxBehaviours:yt([Sn.config({mode:"special",onLeft:p,onRight:p}),Jn("dropdown-sandbox-events",[nt(NR,(I,V)=>{r6(I),V.stop()}),nt(BR,(I,V)=>{a6(I,V),V.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...qx(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:nN,onCollapseMenu:(I,V,X)=>{Jo.getHighlighted(X).each(le=>{nN(I,X,le)})},onDehighlightItem:i6}},fetch:I=>il.nu(Ye(t.fetch,I))})).asSpec()},l7=t=>Et(t),uB=t=>t.type==="separator",i7=t=>oo(t,"getSubmenuItems"),u7={type:"separator"},d7=(t,s)=>{const a=Bn(t,(l,d)=>l7(d)?d===""?l:d==="|"?l.length>0&&!uB(l[l.length-1])?l.concat([u7]):l:oo(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return a.length>0&&uB(a[a.length-1])&&a.pop(),a},dB=(t,s)=>{const a=t.getSubmenuItems(),l=fB(a,s),d=Ns(l.menus,{[t.value]:l.items}),g=Ns(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},mB=t=>{const s=pt(t,"value").getOrThunk(()=>en("generated-menu-item"));return Ns({value:s},t)},fB=(t,s)=>{const a=d7(Et(t)?t.split(" "):t,s);return is(a,(l,d)=>{if(i7(d)){const g=mB(d),p=dB(g,s);return{menus:Ns(l.menus,p.menus),items:[p.item,...l.items],expansions:Ns(l.expansions,p.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},gB=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),m7=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),X1=(t,s,a,l)=>{const d=en("primary-menu"),g=fB(t,a.shared.providers.menuItems());if(g.items.length===0)return O.none();const p=gB(l),w=oN(d,g.items,s,a,l.isHorizontalMenu,p),x=m7(l),_=Gt(g.menus,(B,I)=>oN(I,B,s,a,!1,x)),D=Ns(_,Xn(d,w));return O.from(R1.tieredData(d,D,g.expansions))},J1=t=>!oo(t,"items"),hB="data-value",HA=(t,s,a,l)=>De(a,d=>J1(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===l,onAction:()=>{Ft.setValue(t,d.value),wn(t,Xi,{name:s}),Rn.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>HA(t,s,d.items,l)}),VA=(t,s)=>us(t,a=>J1(a)?kn(a.value===s,a):VA(a.items,s)),f7=(t,s,a)=>{const l=s.shared.providers,d=a.bind(x=>VA(t.items,x)).orThunk(()=>ir(t.items).filter(J1)),g=t.label.map(x=>th(x,l)),p=ls.parts.field({dom:{},factory:{sketch:x=>LA({uid:x.uid,text:d.map(_=>_.text),icon:O.none(),tooltip:t.label,role:O.none(),fetch:(_,D)=>{const B=HA(_,t.name,t.items,Ft.getValue(_));D(X1(B,zm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:O.none()}))},onSetup:q(G),getApi:q({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Gr.config({}),sa.withComp(d.map(_=>_.value),_=>Ur(_.element,hB),(_,D)=>{VA(t.items,D).each(B=>{Hn(_.element,hB,B.value),wn(_,Ru,{text:B.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return ls.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:jt([g.toArray(),[w]]),fieldBehaviours:yt([Vn.config({disabled:q(!t.enabled),onDisabled:x=>{ls.getField(x).each(Vn.disable)},onEnabled:x=>{ls.getField(x).each(Vn.enable)}})])})},g7=(t,s)=>({dom:{tag:"div",classes:t.classes},components:De(t.items,s.shared.interpreter)}),h7=(t,s)=>{const a=De(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>Xn("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:cr(t.selectBehaviours,[Rn.config({}),Ft.config({store:{mode:"manual",getValue:d=>Si(d.element),setValue:(d,g)=>{qt(t.options,w=>w.value===g).isSome()&&pu(d.element,g)},...l}})])}},pB=ma({name:"HtmlSelect",configFields:[Qe("options"),uc("selectBehaviours",[Rn,Ft]),Te("selectClasses",[]),Te("selectAttributes",{}),ss("data")],factory:h7}),p7=(t,s,a)=>{const l=De(t.items,x=>({text:s.translate(x.text),value:x.value})),d=t.label.map(x=>th(x,s)),g=ls.parts.field({dom:{},...a.map(x=>({data:x})).getOr({}),selectAttributes:{size:t.size},options:l,factory:pB,selectBehaviours:yt([Vn.config({disabled:()=>!t.enabled||s.isDisabled()}),Gr.config({}),Jn("selectbox-change",[nt(Uu(),(x,_)=>{wn(x,Xi,{name:t.name})})])])}),p=t.size>1?O.none():O.some(ed("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),w={dom:{tag:"div",classes:["tox-selectfield"]},components:jt([[g],p.toArray()])};return ls.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:jt([d.toArray(),[w]]),fieldBehaviours:yt([Vn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:x=>{ls.getField(x).each(Vn.disable)},onEnabled:x=>{ls.getField(x).each(Vn.enable)}}),dc()])})},bB=q([Te("field1Name","field1"),Te("field2Name","field2"),_g("onLockedChange"),Vi(["lockClass"]),Te("locked",!1),xu.field("coupledFieldBehaviours",[Ro,Ft])]),zA=(t,s,a)=>Vs(t,s,a).bind(Ro.getCurrent),Wf=(t,s)=>ja({factory:ls,name:t,overrides:a=>({fieldBehaviours:yt([Jn("coupled-input-behaviour",[nt(Hl(),l=>{zA(l,a,s).each(d=>{Vs(l,a,"lock").each(g=>{lo.isOn(g)&&a.onLockedChange(l,d,g)})})})])])})}),UA=q([Wf("field1","field2"),Wf("field2","field1"),ja({factory:Xc,schema:[Qe("dom")],name:"lock",overrides:t=>({buttonBehaviours:yt([lo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),vB=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:xu.augment(t.coupledFieldBehaviours,[Ro.config({find:O.some}),Ft.config({store:{mode:"manual",getValue:d=>{const g=_w(d,t,["field1","field2"]);return{[t.field1Name]:Ft.getValue(g.field1()),[t.field2Name]:Ft.getValue(g.field2())}},setValue:(d,g)=>{const p=_w(d,t,["field1","field2"]);ba(g,t.field1Name)&&Ft.setValue(p.field1(),g[t.field1Name]),ba(g,t.field2Name)&&Ft.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Vs(d,t,"field1"),getField2:d=>Vs(d,t,"field2"),getLock:d=>Vs(d,t,"lock")}}),Ji=ta({name:"FormCoupledInputs",configFields:bB(),partFields:UA(),factory:vB,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),WA=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let l=t.value.toFixed(a(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},ZT=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const l=parseFloat(a[1]),d=a[2];return Ct.value({value:l,unit:d})}else return Ct.error(t)},UC=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>oo(a,d);return t.unit===s?O.some(t.value):l(t.unit)&&l(s)?a[t.unit]===a[s]?O.some(t.value):O.some(t.value/a[t.unit]*a[s]):O.none()},jT=t=>O.none(),yB=(t,s)=>a=>UC(a,s).map(l=>({value:l*t,unit:s})),b7=(t,s)=>{const a=ZT(t).toOptional(),l=ZT(s).toOptional();return Ja(a,l,(d,g)=>UC(d,g.unit).map(p=>g.value/p).map(p=>yB(p,g.unit)).getOr(jT)).getOr(jT)},v7=(t,s)=>{let a=jT;const l=en("ratio-event"),d=B=>ed(B,{tag:"span",classes:["tox-icon","tox-lock-icon__"+B]},s.icons),g=Ji.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:yt([Vn.config({disabled:()=>!t.enabled||s.isDisabled()}),dc(),Gr.config({})])}),p=B=>({dom:{tag:"div",classes:["tox-form__group"]},components:B}),w=B=>ls.parts.field({factory:$1,inputClasses:["tox-textfield"],inputBehaviours:yt([Vn.config({disabled:()=>!t.enabled||s.isDisabled()}),dc(),Gr.config({}),Jn("size-input-events",[nt(mf(),(I,V)=>{wn(I,l,{isField1:B})}),nt(Uu(),(I,V)=>{wn(I,Xi,{name:t.name})})])]),selectOnFocus:!1}),x=B=>({dom:{tag:"label",classes:["tox-label"]},components:[fr(s.translate(B))]}),_=Ji.parts.field1(p([ls.parts.label(x("Width")),w(!0)])),D=Ji.parts.field2(p([ls.parts.label(x("Height")),w(!1)]));return Ji.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[_,D,p([x(Vy),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(B,I,V)=>{ZT(Ft.getValue(B)).each(X=>{a(X).each(le=>{Ft.setValue(I,WA(le))})})},coupledFieldBehaviours:yt([Vn.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:B=>{Ji.getField1(B).bind(ls.getField).each(Vn.disable),Ji.getField2(B).bind(ls.getField).each(Vn.disable),Ji.getLock(B).each(Vn.disable)},onEnabled:B=>{Ji.getField1(B).bind(ls.getField).each(Vn.enable),Ji.getField2(B).bind(ls.getField).each(Vn.enable),Ji.getLock(B).each(Vn.enable)}}),dc(),Jn("size-input-events2",[nt(l,(B,I)=>{const V=I.event.isField1,X=V?Ji.getField1(B):Ji.getField2(B),le=V?Ji.getField2(B):Ji.getField1(B),Ee=X.map(Ft.getValue).getOr(""),ye=le.map(Ft.getValue).getOr("");a=b7(Ee,ye)})])])})},y7=(t,s,a)=>{const l=od.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[fr(s.translate(t.label))]}),d=od.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=od.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return od.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:q(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:yt([em.self(),Rn.config({})]),onChoose:(p,w,x)=>{wn(p,Xi,{name:t.name,value:x})}})},w7=(t,s)=>{const a=w=>({dom:{tag:"th",innerHtml:s.translate(w)}}),l=w=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:De(w,a)}]}),d=w=>({dom:{tag:"td",innerHtml:s.translate(w)}}),g=w=>({dom:{tag:"tr"},components:De(w,d)}),p=w=>({dom:{tag:"tbody"},components:De(w,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),p(t.cells)],behaviours:yt([Gr.config({}),Rn.config({})])}},wB=(t,s)=>{const a=t.label.map(V=>th(V,s)),l=[Vn.config({disabled:()=>t.disabled||s.isDisabled()}),dc(),Sn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:V=>(Xo(V,MC),O.some(!0))}),Jn("textfield-change",[nt(Hl(),(V,X)=>{wn(V,Xi,{name:t.name})}),nt(L0(),(V,X)=>{wn(V,Xi,{name:t.name})})]),Gr.config({})],d=t.validation.map(V=>Ff.config({getRoot:X=>pc(X.element),invalidClass:"tox-invalid",validator:{validate:X=>{const le=Ft.getValue(X),Ee=V.validator(le);return il.pure(Ee===!0?Ct.value(le):Ct.error(Ee))},validateOnLoad:V.validateOnLoad}})).toArray(),g=t.placeholder.fold(q({}),V=>({placeholder:s.translate(V)})),p=t.inputMode.fold(q({}),V=>({inputmode:V})),w={...g,...p},x=ls.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(V=>({data:V})).getOr({}),inputAttributes:w,inputClasses:[t.classname],inputBehaviours:yt(jt([l,d])),selectOnFocus:!1,factory:$1}),_=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[x]}:x,B=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),I=[Vn.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:V=>{ls.getField(V).each(Vn.disable)},onEnabled:V=>{ls.getField(V).each(Vn.enable)}}),dc()];return DC(a,_,B,I)},CB=(t,s,a)=>wB({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:O.none(),maximized:t.maximized,data:a},s),SB=(t,s,a)=>wB({name:t.name,multiline:!0,label:t.label,inputMode:O.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:O.none(),maximized:t.maximized,data:a},s),WC=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),oh=t=>t.dimension.property,Q1=(t,s)=>t.dimension.getDimension(s),eb=(t,s)=>{const a=WC(t,s);Sl(a,[s.shrinkingClass,s.growingClass])},ZA=(t,s)=>{ea(t.element,s.openClass),Cs(t.element,s.closedClass),Zt(t.element,oh(s),"0px"),Y(t.element)},jA=(t,s)=>{ea(t.element,s.closedClass),Cs(t.element,s.openClass),fo(t.element,oh(s))},GA=(t,s,a,l)=>{a.setCollapsed(),Zt(t.element,oh(s),Q1(s,t.element)),eb(t,s),ZA(t,s),s.onStartShrink(t),s.onShrunk(t)},xB=(t,s,a,l)=>{const d=l.getOrThunk(()=>Q1(s,t.element));a.setCollapsed(),Zt(t.element,oh(s),d),Y(t.element);const g=WC(t,s);ea(g,s.growingClass),Cs(g,s.shrinkingClass),ZA(t,s),s.onStartShrink(t)},TB=(t,s,a)=>{const l=Q1(s,t.element);(l==="0px"?GA:xB)(t,s,a,O.some(l))},kB=(t,s,a)=>{const l=WC(t,s),d=Wa(l,s.shrinkingClass),g=Q1(s,t.element);jA(t,s);const p=Q1(s,t.element);(d?()=>{Zt(t.element,oh(s),g),Y(t.element)}:()=>{ZA(t,s)})(),ea(l,s.shrinkingClass),Cs(l,s.growingClass),jA(t,s),Zt(t.element,oh(s),p),a.setExpanded(),s.onStartGrow(t)},qA=(t,s,a)=>{if(a.isExpanded()){fo(t.element,oh(s));const l=Q1(s,t.element);Zt(t.element,oh(s),l)}},C7=(t,s,a)=>{a.isExpanded()||kB(t,s,a)},EB=(t,s,a)=>{a.isExpanded()&&TB(t,s,a)},S7=(t,s,a)=>{a.isExpanded()&&GA(t,s,a)},x7=(t,s,a)=>a.isExpanded(),_B=(t,s,a)=>a.isCollapsed(),KA=(t,s,a)=>{const l=WC(t,s);return Wa(l,s.growingClass)===!0},OB=(t,s,a)=>{const l=WC(t,s);return Wa(l,s.shrinkingClass)===!0};var AB=Object.freeze({__proto__:null,refresh:qA,grow:C7,shrink:EB,immediateShrink:S7,hasGrown:x7,hasShrunk:_B,isGrowing:KA,isShrinking:OB,isTransitioning:(t,s,a)=>KA(t,s)||OB(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?TB:kB)(t,s,a)},disableTransitions:eb,immediateGrow:(t,s,a)=>{a.isExpanded()||(jA(t,s),Zt(t.element,oh(s),Q1(s,t.element)),eb(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),k7=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const l=s.expanded;return ju(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Xn(s.dimension.property,"0px")})},events:(t,s)=>Gs([hu(fg(),(a,l)=>{l.event.raw.propertyName===t.dimension.property&&(eb(a,t),s.isExpanded()&&fo(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),E7=[Qe("closedClass"),Qe("openClass"),Qe("shrinkingClass"),Qe("growingClass"),ss("getAnimationRoot"),Se("onShrunk"),Se("onStartShrink"),Se("onGrown"),Se("onStartGrow"),Te("expanded",!1),ei("dimension",Xr("property",{width:[qs("property","width"),qs("getDimension",t=>ia(t)+"px")],height:[qs("property","height"),qs("getDimension",t=>ze(t)+"px")]}))],_7=Object.freeze({__proto__:null,init:t=>{const s=S(t.expanded),a=()=>"expanded: "+s.get();return zl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Ye(s.set,!1),setExpanded:Ye(s.set,!0),readState:a})}});const Qi=cc({fields:E7,name:"sliding",active:k7,apis:AB,state:_7}),DB=t=>({isEnabled:()=>!Vn.isDisabled(t),setEnabled:s=>Vn.set(t,!s),setActive:s=>{const a=t.element;s?(Cs(a,"tox-tbtn--enabled"),Hn(a,"aria-pressed",!0)):(ea(a,"tox-tbtn--enabled"),ne(a,"aria-pressed"))},isActive:()=>Wa(t.element,"tox-tbtn--enabled"),setText:s=>{wn(t,Ru,{text:s})},setIcon:s=>wn(t,Y1,{icon:s})}),ZC=(t,s,a,l,d=!0)=>LA({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(g,p)=>{const w={pattern:t.search.isSome()?d6(g):""};t.fetch(x=>{p(X1(x,zm.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},w,DB(g))},onSetup:t.onSetup,getApi:DB,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[Gr.config({})]:[]]},s,a.shared),O7=(t,s,a)=>{const l=g=>p=>{const w=!p.isActive();p.setActive(w),g.storage.set(w),a.shared.getSink().each(x=>{s().getOpt(x).each(_=>{wu(_.element),wn(_,If,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(De(t,p=>{const w=p.text.fold(()=>({}),x=>({text:x}));return{type:p.type,active:!1,...w,onAction:l(p),onSetup:d(p)}}))}},RB=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[fr(t)]}),GT=en("leaf-label-event-id"),YA=({leaf:t,onLeafAction:s,visible:a,treeId:l,backstage:d})=>{const g=t.menu.map(w=>ZC(w,"tox-mbtn",d,O.none(),a)),p=[RB(t.title)];return g.each(w=>p.push(w)),Xc.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:p,role:"treeitem",action:w=>{s(t.id),w.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[Ll()]:[GT,"keying"]},buttonBehaviours:yt([...a?[Gr.config({})]:[],lo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),zi.config({channels:{[`update-active-item-${l}`]:{onReceive:(w,x)=>{(x.value===t.id?lo.on:lo.off)(w)}}}}),Jn(GT,[nt(Ll(),(w,x)=>{const _=x.event.raw.code==="ArrowLeft",D=x.event.raw.code==="ArrowRight";_?(bu(w.element,".tox-tree--directory").each(B=>{w.getSystem().getByDom(B).each(I=>{Om(B,".tox-tree--directory__label").each(V=>{I.getSystem().getByDom(V).each(Rn.focus)})})}),x.stop()):D&&x.stop()})])])})},A7=(t,s,a)=>ed(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:a},s),D7=(t,s)=>A7(t,s,[]),i0=en("directory-label-event-id"),XA=({directory:t,visible:s,noChildren:a,backstage:l})=>{const d=t.menu.map(w=>ZC(w,"tox-mbtn",l,O.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[D7("chevron-right",l.shared.providers.icons)]},RB(t.title)];d.each(w=>{g.push(w)});const p=w=>{bu(w.element,".tox-tree--directory").each(x=>{w.getSystem().getByDom(x).each(_=>lo.toggle(_))})};return Xc.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:p,eventOrder:{[Ll()]:[i0,"keying"]},buttonBehaviours:yt([...s?[Gr.config({})]:[],Jn(i0,[nt(Ll(),(w,x)=>{const _=x.event.raw.code==="ArrowRight",D=x.event.raw.code==="ArrowLeft";_&&a&&x.stop(),(_||D)&&bu(w.element,".tox-tree--directory").each(B=>{w.getSystem().getByDom(B).each(I=>{!lo.isOn(I)&&_||lo.isOn(I)&&D?(p(w),x.stop()):D&&!lo.isOn(I)&&(bu(I.element,".tox-tree--directory").each(V=>{Om(V,".tox-tree--directory__label").each(X=>{I.getSystem().getByDom(X).each(Rn.focus)})}),x.stop())})})})])])})},R7=({children:t,onLeafAction:s,visible:a,treeId:l,backstage:d})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(g=>g.type==="leaf"?YA({leaf:g,onLeafAction:s,visible:a,treeId:l,backstage:d}):JA({directory:g,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d})),behaviours:yt([Qi.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking"}),Kn.config({})])}),JA=({directory:t,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d})=>{const{children:g}=t,p=w=>g.map(x=>x.type==="leaf"?YA({leaf:x,onLeafAction:s,visible:w,treeId:l,backstage:d}):JA({directory:x,onLeafAction:s,labelTabstopping:w,treeId:l,backstage:d}));return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[XA({directory:t,visible:a,noChildren:t.children.length===0,backstage:d}),R7({children:g,onLeafAction:s,visible:!1,treeId:l,backstage:d})],behaviours:yt([lo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(w,x)=>{const _=w.components()[1],D=p(x);x?Qi.grow(_):Qi.shrink(_),Kn.set(_,D)}})])}},QA=(t,s)=>{const a=t.onLeafAction.getOr(G),l=en("tree-id"),d=t.items.map(g=>g.type==="leaf"?YA({leaf:g,onLeafAction:a,visible:!0,treeId:l,backstage:s}):JA({directory:g,onLeafAction:a,labelTabstopping:!0,treeId:l,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:d,behaviours:yt([Sn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1})])}};var e4=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return Gs([nt(t.event,l),Vl(()=>s.cancel())].concat(t.cancelEvent.map(d=>[nt(d,()=>s.cancel())]).getOr([])))}});const MB=(t,s)=>{let a=null;return{cancel:()=>{tn(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{tn(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},t4=(t,s)=>{let a=null;const l=()=>{tn(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...g)=>{l(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},NB=t=>{const s=S(null);return zl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var BB=Object.freeze({__proto__:null,throttle:NB,init:t=>t.stream.streams.state(t)});const N7=(t,s)=>{const a=t.stream,l=t4(t.onStream,a.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),a.stopEvent&&g.stop()}};var $B=[ei("stream",Xr("mode",{throttle:[Qe("delay"),Te("stopEvent",!0),qs("streams",{setup:N7,state:NB})]})),Te("event","input"),ss("cancelEvent"),_g("onStream")];const qT=cc({fields:$B,name:"streaming",active:e4,state:BB}),KT=(t,s,a)=>{const l=Ft.getValue(a);Ft.setValue(s,l),o4(s)},n4=(t,s)=>{const a=t.element,l=Si(a),d=a.dom;Ur(a,"type")!=="number"&&s(d,l)},o4=t=>{n4(t,(s,a)=>s.setSelectionRange(a.length,a.length))},PB=(t,s)=>{n4(t,(a,l)=>a.setSelectionRange(s,l.length))},B7=(t,s,a)=>{if(t.selectsOver){const l=Ft.getValue(s),d=t.getDisplayText(l),g=Ft.getValue(a);return t.getDisplayText(g).indexOf(d)===0?O.some(()=>{KT(t,s,a),PB(s,d.length)}):O.none()}else return O.none()},s4=q("alloy.typeahead.itemexecute"),$7=(t,s,a,l)=>{const d=(B,I,V)=>{t.previewing.set(!1);const X=na.getCoupled(B,"sandbox");if(So.isOpen(X))Ro.getCurrent(X).each(le=>{Jo.getHighlighted(le).fold(()=>{V(le)},()=>{W0(X,le.element,"keydown",I)})});else{const le=Ee=>{Ro.getCurrent(Ee).each(V)};wT(t,p(B),B,X,l,le,ii.HighlightMenuAndItem).get(G)}},g=RR(t),p=B=>I=>I.map(V=>{const X=Or(V.menus),le=Ve(X,ye=>Pn(ye.items,ke=>ke.type==="item"));return Ft.getState(B).update(De(le,ye=>ye.data)),V}),w=B=>Ro.getCurrent(B),x="typeaheadevents",_=[Rn.config({}),Ft.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:B=>Si(B.element),getFallbackEntry:B=>({value:B,meta:{}}),setValue:(B,I)=>{pu(B.element,t.model.getDisplayText(I))},...t.initialData.map(B=>Xn("initialValue",B)).getOr({})}}),qT.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(B,I)=>{const V=na.getCoupled(B,"sandbox");if(Rn.isFocused(B)&&Si(B.element).length>=t.minChars){const le=w(V).bind(ye=>Jo.getHighlighted(ye).map(Ft.getValue));t.previewing.set(!0);const Ee=ye=>{w(V).each(ke=>{le.fold(()=>{t.model.selectsOver&&Jo.highlightFirst(ke)},Ne=>{Jo.highlightBy(ke,Le=>Ft.getValue(Le).value===Ne.value),Jo.getHighlighted(ke).orThunk(()=>(Jo.highlightFirst(ke),O.none()))})})};wT(t,p(B),B,V,l,Ee,ii.HighlightJustMenu).get(G)}},cancelEvent:Np()}),Sn.config({mode:"special",onDown:(B,I)=>(d(B,I,Jo.highlightFirst),O.some(!0)),onEscape:B=>{const I=na.getCoupled(B,"sandbox");return So.isOpen(I)?(So.close(I),O.some(!0)):O.none()},onUp:(B,I)=>(d(B,I,Jo.highlightLast),O.some(!0)),onEnter:B=>{const I=na.getCoupled(B,"sandbox"),V=So.isOpen(I);if(V&&!t.previewing.get())return w(I).bind(X=>Jo.getHighlighted(X)).map(X=>(wn(B,s4(),{item:X}),!0));{const X=Ft.getValue(B);return Xo(B,Np()),t.onExecute(I,B,X),V&&So.close(I),O.some(!0)}}}),lo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),na.config({others:{sandbox:B=>_C(t,B,{onOpen:()=>lo.on(B),onClose:()=>lo.off(B)})}}),Jn(x,[Br(B=>{t.lazyTypeaheadComp.set(O.some(B))}),Vl(B=>{t.lazyTypeaheadComp.set(O.none())}),Wu(B=>{const I=G;oA(t,p(B),B,l,I,ii.HighlightMenuAndItem).get(G)}),nt(s4(),(B,I)=>{const V=na.getCoupled(B,"sandbox");KT(t.model,B,I.event.item),Xo(B,Np()),t.onItemExecute(B,V,I.event.item,Ft.getValue(B)),So.close(V),o4(B)})].concat(t.dismissOnBlur?[nt(F0(),B=>{const I=na.getCoupled(B,"sandbox");Yu(I.element).isNone()&&So.close(I)})]:[]))],D={[ym()]:[Ft.name(),qT.name(),x],...t.eventOrder};return{uid:t.uid,dom:MR(Ns(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...cr(t.typeaheadBehaviours,_)},eventOrder:D}},IB=q([ss("lazySink"),Qe("fetch"),Te("minChars",5),Te("responseTime",1e3),Se("onOpen"),Te("getHotspot",O.some),Te("getAnchorOverrides",q({})),Te("layouts",O.none()),Te("eventOrder",{}),C("model",{},[Te("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Te("selectsOver",!0),Te("populateFromBrowse",!0)]),Se("onSetValue"),gr("onExecute"),Se("onItemExecute"),Te("inputClasses",[]),Te("inputAttributes",{}),Te("inputStyles",{}),Te("matchWidth",!0),Te("useMinWidth",!1),Te("dismissOnBlur",!0),Vi(["openClass"]),ss("initialData"),uc("typeaheadBehaviours",[Rn,Ft,qT,Sn,lo,na]),Os("lazyTypeaheadComp",()=>S(O.none)),Os("previewing",()=>S(!0))].concat(DR()).concat(rA())),P7=q([Tu({schema:[Ku()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{B7(t.model,d,l).fold(()=>{t.model.selectsOver?(Jo.dehighlight(a,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&KT(t.model,d,l)})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(l=>(wn(l,s4(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&KT(t.model,l,a)})}})})]),FB=ta({name:"Typeahead",configFields:IB(),partFields:P7(),factory:$7}),nm=t=>({...t,toCached:()=>nm(t.toCached()),bindFuture:x=>nm(t.bind(_=>_.fold(D=>il.pure(Ct.error(D)),D=>x(D)))),bindResult:x=>nm(t.map(_=>_.bind(x))),mapResult:x=>nm(t.map(_=>_.map(x))),mapError:x=>nm(t.map(_=>_.mapError(x))),foldResult:(x,_)=>t.map(D=>D.fold(x,_)),withTimeout:(x,_)=>nm(il.nu(D=>{let B=!1;const I=setTimeout(()=>{B=!0,D(Ct.error(_()))},x);t.get(V=>{B||(clearTimeout(I),D(V))})}))}),LB=t=>nm(il.nu(t)),YT=t=>nm(il.pure(Ct.value(t))),F7={nu:LB,wrap:nm,pure:YT,value:YT,error:t=>nm(il.pure(Ct.error(t))),fromResult:t=>nm(il.pure(t)),fromFuture:t=>nm(t.map(Ct.value)),fromPromise:t=>LB(s=>{t.then(a=>{s(Ct.value(a))},a=>{s(Ct.error(a))})})},jC=(t,s,a=[],l,d,g)=>{const p=s.fold(()=>({}),_=>({action:_})),w={buttonBehaviours:yt([Kd.button(()=>!t.enabled||g.isDisabled()),dc(),Gr.config({}),Jn("button press",[I2("click"),I2("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},x=Ns(w,{dom:l});return Ns(x,{components:d})},L7=(t,s,a,l=[])=>{const d=t.tooltip.map(x=>({"aria-label":a.translate(x),title:a.translate(x)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(x=>K1(x,a.icons)),w=Yv([p]);return jC(t,s,l,g,w,a)},XT=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},HB=(t,s,a,l=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(I=>K1(I,a.icons)),w=[p.getOrThunk(()=>fr(g))],x=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),B={tag:"button",classes:[...XT(x),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return jC(t,s,l,B,w,a)},VB=(t,s,a,l=[],d=[])=>{const g=HB(t,O.some(s),a,l,d);return Xc.sketch(g)},zB=(t,s)=>a=>{s==="custom"?wn(a,If,{name:t,value:{}}):s==="submit"?Xo(a,MC):s==="cancel"?Xo(a,Z1):console.error("Unknown button type: ",s)},H7=(t,s)=>s==="menu",UB=(t,s)=>s==="custom"||s==="cancel"||s==="submit",V7=(t,s)=>s==="togglebutton",z7=(t,s)=>{var a,l,d;const g=O.from(t.icon).map(ke=>tm(ke,s.icons)).map(xo),p=ke=>{wn(ke,If,{name:t.name,value:{setIcon:Ne=>{g.map(Le=>Le.getOpt(ke).each(kt=>{Kn.set(kt,[tm(Ne,s.icons)])}))}}})},w={...t,name:(a=t.name)!==null&&a!==void 0?a:"",primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:O.from(t.tooltip),icon:O.from(t.name),enabled:(l=t.enabled)!==null&&l!==void 0?l:!1,borderless:!1},x=w.tooltip.map(ke=>({"aria-label":s.translate(ke),title:s.translate(ke)})).getOr({}),_=XT((d=t.buttonType)!==null&&d!==void 0?d:"secondary"),D=!!t.icon&&!!t.text,B={tag:"button",classes:[..._.concat(["tox-button--icon"]),...t.active?["tox-button--enabled"]:[],...D?["tox-button--icon-and-text"]:[]],attributes:x},I=[],V=s.translate(t.text),X=fr(V),Ee=[...Yv([g.map(ke=>ke.asSpec())]),...D?[X]:[]],ye=jC(w,O.some(p),I,B,Ee,s);return Xc.sketch(ye)},GC=(t,s,a)=>{if(H7(t,s)){const l=()=>p,d=t,g={...t,type:"menubutton",search:O.none(),onSetup:w=>(w.setEnabled(t.enabled),G),fetch:O7(d.items,l,a)},p=xo(ZC(g,"tox-tbtn",a,O.none()));return p.asSpec()}else if(UB(t,s)){const l=zB(t.name,s),d={...t,borderless:!1};return VB(d,l,a.shared.providers,[])}else if(V7(t,s)){const l={...t,tooltip:t.tooltip,text:t.text.getOrUndefined(),buttonType:t.buttonType.getOrUndefined()};return z7(l,a.shared.providers)}else throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")},U7=(t,s)=>{const a=zB(t.name,"custom");return gN(O.none(),ls.parts.field({factory:Xc,...HB(t,O.some(a),s,[sa.memory(""),em.self()])}))},W7={type:"separator"},Z7=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:G}),JT=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:G}),j7=t=>De(t,Z7),G7=(t,s)=>Pn(s,a=>a.type===t),r4=(t,s)=>j7(G7(t,s)),WB=t=>r4("header",t.targets),ZB=t=>r4("anchor",t.targets),QT=t=>O.from(t.anchorTop).map(s=>JT("<top>",s)).toArray(),q7=t=>O.from(t.anchorBottom).map(s=>JT("<bottom>",s)).toArray(),K7=t=>De(t,s=>JT(s,s)),Y7=t=>Bn(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(W7,a),[]),a4=(t,s)=>{const a=t.toLowerCase();return Pn(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,p=(d=l.value)!==null&&d!==void 0?d:"";return ur(g.toLowerCase(),a)||ur(p.toLowerCase(),a)})},jB=(t,s,a)=>{const l=Ft.getValue(s),d=l.meta.text!==void 0?l.meta.text:l.value;return a.getLinkInformation().fold(()=>[],p=>{const w=a4(d,K7(a.getHistory(t)));return t==="file"?Y7([w,a4(d,WB(p)),a4(d,jt([QT(p),ZB(p),q7(p)]))]):w})},c4=en("aria-invalid"),X7=(t,s,a,l)=>{const d=s.shared.providers,g=ke=>{const Ne=Ft.getValue(ke);a.addToHistory(Ne.value,t.filetype)},p={...l.map(ke=>({initialData:ke})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":c4,type:"url"},minChars:0,responseTime:0,fetch:ke=>{const Ne=jB(t.filetype,ke,a),Le=X1(Ne,zm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:O.none()});return il.pure(Le)},getHotspot:ke=>X.getOpt(ke),onSetValue:(ke,Ne)=>{ke.hasConfigured(Ff)&&Ff.run(ke).get(G)},typeaheadBehaviours:yt([...a.getValidationHandler().map(ke=>Ff.config({getRoot:Ne=>pc(Ne.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Ne,Le)=>{D.getOpt(Ne).each(kt=>{Hn(kt.element,"title",d.translate(Le))})}},validator:{validate:Ne=>{const Le=Ft.getValue(Ne);return F7.nu(kt=>{ke({type:t.filetype,url:Le.value},st=>{if(st.status==="invalid"){const $t=Ct.error(st.message);kt($t)}else{const $t=Ct.value(st.message);kt($t)}})})},validateOnLoad:!1}})).toArray(),Vn.config({disabled:()=>!t.enabled||d.isDisabled()}),Gr.config({}),Jn("urlinput-events",[nt(Hl(),ke=>{const Ne=Si(ke.element),Le=Ne.trim();Le!==Ne&&pu(ke.element,Le),t.filetype==="file"&&wn(ke,Xi,{name:t.name})}),nt(Uu(),ke=>{wn(ke,Xi,{name:t.name}),g(ke)}),nt(L0(),ke=>{wn(ke,Xi,{name:t.name}),g(ke)})])]),eventOrder:{[Hl()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ke=>ke.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:qx(!1,1,"normal")},onExecute:(ke,Ne,Le)=>{wn(Ne,MC,{})},onItemExecute:(ke,Ne,Le,kt)=>{g(ke),wn(ke,Xi,{name:t.name})}},w=ls.parts.field({...p,factory:FB}),x=t.label.map(ke=>th(ke,d)),D=xo(((ke,Ne,Le=ke,kt=ke)=>ed(Le,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ke],attributes:{title:d.translate(kt),"aria-live":"polite",...Ne.fold(()=>({}),st=>({id:st}))}},d.icons))("invalid",O.some(c4),"warning")),B=xo({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),I=a.getUrlPicker(t.filetype),V=en("browser.url.event"),X=xo({dom:{tag:"div",classes:["tox-control-wrap"]},components:[w,B.asSpec()],behaviours:yt([Vn.config({disabled:()=>!t.enabled||d.isDisabled()})])}),le=xo(VB({name:t.name,icon:O.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:O.none(),borderless:!0},ke=>Xo(ke,V),d,[],["tox-browse-url"])),Ee=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:jt([[X.asSpec()],I.map(()=>le.asSpec()).toArray()])}),ye=ke=>{Ro.getCurrent(ke).each(Ne=>{const Le=Ft.getValue(Ne),kt={fieldname:t.name,...Le};I.each(st=>{st(kt).get($t=>{Ft.setValue(Ne,$t),wn(ke,Xi,{name:t.name})})})})};return ls.sketch({dom:hN(),components:x.toArray().concat([Ee()]),fieldBehaviours:yt([Vn.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:ke=>{ls.getField(ke).each(Vn.disable),le.getOpt(ke).each(Vn.disable)},onEnabled:ke=>{ls.getField(ke).each(Vn.enable),le.getOpt(ke).each(Vn.enable)}}),dc(),Jn("url-input-events",[nt(V,ye)])])})},J7=(t,s)=>Yd.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Xc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:K3(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:a=>{wn(a,If,{name:"alert-banner",value:t.url})},buttonBehaviours:yt([Jw()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),GB=(t,s)=>{t.dom.checked=s},Q7=t=>t.dom.checked,eH=(t,s,a)=>{const l=x=>(x.element.dom.click(),O.some(!0)),d=ls.parts.field({factory:{sketch:ht},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:yt([em.self(),Vn.config({disabled:()=>!t.enabled||s.isDisabled()}),Gr.config({}),Rn.config({}),sa.withElement(a,Q7,GB),Sn.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),Jn("checkbox-events",[nt(Uu(),(x,_)=>{wn(x,Xi,{name:t.name})})])])}),g=ls.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[fr(s.translate(t.label))],behaviours:yt([NC.config({})])}),p=x=>ed(x==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},s.icons),w=xo({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return ls.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,w.asSpec(),g],fieldBehaviours:yt([Vn.config({disabled:()=>!t.enabled||s.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:x=>{ls.getField(x).each(Vn.disable)},onEnabled:x=>{ls.getField(x).each(Vn.enable)}}),dc()])})},co=t=>t.presets==="presentation"?Yd.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Yd.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:yt([Gr.config({}),Rn.config({})])}),fa=t=>(s,a,l,d)=>pt(a,"name").fold(()=>t(a,d,O.none()),g=>s.field(g,t(a,d,pt(l,g)))),qB=t=>(s,a,l,d)=>{const g=Ns(a,{source:"dynamic"});return fa(t)(s,g,l,d)},KB={bar:fa((t,s)=>R6(t,s.shared)),collection:fa((t,s,a)=>I6(t,s.shared.providers,a)),alertbanner:fa((t,s)=>J7(t,s.shared.providers)),input:fa((t,s,a)=>CB(t,s.shared.providers,a)),textarea:fa((t,s,a)=>SB(t,s.shared.providers,a)),label:fa((t,s)=>WT(t,s.shared)),iframe:qB((t,s,a)=>s7(t,s.shared.providers,a)),button:fa((t,s)=>U7(t,s.shared.providers)),checkbox:fa((t,s,a)=>eH(t,s.shared.providers,a)),colorinput:fa((t,s,a)=>Z6(t,s.shared,s.colorinput,a)),colorpicker:fa((t,s,a)=>Q8(t,s.shared.providers,a)),dropzone:fa((t,s,a)=>zf(t,s.shared.providers,a)),grid:fa((t,s)=>PA(t,s.shared)),listbox:fa((t,s,a)=>f7(t,s,a)),selectbox:fa((t,s,a)=>p7(t,s.shared.providers,a)),sizeinput:fa((t,s)=>v7(t,s.shared.providers)),slider:fa((t,s,a)=>y7(t,s.shared.providers,a)),urlinput:fa((t,s,a)=>X7(t,s,s.urlinput,a)),customeditor:fa(t7),htmlpanel:fa(co),imagepreview:fa((t,s,a)=>Uf(t,a)),table:fa((t,s)=>w7(t,s.shared.providers)),tree:fa((t,s)=>QA(t,s)),panel:fa((t,s)=>g7(t,s))},YB={field:(t,s)=>s,record:q([])},l4=(t,s,a,l)=>{const d=Ns(l,{shared:{interpreter:g=>ek(t,g,a,d)}});return ek(t,s,a,d)},ek=(t,s,a,l)=>pt(KB,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,l)),tH=(t,s,a)=>ek(YB,t,s,a),om="layout-inset",i4=t=>t.x,u4=(t,s)=>t.x+t.width/2-s.width/2,d4=(t,s)=>t.x+t.width-s.width,m4=t=>t.y,f4=(t,s)=>t.y+t.height-s.height,g4=(t,s)=>t.y+t.height/2-s.height/2,u0=(t,s,a)=>Za(d4(t,s),f4(t,s),a.insetSouthwest(),Ub(),"southwest",rc(t,{right:0,bottom:3}),om),qC=(t,s,a)=>Za(i4(t),f4(t,s),a.insetSoutheast(),by(),"southeast",rc(t,{left:1,bottom:3}),om),KC=(t,s,a)=>Za(d4(t,s),m4(t),a.insetNorthwest(),Og(),"northwest",rc(t,{right:0,top:2}),om),YC=(t,s,a)=>Za(i4(t),m4(t),a.insetNortheast(),Gp(),"northeast",rc(t,{left:1,top:2}),om),Zf=(t,s,a)=>Za(u4(t,s),m4(t),a.insetNorth(),xl(),"north",rc(t,{top:2}),om),XC=(t,s,a)=>Za(u4(t,s),f4(t,s),a.insetSouth(),qp(),"south",rc(t,{bottom:3}),om),XB=(t,s,a)=>Za(d4(t,s),g4(t,s),a.insetEast(),Kp(),"east",rc(t,{right:0}),om),h4=(t,s,a)=>Za(i4(t),g4(t,s),a.insetWest(),vy(),"west",rc(t,{left:1}),om),nH=t=>{switch(t){case"north":return Zf;case"northeast":return YC;case"northwest":return KC;case"south":return XC;case"southeast":return qC;case"southwest":return u0;case"east":return XB;case"west":return h4}},JB=(t,s,a,l,d)=>Dy(l).map(nH).getOr(Zf)(t,s,a,l,d),oH=t=>{switch(t){case"north":return XC;case"northeast":return qC;case"northwest":return u0;case"south":return Zf;case"southeast":return YC;case"southwest":return KC;case"east":return h4;case"west":return XB}},sH=(t,s,a,l,d)=>Dy(l).map(oH).getOr(Zf)(t,s,a,l,d),QB={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},rH=(t,s,a)=>{const d={maxHeightFunction:Rg()},g=()=>({type:"node",root:ct(Fe(t())),node:O.from(t()),bubble:Vh(12,12,QB),layouts:{onRtl:()=>[YC],onLtr:()=>[KC]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:Vh(-12,12,QB),layouts:{onRtl:()=>[ac,$a,kc],onLtr:()=>[$a,ac,kc]},overrides:d});return()=>a()?g():p()},aH=(t,s,a)=>{const l=()=>({type:"node",root:ct(Fe(t())),node:O.from(t()),layouts:{onRtl:()=>[Zf],onLtr:()=>[Zf]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[kc],onLtr:()=>[kc]}});return()=>a()?l():d()},cH=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng();return O.some(Rm.range(pe.fromDom(a.startContainer),a.startOffset,pe.fromDom(a.endContainer),a.endOffset))}}),lH=t=>s=>({type:"node",root:t(),node:s}),iH=(t,s,a)=>{const l=N1(t),d=()=>pe.fromDom(t.getBody()),g=()=>pe.fromDom(t.getContentAreaContainer()),p=()=>l||!a();return{inlineDialog:rH(g,s,p),banner:aH(g,s,p),cursor:cH(t,d),node:lH(d)}},uH=t=>(s,a)=>{XO(t)(s,a)},e$=t=>()=>jO(t),dH=t=>s=>Qv(t,s),mH=t=>s=>yT(t,s),fH=t=>({colorPicker:uH(t),hasCustomColors:e$(t),getColors:dH(t),getColorCols:mH(t)}),gH=t=>()=>mR(t),hH=t=>({isDraggableModal:gH(t)}),pH=t=>{const s=S(iO(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},p4=t=>ba(t,"items"),t$=t=>ba(t,"format"),b4=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],bH=t=>oo(t,"items"),n$=t=>oo(t,"block"),o$=t=>oo(t,"inline"),s$=t=>oo(t,"selector"),r$=t=>Bn(t,(s,a)=>{if(bH(a)){const l=r$(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(o$(a)||n$(a)||s$(a)){const d=`custom-${Et(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),a$=(t,s)=>{const a=r$(s),l=d=>{mt(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(a.customFormats):t.on("init",()=>{l(a.customFormats)}),a.formats},v4=t=>tR(t).map(s=>{const a=a$(t,s);return nR(t)?b4.concat(a):a}).getOr(b4),vH=t=>{const s=ts(t);return s.length===1&&po(s,"title")},y4=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),c$=(t,s,a,l)=>{const d=x=>y4(x,a,l),g=x=>{const _=w(x.items);return{...x,type:"submenu",getStyleItems:q(_)}},p=x=>{const _=Et(x.name)?x.name:en(x.title),D=`custom-${_}`,B={...x,type:"formatter",format:D,isSelected:a(D),getStylePreview:l(D)};return t.formatter.register(_,B),B},w=x=>De(x,_=>p4(_)?g(_):t$(_)?d(_):vH(_)?{..._,type:"separator"}:p(_));return w(s)},yH=t=>{const s=w=>()=>t.formatter.match(w),a=w=>()=>{const x=t.formatter.get(w);return x!==void 0?O.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(w))}):O.none()},l=S([]),d=S([]),g=S(!1);return t.on("PreInit",w=>{const x=v4(t),_=c$(t,x,s,a);l.set(_)}),t.on("addStyleModifications",w=>{const x=c$(t,w.items,s,a);d.set(x),g.set(w.replace)}),{getData:()=>{const w=g.get()?[]:l.get(),x=d.get();return w.concat(x)}}},qm=t=>it(t)&&t.nodeType===1,tk=q1.trim,JC=t=>s=>!!(qm(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),wH=JC("true"),w4=JC("false"),l$=(t,s,a,l,d)=>({type:t,title:s,url:a,level:l,attach:d}),C4=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return wH(s)}return!1},i$=(t,s)=>De(Pa(pe.fromDom(s),t),a=>a.dom),nk=t=>t.innerText||t.textContent,CH=t=>t.id?t.id:en("h"),u$=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,d$=t=>u$(t)&&m$(t),ok=t=>t&&/^(H[1-6])$/.test(t.nodeName),m$=t=>C4(t)&&!w4(t),SH=t=>ok(t)&&m$(t),f$=t=>ok(t)?parseInt(t.nodeName.substr(1),10):0,xH=t=>{var s;const a=CH(t),l=()=>{t.id=a};return l$("header",(s=nk(t))!==null&&s!==void 0?s:"","#"+a,f$(t),l)},TH=t=>{const s=t.id||t.name,a=nk(t);return l$("anchor",a||"#"+s,"#"+s,0,G)},g$=t=>De(Pn(t,SH),xH),h$=t=>De(Pn(t,d$),TH),kH=t=>i$("h1,h2,h3,h4,h5,h6,a:not([href])",t),EH=t=>tk(t.title).length>0,_H={find:t=>{const s=kH(t);return Pn(g$(s).concat(h$(s)),EH)}},QC="tinymce-url-history",sm=5,sk=t=>Et(t)&&/^https?/.test(t),OH=t=>hn(t)&&t.length<=sm&&Vr(t,sk),p$=t=>Mt(t)&&Ss(t,s=>!OH(s)).isNone(),b$=()=>{const t=U1.getItem(QC);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+QC+" was not valid JSON",a),{};throw a}return p$(s)?s:(console.log("Local storage "+QC+" was not valid format",s),{})},AH=t=>{if(!p$(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));U1.setItem(QC,JSON.stringify(t))},DH=t=>{const s=b$();return pt(s,t).getOr([])},v$=(t,s)=>{if(!sk(t))return;const a=b$(),l=pt(a,s).getOr([]),d=Pn(l,g=>g!==t);a[s]=[t].concat(d).slice(0,sm),AH(a)},S4=t=>!!t,QW=t=>Gt(q1.makeMap(t,/[, ]/),S4),y$=t=>O.from(lR(t)),ul=t=>{const s=O.from(Zx(t)).filter(S4).map(QW);return y$(t).fold(zn,a=>s.fold(Wt,l=>ts(l).length>0?l:!1))},x4=(t,s)=>{const a=ul(t);return fn(a)?a?y$(t):O.none():a[s]?y$(t):O.none()},RH=(t,s)=>x4(t,s).map(a=>l=>il.nu(d=>{const g=(w,x)=>{if(!Et(w))throw new Error("Expected value to be string");if(x!==void 0&&!Mt(x))throw new Error("Expected meta to be a object");d({value:w,meta:x})},p={filetype:s,fieldname:l.fieldname,...O.from(l.meta).getOr({})};a.call(t,g,l.value,p)})),e2=t=>O.from(t).filter(Et).getOrUndefined(),MH=t=>uR(t)?O.some({targets:_H.find(t.getBody()),anchorTop:e2(sC(t)),anchorBottom:e2(dR(t))}):O.none(),NH=t=>O.from(iR(t)),BH=t=>({getHistory:DH,addToHistory:v$,getLinkInformation:()=>MH(t),getValidationHandler:()=>NH(t),getUrlPicker:s=>RH(t,s)}),$H=(t,s,a)=>{const l=S(!1),d=pH(s),g={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:_u.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},p=BH(s),w=yH(s),x=fH(s),_=hH(s),D=()=>l.get(),B=le=>l.set(le),I={shared:{providers:g,anchors:iH(s,a,d.isPositionedAtTop),header:d},urlinput:p,styles:w,colorinput:x,dialog:_,isContextMenuOpen:D,setContextMenuState:B},V={...I,shared:{...I.shared,interpreter:le=>tH(le,{},V),getSink:t.popup}},X={...I,shared:{...I.shared,interpreter:le=>tH(le,{},X),getSink:t.dialog}};return{popup:V,dialog:X}},PH=(t,s,a)=>{const l=(st,$t)=>{mt([s,...a],an=>{an.broadcastEvent(st,$t)})},d=(st,$t)=>{mt([s,...a],an=>{an.broadcastOn([st],$t)})},g=st=>d(Nm(),{target:st.target}),p=Ql(),w=ll(p,"touchstart",g),x=ll(p,"touchmove",st=>l(uE(),st)),_=ll(p,"touchend",st=>l(V0(),st)),D=ll(p,"mousedown",g),B=ll(p,"mouseup",st=>{st.raw.button===0&&d(sw(),{target:st.target})}),I=st=>d(Nm(),{target:pe.fromDom(st.target)}),V=st=>{st.button===0&&d(sw(),{target:pe.fromDom(st.target)})},X=()=>{mt(t.editorManager.get(),st=>{t!==st&&st.dispatch("DismissPopups",{relatedTarget:t})})},le=st=>l(z0(),kS(st)),Ee=st=>{d(Gh(),{}),l(vm(),kS(st))},ye=Fe(pe.fromDom(t.getElement())),ke=Ny(ye,"scroll",st=>{requestAnimationFrame(()=>{const $t=t.getContainer();if($t!=null){const yo=oa(t,s.element).map(xn=>[xn.element,...xn.others]).getOr([]);es(yo,xn=>Yo(xn,st.target))&&(t.dispatch("ElementScroll",{target:st.target.dom}),l(M2(),st))}})}),Ne=()=>d(Gh(),{}),Le=st=>{st.state&&d(Nm(),{target:pe.fromDom(t.getContainer())})},kt=st=>{d(Nm(),{target:pe.fromDom(st.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",I),t.on("tap",I),t.on("mouseup",V),t.on("mousedown",X),t.on("ScrollWindow",le),t.on("ResizeWindow",Ee),t.on("ResizeEditor",Ne),t.on("AfterProgressState",Le),t.on("DismissPopups",kt)}),t.on("remove",()=>{t.off("click",I),t.off("tap",I),t.off("mouseup",V),t.off("mousedown",X),t.off("ScrollWindow",le),t.off("ResizeWindow",Ee),t.off("ResizeEditor",Ne),t.off("AfterProgressState",Le),t.off("DismissPopups",kt),D.unbind(),w.unbind(),x.unbind(),_.unbind(),B.unbind(),ke.unbind()}),t.on("detach",()=>{mt([s,...a],ex),mt([s,...a],st=>st.destroy())})},_c=Dw,jf=gx,IH=q([Te("shell",!1),Qe("makeItem"),Te("setupItem",G),xu.field("listBehaviours",[Kn])]),rk=Gi({name:"items",overrides:()=>({behaviours:yt([Kn.config({})])})}),LH=q([rk]),w$=q("CustomList"),HH=(t,s,a,l)=>{const d=(w,x)=>{p(w).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},_=>{const D=Kn.contents(_),B=x.length,I=B-D.length,V=I>0?Bo(I,()=>t.makeItem()):[],X=D.slice(B);mt(X,Ee=>Kn.remove(_,Ee)),mt(V,Ee=>Kn.append(_,Ee));const le=Kn.contents(_);mt(le,(Ee,ye)=>{t.setupItem(w,Ee,x[ye],ye)})})},g=t.shell?{behaviours:[Kn.config({})],components:[]}:{behaviours:[],components:s},p=w=>t.shell?O.some(w):Vs(w,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:cr(t.listBehaviours,g.behaviours),apis:{setItems:d}}},T4=ta({name:w$(),configFields:IH(),partFields:LH(),factory:HH,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),d0=q([Qe("dom"),Te("shell",!0),uc("toolbarBehaviours",[Kn])]),C$=q([Gi({name:"groups",overrides:()=>({behaviours:yt([Kn.config({})])})})]),tZ=(t,s,a,l)=>{const d=(w,x)=>{g(w).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},_=>{Kn.set(_,x)})},g=w=>t.shell?O.some(w):Vs(w,t,"groups"),p=t.shell?{behaviours:[Kn.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:cr(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},Gf=ta({name:"Toolbar",configFields:d0(),partFields:C$(),factory:tZ,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),VH=G,zH=zn,S$=q([]);var x$=Object.freeze({__proto__:null,setup:VH,isDocked:zH,getBehaviours:S$});const t2=t=>(ar(Js(t,"position"),"fixed")?O.none():fl(t)).orThunk(()=>{const l=pe.fromTag("span");return ca(t).bind(d=>{rl(d,l);const g=fl(l);return Nl(l),g})}),T$=t=>t2(t).map(vs).getOrThunk(()=>vo(0,0)),UH=(t,s)=>{const a=t.element;Cs(a,s.transitionClass),ea(a,s.fadeOutClass),Cs(a,s.fadeInClass),s.onShow(t)},k$=(t,s)=>{const a=t.element;Cs(a,s.transitionClass),ea(a,s.fadeInClass),Cs(a,s.fadeOutClass),s.onHide(t)},WH=(t,s)=>t.y<s.bottom&&t.bottom>s.y,E$=(t,s)=>t.y>=s.y,_$=(t,s)=>t.bottom<=s.bottom,k4=(t,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-t.y}),n2=(t,s,a)=>({location:"bottom",leftX:s,bottomY:t.bottom-a.bounds.bottom}),ak=t=>t.box.x-t.win.x,ZH=(t,s,a)=>{const l=s.win,d=s.box,g=ak(s);return us(t,p=>{switch(p){case"bottom":return _$(d,a.bounds)?O.none():O.some(n2(l,g,a));case"top":return E$(d,a.bounds)?O.none():O.some(k4(l,g,a));default:return O.none()}}).getOr({location:"no-dock"})},jH=(t,s,a)=>Vr(t,l=>{switch(l){case"bottom":return _$(s,a.bounds);case"top":return E$(s,a.bounds)}}),GH=(t,s)=>{const a=s.optScrollEnv.fold(q(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return vo(t.bounds.x,a)},qH=(t,s)=>{const a=s.optScrollEnv.fold(q(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return vo(t.x,a)},ck=(t,s,a)=>a.getInitialPos().map(l=>{const d=GH(l,s);return{box:js(d.left,d.top,ia(t),ze(t)),location:l.location}}),O$=(t,s,a,l,d)=>{const g=qH(s,a),p=js(g.left,g.top,s.width,s.height);l.setInitialPos({style:Zr(t),position:et(t,"position")||"static",bounds:p,location:d.location})},lk=(t,s,a,l,d)=>{l.getInitialPos().fold(()=>O$(t,s,a,l,d),()=>G)},A$=(t,s,a)=>a.getInitialPos().bind(l=>{var d;switch(a.clearInitialPos(),l.position){case"static":return O.some({morph:"static"});case"absolute":const g=t2(t).getOr(Zs()),p=E(g),w=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return O.some({morph:"absolute",positionCss:Wi("absolute",pt(l.style,"left").map(x=>s.x-p.x),pt(l.style,"top").map(x=>s.y-p.y+w),pt(l.style,"right").map(x=>p.right-s.right),pt(l.style,"bottom").map(x=>p.bottom-s.bottom))});default:return O.none()}}),ik=(t,s,a)=>ck(t,s,a).filter(({box:l})=>jH(a.getModes(),l,s)).bind(({box:l})=>A$(t,l,a)),E4=t=>{switch(t.location){case"top":return O.some({morph:"fixed",positionCss:Wi("fixed",O.some(t.leftX),O.some(t.topY),O.none(),O.none())});case"bottom":return O.some({morph:"fixed",positionCss:Wi("fixed",O.some(t.leftX),O.none(),O.none(),O.some(t.bottomY))});default:return O.none()}},_4=(t,s,a)=>{const l=E(t),d=me(),g=ZH(a.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(O$(t,l,s,a,g),E4(g)):O.none()},o2=(t,s,a)=>ik(t,s,a).orThunk(()=>s.optScrollEnv.bind(l=>ck(t,s,a)).bind(({box:l,location:d})=>{const g=me(),p=ak({win:g,box:l}),w=d==="top"?k4(g,p,s):n2(g,p,s);return E4(w)})),D$=(t,s,a)=>{const l=t.element;return ar(Js(l,"position"),"fixed")?o2(l,s,a):_4(l,s,a)},KH=(t,s,a)=>{const l=t.element;return ck(l,s,a).bind(({box:d})=>A$(l,d,a))},R$=(t,s,a,l)=>{const d=E(t),g=me(),p=ak({win:g,box:d}),w=l(g,p,s);return w.location==="bottom"||w.location==="top"?(lk(t,d,s,a,w),E4(w)):O.none()},O4=(t,s,a)=>{a.setDocked(!1),mt(["left","right","top","bottom","position"],l=>fo(t.element,l)),s.onUndocked(t)},uk=(t,s,a,l)=>{const d=l.position==="fixed";a.setDocked(d),Xb(t.element,l),(d?s.onDocked:s.onUndocked)(t)},M$=(t,s,a,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const w=WH(p,l.bounds);w!==a.isVisible()&&(a.setVisible(w),d&&!w?(Hi(t.element,[g.fadeOutClass]),g.onHide(t)):(w?UH:k$)(t,g))})})},dk=(t,s,a,l,d)=>{M$(t,s,a,l,!0),uk(t,s,a,d.positionCss)},mk=(t,s,a,l,d)=>{switch(d.morph){case"static":return O4(t,s,a);case"absolute":return uk(t,s,a,d.positionCss);case"fixed":return dk(t,s,a,l,d)}},YH=(t,s,a)=>{const l=s.lazyViewport(t);M$(t,s,a,l),D$(t,l,a).each(d=>{mk(t,s,a,l,d)})},XH=(t,s,a)=>{const l=t.element;a.setDocked(!1);const d=s.lazyViewport(t);KH(t,d,a).each(g=>{switch(g.morph){case"static":{O4(t,s,a);break}case"absolute":{uk(t,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{Sl(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),sh(t,s,a)},sh=(t,s,a)=>{t.getSystem().isConnected()&&YH(t,s,a)},A4=(t,s,a)=>{a.isDocked()&&XH(t,s,a)},N$=t=>(s,a,l)=>{const d=a.lazyViewport(s);R$(s.element,d,l,t).each(p=>{dk(s,a,l,d,p)})},B$=N$(k4),D4=N$(n2);var JH=Object.freeze({__proto__:null,refresh:sh,reset:A4,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,l)=>a.setModes(l),forceDockToTop:B$,forceDockToBottom:D4}),QH=Object.freeze({__proto__:null,events:(t,s)=>Gs([hu(fg(),(a,l)=>{t.contextual.each(d=>{Wa(a.element,d.transitionClass)&&(Sl(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),l.stop()})}),nt(z0(),(a,l)=>{sh(a,t,s)}),nt(M2(),(a,l)=>{sh(a,t,s)}),nt(vm(),(a,l)=>{A4(a,t,s)})])}),eV=[Ic("contextual",[Ir("fadeInClass"),Ir("fadeOutClass"),Ir("transitionClass"),vi("lazyContext"),Se("onShow"),Se("onShown"),Se("onHide"),Se("onHidden")]),Ta("lazyViewport",()=>({bounds:me(),optScrollEnv:O.none()})),Th("modes",["top","bottom"],Nr),Se("onDocked"),Se("onUndocked")],tV=Object.freeze({__proto__:null,init:t=>{const s=S(!1),a=S(!0),l=Hs(),d=S(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return zl({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Ga=cc({fields:eV,name:"docking",active:QH,apis:JH,state:tV}),R4=q(en("toolbar-height-change")),qf={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},M4="tox-tinymce--toolbar-sticky-on",I$="tox-tinymce--toolbar-sticky-off",s2=(t,s)=>{const a=wa(s),d=nc(s).dom.innerHeight,g=Bc(a),p=pe.fromDom(t.elm),w=M(p),x=ze(p),_=w.y,D=_+x,B=vs(s),I=ze(s),V=B.top,X=V+I,le=Math.abs(V-g.top)<2,Ee=Math.abs(X-(g.top+d))<2;if(le&&_<X)of(g.left,_-I,a);else if(Ee&&D>V){const ye=_-d+x+I;of(g.left,ye,a)}},N4=(t,s)=>po(Ga.getModes(t),s),B4=t=>{const s=l=>Qt(l)+(parseInt(et(l,"margin-top"),10)||0)+(parseInt(et(l,"margin-bottom"),10)||0),a=t.element;pc(a).each(l=>{const d="padding-"+Ga.getModes(t)[0];if(Ga.isDocked(t)){const g=ia(l);Zt(a,"width",g+"px"),Zt(l,d,s(a)+"px")}else fo(a,"width"),fo(l,d)})},fk=(t,s)=>{s?(ea(t,qf.fadeOutClass),Hi(t,[qf.transitionClass,qf.fadeInClass])):(ea(t,qf.fadeInClass),Hi(t,[qf.fadeOutClass,qf.transitionClass]))},$4=(t,s)=>{const a=pe.fromDom(t.getContainer());s?(Cs(a,M4),ea(a,I$)):(Cs(a,I$),ea(a,M4))},nV=(t,s)=>{const a=wa(s);$d(a).filter(l=>!Yo(s,l)).filter(l=>Yo(l,pe.fromDom(a.dom.body))||aa(t,l)).each(()=>wu(s))},oV=(t,s)=>Yu(t).orThunk(()=>s().toOptional().bind(a=>Yu(a.element))),sV=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(Ga.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(B4)}),t.on("SkinLoaded",()=>{a().each(l=>{Ga.isDocked(l)?Ga.reset(l):Ga.refresh(l)})}),t.on("FullscreenStateChanged",()=>{a().each(Ga.reset)})),t.on("AfterScrollIntoView",l=>{a().each(d=>{Ga.refresh(d);const g=d.element;jr(g)&&s2(l,g)})}),t.on("PostRender",()=>{$4(t,!1)})},rV=t=>t().map(Ga.isDocked).getOr(!1),aV=()=>[zi.config({channels:{[R4()]:{onReceive:B4}}})],F$=(t,s)=>{const a=Hs(),l=s.getSink,d=w=>{l().each(x=>w(x.element))},g=w=>{t.inline||B4(w),$4(t,Ga.isDocked(w)),w.getSystem().broadcastOn([Gh()],{}),l().each(x=>x.getSystem().broadcastOn([Gh()],{}))},p=t.inline?[]:aV();return[Rn.config({}),Ga.config({contextual:{lazyContext:w=>{const x=Qt(w.element),_=t.inline?t.getContentAreaContainer():t.getContainer();return O.from(_).map(D=>{const B=E(pe.fromDom(D));return oa(t,w.element).fold(()=>{const V=B.height-x,X=B.y+(N4(w,"top")?0:x);return js(B.x,X,B.width,V)},V=>{const X=z(B,xT(V));return js(X.x,X.y,X.width,X.height-x)})})},onShow:()=>{d(w=>fk(w,!0))},onShown:w=>{d(x=>Sl(x,[qf.transitionClass,qf.fadeInClass])),a.get().each(x=>{nV(w.element,x),a.clear()})},onHide:w=>{oV(w.element,l).fold(a.clear,a.set),d(x=>fk(x,!1))},onHidden:()=>{d(w=>Sl(w,[qf.transitionClass]))},...qf},lazyViewport:w=>oa(t,w.element).fold(()=>{const _=me(),D=aR(t),B=_.y+(N4(w,"top")?D:0),I=_.height-(N4(w,"bottom")?D:0);return{bounds:js(_.x,B,_.width,I),optScrollEnv:O.none()}},_=>({bounds:xT(_),optScrollEnv:O.some({currentScrollTop:_.element.dom.scrollTop,scrollElmTop:vs(_.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var cV=Object.freeze({__proto__:null,setup:sV,isDocked:rV,getBehaviours:F$});const lV=t=>{const s=t.editor,a=t.sticky?F$:S$;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:yt(a(s,t.sharedBackstage))}},iV=Cn([Ea,ei("items",ag([Ch([xO,yl("items",Nr)]),Nr]))].concat(Gv)),L$=t=>ys("GroupToolbarButton",iV,t),P4=[Pc("text"),Pc("tooltip"),Pc("icon"),cl("search",!1,ag([cf,Cn([Pc("placeholder")])],t=>fn(t)?t?O.some({placeholder:O.none()}):O.none():O.some(t))),vi("fetch"),Ta("onSetup",()=>G)],gk=Cn([Ea,...P4]),H$=t=>ys("menubutton",gk,t),uV=Cn([Ea,tT,Gd,Qg,YF,TO,P1,Il("presets","normal",["normal","color","listpreview"]),_O(1),ip,kO]),dV=t=>ys("SplitButton",uV,t);var tb=ma({factory:(t,s)=>{const a=(d,g)=>{const p=De(g,w=>{const x={type:"menubutton",text:w.text,fetch:D=>{D(w.getItems())}},_=H$(x).mapError(D=>uf(D)).getOrDie();return ZC(_,"tox-mbtn",s.backstage,O.some("menuitem"))});Kn.set(d,p)},l={focus:Sn.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:yt([Kn.config({}),Jn("menubar-events",[Br(d=>{t.onSetup(d)}),nt(yi(),(d,g)=>{Tr(d.element,".tox-mbtn--active").each(p=>{Bd(g.event.target,".tox-mbtn").each(w=>{Yo(p,w)||d.getSystem().getByDom(p).each(x=>{d.getSystem().getByDom(w).each(_=>{Oi.expand(_),Oi.close(x),Rn.focus(_)})})})})}),nt(Ob(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(w=>d.getSystem().getByDom(w).toOptional()).each(w=>{Oi.isOpen(p)&&(Oi.expand(w),Oi.close(p))})})})]),Sn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),O.some(!0))}),Gr.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Qe("dom"),Qe("uid"),Qe("onEscape"),Qe("backstage"),Te("onSetup",G)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const hk="⚡️Upgrade",I4="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",mV=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:I4,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:hk}}]}),V$="container",fV=[uc("slotBehaviours",[])],z$=t=>"<alloy.field."+t+">",U$=t=>{const s=(()=>{const g=[];return{slot:(w,x)=>(g.push(w),Cw(V$,z$(w),x)),record:q(g)}})(),a=t(s),l=s.record(),d=De(l,g=>ja({name:g,pname:z$(g)}));return Rw(V$,fV,d,W$,a)},W$=(t,s)=>{const a=le=>Ew(t),l=(le,Ee)=>Vs(le,t,Ee),d=(le,Ee)=>(ye,ke)=>Vs(ye,t,ke).map(Ne=>le(Ne,ke)).getOr(Ee),g=le=>(Ee,ye)=>{mt(ye,ke=>le(Ee,ke))},p=(le,Ee)=>Ur(le.element,"aria-hidden")!=="true",w=(le,Ee)=>{if(!p(le)){const ye=le.element;fo(ye,"display"),ne(ye,"aria-hidden"),wn(le,wm(),{name:Ee,visible:!0})}},x=(le,Ee)=>{if(p(le)){const ye=le.element;Zt(ye,"display","none"),Hn(ye,"aria-hidden","true"),wn(le,wm(),{name:Ee,visible:!1})}},_=d(p,!1),D=d(x),B=g(D),I=le=>B(le,a()),V=d(w),X={getSlotNames:a,getSlot:l,isShowing:_,hideSlot:D,hideAllSlots:I,showSlot:V};return{uid:t.uid,dom:t.dom,components:s,behaviours:xv(t.slotBehaviours),apis:X}},Ol={...Gt({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Bb(t)),sketch:U$},pk=Cn([Gd,tT,Ta("onShow",G),Ta("onHide",G),P1]),bk=t=>ys("sidebar",pk,t),gV=t=>{const{sidebars:s}=t.ui.registry.getAll();mt(ts(s),a=>{const l=s[a],d=()=>ar(O.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},hV=t=>({element:()=>t.element.dom}),pV=(t,s)=>{const a=De(ts(s),l=>{const d=s[l],g=cs(bk(d));return{name:l,getApi:hV,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return De(a,l=>{const d=S(G);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:gC.unnamedEvents([dp(l,d),H1(l,d),nt(wm(),(g,p)=>{const w=p.event;qt(a,_=>_.name===w.name).each(_=>{(w.visible?_.onShow:_.onHide)(_.getApi(g))})})])})})},bV=t=>Ol.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:pV(s,t),slotBehaviours:gC.unnamedEvents([Br(a=>Ol.hideAllSlots(a))])})),F4=(t,s,a)=>{Ro.getCurrent(t).each(d=>{Kn.set(d,[bV(s)]);const g=a==null?void 0:a.toLowerCase();Et(g)&&oo(s,g)&&Ro.getCurrent(d).each(p=>{Ol.showSlot(p,g),Qi.immediateGrow(d),fo(d.element,"width"),m0(t.element,"region")})})},m0=(t,s)=>{Hn(t,"role",s)},L4=(t,s)=>{Ro.getCurrent(t).each(l=>{Ro.getCurrent(l).each(g=>{Qi.hasGrown(l)?Ol.isShowing(g,s)?(Qi.shrink(l),m0(t.element,"presentation")):(Ol.hideAllSlots(g),Ol.showSlot(g,s),m0(t.element,"region")):(Ol.hideAllSlots(g),Ol.showSlot(g,s),Qi.grow(l),m0(t.element,"region"))})})},vV=t=>Ro.getCurrent(t).bind(a=>Qi.isGrowing(a)||Qi.hasGrown(a)?Ro.getCurrent(a).bind(g=>qt(Ol.getSlotNames(g),p=>Ol.isShowing(g,p))):O.none()),r2=en("FixSizeEvent"),H4=en("AutoSizeEvent"),yV=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:yt([Gr.config({}),Rn.config({}),Qi.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Ro.getCurrent(s).each(Ol.hideAllSlots),Xo(s,H4)},onGrown:s=>{Xo(s,H4)},onStartGrow:s=>{wn(s,r2,{width:Js(s.element,"width").getOr("")})},onStartShrink:s=>{wn(s,r2,{width:ia(s.element)+"px"})}}),Kn.config({}),Ro.config({find:s=>{const a=Kn.contents(s);return ir(a)}})])}],behaviours:yt([em.childAt(0),Jn("sidebar-sliding-events",[nt(r2,(s,a)=>{Zt(s.element,"width",a.event.width)}),nt(H4,(s,a)=>{fo(s.element,"width")})])])});var wV=Object.freeze({__proto__:null,block:(t,s,a,l)=>{Hn(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=yt([Sn.config({mode:"special",onTab:()=>O.some(!0),onShiftTab:()=>O.some(!0)}),Rn.config({})]),p=l(d,g),w=d.getSystem().build(p);Kn.append(d,Ul(w)),w.hasConfigured(Sn)&&s.focus&&Sn.focusIn(w),a.isBlocked()||s.onBlock(t),a.blockWith(()=>Kn.remove(d,w))},unblock:(t,s,a)=>{ne(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()}}),CV=[Ta("getRoot",O.none),za("focus",!0),Se("onBlock"),Se("onUnblock")],iZ=Object.freeze({__proto__:null,init:()=>{const t=ev(),s=a=>{t.set({destroy:a})};return zl({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const bp=cc({fields:CV,name:"blocking",apis:wV,state:iZ}),Z$=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Bn(s,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},SV=t=>Array.prototype.slice.call(t.dom.classList,0),rh=t=>{const s=pe.fromHtml(t),a=Ca(s),l=Z$(s),d=SV(s),g=a.length===0?{}:{innerHtml:K0(s)};return{tag:tc(s),classes:d,attributes:l,...g}},xV=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:rh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),j$=t=>Ro.getCurrent(t).each(s=>wu(s.element)),TV=(t,s)=>{const a="tabindex",l=`data-mce-${a}`;O.from(t.iframeElement).map(pe.fromDom).each(d=>{s?($(d,a).each(g=>Hn(d,l,g)),Hn(d,a,-1)):(ne(d,a),$(d,l).each(g=>{Hn(d,a,g),ne(d,l)}))})},kV=(t,s,a,l)=>{const d=s.element;if(TV(t,a),a)bp.block(s,xV(l)),fo(d,"display"),ne(d,"aria-hidden"),t.hasFocus()&&j$(s);else{const g=Ro.getCurrent(s).exists(p=>Qp(p.element));bp.unblock(s),Zt(d,"display","none"),Hn(d,"aria-hidden","true"),g&&t.focus()}},EV=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:yt([Kn.config({}),bp.config({focus:!1}),Ro.config({find:s=>ir(s.components())})]),components:[]}),G$=t=>t.type==="focusin",_V=t=>G$(t)?(t.composed?ir(t.composedPath()):O.from(t.target)).map(pe.fromDom).filter(Vo).exists(a=>Wa(a,"mce-pastebin")):!1,OV=(t,s,a)=>{const l=S(!1),d=Hs(),g=w=>{l.get()&&!_V(w)&&(w.preventDefault(),j$(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",w=>{w.command.toLowerCase()==="mcefocus"&&w.value!==!0&&g(w)})});const p=w=>{w!==l.get()&&(l.set(w),kV(t,s(),w,a.providers),EM(t,w))};t.on("ProgressState",w=>{if(d.on(clearTimeout),pn(w.time)){const x=Vm.setEditorTimeout(t,()=>p(w.state),w.time);d.set(x)}else p(w.state),d.clear()})},AV=(t,s)=>Bn(t,(d,g)=>s(g,d.len).fold(q(d),w=>({len:w.finish,list:d.list.concat([w])})),{len:0,list:[]}).list,q$=(t,s,a)=>({within:t,extra:s,withinWidth:a}),DV=(t,s,a)=>{const l=AV(t,(w,x)=>{const _=a(w);return O.some({element:w,start:x,finish:x+_,width:_})}),d=Pn(l,w=>w.finish<=s),g=is(d,(w,x)=>w+x.width,0),p=l.slice(d.length);return{within:d,extra:p,withinWidth:g}},a2=t=>De(t,s=>s.element),K$=(t,s,a)=>{const l=a2(t.concat(s));return q$(l,[],a)},RV=(t,s,a,l)=>{const d=a2(t).concat([a]);return q$(d,a2(s),l)},MV=(t,s,a)=>q$(a2(t),[],a),sd=(t,s,a)=>{const l=DV(s,t,a);return l.extra.length===0?O.some(l):O.none()},NV=(t,s,a,l)=>{const d=sd(t,s,a).getOrThunk(()=>DV(s,t-a(l),a)),g=d.within,p=d.extra,w=d.withinWidth;return p.length===1&&p[0].width<=a(l)?K$(g,p,w):p.length>=1?RV(g,p,l,w):MV(g,p,w)},V4=(t,s)=>{const a=De(s,l=>Ul(l));Gf.setGroups(t,a)},Y$=t=>us(t,s=>Yu(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),X$=(t,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=Zd(t,s,"primary"),g=na.getCoupled(t,"overflowGroup");Zt(d.element,"visibility","hidden");const p=l.concat([g]),w=Y$(p);a([]),V4(d,p);const x=ia(d.element),_=NV(x,s.builtGroups.get(),D=>ia(D.element),g);_.extra.length===0?(Kn.remove(d,g),a([])):(V4(d,_.within),a(_.extra)),fo(d.element,"visibility"),Y(d.element),w.each(Rn.focus)},f0=q([uc("splitToolbarBehaviours",[na]),Os("builtGroups",()=>S([]))]),BV=q([Vi(["overflowToggledClass"]),Tc("getOverflowBounds"),Qe("lazySink"),Os("overflowGroups",()=>S([])),Se("onOpened"),Se("onClosed")].concat(f0())),yk=q([ja({factory:Gf,schema:d0(),name:"primary"}),Tu({schema:d0(),name:"overflow"}),Tu({name:"overflow-button"}),Tu({name:"overflow-group"})]),z4=q((t,s)=>{Dl(t,Math.floor(s))}),wk=q([Vi(["toggledClass"]),Qe("lazySink"),vi("fetch"),Tc("getBounds"),Ic("fireDismissalEventInstead",[Te("event",ff())]),Xu(),Se("onToggled")]),$V=q([Tu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:yt([lo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Tu({factory:Gf,schema:d0(),name:"toolbar",overrides:t=>({toolbarBehaviours:yt([Sn.config({mode:"cyclic",onEscape:s=>(Vs(s,t,"button").each(Rn.focus),O.none())})])})})]),eu=Hs(),PV=(t,s)=>{eu.set(!0),g0(t,s),eu.clear()},g0=(t,s)=>{const a=na.getCoupled(t,"toolbarSandbox");So.isOpen(a)?So.close(a):So.open(a,s.toolbar())},Ck=(t,s,a,l)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();Lr.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:z4()}}},d)},J$=(t,s,a,l,d)=>{Gf.setGroups(s,d),Ck(t,s,a,l),lo.on(t)},IV=(t,s,a)=>{const l=aS(),d=(p,w)=>{const x=eu.get().getOr(!1);a.fetch().get(_=>{J$(t,w,a,s.layouts,_),l.link(t.element),x||Sn.focusIn(w)})},g=()=>{lo.off(t),eu.get().getOr(!1)||Rn.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:yt([Sn.config({mode:"special",onEscape:p=>(So.close(p),O.some(!0))}),So.config({onOpen:d,onClose:g,isPartOf:(p,w,x)=>kg(w,x)||kg(t,x),getAttachPoint:()=>a.lazySink(t).getOrDie()}),zi.config({channels:{...h1({isExtraPart:zn,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...zg({doReposition:()=>{So.getState(na.getCoupled(t,"toolbarSandbox")).each(p=>{Ck(t,p,a,s.layouts)})}})}})])}},vp=ta({name:"FloatingToolbarButton",factory:(t,s,a,l)=>({...Xc.sketch({...l.button(),action:d=>{g0(d,l)},buttonBehaviours:xu.augment({dump:l.button().buttonBehaviours},[na.config({others:{toolbarSandbox:d=>IV(d,a,t)}})])}),apis:{setGroups:(d,g)=>{So.getState(na.getCoupled(d,"toolbarSandbox")).each(p=>{J$(d,p,t,a.layouts,g)})},reposition:d=>{So.getState(na.getCoupled(d,"toolbarSandbox")).each(g=>{Ck(d,g,t,a.layouts)})},toggle:d=>{g0(d,l)},toggleWithoutFocusing:d=>{PV(d,l)},getToolbar:d=>So.getState(na.getCoupled(d,"toolbarSandbox")),isOpen:d=>So.isOpen(na.getCoupled(d,"toolbarSandbox"))}}),configFields:wk(),partFields:$V(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),FV=q([Qe("items"),Vi(["itemSelector"]),uc("tgroupBehaviours",[Sn])]),LV=q([C1({name:"items",unit:"item"})]),HV=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.tgroupBehaviours,[Sn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),c2=ta({name:"ToolbarGroup",configFields:FV(),partFields:LV(),factory:HV}),U4=t=>De(t,s=>Ul(s)),W4=(t,s,a)=>{X$(t,a,l=>{a.overflowGroups.set(l),s.getOpt(t).each(d=>{vp.setGroups(d,U4(l))})})},VV=(t,s,a,l)=>{const d=xo(vp.sketch({fetch:()=>il.nu(g=>{g(U4(t.overflowGroups.get()))}),layouts:{onLtr:()=>[$a,ac],onRtl:()=>[ac,$a],onBottomLtr:()=>[oi,Tl],onBottomRtl:()=>[Tl,oi]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.splitToolbarBehaviours,[na.config({others:{overflowGroup:()=>c2.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(De(p,g.getSystem().build)),W4(g,d,t)},refresh:g=>W4(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{vp.toggle(p)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(vp.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(vp.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{vp.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(vp.getToolbar)},domModification:{attributes:{role:"group"}}}},Z4=ta({name:"SplitFloatingToolbar",configFields:BV(),partFields:yk(),factory:VV,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),zV=q([Vi(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Se("onOpened"),Se("onClosed")].concat(f0())),UV=q([ja({factory:Gf,schema:d0(),name:"primary"}),ja({factory:Gf,schema:d0(),name:"overflow",overrides:t=>({toolbarBehaviours:yt([Qi.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Vs(s,t,"overflow-button").each(a=>{lo.off(a),Rn.focus(a)}),t.onClosed(s)},onGrown:s=>{Sn.focusIn(s),t.onOpened(s)},onStartGrow:s=>{Vs(s,t,"overflow-button").each(lo.on)}}),Sn.config({mode:"acyclic",onEscape:s=>(Vs(s,t,"overflow-button").each(Rn.focus),O.some(!0))})])})}),Tu({name:"overflow-button",overrides:t=>({buttonBehaviours:yt([lo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Tu({name:"overflow-group"})]),WV=(t,s)=>Vs(t,s,"overflow").map(Qi.hasGrown).getOr(!1),Q$=(t,s)=>{Vs(t,s,"overflow-button").bind(()=>Vs(t,s,"overflow")).each(a=>{j4(t,s),Qi.toggleGrow(a)})},j4=(t,s)=>{Vs(t,s,"overflow").each(a=>{X$(t,s,l=>{const d=De(l,g=>Ul(g));Gf.setGroups(a,d)}),Vs(t,s,"overflow-button").each(l=>{Qi.hasGrown(a)&&lo.on(l)}),Qi.refresh(a)})},ZV=(t,s,a,l)=>{const d="alloy.toolbar.toggle",g=(p,w)=>{const x=De(w,p.getSystem().build);t.builtGroups.set(x)};return{uid:t.uid,dom:t.dom,components:s,behaviours:cr(t.splitToolbarBehaviours,[na.config({others:{overflowGroup:p=>c2.sketch({...l["overflow-group"](),items:[Xc.sketch({...l["overflow-button"](),action:w=>{Xo(p,d)}})]})}}),Jn("toolbar-toggle-events",[nt(d,p=>{Q$(p,t)})])]),apis:{setGroups:(p,w)=>{g(p,w),j4(p,t)},refresh:p=>j4(p,t),toggle:p=>Q$(p,t),isOpen:p=>WV(p,t)},domModification:{attributes:{role:"group"}}}},G4=ta({name:"SplitSlidingToolbar",configFields:zV(),partFields:UV(),factory:ZV,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),eP=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[c2.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:yt([Gr.config({}),Rn.config({})])}},Sk=t=>c2.sketch(eP(t)),tP=(t,s)=>{const a=Br(l=>{const d=De(t.initGroups,Sk);Gf.setGroups(l,d)});return yt([Kd.toolbarButton(t.providers.isDisabled),dc(),Sn.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Jn("toolbar-events",[a])])},nP=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":eP({title:O.none(),items:[]}),"overflow-button":L7({name:"more",icon:O.some("more-drawer"),enabled:!0,tooltip:O.some("More..."),primary:!1,buttonType:O.none(),borderless:!1},O.none(),t.providers)},splitToolbarBehaviours:tP(t,s)}},jV=t=>{const s=nP(t),a=4,l=Z4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return Z4.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=M(d),p=Yl(d),w=M(p),x=Math.max(p.dom.scrollHeight,w.height);return js(g.x+a,w.y,g.width-a*2,x)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},GV=t=>{const s=G4.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=G4.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=nP(t);return G4.sketch({...l,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([R4()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([R4()],{type:"closed"}),t.onToggled(d,!1)}})},l2=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Gf.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Ou.scrolling?["tox-toolbar--scrolling"]:[])},components:[Gf.parts.groups({})],toolbarBehaviours:tP(t,s)})},i2=[Qg,Gd,Pc("tooltip"),Il("buttonType","secondary",["primary","secondary"]),za("borderless",!1),vi("onAction")],q4=[...i2,Jg,Pi("type",["button"])],qV=[...i2,za("active",!1),Pi("type",["togglebutton"])],oP={button:q4,togglebutton:qV},sP=[Pi("type",["group"]),Th("buttons",[],Xr("type",oP))],KV=Xr("type",{...oP,group:sP}),YV=Cn([Th("buttons",[],KV),vi("onShow"),vi("onHide")]),XV=t=>ys("view",YV,t),rP=(t,s)=>{var a,l;const d=t.type==="togglebutton",g=t.icon.map(Ne=>tm(Ne,s.icons)).map(xo),w=(()=>Ne=>{const Le=$t=>{g.map(an=>an.getOpt(Ne).each(yo=>{Kn.set(yo,[tm($t,s.icons)])}))},kt=$t=>{const an=Ne.element;$t?(Cs(an,"tox-button--enabled"),Hn(an,"aria-pressed",!0)):(ea(an,"tox-button--enabled"),ne(an,"aria-pressed"))},st=()=>Wa(Ne.element,"tox-button--enabled");if(d)return t.onAction({setIcon:Le,setActive:kt,isActive:st});if(t.type==="button")return t.onAction({setIcon:Le})})(),x={...t,name:d?t.text.getOr(t.icon.getOr("")):(a=t.text)!==null&&a!==void 0?a:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},_=XT((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),D=d?t.text.map(s.translate):O.some(s.translate(t.text)),B=D.map(fr),I=x.tooltip.or(D).map(Ne=>({"aria-label":s.translate(Ne),title:s.translate(Ne)})).getOr({}),V=g.map(Ne=>Ne.asSpec()),X=Yv([V,B]),le=t.icon.isSome()&&B.isSome(),Ee={tag:"button",classes:_.concat(...t.icon.isSome()&&!le?["tox-button--icon"]:[]).concat(...le?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:I},ye=[],ke=jC(x,O.some(w),ye,Ee,X,s);return Xc.sketch(ke)},aP=(t,s)=>rP(t,s),JV=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:De(t.buttons,a=>aP(a,s))}),xk=wc().deviceType,QV=xk.isPhone(),ez=xk.isTablet(),cP=t=>{let s=!1;const a=De(t.buttons,l=>l.type==="group"?(s=!0,JV(l,t.providers)):aP(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...QV||ez?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:yt([Rn.config({}),Sn.config({mode:"flow",selector:"button, .tox-button",focusInside:ep.OnEnterOrSpaceMode})]),components:s?a:[Yd.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Yd.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},tz=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),lP=(t,s,a,l)=>{const d={getPane:g=>_c.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var h0=ta({name:"silver.View",configFields:[Qe("viewConfig")],partFields:[Gi({factory:{sketch:cP},schema:[Qe("buttons"),Qe("providers")],name:"header"}),Gi({factory:{sketch:tz},schema:[],name:"pane"})],factory:lP,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const iP=(t,s,a)=>rr(s,(l,d)=>{const g=cs(XV(l));return t.slot(d,h0.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[h0.parts.header({buttons:g.buttons,providers:a})]:[],h0.parts.pane({})]}))}),nz=(t,s)=>Ol.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:iP(a,t,s),slotBehaviours:gC.unnamedEvents([Br(l=>Ol.hideAllSlots(l))])})),uP=t=>qt(Ol.getSlotNames(t),s=>Ol.isShowing(t,s)),oz=t=>{const s=t.element;Zt(s,"display","none"),Hn(s,"aria-hidden","true")},dP=t=>{const s=t.element;fo(s,"display"),ne(s,"aria-hidden")},sz=t=>({getContainer:q(t)}),mP=(t,s,a)=>{Ol.getSlot(t,s).each(l=>{h0.getPane(l).each(d=>{a(l)(sz(d.element.dom))})})},rz=(t,s)=>mP(t,s,h0.getOnShow),K4=(t,s)=>mP(t,s,h0.getOnHide);var Tk=ma({factory:(t,s)=>{const g={setViews:(p,w)=>{Kn.set(p,[nz(w,s.backstage.shared.providers)])},whichView:p=>Ro.getCurrent(p).bind(uP),toggleView:(p,w,x,_)=>Ro.getCurrent(p).exists(D=>{const B=uP(D),I=B.exists(X=>_===X),V=Ol.getSlot(D,_).isSome();return V&&(Ol.hideAllSlots(D),I?(oz(p),w()):(x(),dP(p),Ol.showSlot(D,_),rz(D,_)),B.each(X=>K4(D,X))),V})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:yt([Kn.config({}),Ro.config({find:p=>{const w=Kn.contents(p);return ir(w)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Qe("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,l,d)=>t.toggleView(s,a,l,d),whichView:(t,s)=>t.whichView(s)}});const az=(t,s,a)=>{let l=!1;const d={getSocket:g=>_c.getPart(g,t,"socket"),setSidebar:(g,p,w)=>{_c.getPart(g,t,"sidebar").each(x=>F4(x,p,w))},toggleSidebar:(g,p)=>{_c.getPart(g,t,"sidebar").each(w=>L4(w,p))},whichSidebar:g=>_c.getPart(g,t,"sidebar").bind(vV).getOrNull(),getHeader:g=>_c.getPart(g,t,"header"),getToolbar:g=>_c.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{_c.getPart(g,t,"toolbar").each(w=>{const x=De(p,Sk);w.getApis().setGroups(w,x)})},setToolbars:(g,p)=>{_c.getPart(g,t,"multiple-toolbar").each(w=>{const x=De(p,_=>De(_,Sk));T4.setItems(w,x)})},refreshToolbar:g=>{_c.getPart(g,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:g=>{_c.getPart(g,t,"toolbar").each(p=>{Uo(p.getApis().toggle,w=>w(p))})},toggleToolbarDrawerWithoutFocusing:g=>{_c.getPart(g,t,"toolbar").each(p=>{Uo(p.getApis().toggleWithoutFocusing,w=>w(p))})},isToolbarDrawerToggled:g=>_c.getPart(g,t,"toolbar").bind(p=>O.from(p.getApis().isOpen).map(w=>w(p))).getOr(!1),getThrobber:g=>_c.getPart(g,t,"throbber"),focusToolbar:g=>{_c.getPart(g,t,"toolbar").orThunk(()=>_c.getPart(g,t,"multiple-toolbar")).each(w=>{Sn.focusIn(w)})},setMenubar:(g,p)=>{_c.getPart(g,t,"menubar").each(w=>{tb.setMenus(w,p)})},focusMenubar:g=>{_c.getPart(g,t,"menubar").each(p=>{tb.focus(p)})},setViews:(g,p)=>{_c.getPart(g,t,"viewWrapper").each(w=>{Tk.setViews(w,p)})},toggleView:(g,p)=>_c.getPart(g,t,"viewWrapper").exists(w=>Tk.toggleView(w,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>_c.getPart(g,t,"viewWrapper").bind(Tk.whichView).getOrNull(),hideMainView:g=>{l=d.isToolbarDrawerToggled(g),l&&d.toggleToolbarDrawer(g),_c.getPart(g,t,"editorContainer").each(p=>{const w=p.element;Zt(w,"display","none"),Hn(w,"aria-hidden","true")})},showMainView:g=>{l&&d.toggleToolbarDrawer(g),_c.getPart(g,t,"editorContainer").each(p=>{const w=p.element;fo(w,"display"),ne(w,"aria-hidden")}),d.refreshToolbar(g)}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},cz=jf.optional({factory:tb,name:"menubar",schema:[Qe("backstage")]}),lz=t=>t.type===Ou.sliding?GV:t.type===Ou.floating?jV:l2,iz=jf.optional({factory:{sketch:t=>T4.sketch({uid:t.uid,dom:t.dom,listBehaviours:yt([Sn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>l2({type:t.type,uid:en("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),O.some(!0))}),setupItem:(s,a,l,d)=>{Gf.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Qe("dom"),Qe("onEscape")]}),uz=jf.optional({factory:{sketch:t=>{const s=lz(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),O.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[Qe("dom"),Qe("onEscape"),Qe("getSink")]}),dz=jf.optional({factory:{sketch:lV},name:"header",schema:[Qe("dom")]}),mz=jf.optional({factory:{sketch:mV},name:"promotion",schema:[Qe("dom")]}),gP=jf.optional({name:"socket",schema:[Qe("dom")]}),kk=jf.optional({factory:{sketch:yV},name:"sidebar",schema:[Qe("dom")]}),Y4=jf.optional({factory:{sketch:EV},name:"throbber",schema:[Qe("dom")]}),hP=jf.optional({factory:Tk,name:"viewWrapper",schema:[Qe("backstage")]}),yp=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),pP=jf.optional({factory:{sketch:yp},name:"editorContainer",schema:[]});var or=ta({name:"OuterContainer",factory:az,configFields:[Qe("dom"),Qe("behaviours")],partFields:[dz,cz,uz,iz,gP,kk,mz,Y4,hP,pP],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,l)=>{t.setSidebar(s,a,l)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const fz="file edit view insert format tools table help",bP={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},gz=(t,s,a)=>{const l=sR(a).split(/[ ,]/);return{text:t.title,getItems:()=>Ve(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:es(l,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},X4=t=>t.split(" "),vP=(t,s)=>{const a={...bP,...s.menus},l=ts(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?X4(fz):X4(s.menubar===!1?"":s.menubar),g=Pn(d,w=>{const x=oo(bP,w);return l?x||pt(s.menus,w).exists(_=>oo(_,"items")):x}),p=De(g,w=>{const x=a[w];return gz({title:x.title,items:X4(x.items)},s,t)});return Pn(p,w=>{const x=_=>Et(_)||_.type!=="separator";return w.getItems().length>0&&es(w.getItems(),x)})},yP=t=>{const s=()=>{t._skinLoaded=!0,kL(t)};return()=>{t.initialized?s():t.on("init",s)}},wP=(t,s)=>()=>VO(t,{message:s}),CP=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),hz=(t,s)=>{const a=s+"/skin.min.css";return CP(t,a,t.ui.styleSheetLoader)},J4=(t,s)=>{if(yn(pe.fromDom(t.getElement()))){const l=s+"/skin.shadowdom.min.css";return CP(t,l,Qw.DOM.styleSheetLoader)}else return Promise.resolve()},SP=(t,s)=>{const a=yR(s);return a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!rC(s)&&Et(a)?Promise.all([hz(s,a),J4(s,a)]).then(yP(s),wP(s,"Skin could not be loaded")):Promise.resolve(yP(s)())},pz=Ye(SP,!1),bz=Ye(SP,!0),Ek=(t,s)=>a=>{const l=Zi(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},u2=(t,s,a)=>l=>{const d=()=>a(l),g=()=>{a(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},xP=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Mu=(t,s)=>()=>t.execCommand(s),TP=(t,s,a)=>{const l=(w,x,_,D)=>{const B=s.shared.providers.translate(w.title);if(w.type==="separator")return O.some({type:"separator",text:B});if(w.type==="submenu"){const I=Ve(w.getStyleItems(),V=>d(V,x,D));return x===0&&I.length<=0?O.none():O.some({type:"nestedmenuitem",text:B,enabled:I.length>0,getSubmenuItems:()=>Ve(w.getStyleItems(),V=>d(V,x,D))})}else return O.some({type:"togglemenuitem",text:B,icon:w.icon,active:w.isSelected(D),enabled:!_,onAction:a.onAction(w),...w.getStylePreview().fold(()=>({}),I=>({meta:{style:I}}))})},d=(w,x,_)=>{const D=w.type==="formatter"&&a.isInvalid(w);return x===0?D?[]:l(w,x,!1,_).toArray():l(w,x,D,_).toArray()},g=w=>{const x=a.getCurrentValue(),_=a.shouldHide?0:1;return Ve(w,D=>d(D,_,x))};return{validateItems:g,getFetch:(w,x)=>(_,D)=>{const B=x(),I=g(B),V=X1(I,zm.CLOSE_ON_EXECUTE,w,{isHorizontalMenu:!1,search:O.none()});D(V)}}},nb=(t,s,a)=>{const l=a.dataset,d=l.type==="basic"?()=>De(l.data,g=>y4(g,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:TP(t,s,a),getStyleItems:d}},d2=(t,s,a)=>{const{items:l,getStyleItems:d}=nb(t,s,a),g=w=>({getComponent:q(w)}),p=u2(t,"NodeChange",w=>{const x=w.getComponent();a.updateText(x)});return LA({text:a.icon.isSome()?O.none():a.text,icon:a.icon,tooltip:O.from(a.tooltip),role:O.none(),fetch:l.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},kP=t=>De(t,s=>{let a=s,l=s;const d=s.split("=");return d.length>1&&(a=d[0],l=d[1]),{title:a,format:l}}),vz=t=>({type:"basic",data:t});var p0;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(p0||(p0={}));const yz=(t,s)=>s===p0.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),_k=(t,s,a)=>{const l=t.options.get(s);return{type:"basic",data:kP(yz(l,a))}},Q4=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],eD=t=>{const s=()=>qt(Q4,w=>t.formatter.match(w.format)),a=w=>()=>t.formatter.match(w),l=w=>O.none,d=w=>{const _=s().fold(q("left"),D=>D.title.toLowerCase());wn(w,Y1,{icon:`align-${_}`})},g=vz(Q4),p=w=>()=>qt(Q4,x=>x.format===w.format).each(x=>t.execCommand(x.command));return{tooltip:"Align",text:O.none(),icon:O.some("align-left"),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:w=>!t.formatter.canApply(w.format)}},wz=(t,s)=>d2(t,s,eD(t)),Cz=(t,s)=>{const a=nb(t,s,eD(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},EP=(t,s)=>{const a=s(),l=De(a,d=>d.format);return O.from(t.formatter.closest(l)).bind(d=>qt(a,g=>g.format===d)).orThunk(()=>kn(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},_P=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),l=p=>()=>{const w=t.formatter.get(p);return w?O.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},d=p=>{const x=EP(t,()=>g.data).fold(q(s),_=>_.title);wn(p,Ru,{text:x})},g=_k(t,"block_formats",p0.SemiColon);return{tooltip:"Blocks",text:O.some(s),icon:O.none(),isSelectedFor:a,getCurrentValue:O.none,getPreviewFor:l,onAction:xP(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},Sz=(t,s)=>d2(t,s,_P(t)),xz=(t,s)=>{const a=nb(t,s,_P(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},OP=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],AP=t=>{const s=t.split(/\s*,\s*/);return De(s,a=>a.replace(/^['"]+|['"]+$/g,""))},Tz=t=>{const s=()=>{const a=AP(t.toLowerCase());return Vr(OP,l=>a.indexOf(l.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},DP=t=>{const s="System Font",a=()=>{const _=X=>X?AP(X)[0]:"",D=t.queryCommandValue("FontName"),B=x.data,I=D?D.toLowerCase():"";return{matchOpt:qt(B,X=>{const le=X.format;return le.toLowerCase()===I||_(le).toLowerCase()===_(I).toLowerCase()}).orThunk(()=>kn(Tz(I),{title:s,format:I})),font:D}},l=_=>D=>D.exists(B=>B.format===_),d=()=>{const{matchOpt:_}=a();return _},g=_=>()=>O.some({tag:"div",styles:_.indexOf("dings")===-1?{"font-family":_}:{}}),p=_=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,_.format)})},w=_=>{const{matchOpt:D,font:B}=a(),I=D.fold(q(B),V=>V.title);wn(_,Ru,{text:I})},x=_k(t,"font_family_formats",p0.SemiColon);return{tooltip:"Fonts",text:O.some(s),icon:O.none(),isSelectedFor:l,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:w,dataset:x,shouldHide:!1,isInvalid:zn}},kz=(t,s)=>d2(t,s,DP(t)),Ez=(t,s)=>{const a=nb(t,s,DP(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},RP={tab:q(9),escape:q(27),enter:q(13),backspace:q(8),delete:q(46),left:q(37),up:q(38),right:q(39),down:q(40),space:q(32),home:q(36),end:q(35),pageUp:q(33),pageDown:q(34)},_z={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},MP=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),l="\\.",d=w=>`(?:${w})?`,p=`[+-]?(?:${["Infinity",t+l+d(t)+d(a),l+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),Oz=(t,s)=>es(s,a=>es(_z[a],l=>t===l)),NP=(t,s)=>O.from(MP.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return Oz(g,s)?O.some({value:d,unit:g}):O.none()}),BP=(t,s)=>NP(t,s).map(({value:a,unit:l})=>a+l),Az=(t,s,a)=>{let l=O.none();const d=Ne=>Ne.map(Le=>Ft.getValue(Le)).getOr(""),g=u2(t,"NodeChange",Ne=>{const Le=Ne.getComponent();l=O.some(Le),a.updateInputValue(Le)}),p=Ne=>({getComponent:q(Ne)}),w=S(G),x=en("custom-number-input-events"),_=Ne=>Ne>=0,D=(Ne,Le,kt)=>{const st=d(l),$t=NP(st,["unsupportedLength","empty"]),an=$t.map(vt=>vt.value).getOr(0),yo=aO(t),xn=$t.map(vt=>vt.unit).filter(vt=>vt!=="").getOr(yo),ho=Ne(an,a.getConfigFromUnit(xn).step),Wn=`${_(ho)?ho:an}${xn}`,mo=`${an}${xn}`.length-`${Wn}`.length,$n=l.map(vt=>vt.element.dom.selectionStart-mo),fs=l.map(vt=>vt.element.dom.selectionEnd-mo);a.onAction(Wn,kt),l.each(vt=>{Ft.setValue(vt,Wn),Le&&($n.each(rn=>vt.element.dom.selectionStart=rn),fs.each(rn=>vt.element.dom.selectionEnd=rn))})},B=(Ne,Le)=>D((kt,st)=>kt-st,Ne,Le),I=(Ne,Le)=>D((kt,st)=>kt+st,Ne,Le),V=Ne=>pc(Ne.element).fold(O.none,Le=>(wu(Le),O.some(!0))),X=Ne=>Qp(Ne.element)?(Xl(Ne.element).each(Le=>wu(Le)),O.some(!0)):O.none(),le=(Ne,Le,kt,st)=>{const $t=s.shared.providers.translate(kt),an=en("altExecuting"),yo=()=>Ne(!0);return Xc.sketch({dom:{tag:"button",attributes:{title:$t,"aria-label":$t},classes:st.concat(Le)},components:[K1(Le,s.shared.providers.icons)],buttonBehaviours:yt([Jn(an,[nt(Ll(),(xn,ho)=>{(ho.event.raw.keyCode===RP.space()||ho.event.raw.keyCode===RP.enter())&&Ne(!1)}),nt(wi(),yo),nt(Bs(),yo)])]),eventOrder:{[Ll()]:[an,"keying"],[wi()]:[an,"alloy.base.behaviour"],[Bs()]:[an,"alloy.base.behaviour"]}})},Ee=xo(le(Ne=>B(!1,Ne),"minus","Decrease font size",["highlight-on-focus"])),ye=xo(le(Ne=>I(!1,Ne),"plus","Increase font size",["highlight-on-focus"])),ke=xo({dom:{tag:"div",classes:["tox-input-wrapper","highlight-on-focus"]},components:[$1.sketch({inputBehaviours:yt([Jn(x,[dp({onSetup:g,getApi:p},w),H1({getApi:p},w)]),Jn("input-update-display-text",[nt(Ru,(Ne,Le)=>{Ft.setValue(Ne,Le.event.text)}),nt(I0(),Ne=>{a.onAction(Ft.getValue(Ne))}),nt(Uu(),Ne=>{a.onAction(Ft.getValue(Ne))})]),Sn.config({mode:"special",onEnter:Ne=>(D(ht,!0,!0),O.some(!0)),onEscape:V,onUp:Ne=>(I(!0,!1),O.some(!0)),onDown:Ne=>(B(!0,!1),O.some(!0)),onLeft:(Ne,Le)=>(Le.cut(),O.none()),onRight:(Ne,Le)=>(Le.cut(),O.none())})])})],behaviours:yt([Rn.config({}),Sn.config({mode:"special",onEnter:X,onSpace:X,onEscape:V}),Jn("input-wrapper-events",[nt(yi(),Ne=>{mt([Ee,ye],Le=>{const kt=pe.fromDom(Le.get(Ne).element.dom);Qp(kt)&&Oy(kt)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[Ee.asSpec(),ke.asSpec(),ye.asSpec()],behaviours:yt([Rn.config({}),Sn.config({mode:"flow",focusInside:ep.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Ne=>Qp(Ne.element)?O.none():(wu(Ne.element),O.some(!0))})])}},$P={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},PP={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Dz=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},Rz=(t,s)=>/[0-9.]+px$/.test(t)?Dz(parseInt(t,10)*72/96,s||0)+"pt":pt(PP,t).getOr(t),Mz=t=>pt($P,t).getOr(""),ob=t=>{const s=()=>{let x=O.none();const _=w.data,D=t.queryCommandValue("FontSize");if(D)for(let B=3;x.isNone()&&B>=0;B--){const I=Rz(D,B),V=Mz(I);x=qt(_,X=>X.format===D||X.format===I||X.format===V)}return{matchOpt:x,size:D}},a=x=>_=>_.exists(D=>D.format===x),l=()=>{const{matchOpt:x}=s();return x},d=q(O.none),g=x=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,x.format)})},p=x=>{const{matchOpt:_,size:D}=s(),B=_.fold(q(D),I=>I.title);wn(x,Ru,{text:B})},w=_k(t,"font_size_formats",p0.Space);return{tooltip:"Font sizes",text:O.some("12pt"),icon:O.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:p,dataset:w,shouldHide:!1,isInvalid:zn}},Nz=(t,s)=>d2(t,s,ob(t)),Bz=t=>{var s;const a={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:a},$z=t=>({updateInputValue:a=>wn(a,Ru,{text:t.queryCommandValue("FontSize")}),getConfigFromUnit:Bz,onAction:(a,l)=>t.execCommand("FontSize",!1,a,{skip_focus:!l})}),Pz=(t,s)=>Az(t,s,$z(t)),Iz=(t,s)=>{const a=nb(t,s,ob(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},IP=(t,s)=>{const a="Paragraph",l=p=>()=>t.formatter.match(p),d=p=>()=>{const w=t.formatter.get(p);return w!==void 0?O.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):O.none()},g=p=>{const w=B=>p4(B)?Ve(B.items,w):t$(B)?[{title:B.title,format:B.format}]:[],x=Ve(v4(t),w),D=EP(t,q(x)).fold(q(a),B=>B.title);wn(p,Ru,{text:D})};return{tooltip:"Formats",text:O.some(a),icon:O.none(),isSelectedFor:l,getCurrentValue:O.none,getPreviewFor:d,onAction:xP(t),updateText:g,shouldHide:oR(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},Fz=(t,s)=>{const a={type:"advanced",...s.styles};return d2(t,s,IP(t,a))},Lz=(t,s)=>{const a={type:"advanced",...s.styles},l=nb(t,s,IP(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},tD=q([Qe("toggleClass"),Qe("fetch"),_g("onExecute"),Te("getHotspot",O.some),Te("getAnchorOverrides",q({})),Xu(),_g("onItemExecute"),ss("lazySink"),Qe("dom"),Se("onOpen"),uc("splitDropdownBehaviours",[na,Sn,Rn]),Te("matchWidth",!1),Te("useMinWidth",!1),Te("eventOrder",{}),ss("role")].concat(rA())),Hz=ja({factory:Xc,schema:[Qe("dom")],name:"arrow",defaults:()=>({buttonBehaviours:yt([Rn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Cm)},buttonBehaviours:yt([lo.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),Vz=ja({factory:Xc,schema:[Qe("dom")],name:"button",defaults:()=>({buttonBehaviours:yt([Rn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),FP=q([Hz,Vz,Gi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Qe("text")],name:"aria-descriptor"}),Tu({schema:[Ku()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,a)})}})}),QM()]),LP=(t,s,a,l)=>{const d=D=>{Ro.getCurrent(D).each(B=>{Jo.highlightFirst(B),Sn.focusIn(B)})},g=D=>{oA(t,ht,D,l,d,ii.HighlightMenuAndItem).get(G)},p=D=>(g(D),O.some(!0)),w=D=>{const B=Zd(D,t,"button");return Cm(B),O.some(!0)},x={...Gs([Br((D,B)=>{Vs(D,t,"aria-descriptor").each(V=>{const X=en("aria");Hn(V.element,"id",X),Hn(D.element,"aria-describedby",X)})})]),...Nx(O.some(g))},_={repositionMenus:D=>{lo.isOn(D)&&sA(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:_,eventOrder:{...t.eventOrder,[$s()]:["disabling","toggling","alloy.base.behaviour"]},events:x,behaviours:cr(t.splitDropdownBehaviours,[na.config({others:{sandbox:D=>{const B=Zd(D,t,"arrow");return _C(t,D,{onOpen:()=>{lo.on(B),lo.on(D)},onClose:()=>{lo.off(B),lo.off(D)}})}}}),Sn.config({mode:"special",onSpace:w,onEnter:w,onDown:p}),Rn.config({}),lo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},Ok=ta({name:"SplitDropdown",configFields:tD(),partFields:FP(),factory:LP,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),HP=t=>({isEnabled:()=>!Vn.isDisabled(t),setEnabled:s=>Vn.set(t,!s),setText:s=>wn(t,Ru,{text:s}),setIcon:s=>wn(t,Y1,{icon:s})}),zz=t=>({setActive:s=>{lo.set(t,s)},isActive:()=>lo.isOn(t),isEnabled:()=>!Vn.isDisabled(t),setEnabled:s=>Vn.set(t,!s),setText:s=>wn(t,Ru,{text:s}),setIcon:s=>wn(t,Y1,{icon:s})}),VP=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),zP=en("focus-button"),nD=(t,s,a,l,d)=>{const g=s.map(w=>xo(FA(w,"tox-tbtn",d))),p=t.map(w=>xo(tm(w,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:VP(a,d)},components:Yv([p.map(w=>w.asSpec()),g.map(w=>w.asSpec())]),eventOrder:{[Qr()]:["focusing","alloy.base.behaviour",pp],[Rd()]:[pp,"toolbar-group-button-events"]},buttonBehaviours:yt([Kd.toolbarButton(d.isDisabled),dc(),Jn(pp,[Br((w,x)=>VC(w)),nt(Ru,(w,x)=>{g.bind(_=>_.getOpt(w)).each(_=>{Kn.set(_,[fr(d.translate(x.event.text))])})}),nt(Y1,(w,x)=>{p.bind(_=>_.getOpt(w)).each(_=>{Kn.set(_,[tm(x.event.icon,d.icons)])})}),nt(Qr(),(w,x)=>{x.event.prevent(),Xo(w,zP)})])].concat(l.getOr([])))}},Uz=(t,s,a,l)=>{const d=s.shared,g=S(G),p={toolbarButtonBehaviours:[],getApi:HP,onSetup:t.onSetup},w=[Jn("toolbar-group-button-events",[dp(p,g),H1(p,g)])];return vp.sketch({lazySink:d.getSink,fetch:()=>il.nu(x=>{x(De(a(t.items),Sk))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:nD(t.icon,t.text,t.tooltip,O.some(w),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},UP=(t,s,a)=>{var l;const d=S(G),g=nD(t.icon,t.text,t.tooltip,O.none(),a);return Xc.sketch({dom:g.dom,components:g.components,eventOrder:IA,buttonBehaviours:{...yt([Jn("toolbar-button-events",[c7({onAction:t.onAction,getApi:s.getApi}),dp(s,d),H1(s,d)]),Kd.toolbarButton(()=>!t.enabled||a.isDisabled()),dc()].concat(s.toolbarButtonBehaviours)),[pp]:(l=g.buttonBehaviours)===null||l===void 0?void 0:l[pp]}})},WP=(t,s)=>ZP(t,s,[]),ZP=(t,s,a)=>UP(t,{toolbarButtonBehaviours:a.length>0?[Jn("toolbarButtonWith",a)]:[],getApi:HP,onSetup:t.onSetup},s),oD=(t,s)=>jP(t,s,[]),jP=(t,s,a)=>UP(t,{toolbarButtonBehaviours:[Kn.config({}),lo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[Jn("toolbarToggleButtonWith",a)]:[]),getApi:zz,onSetup:t.onSetup},s),Wz=(t,s,a)=>l=>il.nu(d=>s.fetch(d)).map(d=>O.from(lA(Ns(TC(en("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,zm.CLOSE_ON_EXECUTE,s.select.getOr(zn),a),{movement:kC(s.columns,s.presets),menuBehaviours:gC.unnamedEvents(s.columns!=="auto"?[]:[Br((g,p)=>{$O(g,4,AR(s.presets)).each(({numRows:w,numColumns:x})=>{Sn.setGridSize(g,w,x)})})])})))),Zz=(t,s)=>{const a=g=>({isEnabled:()=>!Vn.isDisabled(g),setEnabled:p=>Vn.set(g,!p),setIconFill:(p,w)=>{Tr(g.element,`svg path[id="${p}"], rect[id="${p}"]`).each(x=>{Hn(x,"fill",w)})},setActive:p=>{Hn(g.element,"aria-pressed",p),Tr(g.element,"span").each(w=>{g.getSystem().getByDom(w).each(x=>lo.set(x,p))})},isActive:()=>Tr(g.element,"span").exists(p=>g.getSystem().getByDom(p).exists(lo.isOn)),setText:p=>Tr(g.element,"span").each(w=>g.getSystem().getByDom(w).each(x=>wn(x,Ru,{text:p}))),setIcon:p=>Tr(g.element,"span").each(w=>g.getSystem().getByDom(w).each(x=>wn(x,Y1,{icon:p})))}),l=S(G),d={getApi:a,onSetup:t.onSetup};return Ok.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...VP(t.tooltip,s.providers)}},onExecute:g=>{const p=a(g);p.isEnabled()&&t.onAction(p)},onItemExecute:(g,p,w)=>{},splitDropdownBehaviours:yt([Kd.splitButton(s.providers.isDisabled),dc(),Jn("split-dropdown-events",[Br((g,p)=>VC(g)),nt(zP,Rn.focus),dp(d,l),H1(d,l)]),NC.config({})]),eventOrder:{[Rd()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:Wz(a,t,s.providers),parts:{menu:qx(!1,t.columns,t.presets)},components:[Ok.parts.button(nD(t.icon,t.text,O.none(),O.some([lo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),Ok.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:K3("chevron-down",s.providers.icons)},buttonBehaviours:yt([Kd.splitButton(s.providers.isDisabled),dc(),Jw()])}),Ok.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},GP=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],wp=(t,s)=>(a,l,d)=>{const g=t(a).mapError(p=>uf(p)).getOrDie();return s(g,l,d)},jz={button:wp(GR,(t,s)=>WP(t,s.shared.providers)),togglebutton:wp(sT,(t,s)=>oD(t,s.shared.providers)),menubutton:wp(H$,(t,s)=>ZC(t,"tox-tbtn",s,O.none())),splitbutton:wp(dV,(t,s)=>Zz(t,s.shared)),grouptoolbarbutton:wp(L$,(t,s,a)=>{const l=a.ui.registry.getAll().buttons,d=p=>Dk(a,{buttons:l,toolbar:p,allowToolbarGroups:!1},s,O.none()),g={[ov]:s.shared.header.isPositionedAtTop()?Id.TopToBottom:Id.BottomToTop};switch(Vv(a)){case Ou.floating:return Uz(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Ak=(t,s,a)=>pt(jz,t.type).fold(()=>(console.error("skipping button defined by",t),O.none()),l=>O.some(l(t,s,a))),m2={styles:Fz,fontsize:Nz,fontsizeinput:Pz,fontfamily:kz,blocks:Sz,align:wz},qP=t=>{const s=De(GP,a=>{const l=Pn(a.items,d=>oo(t,d)||oo(m2,d));return{name:a.name,items:l}});return Pn(s,a=>a.items.length>0)},Gz=t=>{const s=t.split("|");return De(s,a=>({items:a.trim().split(" ")}))},qz=t=>Ke(t,s=>oo(s,"name")&&oo(s,"items")),Kz=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?qP(a):Et(s)?Gz(s):qz(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Yz=(t,s,a,l,d,g)=>pt(s,a.toLowerCase()).orThunk(()=>g.bind(p=>us(p,w=>pt(s,w+a.toLowerCase())))).fold(()=>pt(m2,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),O.none()):Ak(p,d,t)),Dk=(t,s,a,l)=>{const d=Kz(s),g=De(d,p=>{const w=Ve(p.items,x=>x.trim().length===0?[]:Yz(t,s.buttons,x,s.allowToolbarGroups,a,l).toArray());return{title:O.from(t.translate(p.name)),items:w}});return Pn(g,p=>p.items.length>0)},KP=(t,s,a,l)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(Ke(g,Et)){const w=g.map(x=>{const _={toolbar:x,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return Dk(t,_,l,O.none())});or.setToolbars(d,w)}else or.setToolbar(d,Dk(t,a,l,O.none()))},f2=wc(),YP=f2.os.isiOS()&&f2.os.version.major<=12,XP=(t,s)=>{const{uiMotherships:a}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=S(vo(d.innerWidth,d.innerHeight)),w=S(vo(g.offsetWidth,g.offsetHeight)),x=()=>{const I=p.get();(I.left!==d.innerWidth||I.top!==d.innerHeight)&&(p.set(vo(d.innerWidth,d.innerHeight)),gT(t))},_=()=>{const I=t.getDoc().documentElement,V=w.get();(V.left!==I.offsetWidth||V.top!==I.offsetHeight)&&(w.set(vo(I.offsetWidth,I.offsetHeight)),gT(t))},D=I=>{kM(t,I)};l.bind(d,"resize",x),l.bind(d,"scroll",D);const B=Ny(pe.fromDom(t.getBody()),"load",_);t.on("hide",()=>{mt(a,I=>{Zt(I.element,"display","none")})}),t.on("show",()=>{mt(a,I=>{fo(I.element,"display")})}),t.on("NodeChange",_),t.on("remove",()=>{B.unbind(),l.unbind(d,"resize",x),l.unbind(d,"scroll",D),d=null})},JP=(t,s,a)=>{cp(t)&&Ef(a.mainUi.mothership.element,a.popupUi.mothership),f1(s,a.dialogUi.mothership)};var Jz=Object.freeze({__proto__:null,render:async(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:p}=s,w=S(0),x=g.outerContainer;await pz(t);const _=pe.fromDom(d.targetNode),D=ct(Fe(_));Ef(_,g.mothership),JP(t,D,s),t.on("PostRender",()=>{or.setSidebar(x,a.sidebar,bR(t)),KP(t,s,a,l),w.set(t.getWin().innerWidth),or.setMenubar(x,vP(t,a)),or.setViews(x,a.views),XP(t,s)});const B=or.getSocket(x).getOrDie("Could not find expected socket element");if(YP){Ar(B.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const le=MB(()=>{t.dispatch("ScrollContent")},20),Ee=ll(B.element,"scroll",le.throttle);t.on("remove",Ee.unbind)}fM(t,s),t.addCommand("ToggleSidebar",(le,Ee)=>{or.toggleSidebar(x,Ee),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var le;return(le=or.whichSidebar(x))!==null&&le!==void 0?le:""}),t.addCommand("ToggleView",(le,Ee)=>{if(or.toggleView(x,Ee)){const ye=x.element;g.mothership.broadcastOn([Nm()],{target:ye}),mt(p,ke=>{ke.broadcastOn([Nm()],{target:ye})}),tn(or.whichView(x))&&(t.focus(),t.nodeChanged())}}),t.addQueryValueHandler("ToggleView",()=>{var le;return(le=or.whichView(x))!==null&&le!==void 0?le:""});const I=Vv(t),V=()=>{or.refreshToolbar(s.mainUi.outerContainer)};(I===Ou.sliding||I===Ou.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const le=t.getWin().innerWidth;le!==w.get()&&(V(),w.set(le))});const X={setEnabled:le=>{bC(s,!le)},isEnabled:()=>!Vn.isDisabled(x)};return{iframeContainer:B.element.dom,editorContainer:x.element.dom,api:X}}});const Rk=t=>/^[0-9\.]+(|px)$/i.test(""+t)?O.some(parseInt(""+t,10)):O.none(),sD=t=>pn(t)?t+"px":t,Mk=(t,s,a)=>{const l=s.filter(g=>t<g),d=a.filter(g=>t>g);return l.or(d).getOr(t)},Qz=t=>{const s=nC(t),a=oC(t),l=Hx(t);return Rk(s).map(d=>Mk(d,a,l))},e9=t=>Qz(t).getOr(nC(t)),QP=t=>{const s=Ix(t),a=Fx(t),l=Lx(t);return Rk(s).map(d=>Mk(d,a,l))},t9=t=>QP(t).getOr(Ix(t)),{ToolbarLocation:rD,ToolbarMode:eI}=DF,tI=40,n9=(t,s,a,l,d)=>{const{mainUi:g,uiMotherships:p}=a,w=Qw.DOM,x=N1(t),_=Wv(t),D=Lx(t).or(QP(t)),B=l.shared.header,I=B.isPositionedAtTop,V=Vv(t),X=V===eI.sliding||V===eI.floating,le=S(!1),Ee=()=>le.get()&&!t.removed,ye=$n=>X?$n.fold(q(0),fs=>fs.components().length>1?ze(fs.components()[1].element):0):0,ke=$n=>{switch(zx(t)){case rD.auto:const fs=or.getToolbar(g.outerContainer),vt=ye(fs),rn=ze($n.element)-vt,Vt=E(s);if(Vt.y>rn)return"top";{const so=Yl(s),No=Math.max(so.dom.scrollHeight,ze(so));return Vt.bottom<No-rn||me().bottom<Vt.bottom-rn?"bottom":"top"}case rD.bottom:return"bottom";case rD.top:default:return"top"}},Ne=$n=>{d.on(fs=>{Ga.setModes(fs,[$n]),B.setDockingMode($n);const vt=I()?Id.TopToBottom:Id.BottomToTop;Hn(fs.element,ov,vt)})},Le=()=>{d.on($n=>{const fs=D.getOrThunk(()=>{const vt=Rk(et(Zs(),"margin-left")).getOr(0);return ia(Zs())-vs(s).left+vt});Zt($n.element,"max-width",fs+"px")})},kt=$n=>{d.on(fs=>{const vt=or.getToolbar(g.outerContainer),rn=ye(vt),Vt=E(s),{top:Nn,left:so}=st(t,g.outerContainer.element).fold(()=>({top:I()?Math.max(Vt.y-ze(fs.element)+rn,0):Vt.bottom,left:Vt.x}),rs=>{var Gl;const Kr=E(rs),ud=(Gl=rs.dom.scrollTop)!==null&&Gl!==void 0?Gl:0,cm=Yo(rs,Zs()),ih=cm?Math.max(Vt.y-ze(fs.element)+rn,0):Vt.y-Kr.y+ud-ze(fs.element)+rn;return{top:I()?ih:Vt.bottom,left:cm?Vt.x:Vt.x-Kr.x}}),No={position:"absolute",left:Math.round(so)+"px",top:Math.round(Nn)+"px"},_a=$n.map(rs=>{const Gl=Bc(),Kr=150,ud=window.innerWidth-(so-Gl.left);return{width:Math.max(Math.min(rs,ud),Kr)+"px"}}).getOr({});Ar(g.outerContainer.element,{...No,..._a})})},st=($n,fs)=>cp($n)?t2(fs):O.none(),$t=()=>{mt(p,$n=>{$n.broadcastOn([Gh()],{})})},an=()=>{if(x)return O.none();if(vs(g.outerContainer.element).left+Qs(g.outerContainer.element)>=window.innerWidth-tI||Js(g.outerContainer.element,"width").isSome()){Zt(g.outerContainer.element,"position","absolute"),Zt(g.outerContainer.element,"left","0px"),fo(g.outerContainer.element,"width");const fs=Qs(g.outerContainer.element);return O.some(fs)}else return O.none()},yo=$n=>{if(!Ee())return;x||Le();const fs=x?O.none():an();X&&or.refreshToolbar(g.outerContainer),x||kt(fs),_&&d.on($n),$t()},xn=()=>x||!_||!Ee()?!1:d.get().exists($n=>{const fs=B.getDockingMode(),vt=ke($n);return vt!==fs?(Ne(vt),!0):!1});return{isVisible:Ee,isPositionedAtTop:I,show:()=>{le.set(!0),Zt(g.outerContainer.element,"display","flex"),w.addClass(t.getBody(),"mce-edit-focus"),mt(p,$n=>{fo($n.element,"display")}),xn(),cp(t)?yo($n=>Ga.isDocked($n)?Ga.reset($n):Ga.refresh($n)):yo(Ga.refresh)},hide:()=>{le.set(!1),Zt(g.outerContainer.element,"display","none"),w.removeClass(t.getBody(),"mce-edit-focus"),mt(p,$n=>{Zt($n.element,"display","none")})},update:yo,updateMode:()=>{xn()&&yo(Ga.reset)},repositionPopups:$t}},aD=(t,s)=>{const a=E(t);return{pos:s?a.y:a.bottom,bounds:a}},o9=(t,s,a,l)=>{const d=S(aD(s,a.isPositionedAtTop())),g=_=>{const{pos:D,bounds:B}=aD(s,a.isPositionedAtTop()),{pos:I,bounds:V}=d.get(),X=B.height!==V.height||B.width!==V.width;d.set({pos:D,bounds:B}),X&&gT(t,_),a.isVisible()&&(I!==D?a.update(Ga.reset):X&&(a.updateMode(),a.repositionPopups()))};l||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(Ga.reset)),t.on("NodeChange keydown",_=>{requestAnimationFrame(()=>g(_))});let p=0;const w=t4(()=>a.update(Ga.refresh),33);t.on("ScrollWindow",()=>{const _=Bc().left;_!==p&&(p=_,w.throttle()),a.updateMode()}),cp(t)&&t.on("ElementScroll",_=>{a.update(Ga.refresh)});const x=Zi();x.set(Ny(pe.fromDom(t.getBody()),"load",_=>g(_.raw))),t.on("remove",()=>{x.clear()})};var s9=Object.freeze({__proto__:null,render:async(t,s,a,l,d)=>{const{mainUi:g}=s,p=Hs(),w=pe.fromDom(d.targetNode),x=n9(t,w,s,l,p),_=Ux(t);await bz(t);const D=()=>{if(p.isSet()){x.show();return}p.set(or.getHeader(g.outerContainer).getOrDie());const I=aC(t);cp(t)?(Ef(w,g.mothership),Ef(w,s.popupUi.mothership)):f1(I,g.mothership),f1(I,s.dialogUi.mothership),KP(t,s,a,l),or.setMenubar(g.outerContainer,vP(t,a)),x.show(),o9(t,w,x,_),t.nodeChanged()};t.on("show",D),t.on("hide",x.hide),_||(t.on("focus",D),t.on("blur",x.hide)),t.on("init",()=>{(t.hasFocus()||_)&&D()}),fM(t,s);const B={show:D,hide:x.hide,setEnabled:I=>{bC(s,!I)},isEnabled:()=>!Vn.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:B}}});const r9=()=>{const t=Hs(),s=Hs(),a=Hs();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=t.get().map(w=>w.mothership),p=s.get().map(w=>w.mothership);return g.fold(()=>p.toArray(),w=>p.fold(()=>[w],x=>Yo(w.element,x.element)?[w]:[w,x]))},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(w=>p(w.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},a9="contexttoolbar-show",b0="contexttoolbar-hide",nI=t=>({hide:()=>Xo(t,Eh()),getValue:()=>Ft.getValue(t)}),oI=(t,s)=>nt(iB,(a,l)=>{const d=t.get(a),g=nI(d);s.onAction(g,l.event.buttonApi)}),c9=(t,s,a)=>{const{primary:l,...d}=s.original,g=cs(GR({...d,type:"button",onAction:G}));return ZP(g,a,[oI(t,s)])},sI=(t,s,a)=>{const{primary:l,...d}=s.original,g=cs(sT({...d,type:"togglebutton",onAction:G}));return jP(g,a,[oI(t,s)])},cD=t=>t.type==="contextformtogglebutton",rI=(t,s,a)=>cD(s)?sI(t,s,a):c9(t,s,a),aI=(t,s,a)=>{const l=De(s,p=>xo(rI(t,p,a)));return{asSpecs:()=>De(l,p=>p.asSpec()),findPrimary:p=>us(s,(w,x)=>w.primary?O.from(l[x]).bind(_=>_.getOpt(p)).filter(Pe(Vn.isDisabled)):O.none())}},cI=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),l=xo($1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:yt([Sn.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(Cm(p),!0)),onLeft:(g,p)=>(p.cut(),O.none()),onRight:(g,p)=>(p.cut(),O.none())})])})),d=aI(l,t.commands,s);return[{title:O.none(),items:[l.asSpec()]},{title:O.none(),items:d.asSpecs()}]},Nk={renderContextForm:(t,s,a)=>l2({type:t,uid:en("context-toolbar"),initGroups:cI(s,a),onEscape:O.none,cyclicKeying:!0,providers:a}),buildInitGroups:cI},Bk=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,lI=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Jl(pe.fromDom(t.startContainer),t.startOffset).element;return(ya(a)?ca(a):O.some(a)).filter(Vo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},$k=t=>{const s=t.selection.getRng(),a=lI(s);if(t.inline){const l=Bc();return js(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=M(pe.fromDom(t.getBody()));return js(l.x+a.left,l.y+a.top,a.width,a.height)}},l9=(t,s)=>s.filter(a=>$o(a)&&tl(a)).map(M).getOrThunk(()=>$k(t)),iI=(t,s,a)=>{const l=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:l,width:d-l}},i9=(t,s,a,l,d,g)=>{const p=pe.fromDom(t.getContainer()),w=Tr(p,".tox-editor-header").getOr(p),x=E(w),_=x.y>=s.bottom,D=l&&!_;if(t.inline&&D)return{y:Math.max(x.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(x.y-g,a.bottom)};const B=d==="line"?E(p):s;return D?{y:Math.max(x.bottom+g,a.y),bottom:Math.min(B.bottom-g,a.bottom)}:{y:Math.max(B.y+g,a.y),bottom:Math.min(x.y-g,a.bottom)}},uI=(t,s,a,l=0)=>{const d=af(window),g=E(pe.fromDom(t.getContentAreaContainer())),p=Bf(t)||zv(t)||Uv(t),{x:w,width:x}=iI(g,d,l);if(t.inline&&!p)return js(w,d.y,x,d.height);{const _=s.header.isPositionedAtTop(),{y:D,bottom:B}=i9(t,g,d,_,a,l);return js(w,D,x,B-D)}},Pk=12,dI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},mI={maxHeightFunction:Rg(),maxWidthFunction:z4()},fI=(t,s)=>{const a=t.selection.getRng(),l=Jl(pe.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Yo(l.element,s)},Ik=(t,s,a)=>{const l=Js(t,"position");Zt(t,"position",s);const d=a(t);return l.each(g=>Zt(t,"position",g)),d},lD=t=>t==="node",gI=(t,s,a,l,d)=>{const g=$k(t),p=l.lastElement().exists(w=>Yo(a,w));if(fI(t,a))return p?JB:Zf;if(p)return Ik(s,l.getMode(),()=>Bk(g,E(s),-20)&&!l.isReposition()?sH:JB);{const w=l.getMode()==="fixed"?d.y+Bc().top:d.y,x=ze(s)+Pk;return w+x<=g.y?Zf:XC}},iD=(t,s,a,l)=>{const d=x=>(_,D,B,I,V)=>{const X=gI(t,I,x,a,V),le={..._,y:V.y,height:V.height};return{...X(le,D,B,I,V),alwaysFit:!0}},g=x=>lD(l)?[d(x)]:[];return s?{onLtr:x=>[kc,ac,$a,Tl,oi,Fr].concat(g(x)),onRtl:x=>[kc,$a,ac,oi,Tl,Fr].concat(g(x))}:{onLtr:x=>[Fr,kc,Tl,ac,oi,$a].concat(g(x)),onRtl:x=>[Fr,kc,oi,$a,Tl,ac].concat(g(x))}},u9=(t,s,a,l)=>s==="line"?{bubble:Vh(Pk,0,dI),layouts:{onLtr:()=>[yu],onRtl:()=>[xy]},overrides:mI}:{bubble:Vh(0,Pk,dI,1/Pk),layouts:iD(t,a,l,s),overrides:mI},Fk=(t,s)=>{const a=Pn(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=Yr(a,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},d9=t=>{if(t.length<=1)return t;{const s=g=>es(t,p=>p.position===g),a=g=>Pn(t,p=>p.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=a("node"),p=De(a("selection"),w=>({...w,position:"node"}));return g.concat(p)}else return a(l?"selection":"node");else return a("line")}},m9=t=>{if(t.length<=1)return t;{const s=l=>qt(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>Pn(t,d=>d.position===l))}},Lk=(t,s,a)=>{const l=Fk(t,s);if(l.contextForms.length>0)return O.some({elem:t,toolbars:[l.contextForms[0]]});{const d=Fk(t,a);if(d.contextForms.length>0)return O.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=d9(l.contextToolbars.concat(d.contextToolbars));return O.some({elem:t,toolbars:g})}else return O.none()}},hI=(t,s,a)=>t(s)?O.none():Fi(s,l=>{if(Vo(l)){const{contextToolbars:d,contextForms:g}=Fk(l,a.inNodeScope),p=g.length>0?g:m9(d);return p.length>0?O.some({elem:l,toolbars:p}):O.none()}else return O.none()},t),f9=(t,s)=>{const a=pe.fromDom(s.getBody()),l=p=>Yo(p,a),d=p=>!l(p)&&!aa(a,p),g=pe.fromDom(s.selection.getNode());return d(g)?O.none():Lk(g,t.inNodeScope,t.inEditorScope).orThunk(()=>hI(l,g,t))},g9=(t,s)=>{const a={},l=[],d=[],g={},p={},w=(D,B)=>{const I=cs(XR(B));a[D]=I,I.launch.map(V=>{g["form:"+D]={...B.launch,type:V.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(I)}}}),I.scope==="editor"?d.push(I):l.push(I),p[D]=I},x=(D,B)=>{tL(B).each(I=>{B.scope==="editor"?d.push(I):l.push(I),p[D]=I})},_=ts(t);return mt(_,D=>{const B=t[D];B.type==="contextform"?w(D,B):B.type==="contexttoolbar"&&x(D,B)}),{forms:a,inNodeScope:l,inEditorScope:d,lookupTable:p,formNavigators:g}},pI=en("forward-slide"),bI=en("backward-slide"),uD=en("change-slide-event"),Hk="tox-pop--resizing",vI=t=>{const s=S([]);return ka.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),ka.getContent(a).each(l=>{fo(l.element,"visibility")}),ea(a.element,Hk),fo(a.element,"width")},inlineBehaviours:yt([Jn("context-toolbar-events",[hu(fg(),(a,l)=>{l.event.raw.propertyName==="width"&&(ea(a.element,Hk),fo(a.element,"width"))}),nt(uD,(a,l)=>{const d=a.element;fo(d,"width");const g=ia(d);ka.setContent(a,l.event.contents),Cs(d,Hk);const p=ia(d);Zt(d,"width",g+"px"),ka.getContent(a).each(w=>{l.event.focus.bind(x=>(wu(x),Yu(d))).orThunk(()=>(Sn.focusIn(w),$d(Fe(d))))}),setTimeout(()=>{Zt(a.element,"width",p+"px")},0)}),nt(pI,(a,l)=>{ka.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:$d(Fe(a.element))}]))}),wn(a,uD,{contents:l.event.forwardContents,focus:O.none()})}),nt(bI,(a,l)=>{Oa(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),wn(a,uD,{contents:Ul(d.bar),focus:d.focus})})})]),Sn.config({mode:"special",onEscape:a=>Oa(s.get()).fold(()=>t.onEscape(),l=>(Xo(a,bI),O.some(!0)))})]),lazySink:()=>Ct.value(t.sink)})},dD="tox-pop--transition",h9=(t,s,a,l)=>{const d=l.backstage,g=d.shared,p=wc().deviceType.isTouch,w=Hs(),x=Hs(),_=Hs(),D=Kc(vI({sink:a,onEscape:()=>(t.focus(),O.some(!0))})),B=()=>{const xn=_.get().getOr("node"),ho=lD(xn)?1:0;return uI(t,g,xn,ho)},I=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),V=xn=>ar(Ja(xn,w.get(),Yo),!0),X=()=>{if(I()){const xn=B(),ho=ar(_.get(),"node")?l9(t,w.get()):$k(t);return xn.height<=0||!Bk(ho,xn,.01)}else return!0},le=()=>{w.clear(),x.clear(),_.clear(),ka.hide(D)},Ee=()=>{if(ka.isOpen(D)){const xn=D.element;fo(xn,"display"),X()?Zt(xn,"display","none"):(x.set(0),ka.reposition(D))}},ye=xn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[xn],behaviours:yt([Sn.config({mode:"acyclic"}),Jn("pop-dialog-wrap-events",[Br(ho=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Sn.focusIn(ho))}),Vl(ho=>{t.shortcuts.remove("ctrl+F9")})])])}),ke=Ri(()=>g9(s,xn=>{const ho=kt([xn]);wn(D,pI,{forwardContents:ye(ho)})})),Ne=(xn,ho)=>Dk(t,{buttons:xn,toolbar:ho.items,allowToolbarGroups:!1},l.backstage,O.some(["form:"])),Le=(xn,ho)=>Nk.buildInitGroups(xn,ho),kt=xn=>{const{buttons:ho}=t.ui.registry.getAll(),Wn=ke(),mo={...ho,...Wn.formNavigators},$n=Vv(t)===Ou.scrolling?Ou.scrolling:Ou.default,fs=jt(De(xn,vt=>vt.type==="contexttoolbar"?Ne(mo,vt):Le(vt,g.providers)));return l2({type:$n,uid:en("context-toolbar"),initGroups:fs,onEscape:O.none,cyclicKeying:!0,providers:g.providers})},st=(xn,ho)=>{const Wn=xn==="node"?g.anchors.node(ho):g.anchors.cursor(),mo=u9(t,xn,p(),{lastElement:w.get,isReposition:()=>ar(x.get(),0),getMode:()=>Lr.getMode(a)});return Ns(Wn,mo)},$t=(xn,ho)=>{if(yo.cancel(),!I())return;const Wn=kt(xn),mo=xn[0].position,$n=st(mo,ho);_.set(mo),x.set(1);const fs=D.element;fo(fs,"display"),V(ho)||(ea(fs,dD),Lr.reset(a,D)),ka.showWithinBounds(D,ye(Wn),{anchor:$n,transition:{classes:[dD],mode:"placement"}},()=>O.some(B())),ho.fold(w.clear,w.set),X()&&Zt(fs,"display","none")};let an=!1;const yo=t4(()=>{if(!(!t.hasFocus()||t.removed||an))if(Wa(D.element,dD))yo.throttle();else{const xn=ke();f9(xn,t).fold(le,ho=>{$t(ho.toolbars,O.some(ho.elem))})}},17);t.on("init",()=>{t.on("remove",le),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ee),t.on("click keyup focus SetContent",yo.throttle),t.on(b0,le),t.on(a9,xn=>{const ho=ke();pt(ho.lookupTable,xn.toolbarKey).each(Wn=>{$t([Wn],kn(xn.target!==t,xn.target)),ka.getContent(D).each(Sn.focusIn)})}),t.on("focusout",xn=>{Vm.setEditorTimeout(t,()=>{Yu(a.element).isNone()&&Yu(D.element).isNone()&&le()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&le()}),t.on("AfterProgressState",xn=>{xn.state?le():t.hasFocus()&&yo.throttle()}),t.on("dragstart",()=>{an=!0}),t.on("dragend drop",()=>{an=!1}),t.on("NodeChange",xn=>{Yu(D.element).fold(yo.throttle,G)})})},yI=t=>{mt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Mu(t,a.cmd),onSetup:Ek(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:Mu(t,"JustifyNone")})},wI=(t,s)=>{const a=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Hs();return De(l,p=>({type:"togglemenuitem",text:s.display(p),onSetup:w=>{const x=D=>{D&&(g.on(B=>B.setActive(!1)),g.set(w)),w.setActive(D)};x(ar(d,s.hash(p)));const _=s.watcher(t,p,x);return()=>{g.clear(),_()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},p9={name:"lineheight",text:"Line height",icon:"line-height",getOptions:wR,hash:t=>BP(t,["fixed","relative","empty"]).getOr(t),display:ht,watcher:(t,s,a)=>t.formatter.formatChanged("lineheight",a,!1,{value:s}).unbind,getCurrent:t=>O.from(t.queryCommandValue("LineHeight")),setCurrent:(t,s)=>t.execCommand("LineHeight",!1,s)},b9=t=>O.from(rO(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:q(a),hash:l=>dt(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var p;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:l=>{const d=pe.fromDom(l.selection.getNode());return fu(d,g=>O.some(g).filter(Vo).bind(p=>$(p,"lang").map(x=>{const _=$(p,"data-mce-lang").getOrUndefined();return{code:x,customCode:_,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=Zi();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),d.clear}})),v9=t=>{wI(t,p9),b9(t).each(s=>wI(t,s))},y9=(t,s)=>{Cz(t,s),Ez(t,s),Lz(t,s),xz(t,s),Iz(t,s)},mD=t=>u2(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent"))}),w9=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:mD(t),onAction:Mu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:Mu(t,"indent")})},C9=t=>{w9(t)},Vk=(t,s)=>a=>{a.setActive(s.get());const l=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",l),()=>t.off("PastePlainTextToggle",l)},CI=t=>{const s=S(cO(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:Vk(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:Vk(t,s)})},zk=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},S9=t=>{q1.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ek(t,s.name),onAction:zk(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:Ek(t,a),onAction:zk(t,a)})}},x9=t=>{q1.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Mu(t,s.action)})})},T9=t=>{q1.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Mu(t,s.action),onSetup:Ek(t,s.name)})})},k9=t=>{S9(t),x9(t),T9(t)},E9=t=>{q1.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Mu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:zk(t,"code")})},SI=t=>{k9(t),E9(t)},Uk=(t,s)=>u2(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),xI=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:Uk(t,"hasUndo"),onAction:Mu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:Uk(t,"hasRedo"),onAction:Mu(t,"redo")})},_9=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:Uk(t,"hasUndo"),onAction:Mu(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:Uk(t,"hasRedo"),onAction:Mu(t,"redo")})},O9=t=>{xI(t),_9(t)},fD=t=>u2(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),TI=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:fD(t),onAction:Mu(t,"mceToggleVisualAid")})},A9=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Mu(t,"mceToggleVisualAid")})},D9=t=>{A9(t),TI(t)},gD=(t,s)=>{yI(t),SI(t),y9(t,s),O9(t),JO(t),D9(t),C9(t),v9(t),CI(t)},R9=t=>Et(t)?t.split(/[ ,]/):t,kI=t=>s=>s.options.get(t),M9=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Et(a)||Ke(a,Et)?{value:R9(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},EI=kI("contextmenu_never_use_native"),N9=kI("contextmenu_avoid_overlap"),_I=t=>OI(t).length===0,OI=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Pn(a,l=>oo(s,l))},h2=(t,s)=>({type:"makeshift",x:t,y:s}),B9=(t,s,a)=>h2(t.x+s,t.y+a),AI=t=>t.type==="longpress"||t.type.indexOf("touch")===0,$9=t=>{if(AI(t)){const s=t.touches[0];return h2(s.pageX,s.pageY)}else return h2(t.pageX,t.pageY)},P9=t=>{if(AI(t)){const s=t.touches[0];return h2(s.clientX,s.clientY)}else return h2(t.clientX,t.clientY)},I9=(t,s)=>{const a=Qw.DOM.getPos(t);return B9(s,a.x,a.y)},F9=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?$9(s):I9(t.getContentAreaContainer(),P9(s)):hD(t),hD=t=>({type:"selection",root:pe.fromDom(t.selection.getNode())}),L9=t=>({type:"node",node:O.some(pe.fromDom(t.selection.getNode())),root:pe.fromDom(t.getBody())}),pD=(t,s,a)=>{switch(a){case"node":return L9(t);case"point":return F9(t,s);case"selection":return hD(t)}},H9=(t,s,a,l,d,g)=>{const p=a(),w=pD(t,s,g);X1(p,zm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:O.none()}).map(x=>{s.preventDefault(),ka.showMenuAt(d,{anchor:w},{menu:{markers:B1("normal")},data:x})})},V9={onLtr:()=>[kc,ac,$a,Tl,oi,Fr,Zf,XC,YC,qC,KC,u0],onRtl:()=>[kc,$a,ac,oi,Tl,Fr,Zf,XC,KC,u0,YC,qC]},z9=12,sb={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},DI=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=a.getRng();return c1(t.getWin(),Rm.domRange(d)).exists(p=>p.left<=l.clientX&&p.right>=l.clientX&&p.top<=l.clientY&&p.bottom>=l.clientY)}},U9=t=>{const s=t.selection.getRng(),a=()=>{Vm.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const l=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",l)}},W9=(t,s,a)=>{const l=pD(t,s,a);return{bubble:Vh(0,a==="point"?z9:0,sb),layouts:V9,overrides:{maxWidthFunction:z4(),maxHeightFunction:Rg()},...l}},Z9=(t,s,a,l,d,g,p)=>{const w=W9(t,s,g);X1(a,zm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:O.none()}).map(x=>{s.preventDefault();const _=p?ii.HighlightMenuAndItem:ii.HighlightNone;ka.showMenuWithinBounds(d,{anchor:w},{menu:{markers:B1("normal"),highlightOnOpen:_},data:x,type:"horizontal"},()=>O.some(uI(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(b0)})},j9=(t,s,a,l,d,g)=>{const p=wc(),w=p.os.isiOS(),x=p.os.isMacOS(),_=p.os.isAndroid(),D=p.deviceType.isTouch(),B=()=>!(_||w||x&&D),I=()=>{const V=a();Z9(t,s,V,l,d,g,B())};if((x||w)&&g!=="node"){const V=()=>{U9(t),I()};DI(t,s)?V():(t.once("selectionchange",V),t.once("touchend",()=>t.off("selectionchange",V)))}else I()},bD=t=>Et(t)?t==="|":t.type==="separator",vD={type:"separator"},RI=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Et(t))return t;switch(t.type){case"separator":return vD;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return Et(l)?l:De(l,RI)}};default:const a=t;return{type:"menuitem",...s(a),onAction:Xe(a.onAction)}}},MI=(t,s)=>{if(s.length===0)return t;const l=Oa(t).filter(d=>!bD(d)).fold(()=>[],d=>[vD]);return t.concat(l).concat(s).concat([vD])},G9=(t,s,a)=>{const l=Bn(s,(d,g)=>pt(t,g.toLowerCase()).map(p=>{const w=p.update(a);if(Et(w))return MI(d,w.split(" "));if(w.length>0){const x=De(w,RI);return MI(d,x)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&bD(l[l.length-1])&&l.pop(),l},q9=(t,s)=>s.ctrlKey&&!EI(t),K9=t=>t.type==="longpress"||oo(t,"touches"),NI=(t,s)=>!K9(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),BI=(t,s)=>NI(t,s)?t.selection.getStart(!0):s.target,$I=(t,s)=>{const a=N9(t),l=NI(t,s)?"selection":"point";if(Ie(a)){const d=BI(t,s);return OC(pe.fromDom(d),a)?"node":l}else return l},PI=(t,s,a)=>{const d=wc().deviceType.isTouch,g=Kc(ka.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:yt([Jn("dismissContextMenu",[nt(ff(),(x,_)=>{So.close(x),t.focus()})])])})),p=()=>ka.hide(g),w=x=>{if(EI(t)&&x.preventDefault(),q9(t,x)||_I(t))return;const _=$I(t,x),D=()=>{const I=BI(t,x),V=t.ui.registry.getAll(),X=OI(t);return G9(V.contextMenus,X,I)};(d()?j9:H9)(t,x,D,a,g,_)};t.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(x,p),t.on("longpress contextmenu",w)})},yD=Z.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Cp=t=>s=>s.translate(-t.left,-t.top),Wk=t=>s=>s.translate(t.left,t.top),ah=t=>(s,a)=>Bn(t,(l,d)=>d(l),vo(s,a)),v0=(t,s,a)=>t.fold(ah([Wk(a),Cp(s)]),ah([Cp(s)]),ah([])),y0=(t,s,a)=>t.fold(ah([Wk(a)]),ah([]),ah([Wk(s)])),II=(t,s,a)=>t.fold(ah([]),ah([Cp(a)]),ah([Wk(s),Cp(a)])),Y9=(t,s,a,l,d,g)=>{const p=y0(t,d,g),w=y0(s,d,g);return Math.abs(p.left-w.left)<=a&&Math.abs(p.top-w.top)<=l},X9=(t,s,a,l,d,g)=>{const p=y0(t,d,g),w=y0(s,d,g),x=Math.abs(p.left-w.left),_=Math.abs(p.top-w.top);return vo(x,_)},FI=(t,s,a)=>{const l=t.fold((d,g)=>({position:O.some("absolute"),left:O.some(d+"px"),top:O.some(g+"px")}),(d,g)=>({position:O.some("absolute"),left:O.some(d-a.left+"px"),top:O.some(g-a.top+"px")}),(d,g)=>({position:O.some("fixed"),left:O.some(d+"px"),top:O.some(g+"px")}));return{right:O.none(),bottom:O.none(),...l}},J9=(t,s,a)=>t.fold((l,d)=>Zk(l+s,d+a),(l,d)=>Sp(l+s,d+a),(l,d)=>rb(l+s,d+a)),wD=(t,s,a,l)=>{const d=(g,p)=>(w,x)=>{const _=g(s,a,l);return p(w.getOr(_.left),x.getOr(_.top))};return t.fold(d(II,Zk),d(y0,Sp),d(v0,rb))},Zk=yD.offset,Sp=yD.absolute,rb=yD.fixed,LI=(t,s)=>{const a=Ur(t,s);return dt(a)?NaN:parseInt(a,10)},Q9=(t,s)=>{const a=t.element,l=LI(a,s.leftAttr),d=LI(a,s.topAttr);return isNaN(l)||isNaN(d)?O.none():O.some(vo(l,d))},eU=(t,s,a)=>{const l=t.element;Hn(l,s.leftAttr,a.left+"px"),Hn(l,s.topAttr,a.top+"px")},tU=(t,s)=>{const a=t.element;ne(a,s.leftAttr),ne(a,s.topAttr)},nU=(t,s,a,l)=>Q9(t,s).fold(()=>a,d=>rb(d.left+l.left,d.top+l.top)),oU=(t,s,a,l,d,g)=>{const p=nU(t,s,a,l),w=s.mustSnap?rU(t,s,p,d,g):aU(t,s,p,d,g),x=v0(p,d,g);return eU(t,s,x),w.fold(()=>({coord:rb(x.left,x.top),extra:O.none()}),_=>({coord:_.output,extra:_.extra}))},sU=(t,s)=>{tU(t,s)},p2=(t,s,a,l)=>us(t,d=>{const g=d.sensor;return Y9(s,g,d.range.left,d.range.top,a,l)?O.some({output:wD(d.output,s,a,l),extra:d.extra}):O.none()}),rU=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return p2(g,a,l,d).orThunk(()=>Bn(g,(x,_)=>{const D=_.sensor,B=X9(a,D,_.range.left,_.range.top,l,d);return x.deltas.fold(()=>({deltas:O.some(B),snap:O.some(_)}),I=>{const V=(B.left+B.top)/2,X=(I.left+I.top)/2;return V<=X?{deltas:O.some(B),snap:O.some(_)}:x})},{deltas:O.none(),snap:O.none()}).snap.map(x=>({output:wD(x.output,a,l,d),extra:x.extra})))},aU=(t,s,a,l,d)=>{const g=s.getSnapPoints(t);return p2(g,a,l,d)},cU=(t,s,a)=>({coord:wD(t.output,t.output,s,a),extra:t.extra});var lU=Object.freeze({__proto__:null,snapTo:(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=wa(t.element),p=Bc(g),w=T$(d),x=cU(l,p,w),_=FI(x.coord,p,w);Wr(d,_)}}});const CD="data-initial-z-index",HI=t=>{ca(t.element).filter(Vo).each(s=>{$(s,CD).fold(()=>fo(s,"z-index"),a=>Zt(s,"z-index",a)),ne(s,CD)})},iU=t=>{ca(t.element).filter(Vo).each(s=>{Js(s,"z-index").each(a=>{Hn(s,CD,a)}),Zt(s,"z-index",et(t.element,"z-index"))})},VI=(t,s)=>{t.getSystem().addToGui(s),iU(s)},uU=t=>{HI(t),t.getSystem().removeFromGui(t)},zI=(t,s,a)=>t.getSystem().build(Yd.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var dU=Ic("snaps",[Qe("getSnapPoints"),Se("onSensor"),Qe("leftAttr"),Qe("topAttr"),Te("lazyViewport",me),Te("mustSnap",!1)]);const b2=[Te("useFixed",zn),Qe("blockerClass"),Te("getTarget",ht),Te("onDrag",G),Te("repositionTarget",!0),Te("onDrop",G),Ta("getBounds",me),dU],UI=t=>va(Js(t,"left"),Js(t,"top"),Js(t,"position"),(s,a,l)=>(l==="fixed"?rb:Zk)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=vs(t);return Sp(s.left,s.top)}),mU=(t,s,a,l,d)=>{const g=d.bounds,p=y0(s,a,l),w=ni(p.left,g.x,g.x+g.width-d.width),x=ni(p.top,g.y,g.y+g.height-d.height),_=Sp(w,x);return s.fold(()=>{const D=II(_,a,l);return Zk(D.left,D.top)},q(_),()=>{const D=v0(_,a,l);return rb(D.left,D.top)})},fU=(t,s,a,l,d,g,p)=>{const w=s.fold(()=>{const x=J9(a,g.left,g.top),_=v0(x,l,d);return rb(_.left,_.top)},x=>{const _=oU(t,x,a,g,l,d);return _.extra.each(D=>{x.onSensor(t,D)}),_.coord});return mU(t,w,l,d,p)},gU=(t,s,a,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=wa(t.element),p=Bc(g),w=T$(d),x=UI(d),_=fU(t,s.snaps,x,p,w,l,a),D=FI(_,p,w);Wr(d,D)}s.onDrag(t,d,l)},WI=(t,s)=>({bounds:t.getBounds(),height:Qt(s.element),width:Qs(s.element)}),SD=(t,s,a,l,d)=>{const g=a.update(l,d),p=a.getStartData().getOrThunk(()=>WI(s,t));g.each(w=>{gU(t,s,p,w)})},ZI=(t,s,a,l)=>{s.each(uU),a.snaps.each(g=>{sU(t,g)});const d=a.getTarget(t.element);l.reset(),a.onDrop(t,d)},xD=t=>(s,a)=>{const l=d=>{a.setStartData(WI(s,d))};return Gs([nt(z0(),d=>{a.getStartData().each(()=>l(d))}),...t(s,a,l)])},hU=t=>Gs([nt(Qr(),t.forceDrop),nt(zu(),t.drop),nt(Cl(),(s,a)=>{t.move(a.event)}),nt(mg(),t.delayDrop)]);var pU=Object.freeze({__proto__:null,getData:t=>O.from(vo(t.x,t.y)),getDelta:(t,s)=>vo(s.left-t.left,s.top-t.top)});const jI=(t,s,a)=>[nt(Qr(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>ZI(l,O.some(_),t,s),w=rN(p,200),x={drop:p,delayDrop:w.schedule,forceDrop:p,move:B=>{w.cancel(),SD(l,t,s,pU,B)}},_=zI(l,t.blockerClass,hU(x));(()=>{a(l),VI(l,_)})()})],bU=[...b2,qs("dragger",{handlers:xD(jI)})],vU=t=>Gs([nt(gu(),t.forceDrop),nt(Bs(),t.drop),nt(Gc(),t.drop),nt(Io(),(s,a)=>{t.move(a.event)})]),yU=t=>{const s=t[0];return O.some(vo(s.clientX,s.clientY))};var GI=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?yU(a):O.none()},getDelta:(t,s)=>vo(s.left-t.left,s.top-t.top)});const qI=(t,s,a)=>{const l=Hs(),d=g=>{ZI(g,l.get(),t,s),l.clear()};return[nt(gu(),(g,p)=>{p.stop();const w=()=>d(g),x={drop:w,delayDrop:G,forceDrop:w,move:B=>{SD(g,t,s,GI,B)}},_=zI(g,t.blockerClass,vU(x));l.set(_),(()=>{a(g),VI(g,_)})()}),nt(Io(),(g,p)=>{p.stop(),SD(g,t,s,GI,p.event)}),nt(Bs(),(g,p)=>{p.stop(),d(g)}),nt(Gc(),d)]},wU=[...b2,qs("dragger",{handlers:xD(qI)})],CU=(t,s,a)=>[...jI(t,s,a),...qI(t,s,a)],KI=[...b2,qs("dragger",{handlers:xD(CU)})];var TD=Object.freeze({__proto__:null,mouse:bU,touch:wU,mouseOrTouch:KI}),xU=Object.freeze({__proto__:null,init:()=>{let t=O.none(),s=O.none();const a=()=>{t=O.none(),s=O.none()},l=(x,_)=>{const D=t.map(B=>x.getDelta(B,_));return t=O.some(_),D},d=(x,_)=>x.getData(_).bind(D=>l(x,D)),g=x=>{s=O.some(x)},p=()=>s,w=q({});return zl({readState:w,reset:a,update:d,getStartData:p,setStartData:g})}});const ab=bS({branchKey:"mode",branches:TD,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:O.from(t.extra)})},state:xU,apis:lU}),ED=40,jk=ED/2,YI=(t,s,a,l,d,g)=>t.fold(()=>ab.snap({sensor:Sp(a-jk,l-jk),range:vo(d,g),output:Sp(O.some(a),O.some(l)),extra:{td:s}}),p=>{const w=a-jk,x=l-jk,_=ED,D=ED,B=p.element.dom.getBoundingClientRect();return ab.snap({sensor:Sp(w,x),range:vo(_,D),output:Sp(O.some(a-B.width/2),O.some(l-B.height/2)),extra:{td:s}})}),xp=(t,s,a)=>{const l=(d,g)=>d.exists(p=>Yo(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;l(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},_D=t=>xo(Xc.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:yt([ab.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),NC.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),TU=(t,s)=>{const a=S([]),l=S([]),d=S(!1),g=Hs(),p=Hs(),w=$t=>{const an=M($t);return YI(V.getOpt(s),$t,an.x,an.y,an.width,an.height)},x=()=>De(a.get(),$t=>w($t)),_=$t=>{const an=M($t);return YI(X.getOpt(s),$t,an.right,an.bottom,an.width,an.height)},D=()=>De(l.get(),$t=>_($t)),B=xp(x,g,$t=>{p.get().each(an=>{t.dispatch("TableSelectorChange",{start:$t,finish:an})})}),I=xp(D,p,$t=>{g.get().each(an=>{t.dispatch("TableSelectorChange",{start:an,finish:$t})})}),V=_D(B),X=_D(I),le=Kc(V.asSpec()),Ee=Kc(X.asSpec()),ye=($t,an,yo,xn)=>{const ho=an.dom.getBoundingClientRect();fo($t.element,"display");const Wn=nc(pe.fromDom(t.getBody())).dom.innerHeight,mo=yo(ho),$n=xn(ho,Wn);(mo||$n)&&Zt($t.element,"display","none")},ke=($t,an,yo,xn)=>{const ho=yo(an);ab.snapTo($t,ho),ye($t,an,$n=>$n[xn]<0,($n,fs)=>$n[xn]>fs)},Ne=$t=>ke(le,$t,w,"top"),Le=()=>g.get().each(Ne),kt=$t=>ke(Ee,$t,_,"bottom"),st=()=>p.get().each(kt);wc().deviceType.isTouch()&&(t.on("TableSelectionChange",$t=>{d.get()||(Hd(s,le),Hd(s,Ee),d.set(!0)),g.set($t.start),p.set($t.finish),$t.otherCells.each(an=>{a.set(an.upOrLeftCells),l.set(an.downOrRightCells),Ne($t.start),kt($t.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{Le(),st()}),t.on("TableSelectionClear",()=>{d.get()&&(Vd(le),Vd(Ee),d.set(!1)),g.clear(),p.clear()}))};var kU=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const EU=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",_U=(t,s,a)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(_,D,B)=>Xc.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":B,"aria-level":B+1}},components:[fr(_)],action:I=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:yt([Kd.button(a.isDisabled),dc()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[fr(` ${d} `)]}),w=_=>Bn(_,(D,B,I)=>{const V=g(B.name,B.element,I);return I===0?D.concat([V]):D.concat([p(),V])},[]),x=_=>{const D=[];let B=_.length;for(;B-- >0;){const I=_[B];if(I.nodeType===1&&!EU(I)){const V=pT(t,I);if(V.isDefaultPrevented()||D.push({name:V.name,element:I}),V.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:yt([Sn.config({mode:"flow",selector:"div[role=button]"}),Vn.config({disabled:a.isDisabled}),dc(),Gr.config({}),Kn.config({}),Jn("elementPathEvents",[Br((_,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Sn.focusIn(_)),t.on("NodeChange",B=>{const I=x(B.parents),V=I.length>0?w(I):[];Kn.set(_,V)})})])]),components:[]}};var cb;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(cb||(cb={}));const OU=(t,s,a,l,d)=>{const g={height:Mk(l+s.top,oC(t),Hx(t))};return a===cb.Both&&(g.width=Mk(d+s.left,Fx(t),Lx(t))),g},XI=(t,s,a)=>{const l=pe.fromDom(t.getContainer()),d=OU(t,s,a,ze(l),ia(l));Je(d,(g,p)=>{pn(g)&&Zt(l,p,sD(g))}),EL(t)},AU=t=>{const s=pR(t);return s===!1?cb.None:s==="both"?cb.Both:cb.Vertical},C0=(t,s,a,l)=>{const g=vo(a*20,l*20);return XI(t,g,s),O.some(!0)},v2=(t,s)=>{const a=AU(t);return a===cb.None?O.none():O.some(ed("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize")},behaviours:[ab.config({mode:"mouse",repositionTarget:!1,onDrag:(l,d,g)=>XI(t,g,a),blockerClass:"tox-blocker"}),Sn.config({mode:"special",onLeft:()=>C0(t,a,-1,0),onRight:()=>C0(t,a,1,0),onUp:()=>C0(t,a,0,-1),onDown:()=>C0(t,a,0,1)}),Gr.config({}),Rn.config({})]},s.icons))},OD=(t,s)=>{const a=(l,d,g)=>Kn.set(l,[fr(s.translate(["{0} "+g,d[g]]))]);return Xc.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:yt([Kd.button(s.isDisabled),dc(),Gr.config({}),Kn.config({}),Ft.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Jn("wordcount-events",[Wu(l=>{const d=Ft.getValue(l),g=d.mode==="words"?"characters":"words";Ft.setValue(l,{mode:g,count:d.count}),a(l,d.count,g)}),Br(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=Ft.getValue(l);Ft.setValue(l,{mode:g,count:d.wordCount}),a(l,d.wordCount,g)})})])]),eventOrder:{[$s()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},Gk=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":_u.translate(["Powered by {0}","Tiny"])},innerHtml:kU.trim()},behaviours:yt([Rn.config({})])}]}),l=()=>{const g=[];return gR(t)&&g.push(_U(t,{},s)),t.hasPlugin("wordcount")&&g.push(OD(t,s)),hR(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=l(),p=v2(t,s);return g.concat(p.toArray())})()}},Tp=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),qk=(t,s)=>{const a=t.inline,l=a?s9:Jz,d=Wv(t)?cV:x$,g=r9(),p=Hs(),w=Hs(),x=Hs(),I=wc().deviceType.isTouch()?["tox-platform-touch"]:[],V=iO(t),X=Vv(t),le=xo({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ee=()=>g.mainUi.get().map(Vt=>Vt.outerContainer).bind(or.getHeader),ye=()=>Ct.fromOption(g.dialogUi.get().map(Vt=>Vt.sink),"UI has not been rendered"),ke=()=>Ct.fromOption(g.popupUi.get().map(Vt=>Vt.sink),"(popup) UI has not been rendered"),Ne=g.lazyGetInOuterOrDie("anchor bar",le.getOpt),Le=g.lazyGetInOuterOrDie("toolbar",or.getToolbar),kt=g.lazyGetInOuterOrDie("throbber",or.getThrobber),st=$H({popup:ke,dialog:ye},t,Ne),$t=()=>{const Vt={attributes:{[ov]:V?Id.BottomToTop:Id.TopToBottom}},Nn=or.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:st.popup,onEscape:()=>{t.focus()}}),so=or.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:st.popup.shared.getSink,providers:st.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:nE=>{_L(t,nE)},type:X,lazyToolbar:Le,lazyHeader:()=>Ee().getOrDie("Could not find header element"),...Vt}),No=or.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:st.popup.shared.providers,onEscape:()=>{t.focus()},type:X}),_a=Uv(t),rs=zv(t),Gl=Bf(t),Kr=vR(t),ud=an(),cm=_a||rs||Gl,ih=()=>_a?[No]:rs?[so]:[],k2=Kr?[ud,Nn]:[Nn];return or.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(cm?[]:["tox-editor-header--empty"]),...Vt},components:jt([Gl?k2:[],ih(),N1(t)?[]:[le.asSpec()]]),sticky:Wv(t),editor:t,sharedBackstage:st.popup.shared})},an=()=>or.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),yo=()=>{const Vt=or.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Nn=or.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Vt,Nn]}},xn=()=>{const Vt=aC(t),Nn=Yo(Zs(),Vt)&&et(Vt,"display")==="grid",so={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(I),attributes:{..._u.isRtl()?{dir:"rtl"}:{}}},behaviours:yt([Lr.config({useFixed:()=>d.isDocked(Ee)})])},No={dom:{styles:{width:document.body.clientWidth+"px"}},events:Gs([nt(vm(),Gl=>{Zt(Gl.element,"width",document.body.clientWidth+"px")})])},_a=Kc(Ns(so,Nn?No:{})),rs=uA(_a);return w.set(rs),{sink:_a,mothership:rs}},ho=()=>{const Vt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(I),attributes:{..._u.isRtl()?{dir:"rtl"}:{}}},behaviours:yt([Lr.config({useFixed:()=>d.isDocked(Ee),getBounds:()=>s.getPopupSinkBounds()})])},Nn=Kc(Vt),so=uA(Nn);return x.set(so),{sink:Nn,mothership:so}},Wn=()=>{const Vt=$t(),Nn=yo(),so=or.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:st.popup}),No=or.parts.viewWrapper({backstage:st.popup}),_a=fR(t)&&!a?O.some(Gk(t,st.popup.shared.providers)):O.none(),rs=jt([V?[]:[Vt],a?[]:[Nn],V?[Vt]:[]]),Gl=or.parts.editorContainer({components:jt([rs,a?[]:_a.toArray()])}),Kr=dO(t),ud={role:"application",..._u.isRtl()?{dir:"rtl"}:{},...Kr?{"aria-hidden":"true"}:{}},cm=Kc(or.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(V?["tox-tinymce--toolbar-bottom"]:[]).concat(I),styles:{visibility:"hidden",...Kr?{opacity:"0",border:"0"}:{}},attributes:ud},components:[Gl,...a?[]:[No],so],behaviours:yt([dc(),Vn.config({disableClass:"tox-tinymce--disabled"}),Sn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),ih=uA(cm);return p.set(ih),{mothership:ih,outerContainer:cm}},mo=Vt=>{const Nn=sD(e9(t)),so=sD(t9(t));return t.inline||(dd("div","width",so)&&Zt(Vt.element,"width",so),dd("div","height",Nn)?Zt(Vt.element,"height",Nn):Zt(Vt.element,"height","400px")),Nn},$n=Vt=>{t.addShortcut("alt+F9","focus menubar",()=>{or.focusMenubar(Vt)}),t.addShortcut("alt+F10","focus toolbar",()=>{or.focusToolbar(Vt)}),t.addCommand("ToggleToolbarDrawer",(Nn,so)=>{so!=null&&so.skipFocus?or.toggleToolbarDrawerWithoutFocusing(Vt):or.toggleToolbarDrawer(Vt)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>or.isToolbarDrawerToggled(Vt))},fs=Vt=>{const{mainUi:Nn,popupUi:so,uiMotherships:No}=Vt;Gt(Vx(t),(fb,FD)=>{t.ui.registry.addGroupToolbarButton(FD,fb)});const{buttons:_a,menuItems:rs,contextToolbars:Gl,sidebars:Kr,views:ud}=t.ui.registry.getAll(),cm=lO(t),ih={menuItems:rs,menus:Zv(t),menubar:cR(t),toolbar:cm.getOrThunk(()=>Wx(t)),allowToolbarGroups:X===Ou.floating,buttons:_a,sidebar:Kr,views:ud};$n(Nn.outerContainer),PH(t,Nn.mothership,No),d.setup(t,st.popup.shared,Ee),gD(t,st.popup),PI(t,st.popup.shared.getSink,st.popup),gV(t),OV(t,kt,st.popup.shared),h9(t,Gl,so.sink,{backstage:st.popup}),TU(t,so.sink);const k2=t.getElement(),nE=mo(Nn.outerContainer),E0={targetNode:k2,height:nE};return l.render(t,Vt,ih,st.popup,E0)},vt=Vt=>(x.set(Vt.mothership),Vt),rn=()=>{const Vt=Wn(),Nn=xn(),so=cp(t)?ho():vt(Nn);g.dialogUi.set(Nn),g.popupUi.set(so),g.mainUi.set(Vt);const No={popupUi:so,dialogUi:Nn,mainUi:Vt,uiMotherships:g.getUiMotherships()};return fs(No)};return{popups:{backstage:st.popup,getMothership:()=>Tp("popups",x)},dialogs:{backstage:st.dialog,getMothership:()=>Tp("dialogs",w)},renderUI:rn}},DU=(t,s)=>{const a=O.from(Ur(t,"id")).fold(()=>{const l=en("dialog-describe");return Hn(s,"id",l),l},ht);Hn(t,"aria-describedby",a)},JI=(t,s)=>{const a=$(t,"id").fold(()=>{const l=en("dialog-label");return Hn(s,"id",l),l},ht);Hn(t,"aria-labelledby",a)},QI=q([Qe("lazySink"),ss("dragBlockClass"),Ta("getBounds",me),Te("useTabstopAt",Wt),Te("firstTabstop",0),Te("eventOrder",{}),uc("modalBehaviours",[Sn]),gr("onExecute"),gy("onEscape")]),Kk={sketch:ht},RU=q([Gi({name:"draghandle",overrides:(t,s)=>({behaviours:yt([ab.config({mode:"mouse",getTarget:a=>bu(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),ja({schema:[Qe("dom")],name:"title"}),ja({factory:Kk,schema:[Qe("dom")],name:"close"}),ja({factory:Kk,schema:[Qe("dom")],name:"body"}),Gi({factory:Kk,schema:[Qe("dom")],name:"footer"}),Tu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Te("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Te("components",[])],name:"blocker"})]),MU=(t,s,a,l)=>{const d=Hs(),g=V=>{d.set(V);const X=t.lazySink(V).getOrDie(),le=l.blocker(),Ee=X.getSystem().build({...le,components:le.components.concat([Ul(V)]),behaviours:yt([Rn.config({}),Jn("dialog-blocker-events",[hu(mf(),()=>{Sn.focusIn(V)})])])});Hd(X,Ee),Sn.focusIn(V)},p=V=>{d.clear(),ca(V.element).each(X=>{V.getSystem().getByDom(X).each(le=>{Vd(le)})})},w=V=>Zd(V,t,"body"),x=V=>Zd(V,t,"footer"),_=(V,X)=>{bp.block(V,X)},D=V=>{bp.unblock(V)},B=en("modal-events"),I={...t.eventOrder,[Rd()]:[B].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:w,getFooter:x,setIdle:D,setBusy:_},eventOrder:I,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:cr(t.modalBehaviours,[Kn.config({}),Sn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),bp.config({getRoot:d.get}),Jn(B,[Br(V=>{JI(V.element,Zd(V,t,"title").element),DU(V.element,Zd(V,t,"body").element)})])])}},mc=ta({name:"ModalDialog",configFields:QI(),partFields:RU(),factory:MU,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),e5=Cn([Ea,xO].concat(up)),t5=cf,y2=[OO("button"),Gd,Il("align","end",["start","end"]),mC,qd,Ii("buttonType",["primary","secondary"])],n5=[...y2,Jg],AD=[Pi("type",["submit","cancel","custom"]),...n5],NU=[Pi("type",["menu"]),Qg,tT,Gd,yl("items",e5),...y2],o5=[...y2,Pi("type",["togglebutton"]),Ir("tooltip"),eT,Qg,za("active",!1)],BU=Xr("type",{submit:AD,cancel:AD,custom:AD,menu:NU,togglebutton:o5}),$U=[Ea,Jg,Pi("level",["info","warn","error","success"]),eT,Te("url","")],PU=Cn($U),DD=t=>[Ea,t],RD=[Ea,Jg,qd,OO("button"),Gd,VR,Ii("buttonType",["primary","secondary","toolbar"]),mC],IU=Cn(RD),lb=[Ea,xO],Km=lb.concat([EO]),FU=lb.concat([lp,qd]),s5=Cn(FU),LU=cf,HU=Km.concat([_O("auto")]),ib=Cn(HU),r5=Ch([jv,Jg,eT]),VU=Km.concat([wl("storageKey","default")]),Yk=Cn(VU),S0=Nr,a5=Cn(Km),Xk=Nr,Ai=lb.concat([wl("tag","textarea"),Ir("scriptId"),Ir("scriptUrl"),P0("settings",void 0)]),Jk=lb.concat([wl("tag","textarea"),vi("init")]),c5=kd(t=>ys("customeditor.old",Sc(Jk),t).orThunk(()=>ys("customeditor.new",Sc(Ai),t))),l5=Nr,zU=Cn(Km),kp=lf(),yZ=t=>[Ea,xh("columns"),t],UU=[Ea,Ir("html"),Il("presets","presentation",["presentation","document"])],i5=Cn(UU),x0=Km.concat([za("sandboxed",!0),za("transparent",!0)]),Qk=Cn(x0),u5=Nr,WU=Cn(lb.concat([Pc("height")])),ZU=Cn([Ir("url"),ug("zoom"),ug("cachedWidth"),ug("cachedHeight")]),jU=Km.concat([Pc("inputMode"),Pc("placeholder"),za("maximized",!1),qd]),GU=Cn(jU),T0=Nr,wZ=t=>[Ea,lp,t],qU=[Jg,jv],KU=[Jg,yl("items",Ed("items",()=>YU))],YU=ag([Cn(qU),Cn(KU)]),XU=Km.concat([yl("items",YU),qd]),JU=Cn(XU),w2=Nr,QU=Km.concat([Tb("items",[Jg,jv]),mu("size",1),qd]),eW=Cn(QU),d5=Nr,tW=Km.concat([za("constrain",!0),qd]),CZ=Cn(tW),e=Cn([Ir("width"),Ir("height")]),n=lb.concat([lp,mu("min",0),mu("max",0)]),o=Cn(n),r=Sh,c=[Ea,yl("header",Nr),yl("cells",Ht(Nr))],u=Cn(c),f=Km.concat([Pc("placeholder"),za("maximized",!1),qd]),b=Cn(f),y=Nr,k=[Pi("type",["directory","leaf"]),LR,Ir("id"),du("menu",gk)],R=Cn(k),L=k.concat([yl("children",Ed("children",()=>Pl("type",{directory:Q,leaf:R})))]),Q=Cn(L),te=Pl("type",{directory:Q,leaf:R}),j=[Ea,yl("items",te),Tc("onLeafAction")],ee=Cn(j),ve=Km.concat([Il("filetype","file",["image","media","file"]),qd]),he=Cn(ve),we=Cn([jv,I1]),_e=t=>Jr("items","items",ua(),Ht(kd(s=>ys(`Checking item of ${t}`,qe,s).fold(a=>Ct.error(uf(a)),a=>Ct.value(a))))),qe=wh(()=>Pl("type",{alertbanner:PU,bar:Cn(DD(_e("bar"))),button:IU,checkbox:s5,colorinput:Yk,colorpicker:a5,dropzone:zU,grid:Cn(yZ(_e("grid"))),iframe:Qk,input:GU,listbox:JU,selectbox:eW,sizeinput:CZ,slider:o,textarea:b,urlinput:he,customeditor:c5,htmlpanel:i5,imagepreview:WU,collection:ib,label:Cn(wZ(_e("label"))),table:u,tree:ee,panel:St})),At=[Ea,Te("classes",[]),yl("items",qe)],St=Cn(At),$e=[OO("tab"),LR,yl("items",qe)],Be=[Ea,Tb("tabs",$e)],Ut=Cn(Be),gn=n5,An=BU,ao=Cn([Ir("title"),ei("body",Pl("type",{panel:St,tabpanel:Ut})),wl("size","normal"),yl("buttons",An),Te("initialData",{}),Ta("onAction",G),Ta("onChange",G),Ta("onSubmit",G),Ta("onClose",G),Ta("onCancel",G),Ta("onTabChange",G)]),Mo=t=>ys("dialog",ao,t),ps=Cn([Pi("type",["cancel","custom"]),...gn]),Us=Cn([Ir("title"),Ir("url"),ug("height"),ug("width"),kb("buttons",ps),Ta("onAction",G),Ta("onCancel",G),Ta("onClose",G),Ta("onMessage",G)]),ra=t=>ys("dialog",Us,t),Lc=t=>Mt(t)?[t].concat(Ve(Or(t),Lc)):hn(t)?Ve(t,Lc):[],fc=t=>Et(t.type)&&Et(t.name),wt={checkbox:LU,colorinput:S0,colorpicker:Xk,dropzone:kp,input:T0,iframe:u5,imagepreview:ZU,selectbox:d5,sizeinput:e,slider:r,listbox:w2,size:e,textarea:y,urlinput:we,customeditor:l5,collection:r5,togglemenuitem:t5},un=t=>O.from(wt[t.type]),jo=t=>Pn(Lc(t),fc),It=t=>{const s=jo(t),a=Ve(s,l=>un(l).fold(()=>[],d=>[ei(l.name,d)]));return Cn(a)},En=t=>{var s;const a=cs(Mo(t)),l=It(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:l,initialData:d}},On={open:(t,s)=>{const a=En(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=cs(ra(s));return t(a)},redial:t=>En(t)};var To=Object.freeze({__proto__:null,events:(t,s)=>{const a=(l,d)=>{t.updateState.each(g=>{const p=g(l,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?S3:Mx)(l,p)})};return Gs([nt(gg(),(l,d)=>{const g=d;if(!g.universal){const p=t.channel;po(g.channels,p)&&a(l,g.data)}}),Br((l,d)=>{t.initialData.each(g=>{a(l,g)})})])}}),Oc=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),hr=[Qe("channel"),ss("renderComponents"),ss("updateState"),ss("initialData"),za("reuseDom",!0)],Qo=Object.freeze({__proto__:null,init:()=>{const t=S(O.none()),s=()=>t.set(O.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Ds=cc({fields:hr,name:"reflecting",active:To,apis:Oc,state:Qo}),Ws=t=>{const s=[],a={};return Je(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Ct.error(s):Ct.value(a)},qr=(t,s,a)=>{const l=xo(a0.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:De(t.items,g=>l4(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:yt([Sn.config({mode:"acyclic",useTabstopAt:Pe(HC)}),em.memento(l),sa.memento(l,{postprocess:d=>Ws(d).fold(g=>(console.error(g),{}),ht)})])}},ga=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Nx(t.action),behaviours:cr(t.tabButtonBehaviours,[Rn.config({}),Sn.config({mode:"execution",useSpace:!0,useEnter:!0}),Ft.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),kr=ma({name:"TabButton",configFields:[Te("uid",void 0),Qe("value"),Jr("dom","dom",Td(()=>({attributes:{role:"tab",id:en("aria"),"aria-selected":"false"}})),$l()),ss("action"),Te("domModification",{}),uc("tabButtonBehaviours",[Rn,Sn,Ft]),Qe("view")],factory:ga}),Fa=q([Qe("tabs"),Qe("dom"),Te("clickToDismiss",!1),uc("tabbarBehaviours",[Jo,Sn]),Vi(["tabClass","selectedClass"])]),rd=C1({factory:kr,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{Jo.dehighlight(l,d),wn(l,U0(),{tabbar:l,button:d})},a=(l,d)=>{Jo.highlight(l,d),wn(l,N2(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=Jo.isHighlighted(d,l);(()=>g&&t.clickToDismiss?s:g?G:a)()(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),dl=q([rd]),Ym=(t,s,a,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:cr(t.tabbarBehaviours,[Jo.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Hn(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Hn(g.element,"aria-selected","false")}}),Sn.config({mode:"flow",getInitial:d=>Jo.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),tu=ta({name:"Tabbar",configFields:Fa(),partFields:dl(),factory:Ym}),ub=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:cr(t.tabviewBehaviours,[Kn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),db=ma({name:"Tabview",configFields:[uc("tabviewBehaviours",[Kn])],factory:ub}),Xm=q([Te("selectFirst",!0),Se("onChangeTab"),Se("onDismissTab"),Te("tabs",[]),uc("tabSectionBehaviours",[])]),rm=ja({factory:tu,schema:[Qe("dom"),Hu("markers",[Qe("tabClass"),Qe("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),qa=ja({factory:db,name:"tabview"}),ad=q([rm,qa]),Jm=(t,s,a,l)=>{const d=p=>{const w=Ft.getValue(p);Vs(p,t,"tabview").each(x=>{qt(t.tabs,D=>D.value===w).each(D=>{const B=D.view();$(p.element,"id").each(I=>{Hn(x.element,"aria-labelledby",I)}),Kn.set(x,B),t.onChangeTab(x,p,B)})})},g=(p,w)=>{Vs(p,t,"tabbar").each(x=>{w(x).each(Cm)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:xv(t.tabSectionBehaviours),events:Gs(jt([t.selectFirst?[Br((p,w)=>{g(p,Jo.getFirst)})]:[],[nt(N2(),(p,w)=>{const x=w.event.button;d(x)}),nt(U0(),(p,w)=>{const x=w.event.button;t.onDismissTab(p,x)})]])),apis:{getViewItems:p=>Vs(p,t,"tabview").map(w=>Kn.contents(w)).getOr([]),showTab:(p,w)=>{g(p,_=>{const D=Jo.getCandidates(_);return qt(D,I=>Ft.getValue(I)===w).filter(I=>!Jo.isHighlighted(_,I))})}}}},jl=ta({name:"TabSection",configFields:Xm(),partFields:ad(),factory:Jm,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),cd=(t,s,a)=>De(t,(l,d)=>{Kn.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return Kn.set(a,[]),g.height}),Kf=t=>ir(Ya(t,(s,a)=>s>a?-1:s<a?1:0)),Al=(t,s,a)=>{const l=Yl(t).dom,d=bu(t,".tox-dialog-wrap").getOr(t),g=et(d,"position")==="fixed";let p;g?p=Math.max(l.clientHeight,window.innerHeight):p=Math.max(l.offsetHeight,l.scrollHeight);const w=ze(s),_=s.dom.offsetLeft>=a.dom.offsetLeft+ia(a)?Math.max(ze(a),w):w,D=parseInt(et(t,"margin-top"),10)||0,B=parseInt(et(t,"margin-bottom"),10)||0,V=ze(t)+D+B-_;return p-V},ch=(t,s)=>{ir(t).each(a=>jl.showTab(s,a.value))},Qm=(t,s)=>{Zt(t,"height",s+"px"),Zt(t,"flex-basis",s+"px")},nu=(t,s,a)=>{bu(t,'[role="dialog"]').each(l=>{Tr(l,'[role="tablist"]').each(d=>{a.get().map(g=>(Zt(s,"height","0"),Zt(s,"flex-basis","0"),Math.min(g,Al(l,s,d)))).each(g=>{Qm(s,g)})})})},Yf=t=>Tr(t,'[role="tabpanel"]'),C2=t=>{const s=Hs();return{extraEvents:[Br(d=>{const g=d.element;Yf(g).each(p=>{Zt(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(w=>{const x=cd(t,p,w);Kf(x).fold(s.clear,s.set)}),nu(g,p,s),fo(p,"visibility"),ch(t,d),requestAnimationFrame(()=>{nu(g,p,s)})})}),nt(vm(),d=>{const g=d.element;Yf(g).each(p=>{nu(g,p,s)})}),nt(vN,(d,g)=>{const p=d.element;Yf(p).each(w=>{const x=$d(Fe(w));Zt(w,"visibility","hidden");const _=Js(w,"height").map(I=>parseInt(I,10));fo(w,"height"),fo(w,"flex-basis");const D=w.dom.getBoundingClientRect().height;_.forall(I=>D>I)?(s.set(D),nu(p,w,s)):_.each(I=>{Qm(w,I)}),fo(w,"visibility"),x.each(wu)})})],selectFirst:!1}},eE="send-data-to-section",S2="send-data-to-view",ND=(t,s,a)=>{const l=S({}),d=_=>{const D=Ft.getValue(_),B=Ws(D).getOr({}),I=l.get(),V=Ns(I,B);l.set(V)},g=_=>{const D=l.get();Ft.setValue(_,D)},p=S(null),w=De(t.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[fr(a.shared.providers.translate(_.title))],view:()=>[a0.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:De(_.items,B=>l4(D,B,s,a)),formBehaviours:yt([Sn.config({mode:"acyclic",useTabstopAt:Pe(HC)}),Jn("TabView.form.events",[Br(g),Vl(d)]),zi.config({channels:ws([{key:eE,value:{onReceive:d}},{key:S2,value:{onReceive:g}}])})])}))]})),x=C2(w);return jl.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,D,B)=>{const I=Ft.getValue(D);wn(_,bN,{name:I,oldName:p.get()}),p.set(I)},tabs:w,components:[jl.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[tu.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:yt([Gr.config({})])}),jl.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:yt([Jn("tabpanel",x.extraEvents),Sn.config({mode:"acyclic"}),Ro.config({find:_=>ir(jl.getViewItems(_))}),sa.withComp(O.none(),_=>(_.getSystem().broadcastOn([eE],{}),l.get()),(_,D)=>{l.set(D),_.getSystem().broadcastOn([S2],{})})])})},x2=en("update-dialog"),BD=en("update-title"),am=en("update-body"),mb=en("update-footer"),Oe=en("body-send-message"),Ae=(t,s,a,l,d)=>{const g=x=>{const _=x.body;switch(_.type){case"tabpanel":return[ND(_,x.initialData,l)];default:return[qr(_,x.initialData,l)]}},p=(x,_)=>O.some({isTabPanel:()=>_.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(x=>({id:x})).getOr({}),...d?w:{}}},components:[],behaviours:yt([em.childAt(0),Ds.config({channel:`${am}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},xt=(t,s,a,l,d)=>Ae(t,s,O.some(a),l,d),gt=(t,s,a)=>{const l=Ae(t,s,O.none(),a,!1);return mc.parts.body(l)},Tn=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[aB({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:yt([Gr.config({}),Rn.config({})])})]}],behaviours:yt([Sn.config({mode:"acyclic",useTabstopAt:Pe(HC)})])};return mc.parts.body(s)};function Eo(t){return Eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Eo(t)}function Ks(t,s){return Ks=Object.setPrototypeOf||function(l,d){return l.__proto__=d,l},Ks(t,s)}function lr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xf(t,s,a){return lr()?Xf=Reflect.construct:Xf=function(d,g,p){var w=[null];w.push.apply(w,g);var x=Function.bind.apply(d,w),_=new x;return p&&Ks(_,p.prototype),_},Xf.apply(null,arguments)}function ou(t){return m5(t)||f5(t)||nW(t)||He()}function m5(t){if(Array.isArray(t))return io(t)}function f5(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nW(t,s){if(t){if(typeof t=="string")return io(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return io(t,s)}}function io(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,l=new Array(s);a<s;a++)l[a]=t[a];return l}function He(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ln=Object.hasOwnProperty,Gn=Object.setPrototypeOf,ha=Object.isFrozen,Nu=Object.getPrototypeOf,Di=Object.getOwnPropertyDescriptor,Hr=Object.freeze,ld=Object.seal,ui=Object.create,$D=typeof Reflect<"u"&&Reflect,tE=$D.apply,PD=$D.construct;tE||(tE=function(s,a,l){return s.apply(a,l)}),Hr||(Hr=function(s){return s}),ld||(ld=function(s){return s}),PD||(PD=function(s,a){return Xf(s,ou(a))});var SZ=lh(Array.prototype.forEach),wj=lh(Array.prototype.pop),ID=lh(Array.prototype.push),g5=lh(String.prototype.toLowerCase),Cj=lh(String.prototype.match),k0=lh(String.prototype.replace),Sj=lh(String.prototype.indexOf),xj=lh(String.prototype.trim),id=lh(RegExp.prototype.test),oW=Tj(TypeError);function lh(t){return function(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return tE(t,s,l)}}function Tj(t){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return PD(t,a)}}function sr(t,s){Gn&&Gn(t,null);for(var a=s.length;a--;){var l=s[a];if(typeof l=="string"){var d=g5(l);d!==l&&(ha(s)||(s[a]=d),l=d)}t[l]=!0}return t}function T2(t){var s=ui(null),a;for(a in t)tE(ln,t,[a])&&(s[a]=t[a]);return s}function h5(t,s){for(;t!==null;){var a=Di(t,s);if(a){if(a.get)return lh(a.get);if(typeof a.value=="function")return lh(a.value)}t=Nu(t)}function l(d){return console.warn("fallback value for",d),null}return l}var xZ=Hr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sW=Hr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),rW=Hr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),kj=Hr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),aW=Hr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Ej=Hr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),TZ=Hr(["#text"]),kZ=Hr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),cW=Hr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),EZ=Hr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),p5=Hr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_j=ld(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Oj=ld(/<%[\w\W]*|[\w\W]*%>/gm),Aj=ld(/^data-[\-\w.\u00B7-\uFFFF]/),Dj=ld(/^aria-[\-\w]+$/),Rj=ld(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Mj=ld(/^(?:\w+script|data):/i),Nj=ld(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Bj=ld(/^html$/i),$j=function(){return typeof window>"u"?null:window},Pj=function(s,a){if(Eo(s)!=="object"||typeof s.createPolicy!="function")return null;var l=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(l=a.currentScript.getAttribute(d));var g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML:function(w){return w}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function _Z(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$j(),s=function(Ue){return _Z(Ue)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,l=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,w=t.Element,x=t.NodeFilter,_=t.NamedNodeMap,D=_===void 0?t.NamedNodeMap||t.MozNamedAttrMap:_,B=t.HTMLFormElement,I=t.DOMParser,V=t.trustedTypes,X=w.prototype,le=h5(X,"cloneNode"),Ee=h5(X,"nextSibling"),ye=h5(X,"childNodes"),ke=h5(X,"parentNode");if(typeof g=="function"){var Ne=l.createElement("template");Ne.content&&Ne.content.ownerDocument&&(l=Ne.content.ownerDocument)}var Le=Pj(V,a),kt=Le?Le.createHTML(""):"",st=l,$t=st.implementation,an=st.createNodeIterator,yo=st.createDocumentFragment,xn=st.getElementsByTagName,ho=a.importNode,Wn={};try{Wn=T2(l).documentMode?l.documentMode:{}}catch{}var mo={};s.isSupported=typeof ke=="function"&&$t&&typeof $t.createHTMLDocument<"u"&&Wn!==9;var $n=_j,fs=Oj,vt=Aj,rn=Dj,Vt=Mj,Nn=Nj,so=Rj,No=null,_a=sr({},[].concat(ou(xZ),ou(sW),ou(rW),ou(aW),ou(TZ))),rs=null,Gl=sr({},[].concat(ou(kZ),ou(cW),ou(EZ),ou(p5))),Kr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ud=null,cm=null,ih=!0,k2=!0,nE=!1,E0=!1,fb=!1,FD=!1,mW=!1,oE=!1,b5=!1,v5=!1,qZ=!0,fW=!0,LD=!1,sE={},rE=null,KZ=sr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),YZ=null,XZ=sr({},["audio","video","img","source","image","track"]),gW=null,JZ=sr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hW="http://www.w3.org/1998/Math/MathML",pW="http://www.w3.org/2000/svg",_0="http://www.w3.org/1999/xhtml",y5=_0,bW=!1,aE,iG=["application/xhtml+xml","text/html"],uG="text/html",E2,cE=null,dG=l.createElement("form"),QZ=function(Ue){return Ue instanceof RegExp||Ue instanceof Function},vW=function(Ue){cE&&cE===Ue||((!Ue||Eo(Ue)!=="object")&&(Ue={}),Ue=T2(Ue),No="ALLOWED_TAGS"in Ue?sr({},Ue.ALLOWED_TAGS):_a,rs="ALLOWED_ATTR"in Ue?sr({},Ue.ALLOWED_ATTR):Gl,gW="ADD_URI_SAFE_ATTR"in Ue?sr(T2(JZ),Ue.ADD_URI_SAFE_ATTR):JZ,YZ="ADD_DATA_URI_TAGS"in Ue?sr(T2(XZ),Ue.ADD_DATA_URI_TAGS):XZ,rE="FORBID_CONTENTS"in Ue?sr({},Ue.FORBID_CONTENTS):KZ,ud="FORBID_TAGS"in Ue?sr({},Ue.FORBID_TAGS):{},cm="FORBID_ATTR"in Ue?sr({},Ue.FORBID_ATTR):{},sE="USE_PROFILES"in Ue?Ue.USE_PROFILES:!1,ih=Ue.ALLOW_ARIA_ATTR!==!1,k2=Ue.ALLOW_DATA_ATTR!==!1,nE=Ue.ALLOW_UNKNOWN_PROTOCOLS||!1,E0=Ue.SAFE_FOR_TEMPLATES||!1,fb=Ue.WHOLE_DOCUMENT||!1,oE=Ue.RETURN_DOM||!1,b5=Ue.RETURN_DOM_FRAGMENT||!1,v5=Ue.RETURN_TRUSTED_TYPE||!1,mW=Ue.FORCE_BODY||!1,qZ=Ue.SANITIZE_DOM!==!1,fW=Ue.KEEP_CONTENT!==!1,LD=Ue.IN_PLACE||!1,so=Ue.ALLOWED_URI_REGEXP||so,y5=Ue.NAMESPACE||_0,Ue.CUSTOM_ELEMENT_HANDLING&&QZ(Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Kr.tagNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&QZ(Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Kr.attributeNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&typeof Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Kr.allowCustomizedBuiltInElements=Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),aE=iG.indexOf(Ue.PARSER_MEDIA_TYPE)===-1?aE=uG:aE=Ue.PARSER_MEDIA_TYPE,E2=aE==="application/xhtml+xml"?function(dn){return dn}:g5,E0&&(k2=!1),b5&&(oE=!0),sE&&(No=sr({},ou(TZ)),rs=[],sE.html===!0&&(sr(No,xZ),sr(rs,kZ)),sE.svg===!0&&(sr(No,sW),sr(rs,cW),sr(rs,p5)),sE.svgFilters===!0&&(sr(No,rW),sr(rs,cW),sr(rs,p5)),sE.mathMl===!0&&(sr(No,aW),sr(rs,EZ),sr(rs,p5))),Ue.ADD_TAGS&&(No===_a&&(No=T2(No)),sr(No,Ue.ADD_TAGS)),Ue.ADD_ATTR&&(rs===Gl&&(rs=T2(rs)),sr(rs,Ue.ADD_ATTR)),Ue.ADD_URI_SAFE_ATTR&&sr(gW,Ue.ADD_URI_SAFE_ATTR),Ue.FORBID_CONTENTS&&(rE===KZ&&(rE=T2(rE)),sr(rE,Ue.FORBID_CONTENTS)),fW&&(No["#text"]=!0),fb&&sr(No,["html","head","body"]),No.table&&(sr(No,["tbody"]),delete ud.tbody),Hr&&Hr(Ue),cE=Ue)},ej=sr({},["mi","mo","mn","ms","mtext"]),tj=sr({},["foreignobject","desc","title","annotation-xml"]),mG=sr({},["title","style","font","a","script"]),w5=sr({},sW);sr(w5,rW),sr(w5,kj);var yW=sr({},aW);sr(yW,Ej);var fG=function(Ue){var dn=ke(Ue);(!dn||!dn.tagName)&&(dn={namespaceURI:_0,tagName:"template"});var eo=g5(Ue.tagName),La=g5(dn.tagName);return Ue.namespaceURI===pW?dn.namespaceURI===_0?eo==="svg":dn.namespaceURI===hW?eo==="svg"&&(La==="annotation-xml"||ej[La]):!!w5[eo]:Ue.namespaceURI===hW?dn.namespaceURI===_0?eo==="math":dn.namespaceURI===pW?eo==="math"&&tj[La]:!!yW[eo]:Ue.namespaceURI===_0?dn.namespaceURI===pW&&!tj[La]||dn.namespaceURI===hW&&!ej[La]?!1:!yW[eo]&&(mG[eo]||!w5[eo]):!1},gb=function(Ue){ID(s.removed,{element:Ue});try{Ue.parentNode.removeChild(Ue)}catch{try{Ue.outerHTML=kt}catch{Ue.remove()}}},C5=function(Ue,dn){try{ID(s.removed,{attribute:dn.getAttributeNode(Ue),from:dn})}catch{ID(s.removed,{attribute:null,from:dn})}if(dn.removeAttribute(Ue),Ue==="is"&&!rs[Ue])if(oE||b5)try{gb(dn)}catch{}else try{dn.setAttribute(Ue,"")}catch{}},nj=function(Ue){var dn,eo;if(mW)Ue="<remove></remove>"+Ue;else{var La=Cj(Ue,/^[\r\n\t ]+/);eo=La&&La[0]}aE==="application/xhtml+xml"&&(Ue='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ue+"</body></html>");var lm=Le?Le.createHTML(Ue):Ue;if(y5===_0)try{dn=new I().parseFromString(lm,aE)}catch{}if(!dn||!dn.documentElement){dn=$t.createDocument(y5,"template",null);try{dn.documentElement.innerHTML=bW?"":lm}catch{}}var Bu=dn.body||dn.documentElement;return Ue&&eo&&Bu.insertBefore(l.createTextNode(eo),Bu.childNodes[0]||null),y5===_0?xn.call(dn,fb?"html":"body")[0]:fb?dn.documentElement:Bu},oj=function(Ue){return an.call(Ue.ownerDocument||Ue,Ue,x.SHOW_ELEMENT|x.SHOW_COMMENT|x.SHOW_TEXT,null,!1)},gG=function(Ue){return Ue instanceof B&&(typeof Ue.nodeName!="string"||typeof Ue.textContent!="string"||typeof Ue.removeChild!="function"||!(Ue.attributes instanceof D)||typeof Ue.removeAttribute!="function"||typeof Ue.setAttribute!="function"||typeof Ue.namespaceURI!="string"||typeof Ue.insertBefore!="function")},HD=function(Ue){return Eo(p)==="object"?Ue instanceof p:Ue&&Eo(Ue)==="object"&&typeof Ue.nodeType=="number"&&typeof Ue.nodeName=="string"},hb=function(Ue,dn,eo){mo[Ue]&&SZ(mo[Ue],function(La){La.call(s,dn,eo,cE)})},sj=function(Ue){var dn;if(hb("beforeSanitizeElements",Ue,null),gG(Ue)||id(/[\u0080-\uFFFF]/,Ue.nodeName))return gb(Ue),!0;var eo=E2(Ue.nodeName);if(hb("uponSanitizeElement",Ue,{tagName:eo,allowedTags:No}),Ue.hasChildNodes()&&!HD(Ue.firstElementChild)&&(!HD(Ue.content)||!HD(Ue.content.firstElementChild))&&id(/<[/\w]/g,Ue.innerHTML)&&id(/<[/\w]/g,Ue.textContent)||eo==="select"&&id(/<template/i,Ue.innerHTML))return gb(Ue),!0;if(!No[eo]||ud[eo]){if(!ud[eo]&&aj(eo)&&(Kr.tagNameCheck instanceof RegExp&&id(Kr.tagNameCheck,eo)||Kr.tagNameCheck instanceof Function&&Kr.tagNameCheck(eo)))return!1;if(fW&&!rE[eo]){var La=ke(Ue)||Ue.parentNode,lm=ye(Ue)||Ue.childNodes;if(lm&&La)for(var Bu=lm.length,su=Bu-1;su>=0;--su)La.insertBefore(le(lm[su],!0),Ee(Ue))}return gb(Ue),!0}return Ue instanceof w&&!fG(Ue)||(eo==="noscript"||eo==="noembed")&&id(/<\/no(script|embed)/i,Ue.innerHTML)?(gb(Ue),!0):(E0&&Ue.nodeType===3&&(dn=Ue.textContent,dn=k0(dn,$n," "),dn=k0(dn,fs," "),Ue.textContent!==dn&&(ID(s.removed,{element:Ue.cloneNode()}),Ue.textContent=dn)),hb("afterSanitizeElements",Ue,null),!1)},rj=function(Ue,dn,eo){if(qZ&&(dn==="id"||dn==="name")&&(eo in l||eo in dG))return!1;if(!(k2&&!cm[dn]&&id(vt,dn))){if(!(ih&&id(rn,dn))){if(!rs[dn]||cm[dn]){if(!(aj(Ue)&&(Kr.tagNameCheck instanceof RegExp&&id(Kr.tagNameCheck,Ue)||Kr.tagNameCheck instanceof Function&&Kr.tagNameCheck(Ue))&&(Kr.attributeNameCheck instanceof RegExp&&id(Kr.attributeNameCheck,dn)||Kr.attributeNameCheck instanceof Function&&Kr.attributeNameCheck(dn))||dn==="is"&&Kr.allowCustomizedBuiltInElements&&(Kr.tagNameCheck instanceof RegExp&&id(Kr.tagNameCheck,eo)||Kr.tagNameCheck instanceof Function&&Kr.tagNameCheck(eo))))return!1}else if(!gW[dn]){if(!id(so,k0(eo,Nn,""))){if(!((dn==="src"||dn==="xlink:href"||dn==="href")&&Ue!=="script"&&Sj(eo,"data:")===0&&YZ[Ue])){if(!(nE&&!id(Vt,k0(eo,Nn,"")))){if(eo)return!1}}}}}}return!0},aj=function(Ue){return Ue.indexOf("-")>0},cj=function(Ue){var dn,eo,La,lm;hb("beforeSanitizeAttributes",Ue,null);var Bu=Ue.attributes;if(Bu){var su={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:rs};for(lm=Bu.length;lm--;){dn=Bu[lm];var S5=dn,ru=S5.name,lj=S5.namespaceURI;eo=ru==="value"?dn.value:xj(dn.value),La=E2(ru);var pG=eo;if(su.attrName=La,su.attrValue=eo,su.keepAttr=!0,su.forceKeepAttr=void 0,hb("uponSanitizeAttribute",Ue,su),eo=su.attrValue,!su.forceKeepAttr){if(!su.keepAttr){C5(ru,Ue);continue}if(id(/\/>/i,eo)){C5(ru,Ue);continue}E0&&(eo=k0(eo,$n," "),eo=k0(eo,fs," "));var bG=E2(Ue.nodeName);if(!rj(bG,La,eo)){C5(ru,Ue);continue}if(eo!==pG)try{lj?Ue.setAttributeNS(lj,ru,eo):Ue.setAttribute(ru,eo)}catch{C5(ru,Ue)}}}hb("afterSanitizeAttributes",Ue,null)}},hG=function _o(Ue){var dn,eo=oj(Ue);for(hb("beforeSanitizeShadowDOM",Ue,null);dn=eo.nextNode();)hb("uponSanitizeShadowNode",dn,null),!sj(dn)&&(dn.content instanceof d&&_o(dn.content),cj(dn));hb("afterSanitizeShadowDOM",Ue,null)};return s.sanitize=function(_o,Ue){var dn,eo,La,lm,Bu;if(bW=!_o,bW&&(_o="<!-->"),typeof _o!="string"&&!HD(_o)){if(typeof _o.toString!="function")throw oW("toString is not a function");if(_o=_o.toString(),typeof _o!="string")throw oW("dirty is not a string, aborting")}if(!s.isSupported){if(Eo(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof _o=="string")return t.toStaticHTML(_o);if(HD(_o))return t.toStaticHTML(_o.outerHTML)}return _o}if(FD||vW(Ue),s.removed=[],typeof _o=="string"&&(LD=!1),LD){if(_o.nodeName){var su=E2(_o.nodeName);if(!No[su]||ud[su])throw oW("root node is forbidden and cannot be sanitized in-place")}}else if(_o instanceof p)dn=nj("<!---->"),eo=dn.ownerDocument.importNode(_o,!0),eo.nodeType===1&&eo.nodeName==="BODY"||eo.nodeName==="HTML"?dn=eo:dn.appendChild(eo);else{if(!oE&&!E0&&!fb&&_o.indexOf("<")===-1)return Le&&v5?Le.createHTML(_o):_o;if(dn=nj(_o),!dn)return oE?null:v5?kt:""}dn&&mW&&gb(dn.firstChild);for(var S5=oj(LD?_o:dn);La=S5.nextNode();)La.nodeType===3&&La===lm||sj(La)||(La.content instanceof d&&hG(La.content),cj(La),lm=La);if(lm=null,LD)return _o;if(oE){if(b5)for(Bu=yo.call(dn.ownerDocument);dn.firstChild;)Bu.appendChild(dn.firstChild);else Bu=dn;return rs.shadowroot&&(Bu=ho.call(a,Bu,!0)),Bu}var ru=fb?dn.outerHTML:dn.innerHTML;return fb&&No["!doctype"]&&dn.ownerDocument&&dn.ownerDocument.doctype&&dn.ownerDocument.doctype.name&&id(Bj,dn.ownerDocument.doctype.name)&&(ru="<!DOCTYPE "+dn.ownerDocument.doctype.name+`>
`+ru),E0&&(ru=k0(ru,$n," "),ru=k0(ru,fs," ")),Le&&v5?Le.createHTML(ru):ru},s.setConfig=function(_o){vW(_o),FD=!0},s.clearConfig=function(){cE=null,FD=!1},s.isValidAttribute=function(_o,Ue,dn){cE||vW({});var eo=E2(_o),La=E2(Ue);return rj(eo,La,dn)},s.addHook=function(_o,Ue){typeof Ue=="function"&&(mo[_o]=mo[_o]||[],ID(mo[_o],Ue))},s.removeHook=function(_o){if(mo[_o])return wj(mo[_o])},s.removeHooks=function(_o){mo[_o]&&(mo[_o]=[])},s.removeAllHooks=function(){mo={}},s}var Ij=_Z();const Fj=t=>Ij().sanitize(t),Lj=Xg.deviceType.isTouch(),OZ=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),AZ=(t,s)=>mc.parts.close(Xc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:yt([Gr.config({})])})),DZ=()=>mc.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),RZ=(t,s)=>mc.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:rh(`<p>${Fj(s.translate(t))}</p>`)}]}]}),MZ=t=>mc.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),NZ=(t,s)=>[Yd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Yd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],lW=t=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",d=s+"__disable-scroll";return mc.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),O.some(!0)),useTabstopAt:g=>!HC(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:rh(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:Lj?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:yt([Rn.config({}),Jn("dialog-events",t.dialogEvents.concat([hu(mf(),(g,p)=>{Sn.focusIn(g)})])),Jn("scroll-lock",[Br(()=>{Cs(Zs(),d)}),Vl(()=>{ea(Zs(),d)})]),...t.extraBehaviours]),eventOrder:{[$s()]:["dialog-events"],[Rd()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[ym()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},BZ=t=>Xc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:yt([Gr.config({})]),components:[ed("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:s=>{Xo(s,Z1)}}),$Z=(t,s,a,l)=>{const d=g=>[fr(l.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:yt([Ds.config({channel:`${BD}-${s}`,initialData:t,renderComponents:d})])}},PZ=()=>({dom:rh('<div class="tox-dialog__draghandle"></div>')}),Hj=(t,s,a,l)=>Yd.sketch({dom:rh('<div class="tox-dialog__header"></div>'),components:[$Z(t,s,O.some(a),l),PZ(),BZ(l)],containerBehaviours:yt([ab.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Bd(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),Vj=(t,s,a)=>{const l=mc.parts.title($Z(t,s,O.none(),a)),d=mc.parts.draghandle(PZ()),g=mc.parts.close(BZ(a)),p=[l].concat(t.draggable?[d]:[]).concat([g]);return Yd.sketch({dom:rh('<div class="tox-dialog__header"></div>'),components:p})},IZ=(t,s,a)=>Vj({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),FZ=(t,s,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:rh('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),LZ=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{mc.setBusy(t(),(d,g)=>FZ(l.message,g,s))},onUnblock:()=>{mc.setIdle(t())}}),HZ=(t,s,a,l)=>{const d=(g,p)=>O.some(p);return Kc(lW({...t,firstTabstop:1,lazySink:l.shared.getSink,extraBehaviours:[Ds.config({channel:`${x2}-${t.id}`,updateState:d,initialData:s}),sa.memory({}),...t.extraBehaviours],onEscape:g=>{Xo(g,Z1)},dialogEvents:a,eventOrder:{[gg()]:[Ds.name(),zi.name()],[Rd()]:["scroll-lock",Ds.name(),"messages","dialog-events","alloy.base.behaviour"],[ym()]:["alloy.base.behaviour","dialog-events","messages",Ds.name(),"scroll-lock"]}}))},iW=(t,s={})=>{const a=l=>{const d=De(l.items,g=>{const p=pt(s,g.name).getOr(S(!1));return{...g,storage:p}});return{...l,items:d}};return De(t,l=>l.type==="menu"?a(l):l)},VZ=t=>Bn(t,(s,a)=>a.type==="menu"?Bn(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),zZ=(t,s)=>[Ip(mf(),n7),t(RC,(a,l,d,g)=>{$d(Fe(g.element)).fold(G,Oy),s.onClose(),l.onClose()}),t(Z1,(a,l,d,g)=>{l.onCancel(a),Xo(g,RC)}),nt(mA,(a,l)=>s.onUnblock()),nt(dA,(a,l)=>s.onBlock(l.event))],uW={initUrlDialog:(t,s)=>{const a=(d,g)=>nt(d,(p,w)=>{l(p,(x,_)=>{g(t(),x,w.event,p)})}),l=(d,g)=>{Ds.getState(d).get().each(p=>{g(p,d)})};return[...zZ(a,s),a(If,(d,g,p)=>{g.onAction(d,{name:p.name})})]},initDialog:(t,s,a)=>{const l=(g,p)=>nt(g,(w,x)=>{d(w,(_,D)=>{p(t(),_,x.event,w)})}),d=(g,p)=>{Ds.getState(g).get().each(w=>{p(w.internalDialog,g)})};return[...zZ(l,s),l(MC,(g,p)=>p.onSubmit(g)),l(Xi,(g,p,w)=>{p.onChange(g,{name:w.name})}),l(If,(g,p,w,x)=>{const _=()=>Sn.focusIn(x),D=V=>K(V,"disabled")||$(V,"aria-disabled").exists(X=>X==="true"),B=Fe(x.element),I=$d(B);p.onAction(g,{name:w.name,value:w.value}),$d(B).fold(_,V=>{D(V)||I.exists(X=>aa(V,X)&&D(X))?_():a().toOptional().filter(X=>!aa(X.element,V)).each(_)})}),l(bN,(g,p,w)=>{p.onTabChange(g,{newTabName:w.name,oldTabName:w.oldName})}),Vl(g=>{const p=t();Ft.setValue(g,p.getData())})]}},zj=(t,s)=>GC(t,t.type,s),Uj=(t,s,a)=>qt(s,l=>l.name===a).bind(l=>l.memento.getOpt(t)),Wj=(t,s)=>{const a=s.map(w=>w.footerButtons).getOr([]),l=Yr(a,w=>w.align==="start"),d=(w,x)=>Yd.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${w}`]},components:De(x,_=>_.memento.asSpec())}),g=d("start",l.pass),p=d("end",l.fail);return[g,p]},UZ=(t,s,a)=>{const l=(d,g)=>{const p=De(g.buttons,x=>{const _=xo(zj(x,a));return{name:x.name,align:x.align,memento:_}}),w=x=>Uj(d,p,x);return O.some({lookupByName:w,footerButtons:p})};return{dom:rh('<div class="tox-dialog__footer"></div>'),components:[],behaviours:yt([Ds.config({channel:`${mb}-${s}`,initialData:t,updateState:l,renderComponents:Wj})])}},Zj=(t,s,a)=>UZ(t,s,a),WZ=(t,s,a)=>mc.parts.footer(UZ(t,s,a)),ZZ=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=Ro.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return a0.getField(l,s).orThunk(()=>{const d=t.getFooter();return Ds.getState(d).get().bind(p=>p.lookupByName(s))})}else return O.none()},jj=(t,s)=>{const a=t.getRoot();return Ds.getState(a).get().map(l=>cs(ys("data",l.dataValidator,s))).getOr(s)},jZ=(t,s,a)=>{const l=X=>{const le=t.getRoot();le.getSystem().isConnected()&&X(le)},V={getData:()=>{const X=t.getRoot(),le=X.getSystem().isConnected()?t.getFormWrapper():X,Ee=Ft.getValue(le),ye=Gt(a,ke=>ke.get());return{...Ee,...ye}},setData:X=>{l(le=>{const Ee=V.getData(),ye=Ns(Ee,X),ke=jj(t,ye),Ne=t.getFormWrapper();Ft.setValue(Ne,ke),Je(a,(Le,kt)=>{oo(ye,kt)&&Le.set(ye[kt])})})},setEnabled:(X,le)=>{ZZ(t,X).each(le?Vn.enable:Vn.disable)},focus:X=>{ZZ(t,X).each(Rn.focus)},block:X=>{if(!Et(X))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(le=>{wn(le,dA,{message:X})})},unblock:()=>{l(X=>{Xo(X,mA)})},showTab:X=>{l(le=>{const Ee=t.getBody();Ds.getState(Ee).get().exists(ke=>ke.isTabPanel())&&Ro.getCurrent(Ee).each(ke=>{jl.showTab(ke,X)})})},redial:X=>{l(le=>{const Ee=t.getId(),ye=s(X),ke=iW(ye.internalDialog.buttons,a);le.getSystem().broadcastOn([`${x2}-${Ee}`],ye),le.getSystem().broadcastOn([`${BD}-${Ee}`],ye.internalDialog),le.getSystem().broadcastOn([`${am}-${Ee}`],ye.internalDialog),le.getSystem().broadcastOn([`${mb}-${Ee}`],{...ye.internalDialog,buttons:ke}),V.setData(ye.initialData)})},close:()=>{l(X=>{Xo(X,RC)})},toggleFullscreen:t.toggleFullscreen};return V},Gj=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},qj=(t,s,a)=>{const l=en("dialog"),d=t.internalDialog,g=IZ(d.title,l,a),p=gt({body:d.body,initialData:d.initialData},l,a),w=iW(d.buttons),x=VZ(w),_=WZ({buttons:w},l,a),D=uW.initDialog(()=>le,LZ(()=>V,a.shared.providers,s),a.shared.getSink),B=Gj(d.size),I={id:l,header:g,body:p,footer:O.some(_),extraClasses:B,extraBehaviours:[],extraStyles:{}},V=HZ(I,t,D,a),X=(()=>{const Ee=()=>{const ke=mc.getBody(V);return Ro.getCurrent(ke).getOr(ke)},ye=()=>{const ke="tox-dialog--fullscreen",Ne=pe.fromDom(V.element.dom);Wa(Ne,ke)?(ea(Ne,ke),Hi(Ne,B)):(Sl(Ne,B),Cs(Ne,ke))};return{getId:q(l),getRoot:q(V),getBody:()=>mc.getBody(V),getFooter:()=>mc.getFooter(V),getFormWrapper:Ee,toggleFullscreen:ye}})(),le=jZ(X,s.redial,x);return{dialog:V,instanceApi:le}},Kj=(t,s,a,l)=>{const d=en("dialog"),g=en("dialog-label"),p=en("dialog-content"),w=t.internalDialog,x=(Ne,Le)=>O.some(Le),_=xo(Hj({title:w.title,draggable:!0},d,g,a.shared.providers)),D=xo(xt({body:w.body,initialData:w.initialData},d,p,a,l)),B=iW(w.buttons),I=VZ(B),V=xo(Zj({buttons:B},d,a)),X=uW.initDialog(()=>ke,{onBlock:Ne=>{bp.block(Ee,(Le,kt)=>FZ(Ne.message,kt,a.shared.providers))},onUnblock:()=>{bp.unblock(Ee)},onClose:()=>s.closeWindow()},a.shared.getSink),le="tox-dialog-inline",Ee=Kc({dom:{tag:"div",classes:["tox-dialog",le],attributes:{role:"dialog",["aria-labelledby"]:g,["aria-describedby"]:p}},eventOrder:{[gg()]:[Ds.name(),zi.name()],[$s()]:["execute-on-form"],[Rd()]:["reflecting","execute-on-form"]},behaviours:yt([Sn.config({mode:"cyclic",onEscape:Ne=>(Xo(Ne,RC),O.some(!0)),useTabstopAt:Ne=>!HC(Ne)&&(tc(Ne)!=="button"||Ur(Ne,"disabled")!=="disabled"),firstTabstop:1}),Ds.config({channel:`${x2}-${d}`,updateState:x,initialData:t}),Rn.config({}),Jn("execute-on-form",X.concat([hu(mf(),(Ne,Le)=>{Sn.focusIn(Ne)})])),bp.config({getRoot:()=>O.some(Ee)}),Kn.config({}),sa.memory({})]),components:[_.asSpec(),D.asSpec(),V.asSpec()]}),ye=()=>{const Ne="tox-dialog--fullscreen",Le=pe.fromDom(Ee.element.dom);Cg(Le,[Ne])?(Sl(Le,[Ne]),Hi(Le,[le])):(Sl(Le,[le]),Hi(Le,[Ne]))},ke=jZ({getId:q(d),getRoot:q(Ee),getFooter:()=>V.get(Ee),getBody:()=>D.get(Ee),getFormWrapper:()=>{const Ne=D.get(Ee);return Ro.getCurrent(Ne).getOr(Ne)},toggleFullscreen:ye},s.redial,I);return{dialog:Ee,instanceApi:ke}};var dW=tinymce.util.Tools.resolve("tinymce.util.URI");const Yj=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!Et(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(w=>{wn(w,dA,{message:p})})},unblock:()=>{s(p=>{Xo(p,mA)})},close:()=>{s(p=>{Xo(p,RC)})},sendMessage:p=>{s(w=>{w.getSystem().broadcastOn([Oe],p)})}}},Xj=["insertContent","setContent","execCommand","close","block","unblock"],GZ=t=>Mt(t)&&Xj.indexOf(t.mceAction)!==-1,Jj=t=>!GZ(t)&&Mt(t)&&oo(t,"mceAction"),Qj=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const l=fn(a.ui)?a.ui:!1;t.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},eG=(t,s,a,l)=>{const d=en("dialog"),g=IZ(t.title,d,l),p=Tn(t),w=t.buttons.bind(ke=>ke.length===0?O.none():O.some(WZ({buttons:ke},d,l))),x=uW.initUrlDialog(()=>ye,LZ(()=>Ee,l.shared.providers,s)),_={...t.height.fold(()=>({}),ke=>({height:ke+"px","max-height":ke+"px"})),...t.width.fold(()=>({}),ke=>({width:ke+"px","max-width":ke+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],B=new dW(t.url,{base_uri:new dW(window.location.href)}),I=`${B.protocol}://${B.host}${B.port?":"+B.port:""}`,V=Zi(),X=[Jn("messages",[Br(()=>{const ke=ll(pe.fromDom(window),"message",Ne=>{if(B.isSameOrigin(new dW(Ne.raw.origin))){const Le=Ne.raw.data;GZ(Le)?Qj(a,ye,Le):Jj(Le)&&t.onMessage(ye,Le)}});V.set(ke)}),Vl(V.clear)]),zi.config({channels:{[Oe]:{onReceive:(ke,Ne)=>{Tr(ke.element,"iframe").each(Le=>{const kt=Le.dom.contentWindow;it(kt)&&kt.postMessage(Ne,I)})}}}})],Ee=HZ({id:d,header:g,body:p,footer:w,extraClasses:D,extraBehaviours:X,extraStyles:_},t,x,l),ye=Yj(Ee);return{dialog:Ee,instanceApi:ye}},tG=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{mc.hide(_),d()},p=xo(GC({name:"close-alert",text:"OK",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"cancel",t)),w=DZ(),x=AZ(g,s.providers),_=Kc(lW({lazySink:()=>s.getSink(),header:OZ(w,x),body:RZ(l,s.providers),footer:O.some(MZ(NZ([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[nt(Z1,g)],eventOrder:{}}));mc.show(_);const D=p.get(_);Rn.focus(D)}}},nG=t=>{const s=t.shared;return{open:(l,d)=>{const g=I=>{mc.hide(D),d(I)},p=xo(GC({name:"yes",text:"Yes",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"submit",t)),w=GC({name:"no",text:"No",primary:!1,buttonType:O.some("secondary"),align:"end",enabled:!0,icon:O.none()},"cancel",t),x=DZ(),_=AZ(()=>g(!1),s.providers),D=Kc(lW({lazySink:()=>s.getSink(),header:OZ(x,_),body:RZ(l,s.providers),footer:O.some(MZ(NZ([],[w,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[nt(Z1,()=>g(!1)),nt(MC,()=>g(!0))],eventOrder:{}}));mc.show(D);const B=p.get(D);Rn.focus(B)}}},oG=(t,s)=>cs(ys("data",s,t)),sG=t=>OC(t,".tox-alert-dialog")||OC(t,".tox-confirm-dialog"),rG=(t,s,a)=>s&&a?[]:[Ga.config({contextual:{lazyContext:()=>O.some(E(pe.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>oa(t,l.element).map(g=>({bounds:xT(g),optScrollEnv:O.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:vs(g.element).top})})).getOrThunk(()=>({bounds:me(),optScrollEnv:O.none()}))})],aG=t=>{const s=t.editor,a=Wv(s),l=tG(t.backstages.dialog),d=nG(t.backstages.dialog),g=(V,X,le)=>X!==void 0&&X.inline==="toolbar"?_(V,t.backstages.popup.shared.anchors.inlineDialog(),le,X.ariaAttrs):X!==void 0&&X.inline==="cursor"?_(V,t.backstages.popup.shared.anchors.cursor(),le,X.ariaAttrs):x(V,le),p=(V,X)=>w(V,X),w=(V,X)=>{const le=Ee=>{const ye=eG(Ee,{closeWindow:()=>{mc.hide(ye.dialog),X(ye.instanceApi)}},s,t.backstages.dialog);return mc.show(ye.dialog),ye.instanceApi};return On.openUrl(le,V)},x=(V,X)=>{const le=(Ee,ye,ke)=>{const Ne=ye,kt=qj({dataValidator:ke,initialData:Ne,internalDialog:Ee},{redial:On.redial,closeWindow:()=>{mc.hide(kt.dialog),X(kt.instanceApi)}},t.backstages.dialog);return mc.show(kt.dialog),kt.instanceApi.setData(Ne),kt.instanceApi};return On.open(le,V)},_=(V,X,le,Ee=!1)=>{const ye=(ke,Ne,Le)=>{const kt=oG(Ne,Le),st=Hs(),$t=t.backstages.popup.shared.header.isPositionedAtTop(),an={dataValidator:Le,initialData:kt,internalDialog:ke},yo=()=>st.on(mo=>{ka.reposition(mo),Ga.refresh(mo)}),xn=Kj(an,{redial:On.redial,closeWindow:()=>{st.on(ka.hide),s.off("ResizeEditor",yo),st.clear(),le(xn.instanceApi)}},t.backstages.popup,Ee),ho=Kc(ka.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...$t?{}:{fireRepositionEventInstead:{}},inlineBehaviours:yt([Jn("window-manager-inline-events",[nt(ff(),(mo,$n)=>{Xo(xn.dialog,Z1)})]),...rG(s,a,$t)]),isExtraPart:(mo,$n)=>sG($n)}));st.set(ho);const Wn=()=>{const mo=s.inline?Zs():pe.fromDom(s.getContainer()),$n=E(mo);return O.some($n)};return ka.showWithinBounds(ho,Ul(xn.dialog),{anchor:X},Wn),(!a||!$t)&&(Ga.refresh(ho),s.on("ResizeEditor",yo)),xn.instanceApi.setData(kt),Sn.focusIn(xn.dialog),xn.instanceApi};return On.open(ye,V)};return{open:g,openUrl:p,alert:(V,X)=>{l.open(V,X)},close:V=>{V.close()},confirm:(V,X)=>{d.open(V,X)}}},cG=t=>{Q3(t),Gm(t),M9(t)};var lG=()=>{Tt.add("silver",t=>{cG(t);let s=()=>me();const{dialogs:a,popups:l,renderUI:d}=qk(t,{getPopupSinkBounds:()=>s()}),g=async()=>{const x=await d();return oa(t,l.getMothership().element).each(D=>{s=()=>xT(D)}),x};Pf.register(t,l.backstage.shared);const p=aG({editor:t,backstages:{popup:l.backstage,dialog:a.backstage}}),w=()=>sO(t,{backstage:l.backstage},l.getMothership());return{renderUI:g,getWindowManagerImpl:q(p),getNotificationManagerImpl:w}})};lG()})();(function(){const ge=G=>{let Xe=G;return{get:()=>Xe,set:q=>{Xe=q}}};var bt=tinymce.util.Tools.resolve("tinymce.PluginManager");const vn=G=>()=>G;var Dt=tinymce.util.Tools.resolve("tinymce.Env");const zt=G=>G.dispatch("ResizeEditor"),Xt=G=>Xe=>Xe.options.get(G),Mn=G=>{const Xe=G.options.register;Xe("autoresize_overflow_padding",{processor:"number",default:1}),Xe("autoresize_bottom_margin",{processor:"number",default:50})},Et=Xt("min_height"),Mt=Xt("max_height"),Ln=Xt("autoresize_overflow_padding"),hn=Xt("autoresize_bottom_margin"),tn=G=>G.plugins.fullscreen&&G.plugins.fullscreen.isFullscreen(),fn=(G,Xe)=>{const Ot=G.getBody();Ot&&(Ot.style.overflowY=Xe?"":"hidden",Xe||(Ot.scrollTop=0))},dt=(G,Xe,Ot,at)=>{var q;const ht=parseInt((q=G.getStyle(Xe,Ot,at))!==null&&q!==void 0?q:"",10);return isNaN(ht)?0:ht},Pt=G=>{if((G==null?void 0:G.type.toLowerCase())==="setcontent"){const Xe=G;return Xe.selection===!0||Xe.paste===!0}else return!1},it=(G,Xe,Ot,at)=>{var q;const ht=G.dom,Dn=G.getDoc();if(!Dn)return;if(tn(G)){fn(G,!0);return}const Ye=Dn.documentElement,Pe=at?at():Ln(G),fe=(q=Et(G))!==null&&q!==void 0?q:G.getElement().offsetHeight;let Go=fe;const zn=dt(ht,Ye,"margin-top",!0),Wt=dt(ht,Ye,"margin-bottom",!0);let O=Ye.offsetHeight+zn+Wt+Pe;O<0&&(O=0);const Oo=G.getContainer().offsetHeight,rt=G.getContentAreaContainer().offsetHeight,Fo=Oo-rt;O+Fo>fe&&(Go=O+Fo);const cn=Mt(G);if(cn&&Go>cn?(Go=cn,fn(G,!0)):fn(G,!1),Go!==Xe.get()){const je=Go-Xe.get();if(ht.setStyle(G.getContainer(),"height",Go+"px"),Xe.set(Go),zt(G),Dt.browser.isSafari()&&(Dt.os.isMacOS()||Dt.os.isiOS())){const po=G.getWin();po.scrollTo(po.pageXOffset,po.pageYOffset)}G.hasFocus()&&Pt(Ot)&&G.selection.scrollIntoView(),(Dt.browser.isSafari()||Dt.browser.isChromium())&&je<0&&it(G,Xe,Ot,at)}},tt=(G,Xe)=>{let Ot=()=>hn(G),at,q;G.on("init",ht=>{at=0;const Dn=Ln(G),Ye=G.dom;Ye.setStyles(G.getDoc().documentElement,{height:"auto"}),Dt.browser.isEdge()||Dt.browser.isIE()?Ye.setStyles(G.getBody(),{paddingLeft:Dn,paddingRight:Dn,"min-height":0}):Ye.setStyles(G.getBody(),{paddingLeft:Dn,paddingRight:Dn}),it(G,Xe,ht,Ot),at+=1}),G.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",ht=>{if(at===1)q=G.getContainer().offsetHeight,it(G,Xe,ht,Ot),at+=1;else if(at===2){const Dn=q<G.getContainer().offsetHeight;if(Dn){const Ye=G.dom,Pe=G.getDoc();Ye.setStyles(Pe.documentElement,{"min-height":0}),Ye.setStyles(G.getBody(),{"min-height":"inherit"})}Ot=Dn?vn(0):Ot,at+=1}else it(G,Xe,ht,Ot)})},pn=(G,Xe)=>{G.addCommand("mceAutoResize",()=>{it(G,Xe)})};var Ke=()=>{bt.add("autoresize",G=>{if(Mn(G),G.options.isSet("resize")||G.options.set("resize",!1),!G.inline){const Xe=ge(0);pn(G,Xe),tt(G,Xe)}})};Ke()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager");const bt=(Et,Mt)=>{Et.focus(),Et.undoManager.transact(()=>{Et.setContent(Mt)}),Et.selection.setCursorLocation(),Et.nodeChanged()},vn=Et=>Et.getContent({source_view:!0}),Dt=Et=>{const Mt=vn(Et);Et.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Mt},onSubmit:Ln=>{bt(Et,Ln.getData().code),Ln.close()}})},zt=Et=>{Et.addCommand("mceCodeEditor",()=>{Dt(Et)})},Xt=Et=>{const Mt=()=>Et.execCommand("mceCodeEditor");Et.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Mt}),Et.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Mt})};var Mn=()=>{ge.add("code",Et=>(zt(Et),Xt(Et),{}))};Mn()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager");const bt=(ot,Je,Gt)=>{var nn;return Gt(ot,Je.prototype)?!0:((nn=ot.constructor)===null||nn===void 0?void 0:nn.name)===Je.name},vn=ot=>{const Je=typeof ot;return ot===null?"null":Je==="object"&&Array.isArray(ot)?"array":Je==="object"&&bt(ot,String,(Gt,nn)=>nn.isPrototypeOf(Gt))?"string":Je},Dt=ot=>Je=>vn(Je)===ot,zt=ot=>Je=>typeof Je===ot,Xt=Dt("string"),Mn=zt("boolean"),Et=ot=>ot==null,Mt=ot=>!Et(ot),Ln=zt("function"),hn=zt("number"),tn=(ot,Je)=>Gt=>ot(Je(Gt)),dt=(ot=>()=>ot)(!1);class Pt{constructor(Je,Gt){this.tag=Je,this.value=Gt}static some(Je){return new Pt(!0,Je)}static none(){return Pt.singletonNone}fold(Je,Gt){return this.tag?Gt(this.value):Je()}isSome(){return this.tag}isNone(){return!this.tag}map(Je){return this.tag?Pt.some(Je(this.value)):Pt.none()}bind(Je){return this.tag?Je(this.value):Pt.none()}exists(Je){return this.tag&&Je(this.value)}forall(Je){return!this.tag||Je(this.value)}filter(Je){return!this.tag||Je(this.value)?this:Pt.none()}getOr(Je){return this.tag?this.value:Je}or(Je){return this.tag?this:Je}getOrThunk(Je){return this.tag?this.value:Je()}orThunk(Je){return this.tag?this:Je()}getOrDie(Je){if(this.tag)return this.value;throw new Error(Je??"Called getOrDie on None")}static from(Je){return Mt(Je)?Pt.some(Je):Pt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Je){this.tag&&Je(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Pt.singletonNone=new Pt(!1);const it=(ot,Je)=>{const Gt=ot.length,nn=new Array(Gt);for(let In=0;In<Gt;In++){const Ao=ot[In];nn[In]=Je(Ao,In)}return nn},tt=(ot,Je)=>{for(let Gt=0,nn=ot.length;Gt<nn;Gt++){const In=ot[Gt];Je(In,Gt)}},pn=(ot,Je)=>{const Gt=[];for(let nn=0,In=ot.length;nn<In;nn++){const Ao=ot[nn];Je(Ao,nn)&&Gt.push(Ao)}return Gt},Ke=9,G=11,Xe=1,Ot=3,at=(ot,Je)=>{const nn=(Je||document).createElement("div");if(nn.innerHTML=ot,!nn.hasChildNodes()||nn.childNodes.length>1){const In="HTML does not have a single root node";throw console.error(In,ot),new Error(In)}return Dn(nn.childNodes[0])},q=(ot,Je)=>{const nn=(Je||document).createElement(ot);return Dn(nn)},ht=(ot,Je)=>{const nn=(Je||document).createTextNode(ot);return Dn(nn)},Dn=ot=>{if(ot==null)throw new Error("Node cannot be null or undefined");return{dom:ot}},Pe={fromHtml:at,fromTag:q,fromText:ht,fromDom:Dn,fromPoint:(ot,Je,Gt)=>Pt.from(ot.dom.elementFromPoint(Je,Gt)).map(Dn)},fe=(ot,Je)=>{const Gt=ot.dom;if(Gt.nodeType!==Xe)return!1;{const nn=Gt;if(nn.matches!==void 0)return nn.matches(Je);if(nn.msMatchesSelector!==void 0)return nn.msMatchesSelector(Je);if(nn.webkitMatchesSelector!==void 0)return nn.webkitMatchesSelector(Je);if(nn.mozMatchesSelector!==void 0)return nn.mozMatchesSelector(Je);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const Go=ot=>ot.dom.nodeName.toLowerCase(),zn=ot=>ot.dom.nodeType,Wt=ot=>Je=>zn(Je)===ot,O=Wt(Xe),Oo=Wt(Ot),rt=Wt(Ke),Fo=Wt(G),cn=ot=>Je=>O(Je)&&Go(Je)===ot,je=ot=>Pe.fromDom(ot.dom.ownerDocument),po=ot=>rt(ot)?ot:je(ot),es=ot=>Pt.from(ot.dom.parentNode).map(Pe.fromDom),Bo=ot=>it(ot.dom.childNodes,Pe.fromDom),Ts=(ot,Je,Gt)=>{if(Xt(Gt)||Mn(Gt)||hn(Gt))ot.setAttribute(Je,Gt+"");else throw console.error("Invalid call to Attribute.set. Key ",Je,":: Value ",Gt,":: Element ",ot),new Error("Attribute value was not simple")},De=(ot,Je,Gt)=>{Ts(ot.dom,Je,Gt)},mt=(ot,Je)=>{ot.dom.removeAttribute(Je)},H=ot=>Fo(ot)&&Mt(ot.dom.host),Pn=Ln(Element.prototype.attachShadow)&&Ln(Node.prototype.getRootNode)?ot=>Pe.fromDom(ot.dom.getRootNode()):po,is=ot=>{const Je=Pn(ot);return H(Je)?Pt.some(Je):Pt.none()},Bn=ot=>Pe.fromDom(ot.dom.host),Zn=ot=>{const Je=Oo(ot)?ot.dom.parentNode:ot.dom;if(Je==null||Je.ownerDocument===null)return!1;const Gt=Je.ownerDocument;return is(Pe.fromDom(Je)).fold(()=>Gt.body.contains(Je),tn(Zn,Bn))},qt=(ot,Je,Gt)=>{let nn=ot.dom;const In=Ln(Gt)?Gt:dt;for(;nn.parentNode;){nn=nn.parentNode;const Ao=Pe.fromDom(nn);if(Je(Ao))return Pt.some(Ao);if(In(Ao))break}return Pt.none()},ro=(ot,Je,Gt)=>qt(ot,nn=>fe(nn,Je),Gt),jt=ot=>ot.style!==void 0&&Ln(ot.style.getPropertyValue),Ve=(ot,Je)=>{const Gt=ot.dom,In=window.getComputedStyle(Gt).getPropertyValue(Je);return In===""&&!Zn(ot)?Vr(Gt,Je):In},Vr=(ot,Je)=>jt(ot)?ot.style.getPropertyValue(Je):"",ks=ot=>Ve(ot,"direction")==="rtl"?"rtl":"ltr",mn=(ot,Je)=>pn(Bo(ot),Je),Ka=(ot,Je)=>mn(ot,Gt=>fe(Gt,Je)),qo=ot=>es(ot).filter(O),Ya=(ot,Je)=>(Je?ro(ot,"ol,ul"):Pt.some(ot)).getOr(ot),gs=cn("li"),ir=(ot,Je)=>{const Gt=ot.selection.getSelectedBlocks();Gt.length>0&&(tt(Gt,nn=>{const In=Pe.fromDom(nn),Ao=gs(In),Rs=Ya(In,Ao);qo(Rs).each(rr=>{if(ks(rr)!==Je?De(Rs,"dir",Je):ks(Rs)!==Je&&mt(Rs,"dir"),Ao){const Or=Ka(Rs,"li[dir]");tt(Or,pt=>mt(pt,"dir"))}})}),ot.nodeChanged())},Oa=ot=>{ot.addCommand("mceDirectionLTR",()=>{ir(ot,"ltr")}),ot.addCommand("mceDirectionRTL",()=>{ir(ot,"rtl")})},_r=(ot,Je)=>Gt=>{const nn=In=>{const Ao=Pe.fromDom(In.element);Gt.setActive(ks(Ao)===Je)};return ot.on("NodeChange",nn),()=>ot.off("NodeChange",nn)},us=ot=>{ot.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>ot.execCommand("mceDirectionLTR"),onSetup:_r(ot,"ltr")}),ot.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>ot.execCommand("mceDirectionRTL"),onSetup:_r(ot,"rtl")})};var ts=()=>{ge.add("directionality",ot=>{Oa(ot),us(ot)})};ts()})();(function(){const ge=Y=>{let oe=Y;return{get:()=>oe,set:Qt=>{oe=Qt}}};var bt=tinymce.util.Tools.resolve("tinymce.PluginManager");const vn=Y=>({isFullscreen:()=>Y.get()!==null}),Dt=(Y,oe,xe)=>{var ze;return xe(Y,oe.prototype)?!0:((ze=Y.constructor)===null||ze===void 0?void 0:ze.name)===oe.name},zt=Y=>{const oe=typeof Y;return Y===null?"null":oe==="object"&&Array.isArray(Y)?"array":oe==="object"&&Dt(Y,String,(xe,ze)=>ze.isPrototypeOf(xe))?"string":oe},Xt=Y=>oe=>zt(oe)===Y,Mn=Y=>oe=>typeof oe===Y,Et=Y=>oe=>Y===oe,Mt=Xt("string"),Ln=Xt("array"),hn=Et(null),tn=Mn("boolean"),fn=Et(void 0),dt=Y=>Y==null,Pt=Y=>!dt(Y),it=Mn("function"),tt=Mn("number"),pn=()=>{},Ke=(Y,oe)=>(...xe)=>Y(oe.apply(null,xe)),G=(Y,oe)=>xe=>Y(oe(xe)),Xe=Y=>()=>Y;function Ot(Y,...oe){return(...xe)=>{const ze=oe.concat(xe);return Y.apply(null,ze)}}const at=Xe(!1),q=Xe(!0);class ht{constructor(oe,xe){this.tag=oe,this.value=xe}static some(oe){return new ht(!0,oe)}static none(){return ht.singletonNone}fold(oe,xe){return this.tag?xe(this.value):oe()}isSome(){return this.tag}isNone(){return!this.tag}map(oe){return this.tag?ht.some(oe(this.value)):ht.none()}bind(oe){return this.tag?oe(this.value):ht.none()}exists(oe){return this.tag&&oe(this.value)}forall(oe){return!this.tag||oe(this.value)}filter(oe){return!this.tag||oe(this.value)?this:ht.none()}getOr(oe){return this.tag?this.value:oe}or(oe){return this.tag?this:oe}getOrThunk(oe){return this.tag?this.value:oe()}orThunk(oe){return this.tag?this:oe()}getOrDie(oe){if(this.tag)return this.value;throw new Error(oe??"Called getOrDie on None")}static from(oe){return Pt(oe)?ht.some(oe):ht.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(oe){this.tag&&oe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ht.singletonNone=new ht(!1);const Dn=Y=>{const oe=ge(ht.none()),xe=()=>oe.get().each(Y);return{clear:()=>{xe(),oe.set(ht.none())},isSet:()=>oe.get().isSome(),get:()=>oe.get(),set:vo=>{xe(),oe.set(ht.some(vo))}}},Ye=()=>Dn(Y=>Y.unbind()),Pe=()=>{const Y=Dn(pn);return{...Y,on:xe=>Y.get().each(xe)}},fe=(Y,oe)=>{let xe=null;return{cancel:()=>{hn(xe)||(clearTimeout(xe),xe=null)},throttle:(...Do)=>{hn(xe)&&(xe=setTimeout(()=>{xe=null,Y.apply(null,Do)},oe))}}},Go=Array.prototype.push,zn=(Y,oe)=>{const xe=Y.length,ze=new Array(xe);for(let Qt=0;Qt<xe;Qt++){const Do=Y[Qt];ze[Qt]=oe(Do,Qt)}return ze},Wt=(Y,oe)=>{for(let xe=0,ze=Y.length;xe<ze;xe++){const Qt=Y[xe];oe(Qt,xe)}},O=(Y,oe)=>{const xe=[];for(let ze=0,Qt=Y.length;ze<Qt;ze++){const Do=Y[ze];oe(Do,ze)&&xe.push(Do)}return xe},Oo=(Y,oe,xe)=>{for(let ze=0,Qt=Y.length;ze<Qt;ze++){const Do=Y[ze];if(oe(Do,ze))return ht.some(Do);if(xe(Do,ze))break}return ht.none()},rt=(Y,oe)=>Oo(Y,oe,at),Fo=Y=>{const oe=[];for(let xe=0,ze=Y.length;xe<ze;++xe){if(!Ln(Y[xe]))throw new Error("Arr.flatten item "+xe+" was not an array, input: "+Y);Go.apply(oe,Y[xe])}return oe},cn=(Y,oe)=>Fo(zn(Y,oe)),je=(Y,oe)=>oe>=0&&oe<Y.length?ht.some(Y[oe]):ht.none(),po=Y=>je(Y,0),es=(Y,oe)=>{for(let xe=0;xe<Y.length;xe++){const ze=oe(Y[xe],xe);if(ze.isSome())return ze}return ht.none()},Bo=Object.keys,Ts=(Y,oe)=>{const xe=Bo(Y);for(let ze=0,Qt=xe.length;ze<Qt;ze++){const Do=xe[ze],Fs=Y[Do];oe(Fs,Do)}},De=(Y,oe,xe=0,ze)=>{const Qt=Y.indexOf(oe,xe);return Qt!==-1?fn(ze)?!0:Qt+oe.length<=ze:!1},mt=Y=>Y.style!==void 0&&it(Y.style.getPropertyValue),H=(Y,oe)=>{const ze=(oe||document).createElement("div");if(ze.innerHTML=Y,!ze.hasChildNodes()||ze.childNodes.length>1){const Qt="HTML does not have a single root node";throw console.error(Qt,Y),new Error(Qt)}return is(ze.childNodes[0])},Yr=(Y,oe)=>{const ze=(oe||document).createElement(Y);return is(ze)},Pn=(Y,oe)=>{const ze=(oe||document).createTextNode(Y);return is(ze)},is=Y=>{if(Y==null)throw new Error("Node cannot be null or undefined");return{dom:Y}},Zn={fromHtml:H,fromTag:Yr,fromText:Pn,fromDom:is,fromPoint:(Y,oe,xe)=>ht.from(Y.dom.elementFromPoint(oe,xe)).map(is)};typeof window<"u"||Function("return this;")();const qt=9,ro=11,jt=1,Ve=3,Vr=Y=>Y.dom.nodeType,ks=Y=>oe=>Vr(oe)===Y,mn=ks(jt),Ka=ks(Ve),qo=ks(qt),Ya=ks(ro),gs=(Y,oe)=>{const xe=Y.dom;if(xe.nodeType!==jt)return!1;{const ze=xe;if(ze.matches!==void 0)return ze.matches(oe);if(ze.msMatchesSelector!==void 0)return ze.msMatchesSelector(oe);if(ze.webkitMatchesSelector!==void 0)return ze.webkitMatchesSelector(oe);if(ze.mozMatchesSelector!==void 0)return ze.mozMatchesSelector(oe);throw new Error("Browser lacks native selectors")}},ir=Y=>Y.nodeType!==jt&&Y.nodeType!==qt&&Y.nodeType!==ro||Y.childElementCount===0,Oa=(Y,oe)=>{const xe=oe===void 0?document:oe.dom;return ir(xe)?[]:zn(xe.querySelectorAll(Y),Zn.fromDom)},_r=(Y,oe)=>Y.dom===oe.dom,us=Y=>Zn.fromDom(Y.dom.ownerDocument),ts=Y=>qo(Y)?Y:us(Y),ot=Y=>ht.from(Y.dom.parentNode).map(Zn.fromDom),Je=(Y,oe)=>{const xe=it(oe)?oe:at;let ze=Y.dom;const Qt=[];for(;ze.parentNode!==null&&ze.parentNode!==void 0;){const Do=ze.parentNode,Fs=Zn.fromDom(Do);if(Qt.push(Fs),xe(Fs)===!0)break;ze=Do}return Qt},Gt=Y=>{const oe=xe=>O(xe,ze=>!_r(Y,ze));return ot(Y).map(nn).map(oe).getOr([])},nn=Y=>zn(Y.dom.childNodes,Zn.fromDom),In=Y=>Ya(Y)&&Pt(Y.dom.host),Ao=it(Element.prototype.attachShadow)&&it(Node.prototype.getRootNode),Rs=Xe(Ao),pa=Ao?Y=>Zn.fromDom(Y.dom.getRootNode()):ts,rr=Y=>{const oe=pa(Y);return In(oe)?ht.some(oe):ht.none()},Ss=Y=>Zn.fromDom(Y.dom.host),Or=Y=>{if(Rs()&&Pt(Y.target)){const oe=Zn.fromDom(Y.target);if(mn(oe)&&pt(oe)&&Y.composed&&Y.composedPath){const xe=Y.composedPath();if(xe)return po(xe)}}return ht.from(Y.target)},pt=Y=>Pt(Y.dom.shadowRoot),oo=Y=>{const oe=Ka(Y)?Y.dom.parentNode:Y.dom;if(oe==null||oe.ownerDocument===null)return!1;const xe=oe.ownerDocument;return rr(Zn.fromDom(oe)).fold(()=>xe.body.contains(oe),G(oo,Ss))},ba=Y=>{const oe=Y.dom.body;if(oe==null)throw new Error("Body is not available yet");return Zn.fromDom(oe)},ar=(Y,oe,xe)=>{if(Mt(xe)||tn(xe)||tt(xe))Y.setAttribute(oe,xe+"");else throw console.error("Invalid call to Attribute.set. Key ",oe,":: Value ",xe,":: Element ",Y),new Error("Attribute value was not simple")},Hc=(Y,oe,xe)=>{ar(Y.dom,oe,xe)},Xa=(Y,oe)=>{const xe=Y.dom.getAttribute(oe);return xe===null?void 0:xe},Ko=(Y,oe)=>{Y.dom.removeAttribute(oe)},Ja=(Y,oe,xe)=>{if(!Mt(xe))throw console.error("Invalid call to CSS.set. Property ",oe,":: Value ",xe,":: Element ",Y),new Error("CSS value must be a string: "+xe);mt(Y)&&Y.style.setProperty(oe,xe)},va=(Y,oe)=>{const xe=Y.dom;Ts(oe,(ze,Qt)=>{Ja(xe,Qt,ze)})},Uo=(Y,oe)=>{const xe=Y.dom,Qt=window.getComputedStyle(xe).getPropertyValue(oe);return Qt===""&&!oo(Y)?kn(xe,oe):Qt},kn=(Y,oe)=>mt(Y)?Y.style.getPropertyValue(oe):"",zr=(Y,oe,xe,ze,Qt,Do,Fs)=>({target:Y,x:oe,y:xe,stop:ze,prevent:Qt,kill:Do,raw:Fs}),Aa=Y=>{const oe=Zn.fromDom(Or(Y).getOr(Y.target)),xe=()=>Y.stopPropagation(),ze=()=>Y.preventDefault(),Qt=Ke(ze,xe);return zr(oe,Y.clientX,Y.clientY,xe,ze,Qt,Y)},Qa=(Y,oe)=>xe=>{Y(xe)&&oe(Aa(xe))},ec=(Y,oe,xe,ze,Qt)=>{const Do=Qa(xe,ze);return Y.dom.addEventListener(oe,Do,Qt),{unbind:Ot(ur,Y,oe,Do,Qt)}},Is=(Y,oe,xe,ze)=>ec(Y,oe,xe,ze,!1),ur=(Y,oe,xe,ze)=>{Y.dom.removeEventListener(oe,xe,ze)},bs=q,pr=(Y,oe,xe)=>Is(Y,oe,bs,xe),de=Y=>{let oe=!1,xe;return(...ze)=>(oe||(oe=!0,xe=Y.apply(null,ze)),xe)},se=(Y,oe,xe,ze)=>{const Qt=Y.isiOS()&&/ipad/i.test(xe)===!0,Do=Y.isiOS()&&!Qt,Fs=Y.isiOS()||Y.isAndroid(),vo=Fs||ze("(pointer:coarse)"),Ms=Qt||!Do&&Fs&&ze("(min-device-width:768px)"),la=Do||Fs&&!Ms,vs=oe.isSafari()&&Y.isiOS()&&/safari/i.test(xe)===!1,vc=!la&&!Ms&&!vs;return{isiPad:Xe(Qt),isiPhone:Xe(Do),isTablet:Xe(Ms),isPhone:Xe(la),isTouch:Xe(vo),isAndroid:Y.isAndroid,isiOS:Y.isiOS,isWebView:Xe(vs),isDesktop:Xe(vc)}},Ie=(Y,oe)=>{for(let xe=0;xe<Y.length;xe++){const ze=Y[xe];if(ze.test(oe))return ze}},Me=(Y,oe)=>{const xe=Ie(Y,oe);if(!xe)return{major:0,minor:0};const ze=Qt=>Number(oe.replace(xe,"$"+Qt));return to(ze(1),ze(2))},Kt=(Y,oe)=>{const xe=String(oe).toLowerCase();return Y.length===0?bn():Me(Y,xe)},bn=()=>to(0,0),to=(Y,oe)=>({major:Y,minor:oe}),Zo={nu:to,detect:Kt,unknown:bn},qn=(Y,oe)=>es(oe.brands,xe=>{const ze=xe.brand.toLowerCase();return rt(Y,Qt=>{var Do;return ze===((Do=Qt.brand)===null||Do===void 0?void 0:Do.toLowerCase())}).map(Qt=>({current:Qt.name,version:Zo.nu(parseInt(xe.version,10),0)}))}),uo=(Y,oe)=>{const xe=String(oe).toLowerCase();return rt(Y,ze=>ze.search(xe))},pe=(Y,oe)=>uo(Y,oe).map(xe=>{const ze=Zo.detect(xe.versionRegexes,oe);return{current:xe.name,version:ze}}),Ho=(Y,oe)=>uo(Y,oe).map(xe=>{const ze=Zo.detect(xe.versionRegexes,oe);return{current:xe.name,version:ze}}),br=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,dr=Y=>oe=>De(oe,Y),Vc=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:Y=>De(Y,"edge/")&&De(Y,"chrome")&&De(Y,"safari")&&De(Y,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,br],search:Y=>De(Y,"chrome")&&!De(Y,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:Y=>De(Y,"msie")||De(Y,"trident")},{name:"Opera",versionRegexes:[br,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dr("firefox")},{name:"Safari",versionRegexes:[br,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:Y=>(De(Y,"safari")||De(Y,"mobile/"))&&De(Y,"applewebkit")}],bo=[{name:"Windows",search:dr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:Y=>De(Y,"iphone")||De(Y,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:dr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dr("linux"),versionRegexes:[]},{name:"Solaris",search:dr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:dr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ml={browsers:Xe(Vc),oses:Xe(bo)},vr="Edge",mr="Chromium",Ys="IE",xs="Opera",ds="Firefox",zc="Safari",tc=()=>gc({current:void 0,version:Zo.unknown()}),gc=Y=>{const oe=Y.current,xe=Y.version,ze=Qt=>()=>oe===Qt;return{current:oe,version:xe,isEdge:ze(vr),isChromium:ze(mr),isIE:ze(Ys),isOpera:ze(xs),isFirefox:ze(ds),isSafari:ze(zc)}},el={unknown:tc,nu:gc,edge:Xe(vr),chromium:Xe(mr),ie:Xe(Ys),opera:Xe(xs),firefox:Xe(ds),safari:Xe(zc)},tl="Windows",Vo="iOS",ya="Android",Ac="Linux",hc="macOS",Da="Solaris",yr="FreeBSD",Es="ChromeOS",au=()=>Kl({current:void 0,version:Zo.unknown()}),Kl=Y=>{const oe=Y.current,xe=Y.version,ze=Qt=>()=>oe===Qt;return{current:oe,version:xe,isWindows:ze(tl),isiOS:ze(Vo),isAndroid:ze(ya),isMacOS:ze(hc),isLinux:ze(Ac),isSolaris:ze(Da),isFreeBSD:ze(yr),isChromeOS:ze(Es)}},Yo={unknown:au,nu:Kl,windows:Xe(tl),ios:Xe(Vo),android:Xe(ya),linux:Xe(Ac),macos:Xe(hc),solaris:Xe(Da),freebsd:Xe(yr),chromeos:Xe(Es)},wa={detect:(Y,oe,xe)=>{const ze=ml.browsers(),Qt=ml.oses(),Do=oe.bind(Ms=>qn(ze,Ms)).orThunk(()=>pe(ze,Y)).fold(el.unknown,el.nu),Fs=Ho(Qt,Y).fold(Yo.unknown,Yo.nu),vo=se(Fs,Do,Y,xe);return{browser:Do,os:Fs,deviceType:vo}}},Xs=Y=>window.matchMedia(Y).matches;let Yl=de(()=>wa.detect(navigator.userAgent,ht.from(navigator.userAgentData),Xs));const nc=()=>Yl(),ca=(Y,oe)=>({left:Y,top:oe,translate:(ze,Qt)=>ca(Y+ze,oe+Qt)}),pc=ca,fi=Y=>{const oe=Y!==void 0?Y.dom:document,xe=oe.body.scrollLeft||oe.documentElement.scrollLeft,ze=oe.body.scrollTop||oe.documentElement.scrollTop;return pc(xe,ze)},fl=Y=>{const oe=Y===void 0?window:Y;return nc().browser.isFirefox()?ht.none():ht.from(oe.visualViewport)},gi=(Y,oe,xe,ze)=>({x:Y,y:oe,width:xe,height:ze,right:Y+xe,bottom:oe+ze}),Ca=Y=>{const oe=Y===void 0?window:Y,xe=oe.document,ze=fi(Zn.fromDom(xe));return fl(oe).fold(()=>{const Qt=oe.document.documentElement,Do=Qt.clientWidth,Fs=Qt.clientHeight;return gi(ze.left,ze.top,Do,Fs)},Qt=>gi(Math.max(Qt.pageLeft,ze.left),Math.max(Qt.pageTop,ze.top),Qt.width,Qt.height))},Dc=(Y,oe,xe)=>fl(xe).map(ze=>{const Qt=Do=>oe(Aa(Do));return ze.addEventListener(Y,Qt),{unbind:()=>ze.removeEventListener(Y,Qt)}}).getOrThunk(()=>({unbind:pn}));var Xl=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Uc=tinymce.util.Tools.resolve("tinymce.Env");const Jl=(Y,oe)=>{Y.dispatch("FullscreenStateChanged",{state:oe}),Y.dispatch("ResizeEditor")},W=Y=>oe=>oe.options.get(Y),ie=Y=>{const oe=Y.options.register;oe("fullscreen_native",{processor:"boolean",default:!1})},be=W("fullscreen_native"),Fe=Y=>{const oe=Zn.fromDom(Y.getElement());return rr(oe).map(Ss).getOrThunk(()=>ba(us(oe)))},ct=Y=>Y.fullscreenElement!==void 0?Y.fullscreenElement:Y.msFullscreenElement!==void 0?Y.msFullscreenElement:Y.webkitFullscreenElement!==void 0?Y.webkitFullscreenElement:null,yn=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",ns=Y=>{const oe=Y.dom;oe.requestFullscreen?oe.requestFullscreen():oe.msRequestFullscreen?oe.msRequestFullscreen():oe.webkitRequestFullScreen&&oe.webkitRequestFullScreen()},wr=Y=>{const oe=Y.dom;oe.exitFullscreen?oe.exitFullscreen():oe.msExitFullscreen?oe.msExitFullscreen():oe.webkitCancelFullScreen&&oe.webkitCancelFullScreen()},wo=Y=>Y.dom===ct(us(Y).dom),Cr=(Y,oe,xe)=>O(Je(Y,xe),oe),$o=(Y,oe)=>O(Gt(Y),oe),Zs=Y=>Oa(Y),Rc=(Y,oe,xe)=>Cr(Y,ze=>gs(ze,oe),xe),bc=(Y,oe)=>$o(Y,xe=>gs(xe,oe)),Hn="data-ephox-mobile-fullscreen-style",Lo="display:none!important;",Ur="position:absolute!important;",$="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",K="background-color:rgb(255,255,255)!important;",ne=Uc.os.isAndroid(),Re=Y=>{const oe=Uo(Y,"background-color");return oe!==void 0&&oe!==""?"background-color:"+oe+"!important":K},Nt=(Y,oe,xe)=>{const ze=la=>bc(la,"*:not(.tox-silver-sink)"),Qt=la=>vs=>{const vc=Xa(vs,"style"),Wc=vc===void 0?"no-styles":vc.trim();Wc!==la&&(Hc(vs,Hn,Wc),va(vs,Y.parseStyle(la)))},Do=Rc(oe,"*"),Fs=cn(Do,ze),vo=Re(xe);Wt(Fs,Qt(Lo)),Wt(Do,Qt(Ur+$+vo)),Qt((ne===!0?"":Ur)+$+vo)(oe)},Yn=Y=>{const oe=Zs("["+Hn+"]");Wt(oe,xe=>{const ze=Xa(xe,Hn);ze&&ze!=="no-styles"?va(xe,Y.parseStyle(ze)):Ko(xe,"style"),Ko(xe,Hn)})},Zt=Xl.DOM,Ar=()=>Ca(window),Wr=Y=>window.scrollTo(Y.x,Y.y),et=fl().fold(()=>({bind:pn,unbind:pn}),Y=>{const oe=Pe(),xe=Ye(),ze=Ye(),Qt=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Do=()=>{window.requestAnimationFrame(()=>{oe.on(la=>va(la,{top:Y.offsetTop+"px",left:Y.offsetLeft+"px",height:Y.height+"px",width:Y.width+"px"}))})},Fs=fe(()=>{Qt(),Do()},50);return{bind:la=>{oe.set(la),Fs.throttle(),xe.set(Dc("resize",Fs.throttle)),ze.set(Dc("scroll",Fs.throttle))},unbind:()=>{oe.on(()=>{xe.clear(),ze.clear()}),oe.clear()}}}),Dr=(Y,oe)=>{const xe=document.body,ze=document.documentElement,Qt=Y.getContainer(),Do=Zn.fromDom(Qt),Fs=Fe(Y),vo=oe.get(),Ms=Zn.fromDom(Y.getBody()),la=Uc.deviceType.isTouch(),vs=Qt.style,vc=Y.iframeElement,Wc=vc==null?void 0:vc.style,hs=Qs=>{Qs(xe,"tox-fullscreen"),Qs(ze,"tox-fullscreen"),Qs(Qt,"tox-fullscreen"),rr(Do).map(Dl=>Ss(Dl).dom).each(Dl=>{Qs(Dl,"tox-fullscreen"),Qs(Dl,"tox-shadowhost")})},ia=()=>{la&&Yn(Y.dom),hs(Zt.removeClass),et.unbind(),ht.from(oe.get()).each(Qs=>Qs.fullscreenChangeHandler.unbind())};if(vo)vo.fullscreenChangeHandler.unbind(),be(Y)&&wo(Fs)&&wr(us(Fs)),Wc.width=vo.iframeWidth,Wc.height=vo.iframeHeight,vs.width=vo.containerWidth,vs.height=vo.containerHeight,vs.top=vo.containerTop,vs.left=vo.containerLeft,ia(),Wr(vo.scrollPos),oe.set(null),Jl(Y,!1),Y.off("remove",ia);else{const Qs=pr(us(Fs),yn(),Ri=>{be(Y)&&!wo(Fs)&&oe.get()!==null&&Dr(Y,oe)}),Dl={scrollPos:Ar(),containerWidth:vs.width,containerHeight:vs.height,containerTop:vs.top,containerLeft:vs.left,iframeWidth:Wc.width,iframeHeight:Wc.height,fullscreenChangeHandler:Qs};la&&Nt(Y.dom,Do,Ms),Wc.width=Wc.height="100%",vs.width=vs.height="",hs(Zt.addClass),et.bind(Do),Y.on("remove",ia),oe.set(Dl),be(Y)&&ns(Fs),Jl(Y,!0)}},Js=(Y,oe)=>{Y.addCommand("mceFullScreen",()=>{Dr(Y,oe)})},Zr=(Y,oe)=>xe=>{xe.setActive(oe.get()!==null);const ze=Qt=>xe.setActive(Qt.state);return Y.on("FullscreenStateChanged",ze),()=>Y.off("FullscreenStateChanged",ze)},dd=(Y,oe)=>{const xe=()=>Y.execCommand("mceFullScreen");Y.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:xe,onSetup:Zr(Y,oe)}),Y.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:xe,onSetup:Zr(Y,oe)})};var fo=()=>{bt.add("fullscreen",Y=>{const oe=ge(null);return Y.inline||(ie(Y),Js(Y,oe),dd(Y,oe),Y.addShortcut("Meta+Shift+F","","mceFullScreen")),vn(oe)})};fo()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager");const bt=Object.getPrototypeOf,vn=($,K,ne)=>{var Re;return ne($,K.prototype)?!0:((Re=$.constructor)===null||Re===void 0?void 0:Re.name)===K.name},Dt=$=>{const K=typeof $;return $===null?"null":K==="object"&&Array.isArray($)?"array":K==="object"&&vn($,String,(ne,Re)=>Re.isPrototypeOf(ne))?"string":K},zt=$=>K=>Dt(K)===$,Xt=$=>K=>typeof K===$,Mn=$=>K=>$===K,Et=($,K)=>Ln($)&&vn($,K,(ne,Re)=>bt(ne)===Re),Mt=zt("string"),Ln=zt("object"),hn=$=>Et($,Object),tn=zt("array"),fn=Mn(null),dt=Xt("boolean"),Pt=$=>$==null,it=$=>!Pt($),tt=Xt("function"),pn=Xt("number"),Ke=($,K)=>{if(tn($)){for(let ne=0,Re=$.length;ne<Re;++ne)if(!K($[ne]))return!1;return!0}return!1},G=()=>{};class Xe{constructor(K,ne){this.tag=K,this.value=ne}static some(K){return new Xe(!0,K)}static none(){return Xe.singletonNone}fold(K,ne){return this.tag?ne(this.value):K()}isSome(){return this.tag}isNone(){return!this.tag}map(K){return this.tag?Xe.some(K(this.value)):Xe.none()}bind(K){return this.tag?K(this.value):Xe.none()}exists(K){return this.tag&&K(this.value)}forall(K){return!this.tag||K(this.value)}filter(K){return!this.tag||K(this.value)?this:Xe.none()}getOr(K){return this.tag?this.value:K}or(K){return this.tag?this:K}getOrThunk(K){return this.tag?this.value:K()}orThunk(K){return this.tag?this:K()}getOrDie(K){if(this.tag)return this.value;throw new Error(K??"Called getOrDie on None")}static from(K){return it(K)?Xe.some(K):Xe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(K){this.tag&&K(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Xe.singletonNone=new Xe(!1);const Ot=Object.keys,at=Object.hasOwnProperty,q=($,K)=>{const ne=Ot($);for(let Re=0,Nt=ne.length;Re<Nt;Re++){const Yn=ne[Re],Zt=$[Yn];K(Zt,Yn)}},ht=$=>(K,ne)=>{$[ne]=K},Dn=($,K,ne,Re)=>{q($,(Nt,Yn)=>{(K(Nt,Yn)?ne:Re)(Nt,Yn)})},Ye=($,K)=>{const ne={};return Dn($,K,ht(ne),G),ne},Pe=($,K)=>at.call($,K),fe=($,K)=>Pe($,K)&&$[K]!==void 0&&$[K]!==null,Go=Array.prototype.push,zn=$=>{const K=[];for(let ne=0,Re=$.length;ne<Re;++ne){if(!tn($[ne]))throw new Error("Arr.flatten item "+ne+" was not an array, input: "+$);Go.apply(K,$[ne])}return K},Wt=($,K)=>K>=0&&K<$.length?Xe.some($[K]):Xe.none(),O=$=>Wt($,0),Oo=($,K)=>{for(let ne=0;ne<$.length;ne++){const Re=K($[ne],ne);if(Re.isSome())return Re}return Xe.none()};typeof window<"u"||Function("return this;")();const rt=($,K,ne)=>{if(Mt(ne)||dt(ne)||pn(ne))$.setAttribute(K,ne+"");else throw console.error("Invalid call to Attribute.set. Key ",K,":: Value ",ne,":: Element ",$),new Error("Attribute value was not simple")},Fo=($,K,ne)=>{rt($.dom,K,ne)},cn=($,K)=>{$.dom.removeAttribute(K)},je=($,K)=>{const Re=(K||document).createElement("div");if(Re.innerHTML=$,!Re.hasChildNodes()||Re.childNodes.length>1){const Nt="HTML does not have a single root node";throw console.error(Nt,$),new Error(Nt)}return Bo(Re.childNodes[0])},po=($,K)=>{const Re=(K||document).createElement($);return Bo(Re)},es=($,K)=>{const Re=(K||document).createTextNode($);return Bo(Re)},Bo=$=>{if($==null)throw new Error("Node cannot be null or undefined");return{dom:$}},De={fromHtml:je,fromTag:po,fromText:es,fromDom:Bo,fromPoint:($,K,ne)=>Xe.from($.dom.elementFromPoint(K,ne)).map(Bo)};var mt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),H=tinymce.util.Tools.resolve("tinymce.util.URI");const Yr=$=>$.length>0,Pn=$=>K=>K.options.get($),is=$=>{const K=$.options.register;K("image_dimensions",{processor:"boolean",default:!0}),K("image_advtab",{processor:"boolean",default:!1}),K("image_uploadtab",{processor:"boolean",default:!0}),K("image_prepend_url",{processor:"string",default:""}),K("image_class_list",{processor:"object[]"}),K("image_description",{processor:"boolean",default:!0}),K("image_title",{processor:"boolean",default:!1}),K("image_caption",{processor:"boolean",default:!1}),K("image_list",{processor:ne=>{const Re=ne===!1||Mt(ne)||Ke(ne,Ln)||tt(ne);return Re?{value:ne,valid:Re}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Bn=Pn("image_dimensions"),Zn=Pn("image_advtab"),qt=Pn("image_uploadtab"),ro=Pn("image_prepend_url"),jt=Pn("image_class_list"),Ve=Pn("image_description"),Vr=Pn("image_title"),ks=Pn("image_caption"),mn=Pn("image_list"),Ka=Pn("a11y_advanced_options"),qo=Pn("automatic_uploads"),Ya=$=>Yr($.options.get("images_upload_url")),gs=$=>it($.options.get("images_upload_handler")),ir=($,K)=>Math.max(parseInt($,10),parseInt(K,10)),Oa=$=>new Promise(K=>{const ne=document.createElement("img"),Re=Yn=>{ne.onload=ne.onerror=null,ne.parentNode&&ne.parentNode.removeChild(ne),K(Yn)};ne.onload=()=>{const Yn=ir(ne.width,ne.clientWidth),Zt=ir(ne.height,ne.clientHeight),Ar={width:Yn,height:Zt};Re(Promise.resolve(Ar))},ne.onerror=()=>{Re(Promise.reject(`Failed to get image dimensions for: ${$}`))};const Nt=ne.style;Nt.visibility="hidden",Nt.position="fixed",Nt.bottom=Nt.left="0px",Nt.width=Nt.height="auto",document.body.appendChild(ne),ne.src=$}),_r=$=>($&&($=$.replace(/px$/,"")),$),us=$=>($.length>0&&/^[0-9]+$/.test($)&&($+="px"),$),ts=$=>{if($.margin){const K=String($.margin).split(" ");switch(K.length){case 1:$["margin-top"]=$["margin-top"]||K[0],$["margin-right"]=$["margin-right"]||K[0],$["margin-bottom"]=$["margin-bottom"]||K[0],$["margin-left"]=$["margin-left"]||K[0];break;case 2:$["margin-top"]=$["margin-top"]||K[0],$["margin-right"]=$["margin-right"]||K[1],$["margin-bottom"]=$["margin-bottom"]||K[0],$["margin-left"]=$["margin-left"]||K[1];break;case 3:$["margin-top"]=$["margin-top"]||K[0],$["margin-right"]=$["margin-right"]||K[1],$["margin-bottom"]=$["margin-bottom"]||K[2],$["margin-left"]=$["margin-left"]||K[1];break;case 4:$["margin-top"]=$["margin-top"]||K[0],$["margin-right"]=$["margin-right"]||K[1],$["margin-bottom"]=$["margin-bottom"]||K[2],$["margin-left"]=$["margin-left"]||K[3]}delete $.margin}return $},ot=($,K)=>{const ne=mn($);Mt(ne)?fetch(ne).then(Re=>{Re.ok&&Re.json().then(K)}):tt(ne)?ne(K):K(ne)},Je=($,K,ne)=>{const Re=()=>{ne.onload=ne.onerror=null,$.selection&&($.selection.select(ne),$.nodeChanged())};ne.onload=()=>{!K.width&&!K.height&&Bn($)&&$.dom.setAttribs(ne,{width:String(ne.clientWidth),height:String(ne.clientHeight)}),Re()},ne.onerror=Re},Gt=$=>new Promise((K,ne)=>{const Re=new FileReader;Re.onload=()=>{K(Re.result)},Re.onerror=()=>{var Nt;ne((Nt=Re.error)===null||Nt===void 0?void 0:Nt.message)},Re.readAsDataURL($)}),nn=$=>$.nodeName==="IMG"&&($.hasAttribute("data-mce-object")||$.hasAttribute("data-mce-placeholder")),In=($,K)=>{const ne=$.options.get;return H.isDomSafe(K,"img",{allow_html_data_urls:ne("allow_html_data_urls"),allow_script_urls:ne("allow_script_urls"),allow_svg_data_urls:ne("allow_svg_data_urls")})},Ao=mt.DOM,Rs=$=>$.style.marginLeft&&$.style.marginRight&&$.style.marginLeft===$.style.marginRight?_r($.style.marginLeft):"",pa=$=>$.style.marginTop&&$.style.marginBottom&&$.style.marginTop===$.style.marginBottom?_r($.style.marginTop):"",rr=$=>$.style.borderWidth?_r($.style.borderWidth):"",Ss=($,K)=>{var ne;return $.hasAttribute(K)&&(ne=$.getAttribute(K))!==null&&ne!==void 0?ne:""},Or=$=>$.parentNode!==null&&$.parentNode.nodeName==="FIGURE",pt=($,K,ne)=>{ne===""||ne===null?$.removeAttribute(K):$.setAttribute(K,ne)},oo=$=>{const K=Ao.create("figure",{class:"image"});Ao.insertAfter(K,$),K.appendChild($),K.appendChild(Ao.create("figcaption",{contentEditable:"true"},"Caption")),K.contentEditable="false"},ba=$=>{const K=$.parentNode;it(K)&&(Ao.insertAfter($,K),Ao.remove(K))},ar=$=>{Or($)?ba($):oo($)},Hc=($,K)=>{const ne=$.getAttribute("style"),Re=K(ne!==null?ne:"");Re.length>0?($.setAttribute("style",Re),$.setAttribute("data-mce-style",Re)):$.removeAttribute("style")},Xa=($,K)=>(ne,Re,Nt)=>{const Yn=ne.style;Yn[Re]?(Yn[Re]=us(Nt),Hc(ne,K)):pt(ne,Re,Nt)},Ko=($,K)=>$.style[K]?_r($.style[K]):Ss($,K),Ja=($,K)=>{const ne=us(K);$.style.marginLeft=ne,$.style.marginRight=ne},va=($,K)=>{const ne=us(K);$.style.marginTop=ne,$.style.marginBottom=ne},Uo=($,K)=>{const ne=us(K);$.style.borderWidth=ne},kn=($,K)=>{$.style.borderStyle=K},zr=$=>{var K;return(K=$.style.borderStyle)!==null&&K!==void 0?K:""},Aa=$=>it($)&&$.nodeName==="FIGURE",Qa=$=>$.nodeName==="IMG",ec=$=>Ao.getAttrib($,"alt").length===0&&Ao.getAttrib($,"role")==="presentation",Is=$=>ec($)?"":Ss($,"alt"),ur=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),bs=($,K)=>{var ne;const Re=document.createElement("img");return pt(Re,"style",K.style),(Rs(Re)||K.hspace!=="")&&Ja(Re,K.hspace),(pa(Re)||K.vspace!=="")&&va(Re,K.vspace),(rr(Re)||K.border!=="")&&Uo(Re,K.border),(zr(Re)||K.borderStyle!=="")&&kn(Re,K.borderStyle),$((ne=Re.getAttribute("style"))!==null&&ne!==void 0?ne:"")},pr=($,K)=>{const ne=document.createElement("img");if(bn($,{...K,caption:!1},ne),Ie(ne,K.alt,K.isDecorative),K.caption){const Re=Ao.create("figure",{class:"image"});return Re.appendChild(ne),Re.appendChild(Ao.create("figcaption",{contentEditable:"true"},"Caption")),Re.contentEditable="false",Re}else return ne},de=($,K)=>({src:Ss(K,"src"),alt:Is(K),title:Ss(K,"title"),width:Ko(K,"width"),height:Ko(K,"height"),class:Ss(K,"class"),style:$(Ss(K,"style")),caption:Or(K),hspace:Rs(K),vspace:pa(K),border:rr(K),borderStyle:zr(K),isDecorative:ec(K)}),se=($,K,ne,Re,Nt)=>{ne[Re]!==K[Re]&&Nt($,Re,String(ne[Re]))},Ie=($,K,ne)=>{if(ne){Ao.setAttrib($,"role","presentation");const Re=De.fromDom($);Fo(Re,"alt","")}else{if(fn(K)){const Re=De.fromDom($);cn(Re,"alt")}else{const Re=De.fromDom($);Fo(Re,"alt",K)}Ao.getAttrib($,"role")==="presentation"&&Ao.setAttrib($,"role","")}},Me=($,K,ne)=>{(ne.alt!==K.alt||ne.isDecorative!==K.isDecorative)&&Ie($,ne.alt,ne.isDecorative)},Kt=($,K)=>(ne,Re,Nt)=>{$(ne,Nt),Hc(ne,K)},bn=($,K,ne)=>{const Re=de($,ne);se(ne,Re,K,"caption",(Nt,Yn,Zt)=>ar(Nt)),se(ne,Re,K,"src",pt),se(ne,Re,K,"title",pt),se(ne,Re,K,"width",Xa("width",$)),se(ne,Re,K,"height",Xa("height",$)),se(ne,Re,K,"class",pt),se(ne,Re,K,"style",Kt((Nt,Yn)=>pt(Nt,"style",Yn),$)),se(ne,Re,K,"hspace",Kt(Ja,$)),se(ne,Re,K,"vspace",Kt(va,$)),se(ne,Re,K,"border",Kt(Uo,$)),se(ne,Re,K,"borderStyle",Kt(kn,$)),Me(ne,Re,K)},to=($,K)=>{const ne=$.dom.styles.parse(K),Re=ts(ne),Nt=$.dom.styles.parse($.dom.styles.serialize(Re));return $.dom.styles.serialize(Nt)},Zo=$=>{const K=$.selection.getNode(),ne=$.dom.getParent(K,"figure.image");return ne?$.dom.select("img",ne)[0]:K&&(K.nodeName!=="IMG"||nn(K))?null:K},qn=($,K)=>{var ne;const Re=$.dom,Nt=Ye($.schema.getTextBlockElements(),(Zt,Ar)=>!$.schema.isValidChild(Ar,"figure")),Yn=Re.getParent(K.parentNode,Zt=>fe(Nt,Zt.nodeName),$.getBody());return Yn&&(ne=Re.split(Yn,K))!==null&&ne!==void 0?ne:K},uo=$=>{const K=Zo($);return K?de(ne=>to($,ne),K):ur()},pe=($,K)=>{const ne=pr(Nt=>to($,Nt),K);$.dom.setAttrib(ne,"data-mce-id","__mcenew"),$.focus(),$.selection.setContent(ne.outerHTML);const Re=$.dom.select('*[data-mce-id="__mcenew"]')[0];if($.dom.setAttrib(Re,"data-mce-id",null),Aa(Re)){const Nt=qn($,Re);$.selection.select(Nt)}else $.selection.select(Re)},Ho=($,K)=>{$.dom.setAttrib(K,"src",K.getAttribute("src"))},br=($,K)=>{if(K){const ne=$.dom.is(K.parentNode,"figure.image")?K.parentNode:K;$.dom.remove(ne),$.focus(),$.nodeChanged(),$.dom.isEmpty($.getBody())&&($.setContent(""),$.selection.setCursorLocation())}},dr=($,K)=>{const ne=Zo($);if(ne)if(bn(Re=>to($,Re),K,ne),Ho($,ne),Aa(ne.parentNode)){const Re=ne.parentNode;qn($,Re),$.selection.select(ne.parentNode)}else $.selection.select(ne),Je($,K,ne)},Vc=($,K)=>{const ne=K.src;return{...K,src:In($,ne)?ne:""}},bo=($,K)=>{const ne=Zo($);if(ne){const Nt={...de(Zt=>to($,Zt),ne),...K},Yn=Vc($,Nt);Nt.src?dr($,Yn):br($,ne)}else K.src&&pe($,{...ur(),...K})},mr=($=>(...K)=>{if(K.length===0)throw new Error("Can't merge zero objects");const ne={};for(let Re=0;Re<K.length;Re++){const Nt=K[Re];for(const Yn in Nt)Pe(Nt,Yn)&&(ne[Yn]=$(ne[Yn],Nt[Yn]))}return ne})(($,K)=>hn($)&&hn(K)?mr($,K):K);var Ys=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),xs=tinymce.util.Tools.resolve("tinymce.util.Tools");const ds=$=>Mt($.value)?$.value:"",zc=$=>Mt($.text)?$.text:Mt($.title)?$.title:"",tc=($,K)=>{const ne=[];return xs.each($,Re=>{const Nt=zc(Re);if(Re.menu!==void 0){const Yn=tc(Re.menu,K);ne.push({text:Nt,items:Yn})}else{const Yn=K(Re);ne.push({text:Nt,value:Yn})}}),ne},gc=($=ds)=>K=>K?Xe.from(K).map(ne=>tc(ne,$)):Xe.none(),el=$=>gc(ds)($),tl=$=>Pe($,"items"),Vo=($,K)=>Oo($,ne=>tl(ne)?Vo(ne.items,K):ne.value===K?Xe.some(ne):Xe.none()),Ac={sanitizer:gc,sanitize:el,findEntry:($,K)=>$.bind(ne=>Vo(ne,K))},Da={makeTab:$=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},yr=$=>{const K=Ac.sanitizer(oe=>$.convertURL(oe.value||oe.url||"","src")),ne=new Promise(oe=>{ot($,xe=>{oe(K(xe).map(ze=>zn([[{text:"None",value:""}],ze])))})}),Re=Ac.sanitize(jt($)),Nt=Zn($),Yn=qt($),Zt=Ya($),Ar=gs($),Wr=uo($),et=Ve($),Dr=Vr($),Js=Bn($),Zr=ks($),dd=Ka($),fo=qo($),Y=Xe.some(ro($)).filter(oe=>Mt(oe)&&oe.length>0);return ne.then(oe=>({image:Wr,imageList:oe,classList:Re,hasAdvTab:Nt,hasUploadTab:Yn,hasUploadUrl:Zt,hasUploadHandler:Ar,hasDescription:et,hasImageTitle:Dr,hasDimensions:Js,hasImageCaption:Zr,prependURL:Y,hasAccessibilityOptions:dd,automaticUploads:fo}))},Es=$=>{const K={name:"src",type:"urlinput",filetype:"image",label:"Source"},ne=$.imageList.map(Dr=>({name:"images",type:"listbox",label:"Image list",items:Dr})),Re={name:"alt",type:"input",label:"Alternative description",enabled:!($.hasAccessibilityOptions&&$.image.isDecorative)},Nt={name:"title",type:"input",label:"Image title"},Yn={name:"dimensions",type:"sizeinput"},Zt={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Ar=$.classList.map(Dr=>({name:"classes",type:"listbox",label:"Class",items:Dr})),Wr={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},et=Dr=>Dr?{type:"grid",columns:2}:{type:"panel"};return zn([[K],ne.toArray(),$.hasAccessibilityOptions&&$.hasDescription?[Zt]:[],$.hasDescription?[Re]:[],$.hasImageTitle?[Nt]:[],$.hasDimensions?[Yn]:[],[{...et($.classList.isSome()&&$.hasImageCaption),items:zn([Ar.toArray(),$.hasImageCaption?[Wr]:[]])}]])},Kl={makeTab:$=>({title:"General",name:"general",items:Es($)}),makeItems:Es},aa={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},wa=$=>({prevImage:Ac.findEntry($.imageList,$.image.src),prevAlt:$.image.alt,open:!0}),Xs=$=>({src:{value:$.src,meta:{}},images:$.src,alt:$.alt,title:$.title,dimensions:{width:$.width,height:$.height},classes:$.class,caption:$.caption,style:$.style,vspace:$.vspace,border:$.border,hspace:$.hspace,borderstyle:$.borderStyle,fileinput:[],isDecorative:$.isDecorative}),Yl=($,K)=>({src:$.src.value,alt:($.alt===null||$.alt.length===0)&&K?null:$.alt,title:$.title,width:$.dimensions.width,height:$.dimensions.height,class:$.classes,style:$.style,caption:$.caption,hspace:$.hspace,vspace:$.vspace,border:$.border,borderStyle:$.borderstyle,isDecorative:$.isDecorative}),nc=($,K)=>/^(?:[a-zA-Z]+:)?\/\//.test(K)?Xe.none():$.prependURL.bind(ne=>K.substring(0,ne.length)!==ne?Xe.some(ne+K):Xe.none()),ca=($,K)=>{const ne=K.getData();nc($,ne.src.value).each(Re=>{K.setData({src:{value:Re,meta:ne.src.meta}})})},pc=($,K,ne)=>{$.hasDescription&&Mt(ne.alt)&&(K.alt=ne.alt),$.hasAccessibilityOptions&&(K.isDecorative=ne.isDecorative||K.isDecorative||!1),$.hasImageTitle&&Mt(ne.title)&&(K.title=ne.title),$.hasDimensions&&(Mt(ne.width)&&(K.dimensions.width=ne.width),Mt(ne.height)&&(K.dimensions.height=ne.height)),Mt(ne.class)&&Ac.findEntry($.classList,ne.class).each(Re=>{K.classes=Re.value}),$.hasImageCaption&&dt(ne.caption)&&(K.caption=ne.caption),$.hasAdvTab&&(Mt(ne.style)&&(K.style=ne.style),Mt(ne.vspace)&&(K.vspace=ne.vspace),Mt(ne.border)&&(K.border=ne.border),Mt(ne.hspace)&&(K.hspace=ne.hspace),Mt(ne.borderstyle)&&(K.borderstyle=ne.borderstyle))},fi=($,K)=>{const ne=K.getData(),Re=ne.src.meta;if(Re!==void 0){const Nt=mr({},ne);pc($,Nt,Re),K.setData(Nt)}},fl=($,K,ne,Re)=>{const Nt=Re.getData(),Yn=Nt.src.value,Zt=Nt.src.meta||{};!Zt.width&&!Zt.height&&K.hasDimensions&&(Yr(Yn)?$.imageSize(Yn).then(Ar=>{ne.open&&Re.setData({dimensions:Ar})}).catch(Ar=>console.error(Ar)):Re.setData({dimensions:{width:"",height:""}}))},gi=($,K,ne)=>{const Re=ne.getData(),Nt=Ac.findEntry($.imageList,Re.src.value);K.prevImage=Nt,ne.setData({images:Nt.map(Yn=>Yn.value).getOr("")})},Ca=($,K,ne,Re)=>{ca(K,Re),fi(K,Re),fl($,K,ne,Re),gi(K,ne,Re)},Dc=($,K,ne,Re)=>{const Nt=Re.getData(),Yn=Ac.findEntry(K.imageList,Nt.images);Yn.each(Zt=>{Nt.alt===""||ne.prevImage.map(Wr=>Wr.text===Nt.alt).getOr(!1)?Zt.value===""?Re.setData({src:Zt,alt:ne.prevAlt}):Re.setData({src:Zt,alt:Zt.text}):Re.setData({src:Zt})}),ne.prevImage=Yn,Ca($,K,ne,Re)},Xl=($,K,ne,Re)=>{const Nt=Re.getData();Re.block("Uploading image"),O(Nt.fileinput).fold(()=>{Re.unblock()},Yn=>{const Zt=URL.createObjectURL(Yn),Ar=()=>{Re.unblock(),URL.revokeObjectURL(Zt)},Wr=et=>{Re.setData({src:{value:et,meta:{}}}),Re.showTab("general"),Ca($,K,ne,Re)};Gt(Yn).then(et=>{const Dr=$.createBlobCache(Yn,Zt,et);K.automaticUploads?$.uploadImage(Dr).then(Js=>{Wr(Js.url),Ar()}).catch(Js=>{Ar(),$.alertErr(Js)}):($.addToBlobCache(Dr),Wr(Dr.blobUri()),Re.unblock())})})},Uc=($,K,ne)=>(Re,Nt)=>{Nt.name==="src"?Ca($,K,ne,Re):Nt.name==="images"?Dc($,K,ne,Re):Nt.name==="alt"?ne.prevAlt=Re.getData().alt:Nt.name==="fileinput"?Xl($,K,ne,Re):Nt.name==="isDecorative"&&Re.setEnabled("alt",!Re.getData().isDecorative)},Jl=$=>()=>{$.open=!1},W=$=>$.hasAdvTab||$.hasUploadUrl||$.hasUploadHandler?{type:"tabpanel",tabs:zn([[Kl.makeTab($)],$.hasAdvTab?[Da.makeTab($)]:[],$.hasUploadTab&&($.hasUploadUrl||$.hasUploadHandler)?[aa.makeTab($)]:[]])}:{type:"panel",items:Kl.makeItems($)},ie=($,K,ne)=>Re=>{const Nt=mr(Xs(K.image),Re.getData()),Yn={...Nt,style:bs(ne.normalizeCss,Yl(Nt,!1))};$.execCommand("mceUpdateImage",!1,Yl(Yn,K.hasAccessibilityOptions)),$.editorUpload.uploadImagesAuto(),Re.close()},be=$=>K=>In($,K)?Oa($.documentBaseURI.toAbsolute(K)).then(ne=>({width:String(ne.width),height:String(ne.height)})):Promise.resolve({width:"",height:""}),Fe=$=>(K,ne,Re)=>{var Nt;return $.editorUpload.blobCache.create({blob:K,blobUri:ne,name:(Nt=K.name)===null||Nt===void 0?void 0:Nt.replace(/\.[^\.]+$/,""),filename:K.name,base64:Re.split(",")[1]})},ct=$=>K=>{$.editorUpload.blobCache.add(K)},yn=$=>K=>{$.windowManager.alert(K)},ns=$=>K=>to($,K),wr=$=>K=>$.dom.parseStyle(K),wo=$=>(K,ne)=>$.dom.serializeStyle(K,ne),Cr=$=>K=>Ys($).upload([K],!1).then(ne=>{var Re;return ne.length===0?Promise.reject("Failed to upload image"):ne[0].status===!1?Promise.reject((Re=ne[0].error)===null||Re===void 0?void 0:Re.message):ne[0]}),$o=$=>{const K={imageSize:be($),addToBlobCache:ct($),createBlobCache:Fe($),alertErr:yn($),normalizeCss:ns($),parseStyle:wr($),serializeStyle:wo($),uploadImage:Cr($)};return{open:()=>{yr($).then(Re=>{const Nt=wa(Re);return{title:"Insert/Edit Image",size:"normal",body:W(Re),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Xs(Re.image),onSubmit:ie($,Re,K),onChange:Uc(K,Re,Nt),onClose:Jl(Nt)}}).then($.windowManager.open)}}},Zs=$=>{$.addCommand("mceImage",$o($).open),$.addCommand("mceUpdateImage",(K,ne)=>{$.undoManager.transact(()=>bo($,ne))})},Rc=$=>{const K=$.attr("class");return it(K)&&/\bimage\b/.test(K)},bc=$=>K=>{let ne=K.length;const Re=Nt=>{Nt.attr("contenteditable",$?"true":null)};for(;ne--;){const Nt=K[ne];Rc(Nt)&&(Nt.attr("contenteditable",$?"false":null),xs.each(Nt.getAll("figcaption"),Re))}},Hn=$=>{$.on("PreInit",()=>{$.parser.addNodeFilter("figure",bc(!0)),$.serializer.addNodeFilter("figure",bc(!1))})},Lo=$=>{$.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:$o($).open,onSetup:K=>(K.setActive(it(Zo($))),$.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",K.setActive).unbind)}),$.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:$o($).open}),$.ui.registry.addContextMenu("image",{update:K=>Aa(K)||Qa(K)&&!nn(K)?["image"]:[]})};var Ur=()=>{ge.add("image",$=>{is($),Hn($),Lo($),Zs($)})};Ur()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager");const bt=Ot=>at=>at.options.get(Ot),vn=Ot=>{const at=Ot.options.register;at("insertdatetime_dateformat",{processor:"string",default:Ot.translate("%Y-%m-%d")}),at("insertdatetime_timeformat",{processor:"string",default:Ot.translate("%H:%M:%S")}),at("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),at("insertdatetime_element",{processor:"boolean",default:!1})},Dt=bt("insertdatetime_dateformat"),zt=bt("insertdatetime_timeformat"),Xt=bt("insertdatetime_formats"),Mn=bt("insertdatetime_element"),Et=Ot=>{const at=Xt(Ot);return at.length>0?at[0]:zt(Ot)},Mt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Ln="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),hn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),tn="January February March April May June July August September October November December".split(" "),fn=(Ot,at)=>{if(Ot=""+Ot,Ot.length<at)for(let q=0;q<at-Ot.length;q++)Ot="0"+Ot;return Ot},dt=(Ot,at,q=new Date)=>(at=at.replace("%D","%m/%d/%Y"),at=at.replace("%r","%I:%M:%S %p"),at=at.replace("%Y",""+q.getFullYear()),at=at.replace("%y",""+q.getYear()),at=at.replace("%m",fn(q.getMonth()+1,2)),at=at.replace("%d",fn(q.getDate(),2)),at=at.replace("%H",""+fn(q.getHours(),2)),at=at.replace("%M",""+fn(q.getMinutes(),2)),at=at.replace("%S",""+fn(q.getSeconds(),2)),at=at.replace("%I",""+((q.getHours()+11)%12+1)),at=at.replace("%p",q.getHours()<12?"AM":"PM"),at=at.replace("%B",""+Ot.translate(tn[q.getMonth()])),at=at.replace("%b",""+Ot.translate(hn[q.getMonth()])),at=at.replace("%A",""+Ot.translate(Ln[q.getDay()])),at=at.replace("%a",""+Ot.translate(Mt[q.getDay()])),at=at.replace("%%","%"),at),Pt=(Ot,at,q,ht)=>{const Dn=Ot.dom.create("time",{datetime:q},ht);Ot.dom.replace(Dn,at),Ot.selection.select(Dn,!0),Ot.selection.collapse(!1)},it=(Ot,at)=>{if(Mn(Ot)){const q=dt(Ot,at);let ht;/%[HMSIp]/.test(at)?ht=dt(Ot,"%Y-%m-%dT%H:%M"):ht=dt(Ot,"%Y-%m-%d");const Dn=Ot.dom.getParent(Ot.selection.getStart(),"time");Dn?Pt(Ot,Dn,ht,q):Ot.insertContent('<time datetime="'+ht+'">'+q+"</time>")}else Ot.insertContent(dt(Ot,at))},tt=Ot=>{Ot.addCommand("mceInsertDate",(at,q)=>{it(Ot,q??Dt(Ot))}),Ot.addCommand("mceInsertTime",(at,q)=>{it(Ot,q??zt(Ot))})},pn=Ot=>{let at=Ot;return{get:()=>at,set:Dn=>{at=Dn}}};var Ke=tinymce.util.Tools.resolve("tinymce.util.Tools");const G=Ot=>{const at=Xt(Ot),q=pn(Et(Ot)),ht=Ye=>Ot.execCommand("mceInsertDate",!1,Ye);Ot.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:Ye=>Ye===q.get(),fetch:Ye=>{Ye(Ke.map(at,Pe=>({type:"choiceitem",text:dt(Ot,Pe),value:Pe})))},onAction:Ye=>{ht(q.get())},onItemAction:(Ye,Pe)=>{q.set(Pe),ht(Pe)}});const Dn=Ye=>()=>{q.set(Ye),ht(Ye)};Ot.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Ke.map(at,Ye=>({type:"menuitem",text:dt(Ot,Ye),onAction:Dn(Ye)}))})};var Xe=()=>{ge.add("insertdatetime",Ot=>{vn(Ot),tt(Ot),G(Ot)})};Xe()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager");const bt=(W,ie,be)=>{var Fe;return be(W,ie.prototype)?!0:((Fe=W.constructor)===null||Fe===void 0?void 0:Fe.name)===ie.name},vn=W=>{const ie=typeof W;return W===null?"null":ie==="object"&&Array.isArray(W)?"array":ie==="object"&&bt(W,String,(be,Fe)=>Fe.isPrototypeOf(be))?"string":ie},Dt=W=>ie=>vn(ie)===W,zt=W=>ie=>typeof ie===W,Xt=W=>ie=>W===ie,Mn=Dt("string"),Et=Dt("object"),Mt=Dt("array"),Ln=Xt(null),hn=zt("boolean"),tn=W=>W==null,fn=W=>!tn(W),dt=zt("function"),Pt=(W,ie)=>{if(Mt(W)){for(let be=0,Fe=W.length;be<Fe;++be)if(!ie(W[be]))return!1;return!0}return!1},it=()=>{},tt=W=>()=>W,pn=(W,ie)=>W===ie;class Ke{constructor(ie,be){this.tag=ie,this.value=be}static some(ie){return new Ke(!0,ie)}static none(){return Ke.singletonNone}fold(ie,be){return this.tag?be(this.value):ie()}isSome(){return this.tag}isNone(){return!this.tag}map(ie){return this.tag?Ke.some(ie(this.value)):Ke.none()}bind(ie){return this.tag?ie(this.value):Ke.none()}exists(ie){return this.tag&&ie(this.value)}forall(ie){return!this.tag||ie(this.value)}filter(ie){return!this.tag||ie(this.value)?this:Ke.none()}getOr(ie){return this.tag?this.value:ie}or(ie){return this.tag?this:ie}getOrThunk(ie){return this.tag?this.value:ie()}orThunk(ie){return this.tag?this:ie()}getOrDie(ie){if(this.tag)return this.value;throw new Error(ie??"Called getOrDie on None")}static from(ie){return fn(ie)?Ke.some(ie):Ke.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ie){this.tag&&ie(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ke.singletonNone=new Ke(!1);const G=Array.prototype.indexOf,Xe=Array.prototype.push,Ot=(W,ie)=>G.call(W,ie),at=(W,ie)=>Ot(W,ie)>-1,q=(W,ie)=>{const be=W.length,Fe=new Array(be);for(let ct=0;ct<be;ct++){const yn=W[ct];Fe[ct]=ie(yn,ct)}return Fe},ht=(W,ie)=>{for(let be=0,Fe=W.length;be<Fe;be++){const ct=W[be];ie(ct,be)}},Dn=(W,ie,be)=>(ht(W,(Fe,ct)=>{be=ie(be,Fe,ct)}),be),Ye=W=>{const ie=[];for(let be=0,Fe=W.length;be<Fe;++be){if(!Mt(W[be]))throw new Error("Arr.flatten item "+be+" was not an array, input: "+W);Xe.apply(ie,W[be])}return ie},Pe=(W,ie)=>Ye(q(W,ie)),fe=(W,ie)=>{for(let be=0;be<W.length;be++){const Fe=ie(W[be],be);if(Fe.isSome())return Fe}return Ke.none()},Go=(W,ie,be=pn)=>W.exists(Fe=>be(Fe,ie)),zn=W=>{const ie=[],be=Fe=>{ie.push(Fe)};for(let Fe=0;Fe<W.length;Fe++)W[Fe].each(be);return ie},Wt=(W,ie)=>W?Ke.some(ie):Ke.none(),O=W=>ie=>ie.options.get(W),Oo=W=>{const ie=W.options.register;ie("link_assume_external_targets",{processor:be=>{const Fe=Mn(be)||hn(be);return Fe?be===!0?{value:1,valid:Fe}:be==="http"||be==="https"?{value:be,valid:Fe}:{value:0,valid:Fe}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ie("link_context_toolbar",{processor:"boolean",default:!1}),ie("link_list",{processor:be=>Mn(be)||dt(be)||Pt(be,Et)}),ie("link_default_target",{processor:"string"}),ie("link_default_protocol",{processor:"string",default:"https"}),ie("link_target_list",{processor:be=>hn(be)||Pt(be,Et),default:!0}),ie("link_rel_list",{processor:"object[]",default:[]}),ie("link_class_list",{processor:"object[]",default:[]}),ie("link_title",{processor:"boolean",default:!0}),ie("allow_unsafe_link_target",{processor:"boolean",default:!1}),ie("link_quicklink",{processor:"boolean",default:!1})},rt=O("link_assume_external_targets"),Fo=O("link_context_toolbar"),cn=O("link_list"),je=O("link_default_target"),po=O("link_default_protocol"),es=O("link_target_list"),Bo=O("link_rel_list"),Ts=O("link_class_list"),De=O("link_title"),mt=O("allow_unsafe_link_target"),H=O("link_quicklink");var Yr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Pn=W=>Mn(W.value)?W.value:"",is=W=>Mn(W.text)?W.text:Mn(W.title)?W.title:"",Bn=(W,ie)=>{const be=[];return Yr.each(W,Fe=>{const ct=is(Fe);if(Fe.menu!==void 0){const yn=Bn(Fe.menu,ie);be.push({text:ct,items:yn})}else{const yn=ie(Fe);be.push({text:ct,value:yn})}}),be},Zn=(W=Pn)=>ie=>Ke.from(ie).map(be=>Bn(be,W)),jt={sanitize:W=>Zn(Pn)(W),sanitizeWith:Zn,createUi:(W,ie)=>be=>({name:W,type:"listbox",label:ie,items:be}),getValue:Pn},Ve=Object.keys,Vr=Object.hasOwnProperty,ks=(W,ie)=>{const be=Ve(W);for(let Fe=0,ct=be.length;Fe<ct;Fe++){const yn=be[Fe],ns=W[yn];ie(ns,yn)}},mn=W=>(ie,be)=>{W[be]=ie},Ka=(W,ie,be,Fe)=>{ks(W,(ct,yn)=>{(ie(ct,yn)?be:Fe)(ct,yn)})},qo=(W,ie)=>{const be={};return Ka(W,ie,mn(be),it),be},Ya=(W,ie)=>Vr.call(W,ie),gs=(W,ie)=>Ya(W,ie)&&W[ie]!==void 0&&W[ie]!==null;var ir=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Oa=tinymce.util.Tools.resolve("tinymce.util.URI");const _r=W=>fn(W)&&W.nodeName.toLowerCase()==="a",us=W=>_r(W)&&!!Je(W),ts=(W,ie)=>{if(W.collapsed)return[];{const be=W.cloneContents(),Fe=be.firstChild,ct=new ir(Fe,be),yn=[];let ns=Fe;do ie(ns)&&yn.push(ns);while(ns=ct.next());return yn}},ot=W=>/^\w+:/i.test(W),Je=W=>{var ie,be;return(be=(ie=W.getAttribute("data-mce-href"))!==null&&ie!==void 0?ie:W.getAttribute("href"))!==null&&be!==void 0?be:""},Gt=(W,ie)=>{const be=["noopener"],Fe=W?W.split(/\s+/):[],ct=wo=>Yr.trim(wo.sort().join(" ")),yn=wo=>(wo=ns(wo),wo.length>0?wo.concat(be):be),ns=wo=>wo.filter(Cr=>Yr.inArray(be,Cr)===-1),wr=ie?yn(Fe):ns(Fe);return wr.length>0?ct(wr):""},nn=W=>W.replace(/\uFEFF/g,""),In=(W,ie)=>(ie=ie||pa(W.selection.getRng())[0]||W.selection.getNode(),oo(ie)?Ke.from(W.dom.select("a[href]",ie)[0]):Ke.from(W.dom.getParent(ie,"a[href]"))),Ao=(W,ie)=>In(W,ie).isSome(),Rs=(W,ie)=>{const be=ie.fold(()=>W.getContent({format:"text"}),Fe=>Fe.innerText||Fe.textContent||"");return nn(be)},pa=W=>ts(W,us),rr=W=>Yr.grep(W,us),Ss=W=>rr(W).length>0,Or=W=>pa(W).length>0,pt=W=>{const ie=W.schema.getTextInlineElements(),be=yn=>yn.nodeType===1&&!_r(yn)&&!Ya(ie,yn.nodeName.toLowerCase());if(In(W).exists(yn=>yn.hasAttribute("data-mce-block")))return!1;const ct=W.selection.getRng();return ct.collapsed?!0:ts(ct,be).length===0},oo=W=>fn(W)&&W.nodeName==="FIGURE"&&/\bimage\b/i.test(W.className),ba=W=>Dn(["title","rel","class","target"],(be,Fe)=>(W[Fe].each(ct=>{be[Fe]=ct.length>0?ct:null}),be),{href:W.href}),ar=(W,ie)=>(ie==="http"||ie==="https")&&!ot(W)?ie+"://"+W:W,Hc=(W,ie)=>{const be={...ie};if(Bo(W).length===0&&!mt(W)){const Fe=Gt(be.rel,be.target==="_blank");be.rel=Fe||null}return Ke.from(be.target).isNone()&&es(W)===!1&&(be.target=je(W)),be.href=ar(be.href,rt(W)),be},Xa=(W,ie,be,Fe)=>{be.each(ct=>{Ya(ie,"innerText")?ie.innerText=ct:ie.textContent=ct}),W.dom.setAttribs(ie,Fe),W.selection.select(ie)},Ko=(W,ie,be,Fe)=>{const ct=W.dom;oo(ie)?Is(ct,ie,Fe):be.fold(()=>{W.execCommand("mceInsertLink",!1,Fe)},yn=>{W.insertContent(ct.createHTML("a",Fe,ct.encode(yn)))})},Ja=(W,ie,be)=>{const Fe=W.selection.getNode(),ct=In(W,Fe),yn=Hc(W,ba(be));W.undoManager.transact(()=>{be.href===ie.href&&ie.attach(),ct.fold(()=>{Ko(W,Fe,be.text,yn)},ns=>{W.focus(),Xa(W,ns,be.text,yn)})})},va=W=>{const ie=W.dom,be=W.selection,Fe=be.getBookmark(),ct=be.getRng().cloneRange(),yn=ie.getParent(ct.startContainer,"a[href]",W.getBody()),ns=ie.getParent(ct.endContainer,"a[href]",W.getBody());yn&&ct.setStartBefore(yn),ns&&ct.setEndAfter(ns),be.setRng(ct),W.execCommand("unlink"),be.moveToBookmark(Fe)},Uo=W=>{W.undoManager.transact(()=>{const ie=W.selection.getNode();oo(ie)?ec(W,ie):va(W),W.focus()})},kn=W=>{const{class:ie,href:be,rel:Fe,target:ct,text:yn,title:ns}=W;return qo({class:ie.getOrNull(),href:be,rel:Fe.getOrNull(),target:ct.getOrNull(),text:yn.getOrNull(),title:ns.getOrNull()},(wr,wo)=>Ln(wr)===!1)},zr=(W,ie)=>{const be=W.options.get,Fe={allow_html_data_urls:be("allow_html_data_urls"),allow_script_urls:be("allow_script_urls"),allow_svg_data_urls:be("allow_svg_data_urls")},ct=ie.href;return{...ie,href:Oa.isDomSafe(ct,"a",Fe)?ct:""}},Aa=(W,ie,be)=>{const Fe=zr(W,be);W.hasPlugin("rtc",!0)?W.execCommand("createlink",!1,kn(Fe)):Ja(W,ie,Fe)},Qa=W=>{W.hasPlugin("rtc",!0)?W.execCommand("unlink"):Uo(W)},ec=(W,ie)=>{var be;const Fe=W.dom.select("img",ie)[0];if(Fe){const ct=W.dom.getParents(Fe,"a[href]",ie)[0];ct&&((be=ct.parentNode)===null||be===void 0||be.insertBefore(Fe,ct),W.dom.remove(ct))}},Is=(W,ie,be)=>{var Fe;const ct=W.select("img",ie)[0];if(ct){const yn=W.create("a",be);(Fe=ct.parentNode)===null||Fe===void 0||Fe.insertBefore(yn,ct),yn.appendChild(ct)}},ur=W=>gs(W,"items"),bs=(W,ie)=>fe(ie,be=>ur(be)?bs(W,be.items):Wt(be.value===W,be)),pr=(W,ie,be,Fe)=>{const ct=Fe[ie],yn=W.length>0;return ct!==void 0?bs(ct,be).map(ns=>({url:{value:ns.value,meta:{text:yn?W:ns.text,attach:it}},text:yn?W:ns.text})):Ke.none()},de=(W,ie)=>ie==="link"?W.link:ie==="anchor"?W.anchor:Ke.none(),Ie={init:(W,ie)=>{const be={text:W.text,title:W.title},Fe=wo=>{var Cr;return Wt(be.title.length<=0,Ke.from((Cr=wo.meta)===null||Cr===void 0?void 0:Cr.title).getOr(""))},ct=wo=>{var Cr;return Wt(be.text.length<=0,Ke.from((Cr=wo.meta)===null||Cr===void 0?void 0:Cr.text).getOr(wo.value))},yn=wo=>{const Cr=ct(wo.url),$o=Fe(wo.url);return Cr.isSome()||$o.isSome()?Ke.some({...Cr.map(Zs=>({text:Zs})).getOr({}),...$o.map(Zs=>({title:Zs})).getOr({})}):Ke.none()},ns=(wo,Cr)=>{const $o=de(ie,Cr).getOr([]);return pr(be.text,Cr,$o,wo)};return{onChange:(wo,Cr)=>{const $o=Cr.name;return $o==="url"?yn(wo()):at(["anchor","link"],$o)?ns(wo(),$o):(($o==="text"||$o==="title")&&(be[$o]=wo()[$o]),Ke.none())}}},getDelta:pr};var Me=tinymce.util.Tools.resolve("tinymce.util.Delay");const Kt=(W,ie,be)=>{const Fe=W.selection.getRng();Me.setEditorTimeout(W,()=>{W.windowManager.confirm(ie,ct=>{W.selection.setRng(Fe),be(ct)})})},bn=W=>{const ie=W.href;return ie.indexOf("@")>0&&ie.indexOf("/")===-1&&ie.indexOf("mailto:")===-1?Ke.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Fe=>({...Fe,href:"mailto:"+ie})}):Ke.none()},to=(W,ie)=>be=>{const Fe=be.href;return W===1&&!ot(Fe)||W===0&&/^\s*www(\.|\d\.)/i.test(Fe)?Ke.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ie}:// prefix?`,preprocess:yn=>({...yn,href:ie+"://"+Fe})}):Ke.none()},qn={preprocess:(W,ie)=>fe([bn,to(rt(W),po(W))],be=>be(ie)).fold(()=>Promise.resolve(ie),be=>new Promise(Fe=>{Kt(W,be.message,ct=>{Fe(ct?be.preprocess(ie):ie)})}))},pe={getAnchors:W=>{const ie=W.dom.select("a:not([href])"),be=Pe(ie,Fe=>{const ct=Fe.name||Fe.id;return ct?[{text:ct,value:"#"+ct}]:[]});return be.length>0?Ke.some([{text:"None",value:""}].concat(be)):Ke.none()}},br={getClasses:W=>{const ie=Ts(W);return ie.length>0?jt.sanitize(ie):Ke.none()}},dr=W=>{try{return Ke.some(JSON.parse(W))}catch{return Ke.none()}},bo={getLinks:W=>{const ie=Fe=>W.convertURL(Fe.value||Fe.url||"","href"),be=cn(W);return new Promise(Fe=>{Mn(be)?fetch(be).then(ct=>ct.ok?ct.text().then(dr):Promise.reject()).then(Fe,()=>Fe(Ke.none())):dt(be)?be(ct=>Fe(Ke.some(ct))):Fe(Ke.from(be))}).then(Fe=>Fe.bind(jt.sanitizeWith(ie)).map(ct=>ct.length>0?[{text:"None",value:""}].concat(ct):ct))}},vr={getRels:(W,ie)=>{const be=Bo(W);if(be.length>0){const Fe=Go(ie,"_blank"),ct=mt(W)===!1,yn=wr=>Gt(jt.getValue(wr),Fe);return(ct?jt.sanitizeWith(yn):jt.sanitize)(be)}return Ke.none()}},mr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],xs={getTargets:W=>{const ie=es(W);return Mt(ie)?jt.sanitize(ie).orThunk(()=>Ke.some(mr)):ie===!1?Ke.none():Ke.some(mr)}},ds=(W,ie,be)=>{const Fe=W.getAttrib(ie,be);return Fe!==null&&Fe.length>0?Ke.some(Fe):Ke.none()},zc=(W,ie)=>{const be=W.dom,ct=pt(W)?Ke.some(Rs(W.selection,ie)):Ke.none(),yn=ie.bind($o=>Ke.from(be.getAttrib($o,"href"))),ns=ie.bind($o=>Ke.from(be.getAttrib($o,"target"))),wr=ie.bind($o=>ds(be,$o,"rel")),wo=ie.bind($o=>ds(be,$o,"class")),Cr=ie.bind($o=>ds(be,$o,"title"));return{url:yn,text:ct,title:Cr,target:ns,rel:wr,linkClass:wo}},gc={collect:(W,ie)=>bo.getLinks(W).then(be=>{const Fe=zc(W,ie);return{anchor:Fe,catalogs:{targets:xs.getTargets(W),rels:vr.getRels(W,Fe.target),classes:br.getClasses(W),anchor:pe.getAnchors(W),link:be},optNode:ie,flags:{titleEnabled:De(W)}}})},el=(W,ie)=>be=>{const Fe=be.getData();if(!Fe.url.value){Qa(W),be.close();return}const ct=wr=>Ke.from(Fe[wr]).filter(wo=>!Go(ie.anchor[wr],wo)),yn={href:Fe.url.value,text:ct("text"),target:ct("target"),rel:ct("rel"),class:ct("linkClass"),title:ct("title")},ns={href:Fe.url.value,attach:Fe.url.meta!==void 0&&Fe.url.meta.attach?Fe.url.meta.attach:it};qn.preprocess(W,yn).then(wr=>{Aa(W,ns,wr)}),be.close()},tl=W=>{const ie=In(W);return gc.collect(W,ie)},Vo=(W,ie)=>{const be=W.anchor,Fe=be.url.getOr("");return{url:{value:Fe,meta:{original:{value:Fe}}},text:be.text.getOr(""),title:be.title.getOr(""),anchor:Fe,link:Fe,rel:be.rel.getOr(""),target:be.target.or(ie).getOr(""),linkClass:be.linkClass.getOr("")}},ya=(W,ie,be)=>{const Fe=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],ct=W.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),yn=W.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],ns=Ke.from(je(be)),wr=Vo(W,ns),wo=W.catalogs,Cr=Ie.init(wr,wo);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Ye([Fe,ct,yn,zn([wo.anchor.map(jt.createUi("anchor","Anchors")),wo.rels.map(jt.createUi("rel","Rel")),wo.targets.map(jt.createUi("target","Open link in...")),wo.link.map(jt.createUi("link","Link list")),wo.classes.map(jt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:wr,onChange:(Zs,{name:Rc})=>{Cr.onChange(Zs.getData,{name:Rc}).each(bc=>{Zs.setData(bc)})},onSubmit:ie}},Ac=W=>{tl(W).then(be=>{const Fe=el(W,be);return ya(be,Fe,W)}).then(be=>{W.windowManager.open(be)})},hc=W=>{W.addCommand("mceLink",(ie,be)=>{(be==null?void 0:be.dialog)===!0||!H(W)?Ac(W):W.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var Da=tinymce.util.Tools.resolve("tinymce.util.VK");const yr=(W,ie)=>{document.body.appendChild(W),W.dispatchEvent(ie),document.body.removeChild(W)},Es=W=>{const ie=document.createElement("a");ie.target="_blank",ie.href=W,ie.rel="noreferrer noopener";const be=document.createEvent("MouseEvents");be.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),yr(ie,be)},au=(W,ie)=>W.dom.getParent(ie,"a[href]"),Kl=W=>au(W,W.selection.getStart()),Yo=W=>W.altKey===!0&&W.shiftKey===!1&&W.ctrlKey===!1&&W.metaKey===!1,aa=(W,ie)=>{if(ie){const be=Je(ie);if(/^#/.test(be)){const Fe=W.dom.select(be);Fe.length&&W.selection.scrollIntoView(Fe[0],!0)}else Es(ie.href)}},wa=W=>()=>{W.execCommand("mceLink",!1,{dialog:!0})},Xs=W=>()=>{aa(W,Kl(W))},Yl=W=>{W.on("click",ie=>{const be=au(W,ie.target);be&&Da.metaKeyPressed(ie)&&(ie.preventDefault(),aa(W,be))}),W.on("keydown",ie=>{if(!ie.isDefaultPrevented()&&ie.keyCode===13&&Yo(ie)){const be=Kl(W);be&&(ie.preventDefault(),aa(W,be))}})},nc=(W,ie)=>(W.on("NodeChange",ie),()=>W.off("NodeChange",ie)),ca=W=>ie=>{const be=()=>ie.setActive(!W.mode.isReadOnly()&&Ao(W,W.selection.getNode()));return be(),nc(W,be)},pc=W=>(W.selection.isCollapsed()?rr(W.dom.getParents(W.selection.getStart())):pa(W.selection.getRng())).length===1,fi=W=>ie=>{const be=()=>ie.setEnabled(pc(W));return be(),nc(W,be)},fl=W=>ie=>{const be=ct=>Ss(ct)||Or(W.selection.getRng()),Fe=W.dom.getParents(W.selection.getStart());return ie.setEnabled(be(Fe)),nc(W,ct=>ie.setEnabled(be(ct.parents)))},gi=W=>{W.addShortcut("Meta+K","",()=>{W.execCommand("mceLink")})},Ca=W=>{W.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:wa(W),onSetup:ca(W)}),W.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Xs(W),onSetup:fi(W)}),W.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Qa(W),onSetup:fl(W)})},Dc=W=>{W.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Xs(W),onSetup:fi(W)}),W.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:wa(W)}),W.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Qa(W),onSetup:fl(W)})},Xl=W=>{const ie="link unlink openlink",be="link";W.ui.registry.addContextMenu("link",{update:Fe=>W.dom.isEditable(Fe)?Ss(W.dom.getParents(Fe,"a"))?ie:be:""})},Uc=W=>{const ie=ct=>{ct.selection.collapse(!1)},be=ct=>{const yn=W.selection.getNode();return ct.setEnabled(Ao(W,yn)),it},Fe=ct=>{const yn=In(W),ns=pt(W);if(yn.isNone()&&ns){const wr=Rs(W.selection,yn);return Wt(wr.length===0,ct)}else return Ke.none()};W.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ca(W)},label:"Link",predicate:ct=>Fo(W)&&Ao(W,ct),initValue:()=>In(W).fold(tt(""),Je),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:ct=>{const yn=W.selection.getNode();return ct.setActive(Ao(W,yn)),ca(W)(ct)},onAction:ct=>{const yn=ct.getValue(),ns=Fe(yn);Aa(W,{href:yn,attach:it},{href:yn,text:ns,title:Ke.none(),rel:Ke.none(),target:Ke.none(),class:Ke.none()}),ie(W),ct.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:be,onAction:ct=>{Qa(W),ct.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:be,onAction:ct=>{Xs(W)(),ct.hide()}}]})};var Jl=()=>{ge.add("link",W=>{Oo(W),Ca(W),Dc(W),Xl(W),Uc(W),Yl(W),hc(W),gi(W)})};Jl()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager");const bt=(E,M,z)=>{var ue;return z(E,M.prototype)?!0:((ue=E.constructor)===null||ue===void 0?void 0:ue.name)===M.name},vn=E=>{const M=typeof E;return E===null?"null":M==="object"&&Array.isArray(E)?"array":M==="object"&&bt(E,String,(z,ue)=>ue.isPrototypeOf(z))?"string":M},Dt=E=>M=>vn(M)===E,zt=E=>M=>typeof M===E,Xt=Dt("string"),Mn=Dt("object"),Et=Dt("array"),Mt=zt("boolean"),Ln=E=>E==null,hn=E=>!Ln(E),tn=zt("function"),fn=zt("number"),dt=()=>{},Pt=E=>()=>E,it=(E,M)=>E===M,tt=E=>M=>!E(M),pn=Pt(!1);class Ke{constructor(M,z){this.tag=M,this.value=z}static some(M){return new Ke(!0,M)}static none(){return Ke.singletonNone}fold(M,z){return this.tag?z(this.value):M()}isSome(){return this.tag}isNone(){return!this.tag}map(M){return this.tag?Ke.some(M(this.value)):Ke.none()}bind(M){return this.tag?M(this.value):Ke.none()}exists(M){return this.tag&&M(this.value)}forall(M){return!this.tag||M(this.value)}filter(M){return!this.tag||M(this.value)?this:Ke.none()}getOr(M){return this.tag?this.value:M}or(M){return this.tag?this:M}getOrThunk(M){return this.tag?this.value:M()}orThunk(M){return this.tag?this:M()}getOrDie(M){if(this.tag)return this.value;throw new Error(M??"Called getOrDie on None")}static from(M){return hn(M)?Ke.some(M):Ke.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(M){this.tag&&M(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ke.singletonNone=new Ke(!1);const G=Array.prototype.slice,Xe=Array.prototype.indexOf,Ot=Array.prototype.push,at=(E,M)=>Xe.call(E,M),q=(E,M)=>at(E,M)>-1,ht=(E,M)=>{for(let z=0,ue=E.length;z<ue;z++){const me=E[z];if(M(me,z))return!0}return!1},Dn=(E,M)=>{const z=E.length,ue=new Array(z);for(let me=0;me<z;me++){const Tt=E[me];ue[me]=M(Tt,me)}return ue},Ye=(E,M)=>{for(let z=0,ue=E.length;z<ue;z++){const me=E[z];M(me,z)}},Pe=(E,M)=>{const z=[];for(let ue=0,me=E.length;ue<me;ue++){const Tt=E[ue];M(Tt,ue)&&z.push(Tt)}return z},fe=(E,M)=>{if(E.length===0)return[];{let z=M(E[0]);const ue=[];let me=[];for(let Tt=0,_n=E.length;Tt<_n;Tt++){const Un=E[Tt],go=M(Un);go!==z&&(ue.push(me),me=[]),z=go,me.push(Un)}return me.length!==0&&ue.push(me),ue}},Go=(E,M,z)=>(Ye(E,(ue,me)=>{z=M(z,ue,me)}),z),zn=(E,M,z)=>{for(let ue=0,me=E.length;ue<me;ue++){const Tt=E[ue];if(M(Tt,ue))return Ke.some(Tt);if(z(Tt,ue))break}return Ke.none()},Wt=(E,M)=>zn(E,M,pn),O=E=>{const M=[];for(let z=0,ue=E.length;z<ue;++z){if(!Et(E[z]))throw new Error("Arr.flatten item "+z+" was not an array, input: "+E);Ot.apply(M,E[z])}return M},Oo=(E,M)=>O(Dn(E,M)),rt=E=>{const M=G.call(E,0);return M.reverse(),M},Fo=(E,M)=>M>=0&&M<E.length?Ke.some(E[M]):Ke.none(),cn=E=>Fo(E,0),je=E=>Fo(E,E.length-1),po=(E,M)=>{const z=[],ue=tn(M)?me=>ht(z,Tt=>M(Tt,me)):me=>q(z,me);for(let me=0,Tt=E.length;me<Tt;me++){const _n=E[me];ue(_n)||z.push(_n)}return z},es=(E,M,z=it)=>E.exists(ue=>z(ue,M)),Bo=(E,M,z=it)=>Ts(E,M,z).getOr(E.isNone()&&M.isNone()),Ts=(E,M,z)=>E.isSome()&&M.isSome()?Ke.some(z(E.getOrDie(),M.getOrDie())):Ke.none(),De=1,mt=(E,M)=>{const ue=(M||document).createElement("div");if(ue.innerHTML=E,!ue.hasChildNodes()||ue.childNodes.length>1){const me="HTML does not have a single root node";throw console.error(me,E),new Error(me)}return Pn(ue.childNodes[0])},H=(E,M)=>{const ue=(M||document).createElement(E);return Pn(ue)},Yr=(E,M)=>{const ue=(M||document).createTextNode(E);return Pn(ue)},Pn=E=>{if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},Bn={fromHtml:mt,fromTag:H,fromText:Yr,fromDom:Pn,fromPoint:(E,M,z)=>Ke.from(E.dom.elementFromPoint(M,z)).map(Pn)},Zn=(E,M)=>{const z=E.dom;if(z.nodeType!==De)return!1;{const ue=z;if(ue.matches!==void 0)return ue.matches(M);if(ue.msMatchesSelector!==void 0)return ue.msMatchesSelector(M);if(ue.webkitMatchesSelector!==void 0)return ue.webkitMatchesSelector(M);if(ue.mozMatchesSelector!==void 0)return ue.mozMatchesSelector(M);throw new Error("Browser lacks native selectors")}},qt=(E,M)=>E.dom===M.dom,ro=(E,M)=>{const z=E.dom,ue=M.dom;return z===ue?!1:z.contains(ue)},jt=Zn;var Ve=(E,M,z,ue,me)=>E(z,ue)?Ke.some(z):tn(me)&&me(z)?Ke.none():M(z,ue,me);typeof window<"u"||Function("return this;")();const Vr=E=>E.dom.nodeName.toLowerCase(),ks=E=>E.dom.nodeType,Ka=(E=>M=>ks(M)===E)(De),qo=E=>M=>Ka(M)&&Vr(M)===E,Ya=E=>Ke.from(E.dom.parentNode).map(Bn.fromDom),gs=E=>Ke.from(E.dom.parentElement).map(Bn.fromDom),ir=E=>Ke.from(E.dom.nextSibling).map(Bn.fromDom),Oa=E=>Dn(E.dom.childNodes,Bn.fromDom),_r=(E,M)=>{const z=E.dom.childNodes;return Ke.from(z[M]).map(Bn.fromDom)},us=E=>_r(E,0),ts=E=>_r(E,E.dom.childNodes.length-1),ot=(E,M,z)=>{let ue=E.dom;const me=tn(z)?z:pn;for(;ue.parentNode;){ue=ue.parentNode;const Tt=Bn.fromDom(ue);if(M(Tt))return Ke.some(Tt);if(me(Tt))break}return Ke.none()},Je=(E,M,z)=>Ve((me,Tt)=>Tt(me),ot,E,M,z),Gt=(E,M)=>{Ya(E).each(ue=>{ue.dom.insertBefore(M.dom,E.dom)})},nn=(E,M)=>{ir(E).fold(()=>{Ya(E).each(me=>{In(me,M)})},ue=>{Gt(ue,M)})},In=(E,M)=>{E.dom.appendChild(M.dom)},Ao=(E,M)=>{Ye(M,z=>{Gt(E,z)})},Rs=(E,M)=>{Ye(M,z=>{In(E,z)})},pa=E=>{E.dom.textContent="",Ye(Oa(E),M=>{rr(M)})},rr=E=>{const M=E.dom;M.parentNode!==null&&M.parentNode.removeChild(M)};var Ss=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Or=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),pt=tinymce.util.Tools.resolve("tinymce.util.VK");const oo=E=>Dn(E,Bn.fromDom),ba=Object.keys,ar=(E,M)=>{const z=ba(E);for(let ue=0,me=z.length;ue<me;ue++){const Tt=z[ue],_n=E[Tt];M(_n,Tt)}},Hc=E=>(M,z)=>{E[z]=M},Xa=(E,M,z,ue)=>{ar(E,(me,Tt)=>{(M(me,Tt)?z:ue)(me,Tt)})},Ko=(E,M)=>{const z={};return Xa(E,M,Hc(z),dt),z},Ja=(E,M,z)=>{if(Xt(z)||Mt(z)||fn(z))E.setAttribute(M,z+"");else throw console.error("Invalid call to Attribute.set. Key ",M,":: Value ",z,":: Element ",E),new Error("Attribute value was not simple")},va=(E,M)=>{const z=E.dom;ar(M,(ue,me)=>{Ja(z,me,ue)})},Uo=E=>Go(E.dom.attributes,(M,z)=>(M[z.name]=z.value,M),{}),kn=(E,M)=>Bn.fromDom(E.dom.cloneNode(M)),zr=E=>kn(E,!0),Aa=(E,M)=>{const z=Bn.fromTag(M),ue=Uo(E);return va(z,ue),z},Qa=(E,M)=>{const z=Aa(E,M);nn(E,z);const ue=Oa(E);return Rs(z,ue),rr(E),z};var ec=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Is=tinymce.util.Tools.resolve("tinymce.util.Tools");const ur=E=>M=>hn(M)&&M.nodeName.toLowerCase()===E,bs=E=>M=>hn(M)&&E.test(M.nodeName),pr=E=>hn(E)&&E.nodeType===3,de=E=>hn(E)&&E.nodeType===1,se=bs(/^(OL|UL|DL)$/),Ie=bs(/^(OL|UL)$/),Me=ur("ol"),Kt=bs(/^(LI|DT|DD)$/),bn=bs(/^(DT|DD)$/),to=bs(/^(TH|TD)$/),Zo=ur("br"),qn=E=>{var M;return((M=E.parentNode)===null||M===void 0?void 0:M.firstChild)===E},uo=(E,M)=>hn(M)&&M.nodeName in E.schema.getTextBlockElements(),pe=(E,M)=>hn(E)&&E.nodeName in M,Ho=(E,M)=>hn(M)&&M.nodeName in E.schema.getVoidElements(),br=(E,M)=>Zo(M)?E.isBlock(M.nextSibling)&&!Zo(M.previousSibling):!1,dr=(E,M,z)=>{const ue=E.isEmpty(M);return z&&E.select("span[data-mce-type=bookmark]",M).length>0?!1:ue},Vc=(E,M)=>E.isChildOf(M,E.getRoot()),bo=E=>M=>M.options.get(E),ml=E=>{const M=E.options.register;M("lists_indent_on_tab",{processor:"boolean",default:!0})},vr=bo("lists_indent_on_tab"),mr=bo("forced_root_block"),Ys=bo("forced_root_block_attrs"),xs=(E,M)=>{const z=E.dom,ue=E.schema.getBlockElements(),me=z.createFragment(),Tt=mr(E),_n=Ys(E);let Un,go,Ct=!1;for(go=z.create(Tt,_n),pe(M.firstChild,ue)||me.appendChild(go);Un=M.firstChild;){const ms=Un.nodeName;!Ct&&(ms!=="SPAN"||Un.getAttribute("data-mce-type")!=="bookmark")&&(Ct=!0),pe(Un,ue)?(me.appendChild(Un),go=null):(go||(go=z.create(Tt,_n),me.appendChild(go)),go.appendChild(Un))}return!Ct&&go&&go.appendChild(z.create("br",{"data-mce-bogus":"1"})),me},ds=ec.DOM,zc=(E,M,z)=>{const ue=Ct=>{const ms=Ct.parentNode;ms&&Is.each(me,Sa=>{ms.insertBefore(Sa,z.parentNode)}),ds.remove(Ct)},me=ds.select('span[data-mce-type="bookmark"]',M),Tt=xs(E,z),_n=ds.createRng();_n.setStartAfter(z),_n.setEndAfter(M);const Un=_n.extractContents();for(let Ct=Un.firstChild;Ct;Ct=Ct.firstChild)if(Ct.nodeName==="LI"&&E.dom.isEmpty(Ct)){ds.remove(Ct);break}E.dom.isEmpty(Un)||ds.insertAfter(Un,M),ds.insertAfter(Tt,M);const go=z.parentElement;go&&dr(E.dom,go)&&ue(go),ds.remove(z),dr(E.dom,M)&&ds.remove(M)},tc=qo("dd"),gc=qo("dt"),el=(E,M)=>{tc(M)?Qa(M,"dt"):gc(M)&&gs(M).each(z=>zc(E,z.dom,M.dom))},tl=E=>{gc(E)&&Qa(E,"dd")},Vo=(E,M,z)=>{M==="Indent"?Ye(z,tl):Ye(z,ue=>el(E,ue))},ya=(E,M)=>{if(pr(E))return{container:E,offset:M};const z=Ss.getNode(E,M);return pr(z)?{container:z,offset:M>=E.childNodes.length?z.data.length:0}:z.previousSibling&&pr(z.previousSibling)?{container:z.previousSibling,offset:z.previousSibling.data.length}:z.nextSibling&&pr(z.nextSibling)?{container:z.nextSibling,offset:0}:{container:E,offset:M}},Ac=E=>{const M=E.cloneRange(),z=ya(E.startContainer,E.startOffset);M.setStart(z.container,z.offset);const ue=ya(E.endContainer,E.endOffset);return M.setEnd(ue.container,ue.offset),M},hc=["OL","UL","DL"],Da=hc.join(","),yr=(E,M)=>{const z=M||E.selection.getStart(!0);return E.dom.getParent(z,Da,nc(E,z))},Es=(E,M)=>hn(E)&&M.length===1&&M[0]===E,au=E=>Pe(E.querySelectorAll(Da),se),Kl=E=>{const M=yr(E),z=E.selection.getSelectedBlocks();return Es(M,z)?au(M):Pe(z,ue=>se(ue)&&M!==ue)},Yo=(E,M)=>{const z=Is.map(M,ue=>{const me=E.dom.getParent(ue,"li,dd,dt",nc(E,ue));return me||ue});return po(z)},aa=E=>{const M=E.selection.getSelectedBlocks();return Pe(Yo(E,M),Kt)},wa=E=>Pe(aa(E),bn),Xs=(E,M)=>{const z=E.dom.getParents(M,"TD,TH");return z.length>0?z[0]:E.getBody()},Yl=(E,M)=>!se(M)&&!Kt(M)&&ht(hc,z=>E.isValidChild(M.nodeName,z)),nc=(E,M)=>{const z=E.dom.getParents(M,E.dom.isBlock);return Wt(z,me=>Yl(E.schema,me)).getOr(E.getBody())},ca=(E,M)=>{const z=E.dom.getParents(M,"ol,ul",nc(E,M));return je(z)},pc=E=>{const M=ca(E,E.selection.getStart()),z=Pe(E.selection.getSelectedBlocks(),Ie);return M.toArray().concat(z)},fi=E=>{const M=pc(E);return fl(E,M)},fl=(E,M)=>{const z=Dn(M,ue=>ca(E,ue).getOr(ue));return po(z)},gi=E=>/\btox\-/.test(E.className),Ca=(E,M)=>zn(E,se,to).exists(z=>z.nodeName===M&&!gi(z)),Dc=(E,M)=>M!==null&&!E.dom.isEditable(M),Xl=E=>{const M=yr(E);return Dc(E,M)},Uc=(E,M)=>{const z=E.dom.getParent(M,"ol,ul,dl");return Dc(E,z)},Jl=E=>ht(E.selection.getSelectedBlocks(),tt(E.dom.isEditable)),W=(E,M)=>{const z=E.selection.getNode();return M({parents:E.dom.getParents(z),element:z}),E.on("NodeChange",M),()=>E.off("NodeChange",M)},ie=(E,M)=>{const ue=(M||document).createDocumentFragment();return Ye(E,me=>{ue.appendChild(me.dom)}),Bn.fromDom(ue)},be=(E,M,z)=>E.dispatch("ListMutation",{action:M,element:z}),ct=(E=>M=>M.replace(E,""))(/^\s+|\s+$/g),yn=E=>E.length>0,ns=E=>!yn(E),wr=E=>E.style!==void 0&&tn(E.style.getPropertyValue),wo=(E,M,z)=>{if(!Xt(z))throw console.error("Invalid call to CSS.set. Property ",M,":: Value ",z,":: Element ",E),new Error("CSS value must be a string: "+z);wr(E)&&E.style.setProperty(M,z)},Cr=(E,M,z)=>{const ue=E.dom;wo(ue,M,z)},$o=(E,M)=>{In(E.item,M.list)},Zs=E=>{for(let M=1;M<E.length;M++)$o(E[M-1],E[M])},Rc=(E,M)=>{Ts(je(E),cn(M),$o)},bc=(E,M)=>{const z={list:Bn.fromTag(M,E),item:Bn.fromTag("li",E)};return In(z.list,z.item),z},Hn=(E,M,z)=>{const ue=[];for(let me=0;me<z;me++)ue.push(bc(E,M.listType));return ue},Lo=(E,M)=>{for(let z=0;z<E.length-1;z++)Cr(E[z].item,"list-style-type","none");je(E).each(z=>{va(z.list,M.listAttributes),va(z.item,M.itemAttributes),Rs(z.item,M.content)})},Ur=(E,M)=>{Vr(E.list)!==M.listType&&(E.list=Qa(E.list,M.listType)),va(E.list,M.listAttributes)},$=(E,M,z)=>{const ue=Bn.fromTag("li",E);return va(ue,M),Rs(ue,z),ue},K=(E,M)=>{In(E.list,M),E.item=M},ne=(E,M,z)=>{const ue=M.slice(0,z.depth);return je(ue).each(me=>{const Tt=$(E,z.itemAttributes,z.content);K(me,Tt),Ur(me,z)}),ue},Re=(E,M,z)=>{const ue=Hn(E,z,z.depth-M.length);return Zs(ue),Lo(ue,z),Rc(M,ue),M.concat(ue)},Nt=(E,M)=>{const z=Go(M,(ue,me)=>me.depth>ue.length?Re(E,ue,me):ne(E,ue,me),[]);return cn(z).map(ue=>ue.list)},Yn=E=>jt(E,"OL,UL"),Zt=E=>us(E).exists(Yn),Ar=E=>ts(E).exists(Yn),Wr=E=>E.depth>0,et=E=>E.isSelected,Dr=E=>{const M=Oa(E),z=Ar(E)?M.slice(0,-1):M;return Dn(z,zr)},Js=(E,M,z)=>Ya(E).filter(Ka).map(ue=>({depth:M,dirty:!1,isSelected:z,content:Dr(E),itemAttributes:Uo(E),listAttributes:Uo(ue),listType:Vr(ue)})),Zr=(E,M)=>{switch(E){case"Indent":M.depth++;break;case"Outdent":M.depth--;break;case"Flatten":M.depth=0}M.dirty=!0},dd=(E,M)=>{E.listType=M.listType,E.listAttributes={...M.listAttributes}},fo=E=>{E.listAttributes=Ko(E.listAttributes,(M,z)=>z!=="start")},Y=(E,M)=>{const z=E[M].depth,ue=Tt=>Tt.depth===z&&!Tt.dirty,me=Tt=>Tt.depth<z;return zn(rt(E.slice(0,M)),ue,me).orThunk(()=>zn(E.slice(M+1),ue,me))},oe=E=>(Ye(E,(M,z)=>{Y(E,z).fold(()=>{M.dirty&&fo(M)},ue=>dd(M,ue))}),E),xe=E=>{let M=E;return{get:()=>M,set:me=>{M=me}}},ze=(E,M,z,ue)=>us(ue).filter(Yn).fold(()=>{M.each(_n=>{qt(_n.start,ue)&&z.set(!0)});const me=Js(ue,E,z.get());M.each(_n=>{qt(_n.end,ue)&&z.set(!1)});const Tt=ts(ue).filter(Yn).map(_n=>Qt(E,M,z,_n)).getOr([]);return me.toArray().concat(Tt)},me=>Qt(E,M,z,me)),Qt=(E,M,z,ue)=>Oo(Oa(ue),me=>{const Tt=Yn(me)?Qt:ze,_n=E+1;return Tt(_n,M,z,me)}),Do=(E,M)=>{const z=xe(!1),ue=0;return Dn(E,me=>({sourceList:me,entries:Qt(ue,M,z,me)}))},Fs=(E,M)=>{const z=oe(M);return Dn(z,ue=>{const me=ie(ue.content);return Bn.fromDom(xs(E,me.dom))})},vo=(E,M)=>{const z=oe(M);return Nt(E.contentDocument,z).toArray()},Ms=(E,M)=>Oo(fe(M,Wr),z=>cn(z).exists(Wr)?vo(E,z):Fs(E,z)),la=(E,M)=>{Ye(Pe(E,et),z=>Zr(M,z))},vs=E=>{const M=Dn(aa(E),Bn.fromDom);return Ts(Wt(M,tt(Zt)),Wt(rt(M),tt(Zt)),(z,ue)=>({start:z,end:ue}))},vc=(E,M,z)=>{const ue=Do(M,vs(E));Ye(ue,me=>{la(me.entries,z);const Tt=Ms(E,me.entries);Ye(Tt,_n=>{be(E,z==="Indent"?"IndentList":"OutdentList",_n.dom)}),Ao(me.sourceList,Tt),rr(me.sourceList)})},Wc=(E,M)=>{const z=oo(fi(E)),ue=oo(wa(E));let me=!1;if(z.length||ue.length){const Tt=E.selection.getBookmark();vc(E,z,M),Vo(E,M,ue),E.selection.moveToBookmark(Tt),E.selection.setRng(Ac(E.selection.getRng())),E.nodeChanged(),me=!0}return me},hs=(E,M)=>!Xl(E)&&Wc(E,M),ia=E=>hs(E,"Indent"),Qs=E=>hs(E,"Outdent"),Dl=E=>hs(E,"Flatten"),Ri="\uFEFF",_s=E=>E===Ri;var yc=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Rl=ec.DOM,md=E=>{const M={},z=ue=>{let me=E[ue?"startContainer":"endContainer"],Tt=E[ue?"startOffset":"endOffset"];if(de(me)){const _n=Rl.create("span",{"data-mce-type":"bookmark"});me.hasChildNodes()?(Tt=Math.min(Tt,me.childNodes.length-1),ue?me.insertBefore(_n,me.childNodes[Tt]):Rl.insertAfter(_n,me.childNodes[Tt])):me.appendChild(_n),me=_n,Tt=0}M[ue?"startContainer":"endContainer"]=me,M[ue?"startOffset":"endOffset"]=Tt};return z(!0),E.collapsed||z(),M},hi=E=>{const M=ue=>{const me=Un=>{var go;let Ct=(go=Un.parentNode)===null||go===void 0?void 0:go.firstChild,ms=0;for(;Ct;){if(Ct===Un)return ms;(!de(Ct)||Ct.getAttribute("data-mce-type")!=="bookmark")&&ms++,Ct=Ct.nextSibling}return-1};let Tt=E[ue?"startContainer":"endContainer"],_n=E[ue?"startOffset":"endOffset"];if(Tt){if(de(Tt)&&Tt.parentNode){const Un=Tt;_n=me(Tt),Tt=Tt.parentNode,Rl.remove(Un),!Tt.hasChildNodes()&&Rl.isBlock(Tt)&&Tt.appendChild(Rl.create("br"))}E[ue?"startContainer":"endContainer"]=Tt,E[ue?"startOffset":"endOffset"]=_n}};M(!0),M();const z=Rl.createRng();return z.setStart(E.startContainer,E.startOffset),E.endContainer&&z.setEnd(E.endContainer,E.endOffset),Ac(z)},nl=E=>{switch(E){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Pr=(E,M,z)=>{const ue=z["list-style-type"]?z["list-style-type"]:null;E.setStyle(M,"list-style-type",ue)},oc=(E,M)=>{Is.each(M,(z,ue)=>{E.setAttribute(ue,z)})},Mc=(E,M,z)=>{oc(M,z["list-attributes"]),Is.each(E.select("li",M),ue=>{oc(ue,z["list-item-attributes"])})},ol=(E,M,z)=>{Pr(E,M,z),Mc(E,M,z)},Ha=(E,M,z)=>{Is.each(z,ue=>E.setStyle(M,ue,""))},Sr=(E,M)=>hn(M)&&!pe(M,E.schema.getBlockElements()),Zc=(E,M,z,ue)=>{let me=M[z?"startContainer":"endContainer"];const Tt=M[z?"startOffset":"endOffset"];de(me)&&(me=me.childNodes[Math.min(Tt,me.childNodes.length-1)]||me),!z&&Zo(me.nextSibling)&&(me=me.nextSibling);const _n=(Un,go)=>{var Ct;const ms=new Or(Un,ue),Sa=go?"next":"prev";let pl;for(;pl=ms[Sa]();)if(!(Ho(E,pl)||_s(pl.textContent)||((Ct=pl.textContent)===null||Ct===void 0?void 0:Ct.length)===0))return Ke.some(pl);return Ke.none()};if(z&&pr(me))if(_s(me.textContent))me=_n(me,!1).getOr(me);else for(me.parentNode!==null&&Sr(E,me.parentNode)&&(me=me.parentNode);me.previousSibling!==null&&(Sr(E,me.previousSibling)||pr(me.previousSibling));)me=me.previousSibling;if(!z&&pr(me))if(_s(me.textContent))me=_n(me,!0).getOr(me);else for(me.parentNode!==null&&Sr(E,me.parentNode)&&(me=me.parentNode);me.nextSibling!==null&&(Sr(E,me.nextSibling)||pr(me.nextSibling));)me=me.nextSibling;for(;me.parentNode!==ue;){const Un=me.parentNode;if(uo(E,me)||/^(TD|TH)$/.test(Un.nodeName))return me;me=Un}return me},im=(E,M,z)=>{const ue=[],me=E.dom,Tt=Zc(E,M,!0,z),_n=Zc(E,M,!1,z);let Un;const go=[];for(let Ct=Tt;Ct&&(go.push(Ct),Ct!==_n);Ct=Ct.nextSibling);return Is.each(go,Ct=>{var ms;if(uo(E,Ct)){ue.push(Ct),Un=null;return}if(me.isBlock(Ct)||Zo(Ct)){Zo(Ct)&&me.remove(Ct),Un=null;return}const Sa=Ct.nextSibling;if(yc.isBookmarkNode(Ct)&&(se(Sa)||uo(E,Sa)||!Sa&&Ct.parentNode===z)){Un=null;return}Un||(Un=me.create("p"),(ms=Ct.parentNode)===null||ms===void 0||ms.insertBefore(Un,Ct),ue.push(Un)),Un.appendChild(Ct)}),ue},cu=(E,M,z)=>{const ue=E.getStyle(M,"list-style-type");let me=z?z["list-style-type"]:"";return me=me===null?"":me,ue===me},lu=(E,M,z)=>{const ue=E.selection.getRng();let me="LI";const Tt=nc(E,E.selection.getStart(!0)),_n=E.dom;if(_n.getContentEditable(E.selection.getNode())==="false")return;M=M.toUpperCase(),M==="DL"&&(me="DT");const Un=md(ue),go=im(E,ue,Tt);Is.each(go,Ct=>{let ms;const Sa=Ct.previousSibling,pl=Ct.parentNode;Kt(pl)||(Sa&&se(Sa)&&Sa.nodeName===M&&cu(_n,Sa,z)?(ms=Sa,Ct=_n.rename(Ct,me),Sa.appendChild(Ct)):(ms=_n.create(M),pl.insertBefore(ms,Ct),ms.appendChild(Ct),Ct=_n.rename(Ct,me)),Ha(_n,Ct,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ol(_n,ms,z),Rr(E.dom,ms))}),E.selection.setRng(hi(Un))},ef=(E,M)=>se(E)&&E.nodeName===(M==null?void 0:M.nodeName),gl=(E,M,z)=>{const ue=E.getStyle(M,"list-style-type",!0),me=E.getStyle(z,"list-style-type",!0);return ue===me},iu=(E,M)=>E.className===M.className,fd=(E,M,z)=>ef(M,z)&&gl(E,M,z)&&iu(M,z),Rr=(E,M)=>{let z,ue=M.nextSibling;if(fd(E,M,ue)){const me=ue;for(;z=me.firstChild;)M.appendChild(z);E.remove(me)}if(ue=M.previousSibling,fd(E,M,ue)){const me=ue;for(;z=me.lastChild;)M.insertBefore(z,M.firstChild);E.remove(me)}},um=(E,M,z,ue)=>{if(M.nodeName!==z){const me=E.dom.rename(M,z);ol(E.dom,me,ue),be(E,nl(z),me)}else ol(E.dom,M,ue),be(E,nl(z),M)},$u=(E,M,z,ue,me)=>{const Tt=se(M);if(Tt&&M.nodeName===ue&&!Pu(me))Dl(E);else{lu(E,ue,me);const _n=md(E.selection.getRng()),Un=Tt?[M,...z]:z;Is.each(Un,go=>{um(E,go,ue,me)}),E.selection.setRng(hi(_n))}},Pu=E=>"list-style-type"in E,gd=(E,M,z,ue)=>{if(M!==E.getBody())if(M)if(M.nodeName===z&&!Pu(ue)&&!gi(M))Dl(E);else{const me=md(E.selection.getRng());ol(E.dom,M,ue);const Tt=E.dom.rename(M,z);Rr(E.dom,Tt),E.selection.setRng(hi(me)),lu(E,z,ue),be(E,nl(z),Tt)}else lu(E,z,ue),be(E,nl(z),M)},hd=(E,M,z)=>{const ue=yr(E);if(Uc(E,ue)||Jl(E))return;const me=Kl(E),Tt=Mn(z)?z:{};me.length>0?$u(E,ue,me,M,Tt):gd(E,ue,M,Tt)},pd=ec.DOM,Iu=(E,M)=>{const z=M.parentElement;if(z&&z.nodeName==="LI"&&z.firstChild===M){const ue=z.previousSibling;ue&&ue.nodeName==="LI"?(ue.appendChild(M),dr(E,z)&&pd.remove(z)):pd.setStyle(z,"listStyleType","none")}if(se(z)){const ue=z.previousSibling;ue&&ue.nodeName==="LI"&&ue.appendChild(M)}},tf=(E,M)=>{const z=Is.grep(E.select("ol,ul",M));Is.each(z,ue=>{Iu(E,ue)})},nf=(E,M,z,ue)=>{let me=M.startContainer;const Tt=M.startOffset;if(pr(me)&&(z?Tt<me.data.length:Tt>0))return me;const _n=E.schema.getNonEmptyElements();de(me)&&(me=Ss.getNode(me,Tt));const Un=new Or(me,ue);z&&br(E.dom,me)&&Un.next();const go=z?Un.next.bind(Un):Un.prev2.bind(Un);for(;me=go();)if(me.nodeName==="LI"&&!me.hasChildNodes()||_n[me.nodeName]||pr(me)&&me.data.length>0)return me;return null},uu=(E,M)=>{const z=M.childNodes;return z.length===1&&!se(z[0])&&E.isBlock(z[0])},Ep=(E,M)=>{uu(E,M)&&E.remove(M.firstChild,!0)},re=(E,M,z)=>{let ue;const me=uu(E,z)?z.firstChild:z;if(Ep(E,M),!dr(E,M,!0))for(;ue=M.firstChild;)me.appendChild(ue)},bd=(E,M,z)=>{let ue;const me=M.parentNode;if(!Vc(E,M)||!Vc(E,z))return;se(z.lastChild)&&(ue=z.lastChild),me===z.lastChild&&Zo(me.previousSibling)&&E.remove(me.previousSibling);const Tt=z.lastChild;Tt&&Zo(Tt)&&M.hasChildNodes()&&E.remove(Tt),dr(E,z,!0)&&pa(Bn.fromDom(z)),re(E,M,z),ue&&z.appendChild(ue);const Un=ro(Bn.fromDom(z),Bn.fromDom(M))?E.getParents(M,se,z):[];E.remove(M),Ye(Un,go=>{dr(E,go)&&go!==E.getRoot()&&E.remove(go)})},Nc=(E,M,z)=>{pa(Bn.fromDom(z)),bd(E.dom,M,z),E.selection.setCursorLocation(z,0)},Qf=(E,M,z,ue)=>{const me=E.dom;if(me.isEmpty(ue))Nc(E,z,ue);else{const Tt=md(M);bd(me,z,ue),E.selection.setRng(hi(Tt))}},_p=(E,M,z,ue)=>{const me=md(M);bd(E.dom,z,ue);const Tt=hi(me);E.selection.setRng(Tt)},Op=(E,M)=>{const z=E.dom,ue=E.selection,me=ue.getStart(),Tt=Xs(E,me),_n=z.getParent(ue.getStart(),"LI",Tt);if(_n){const Un=_n.parentElement;if(Un===E.getBody()&&dr(z,Un))return!0;const go=Ac(ue.getRng()),Ct=z.getParent(nf(E,go,M,Tt),"LI",Tt);if(Ct&&Ct!==_n)return E.undoManager.transact(()=>{M?Qf(E,go,Ct,_n):qn(_n)?Qs(E):_p(E,go,_n,Ct)}),!0;if(!Ct&&!M&&go.startOffset===0&&go.endOffset===0)return E.undoManager.transact(()=>{Dl(E)}),!0}return!1},os=(E,M,z)=>{const ue=E.getParent(M.parentNode,E.isBlock,z);E.remove(M),ue&&E.isEmpty(ue)&&E.remove(ue)},Ml=(E,M)=>{const z=E.dom,ue=E.selection.getStart(),me=Xs(E,ue),Tt=z.getParent(ue,z.isBlock,me);if(Tt&&z.isEmpty(Tt)){const _n=Ac(E.selection.getRng()),Un=z.getParent(nf(E,_n,M,me),"LI",me);if(Un){const go=pl=>q(["td","th","caption"],Vr(pl)),Ct=pl=>pl.dom===me,ms=Je(Bn.fromDom(Un),go,Ct),Sa=Je(Bn.fromDom(_n.startContainer),go,Ct);return Bo(ms,Sa,qt)?(E.undoManager.transact(()=>{os(z,Tt,me),Rr(z,Un.parentNode),E.selection.select(Un,!0),E.selection.collapse(M)}),!0):!1}}return!1},wc=(E,M)=>Op(E,M)||Ml(E,M),sl=E=>{const M=E.selection.getStart(),z=Xs(E,M);return E.dom.getParent(M,"LI,DT,DD",z)||aa(E).length>0},uh=E=>sl(E)?(E.undoManager.transact(()=>{E.execCommand("Delete"),tf(E.dom,E.getBody())}),!0):!1,Mi=(E,M)=>{const z=E.selection;return!Uc(E,z.getNode())&&(z.isCollapsed()?wc(E,M):uh(E))},hl=E=>{E.on("ExecCommand",M=>{const z=M.command.toLowerCase();(z==="delete"||z==="forwarddelete")&&sl(E)&&tf(E.dom,E.getBody())}),E.on("keydown",M=>{M.keyCode===pt.BACKSPACE?Mi(E,!1)&&M.preventDefault():M.keyCode===pt.DELETE&&Mi(E,!0)&&M.preventDefault()})},dm=E=>({backspaceDelete:M=>{Mi(E,M)}}),eg=(E,M)=>{const z=yr(E);z===null||Uc(E,z)||E.undoManager.transact(()=>{Mn(M.styles)&&E.dom.setStyles(z,M.styles),Mn(M.attrs)&&ar(M.attrs,(ue,me)=>E.dom.setAttrib(z,me,ue))})},dh=E=>{const M=rt(ct(E).split("")),z=Dn(M,(ue,me)=>{const Tt=ue.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,me)*Tt});return Go(z,(ue,me)=>ue+me,0)},jc=E=>{if(E--,E<0)return"";{const M=E%26,z=Math.floor(E/26),ue=jc(z),me=String.fromCharCode("A".charCodeAt(0)+M);return ue+me}},vd=E=>/^[A-Z]+$/.test(E),mh=E=>/^[a-z]+$/.test(E),rl=E=>/^[0-9]+$/.test(E),Ra=E=>rl(E)?2:vd(E)?0:mh(E)?1:ns(E)?3:4,yd=E=>{switch(Ra(E)){case 2:return Ke.some({listStyleType:Ke.none(),start:E});case 0:return Ke.some({listStyleType:Ke.some("upper-alpha"),start:dh(E).toString()});case 1:return Ke.some({listStyleType:Ke.some("lower-alpha"),start:dh(E).toString()});case 3:return Ke.some({listStyleType:Ke.none(),start:""});case 4:return Ke.none()}},wd=E=>{const M=parseInt(E.start,10);return es(E.listStyleType,"upper-alpha")?jc(M):es(E.listStyleType,"lower-alpha")?jc(M).toLowerCase():E.start},Nl=E=>{const M=yr(E);!Me(M)||Uc(E,M)||E.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:wd({start:E.dom.getAttrib(M,"start","1"),listStyleType:Ke.from(E.dom.getStyle(M,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:z=>{const ue=z.getData();yd(ue.start).each(me=>{E.execCommand("mceListUpdate",!1,{attrs:{start:me.start==="1"?"":me.start},styles:{"list-style-type":me.listStyleType.getOr("")}})}),z.close()}})},Bc=(E,M)=>()=>{const z=yr(E);return hn(z)&&z.nodeName===M},of=E=>{E.addCommand("mceListProps",()=>{Nl(E)})},sf=E=>{E.on("BeforeExecCommand",M=>{const z=M.command.toLowerCase();z==="indent"?ia(E):z==="outdent"&&Qs(E)}),E.addCommand("InsertUnorderedList",(M,z)=>{hd(E,"UL",z)}),E.addCommand("InsertOrderedList",(M,z)=>{hd(E,"OL",z)}),E.addCommand("InsertDefinitionList",(M,z)=>{hd(E,"DL",z)}),E.addCommand("RemoveList",()=>{Dl(E)}),of(E),E.addCommand("mceListUpdate",(M,z)=>{Mn(z)&&eg(E,z)}),E.addQueryStateHandler("InsertUnorderedList",Bc(E,"UL")),E.addQueryStateHandler("InsertOrderedList",Bc(E,"OL")),E.addQueryStateHandler("InsertDefinitionList",Bc(E,"DL"))};var rf=tinymce.util.Tools.resolve("tinymce.html.Node");const af=E=>E.type===3,Ql=E=>E.length===0,mm=E=>{const M=(me,Tt)=>{const _n=rf.create("li");Ye(me,Un=>_n.append(Un)),Tt?E.insert(_n,Tt,!0):E.append(_n)},z=(me,Tt)=>af(Tt)?[...me,Tt]:!Ql(me)&&!af(Tt)?(M(me,Tt),[]):me,ue=Go(E.children(),z,[]);Ql(ue)||M(ue)},fh=E=>{E.on("PreInit",()=>{const{parser:M}=E;M.addNodeFilter("ul,ol",z=>Ye(z,mm))})},A0=E=>{E.on("keydown",M=>{M.keyCode!==pt.TAB||pt.metaKeyPressed(M)||E.undoManager.transact(()=>{(M.shiftKey?Qs(E):ia(E))&&M.preventDefault()})})},gh=E=>{vr(E)&&A0(E),hl(E)},fm=(E,M)=>z=>W(E,me=>{z.setActive(Ca(me.parents,M)),z.setEnabled(!Uc(E,me.element))}),tg=E=>{const M=z=>()=>E.execCommand(z);E.hasPlugin("advlist")||(E.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:M("InsertOrderedList"),onSetup:fm(E,"OL")}),E.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:M("InsertUnorderedList"),onSetup:fm(E,"UL")}))},Ni=(E,M)=>z=>W(E,me=>z.setEnabled(Ca(me.parents,M)&&!Uc(E,me.element))),ng=E=>{const M={text:"List properties...",icon:"ordered-list",onAction:()=>E.execCommand("mceListProps"),onSetup:Ni(E,"OL")};E.ui.registry.addMenuItem("listprops",M),E.ui.registry.addContextMenu("lists",{update:z=>{const ue=yr(E,z);return Me(ue)?["listprops"]:[]}})};var js=()=>{ge.add("lists",E=>(ml(E),fh(E),E.hasPlugin("rtc",!0)?of(E):(gh(E),sf(E)),tg(E),ng(E),dm(E)))};js()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager");const bt=(de,se,Ie)=>{var Me;return Ie(de,se.prototype)?!0:((Me=de.constructor)===null||Me===void 0?void 0:Me.name)===se.name},vn=de=>{const se=typeof de;return de===null?"null":se==="object"&&Array.isArray(de)?"array":se==="object"&&bt(de,String,(Ie,Me)=>Me.isPrototypeOf(Ie))?"string":se},Dt=de=>se=>vn(se)===de,zt=Dt("string"),Xt=Dt("object"),Mn=Dt("array"),Et=de=>de==null,Mt=de=>!Et(de);class Ln{constructor(se,Ie){this.tag=se,this.value=Ie}static some(se){return new Ln(!0,se)}static none(){return Ln.singletonNone}fold(se,Ie){return this.tag?Ie(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?Ln.some(se(this.value)):Ln.none()}bind(se){return this.tag?se(this.value):Ln.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:Ln.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Mt(se)?Ln.some(se):Ln.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ln.singletonNone=new Ln(!1);const hn=Array.prototype.push,tn=(de,se)=>{for(let Ie=0,Me=de.length;Ie<Me;Ie++){const Kt=de[Ie];se(Kt,Ie)}},fn=de=>{const se=[];for(let Ie=0,Me=de.length;Ie<Me;++Ie){if(!Mn(de[Ie]))throw new Error("Arr.flatten item "+Ie+" was not an array, input: "+de);hn.apply(se,de[Ie])}return se},dt=de=>{let se=de;return{get:()=>se,set:Kt=>{se=Kt}}},Pt=Object.keys,it=Object.hasOwnProperty,tt=(de,se)=>{const Ie=Pt(de);for(let Me=0,Kt=Ie.length;Me<Kt;Me++){const bn=Ie[Me],to=de[bn];se(to,bn)}},pn=(de,se)=>Ke(de,se)?Ln.from(de[se]):Ln.none(),Ke=(de,se)=>it.call(de,se),G=de=>se=>se.options.get(de),Xe=de=>{const se=de.options.register;se("audio_template_callback",{processor:"function"}),se("video_template_callback",{processor:"function"}),se("iframe_template_callback",{processor:"function"}),se("media_live_embeds",{processor:"boolean",default:!0}),se("media_filter_html",{processor:"boolean",default:!0}),se("media_url_resolver",{processor:"function"}),se("media_alt_source",{processor:"boolean",default:!0}),se("media_poster",{processor:"boolean",default:!0}),se("media_dimensions",{processor:"boolean",default:!0})},Ot=G("audio_template_callback"),at=G("video_template_callback"),q=G("iframe_template_callback"),ht=G("media_live_embeds"),Dn=G("media_filter_html"),Ye=G("media_url_resolver"),Pe=G("media_alt_source"),fe=G("media_poster"),Go=G("media_dimensions");var zn=tinymce.util.Tools.resolve("tinymce.util.Tools"),Wt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),O=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Oo=Wt.DOM,rt=de=>de.replace(/px$/,""),Fo=de=>{const se=de.attr("style"),Ie=se?Oo.parseStyle(se):{};return{type:"ephox-embed-iri",source:de.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:pn(Ie,"max-width").map(rt).getOr(""),height:pn(Ie,"max-height").map(rt).getOr("")}},cn=(de,se)=>{let Ie={};const Kt=O({validate:!1,forced_root_block:!1},se).parse(de);for(let bn=Kt;bn;bn=bn.walk())if(bn.type===1){const to=bn.name;if(bn.attr("data-ephox-embed-iri")){Ie=Fo(bn);break}else!Ie.source&&to==="param"&&(Ie.source=bn.attr("movie")),(to==="iframe"||to==="object"||to==="embed"||to==="video"||to==="audio")&&(Ie.type||(Ie.type=to),Ie=zn.extend(bn.attributes.map,Ie)),to==="script"&&(Ie={type:"script",source:bn.attr("src")}),to==="source"&&(Ie.source?Ie.altsource||(Ie.altsource=bn.attr("src")):Ie.source=bn.attr("src")),to==="img"&&!Ie.poster&&(Ie.poster=bn.attr("src"))}return Ie.source=Ie.source||Ie.src||"",Ie.altsource=Ie.altsource||"",Ie.poster=Ie.poster||"",Ie},je=de=>{var se;const Ie={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Me=(se=de.toLowerCase().split(".").pop())!==null&&se!==void 0?se:"";return pn(Ie,Me).getOr("")};var po=tinymce.util.Tools.resolve("tinymce.html.Node"),es=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Bo=(de,se={})=>O({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...se},de),Ts=Wt.DOM,De=de=>/^[0-9.]+$/.test(de)?de+"px":de,mt=(de,se)=>{const Ie=se.attr("style"),Me=Ie?Ts.parseStyle(Ie):{};Mt(de.width)&&(Me["max-width"]=De(de.width)),Mt(de.height)&&(Me["max-height"]=De(de.height)),se.attr("style",Ts.serializeStyle(Me))},H=["source","altsource"],Yr=(de,se,Ie,Me)=>{let Kt=0,bn=0;const to=Bo(Me);to.addNodeFilter("source",qn=>Kt=qn.length);const Zo=to.parse(de);for(let qn=Zo;qn;qn=qn.walk())if(qn.type===1){const uo=qn.name;if(qn.attr("data-ephox-embed-iri")){mt(se,qn);break}else{switch(uo){case"video":case"object":case"embed":case"img":case"iframe":se.height!==void 0&&se.width!==void 0&&(qn.attr("width",se.width),qn.attr("height",se.height));break}if(Ie)switch(uo){case"video":qn.attr("poster",se.poster),qn.attr("src",null);for(let Ho=Kt;Ho<2;Ho++)if(se[H[Ho]]){const br=new po("source",1);br.attr("src",se[H[Ho]]),br.attr("type",se[H[Ho]+"mime"]||null),qn.append(br)}break;case"iframe":qn.attr("src",se.source);break;case"object":const pe=qn.getAll("img").length>0;if(se.poster&&!pe){qn.attr("src",se.poster);const Ho=new po("img",1);Ho.attr("src",se.poster),Ho.attr("width",se.width),Ho.attr("height",se.height),qn.append(Ho)}break;case"source":if(bn<2&&(qn.attr("src",se[H[bn]]),qn.attr("type",se[H[bn]+"mime"]||null),!se[H[bn]])){qn.remove();continue}bn++;break;case"img":se.poster||qn.remove();break}}}return es({},Me).serialize(Zo)},Pn=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],is=de=>{const se=de.match(/^(https?:\/\/|www\.)(.+)$/i);return se&&se.length>1?se[1]==="www."?"https://":se[1]:"https://"},Bn=(de,se)=>{const Ie=is(se),Me=de.regex.exec(se);let Kt=Ie+de.url;if(Mt(Me))for(let bn=0;bn<Me.length;bn++)Kt=Kt.replace("$"+bn,()=>Me[bn]?Me[bn]:"");return Kt.replace(/\?$/,"")},Zn=de=>{const se=Pn.filter(Ie=>Ie.regex.test(de));return se.length>0?zn.extend({},se[0],{url:Bn(se[0],de)}):null},qt=(de,se)=>{if(se)return se(de);{const Ie=de.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+de.source+'" width="'+de.width+'" height="'+de.height+'"'+Ie+"></iframe>"}},ro=de=>{let se='<object data="'+de.source+'" width="'+de.width+'" height="'+de.height+'" type="application/x-shockwave-flash">';return de.poster&&(se+='<img src="'+de.poster+'" width="'+de.width+'" height="'+de.height+'" />'),se+="</object>",se},jt=(de,se)=>se?se(de):'<audio controls="controls" src="'+de.source+'">'+(de.altsource?`
<source src="`+de.altsource+'"'+(de.altsourcemime?' type="'+de.altsourcemime+'"':"")+` />
`:"")+"</audio>",Ve=(de,se)=>se?se(de):'<video width="'+de.width+'" height="'+de.height+'"'+(de.poster?' poster="'+de.poster+'"':"")+` controls="controls">
<source src="`+de.source+'"'+(de.sourcemime?' type="'+de.sourcemime+'"':"")+` />
`+(de.altsource?'<source src="'+de.altsource+'"'+(de.altsourcemime?' type="'+de.altsourcemime+'"':"")+` />
`:"")+"</video>",Vr=de=>'<script src="'+de.source+'"><\/script>',ks=(de,se)=>{var Ie;const Me=zn.extend({},se);if(!Me.source&&(zn.extend(Me,cn((Ie=Me.embed)!==null&&Ie!==void 0?Ie:"",de.schema)),!Me.source))return"";Me.altsource||(Me.altsource=""),Me.poster||(Me.poster=""),Me.source=de.convertURL(Me.source,"source"),Me.altsource=de.convertURL(Me.altsource,"source"),Me.sourcemime=je(Me.source),Me.altsourcemime=je(Me.altsource),Me.poster=de.convertURL(Me.poster,"poster");const Kt=Zn(Me.source);if(Kt&&(Me.source=Kt.url,Me.type=Kt.type,Me.allowfullscreen=Kt.allowFullscreen,Me.width=Me.width||String(Kt.w),Me.height=Me.height||String(Kt.h)),Me.embed)return Yr(Me.embed,Me,!0,de.schema);{const bn=Ot(de),to=at(de),Zo=q(de);return Me.width=Me.width||"300",Me.height=Me.height||"150",zn.each(Me,(qn,uo)=>{Me[uo]=de.dom.encode(""+qn)}),Me.type==="iframe"?qt(Me,Zo):Me.sourcemime==="application/x-shockwave-flash"?ro(Me):Me.sourcemime.indexOf("audio")!==-1?jt(Me,bn):Me.type==="script"?Vr(Me):Ve(Me,to)}},mn=de=>de.hasAttribute("data-mce-object")||de.hasAttribute("data-ephox-embed-iri"),Ka=de=>{de.on("click keyup touchend",()=>{const se=de.selection.getNode();se&&de.dom.hasClass(se,"mce-preview-object")&&de.dom.getAttrib(se,"data-mce-selected")&&se.setAttribute("data-mce-selected","2")}),de.on("ObjectSelected",se=>{se.target.getAttribute("data-mce-object")==="script"&&se.preventDefault()}),de.on("ObjectResized",se=>{const Ie=se.target;if(Ie.getAttribute("data-mce-object")){let Me=Ie.getAttribute("data-mce-html");Me&&(Me=unescape(Me),Ie.setAttribute("data-mce-html",escape(Yr(Me,{width:String(se.width),height:String(se.height)},!1,de.schema))))}})},qo={},Ya=(de,se,Ie)=>new Promise((Me,Kt)=>{const bn=to=>(to.html&&(qo[de.source]=to),Me({url:de.source,html:to.html?to.html:se(de)}));qo[de.source]?bn(qo[de.source]):Ie({url:de.source},bn,Kt)}),gs=(de,se)=>Promise.resolve({html:se(de),url:de.source}),ir=de=>se=>ks(de,se),Oa=(de,se)=>{const Ie=Ye(de);return Ie?Ya(se,ir(de),Ie):gs(se,ir(de))},_r=de=>Ke(qo,de),us=(de,se)=>pn(se,de).bind(Ie=>pn(Ie,"meta")),ts=(de,se,Ie)=>Me=>{const Kt=()=>pn(de,Me),bn=()=>pn(se,Me),to=uo=>pn(uo,"value").bind(pe=>pe.length>0?Ln.some(pe):Ln.none()),Zo=()=>Kt().bind(uo=>Xt(uo)?to(uo).orThunk(bn):bn().orThunk(()=>Ln.from(uo))),qn=()=>bn().orThunk(()=>Kt().bind(uo=>Xt(uo)?to(uo):Ln.from(uo)));return{[Me]:(Me===Ie?Zo():qn()).getOr("")}},ot=(de,se)=>{const Ie={};return pn(de,"dimensions").each(Me=>{tn(["width","height"],Kt=>{pn(se,Kt).orThunk(()=>pn(Me,Kt)).each(bn=>Ie[Kt]=bn)})}),Ie},Je=(de,se)=>{const Ie=se&&se!=="dimensions"?us(se,de).getOr({}):{},Me=ts(de,Ie,se);return{...Me("source"),...Me("altsource"),...Me("poster"),...Me("embed"),...ot(de,Ie)}},Gt=de=>{const se={...de,source:{value:pn(de,"source").getOr("")},altsource:{value:pn(de,"altsource").getOr("")},poster:{value:pn(de,"poster").getOr("")}};return tn(["width","height"],Ie=>{pn(de,Ie).each(Me=>{const Kt=se.dimensions||{};Kt[Ie]=Me,se.dimensions=Kt})}),se},nn=de=>se=>{const Ie=se&&se.msg?"Media embed handler error: "+se.msg:"Media embed handler threw unknown error.";de.notificationManager.open({type:"error",text:Ie})},In=de=>{const se=de.selection.getNode(),Ie=mn(se)?de.serializer.serialize(se,{selection:!0}):"";return{embed:Ie,...cn(Ie,de.schema)}},Ao=(de,se)=>Ie=>{if(zt(Ie.url)&&Ie.url.trim().length>0){const Me=Ie.html,bn={...cn(Me,se.schema),source:Ie.url,embed:Me};de.setData(Gt(bn))}},Rs=(de,se)=>{const Ie=de.dom.select("*[data-mce-object]");for(let Me=0;Me<se.length;Me++)for(let Kt=Ie.length-1;Kt>=0;Kt--)se[Me]===Ie[Kt]&&Ie.splice(Kt,1);de.selection.select(Ie[0])},pa=(de,se)=>{const Ie=de.dom.select("*[data-mce-object]");de.insertContent(se),Rs(de,Ie),de.nodeChanged()},rr=(de,se,Ie)=>{var Me;se.embed=Yr((Me=se.embed)!==null&&Me!==void 0?Me:"",se,!1,Ie.schema),se.embed&&(de.source===se.source||_r(se.source))?pa(Ie,se.embed):Oa(Ie,se).then(Kt=>{pa(Ie,Kt.html)}).catch(nn(Ie))},Ss=de=>{const se=In(de),Ie=dt(se),Me=Gt(se),Kt=(vr,mr)=>{const Ys=Je(mr.getData(),"source");vr.source!==Ys.source&&(Ao(ml,de)({url:Ys.source,html:""}),Oa(de,Ys).then(Ao(ml,de)).catch(nn(de)))},bn=vr=>{var mr;const Ys=Je(vr.getData()),xs=cn((mr=Ys.embed)!==null&&mr!==void 0?mr:"",de.schema);vr.setData(Gt(xs))},to=(vr,mr)=>{const Ys=Je(vr.getData(),mr),xs=ks(de,Ys);vr.setData(Gt({...Ys,embed:xs}))},Zo=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],qn=Go(de)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],uo={title:"General",name:"general",items:fn([Zo,qn])},Ho={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},br=[];Pe(de)&&br.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),fe(de)&&br.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const dr={title:"Advanced",name:"advanced",items:br},Vc=[uo,Ho];br.length>0&&Vc.push(dr);const bo={type:"tabpanel",tabs:Vc},ml=de.windowManager.open({title:"Insert/Edit Media",size:"normal",body:bo,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:vr=>{const mr=Je(vr.getData());rr(Ie.get(),mr,de),vr.close()},onChange:(vr,mr)=>{switch(mr.name){case"source":Kt(Ie.get(),vr);break;case"embed":bn(vr);break;case"dimensions":case"altsource":case"poster":to(vr,mr.name);break}Ie.set(Je(vr.getData()))},initialData:Me})},Or=de=>({showDialog:()=>{Ss(de)}}),pt=de=>{const se=()=>{Ss(de)};de.addCommand("mceMedia",se)},oo=(de,se,Ie)=>se===""||de.length>=se.length&&de.substr(Ie,Ie+se.length)===se,ba=(de,se)=>oo(de,se,0);var ar=tinymce.util.Tools.resolve("tinymce.Env");const Hc=de=>{const se=de.name;return se==="iframe"||se==="video"||se==="audio"},Xa=(de,se,Ie,Me=null)=>{const Kt=de.attr(Ie);return Mt(Kt)?Kt:Ke(se,Ie)?null:Me},Ko=(de,se,Ie)=>{const Me=se.name==="img"||de.name==="video",Kt=Me?"300":null,bn=de.name==="audio"?"30":"150",to=Me?bn:null;se.attr({width:Xa(de,Ie,"width",Kt),height:Xa(de,Ie,"height",to)})},Ja=(de,se,Ie,Me)=>{const Kt=Bo(de.schema).parse(Me,{context:se});for(;Kt.firstChild;)Ie.append(Kt.firstChild)},va=(de,se)=>{const Ie=se.name,Me=new po("img",1);return kn(de,se,Me),Ko(se,Me,{}),Me.attr({style:se.attr("style"),src:ar.transparentSrc,"data-mce-object":Ie,class:"mce-object mce-object-"+Ie}),Me},Uo=(de,se)=>{var Ie;const Me=se.name,Kt=new po("span",1);Kt.attr({contentEditable:"false",style:se.attr("style"),"data-mce-object":Me,class:"mce-preview-object mce-object-"+Me}),kn(de,se,Kt);const bn=de.dom.parseStyle((Ie=se.attr("style"))!==null&&Ie!==void 0?Ie:""),to=new po(Me,1);if(Ko(se,to,bn),to.attr({src:se.attr("src"),style:se.attr("style"),class:se.attr("class")}),Me==="iframe")to.attr({allowfullscreen:se.attr("allowfullscreen"),frameborder:"0"});else{tn(["controls","crossorigin","currentTime","loop","muted","poster","preload"],pe=>{to.attr(pe,se.attr(pe))});const uo=Kt.attr("data-mce-html");Mt(uo)&&Ja(de,Me,to,unescape(uo))}const Zo=new po("span",1);return Zo.attr("class","mce-shim"),Kt.append(to),Kt.append(Zo),Kt},kn=(de,se,Ie)=>{var Me;const Kt=(Me=se.attributes)!==null&&Me!==void 0?Me:[];let bn=Kt.length;for(;bn--;){const uo=Kt[bn].name;let pe=Kt[bn].value;uo!=="width"&&uo!=="height"&&uo!=="style"&&!ba(uo,"data-mce-")&&((uo==="data"||uo==="src")&&(pe=de.convertURL(pe,uo)),Ie.attr("data-mce-p-"+uo,pe))}const to=es({inner:!0},de.schema),Zo=new po("div",1);tn(se.children(),uo=>Zo.append(uo));const qn=to.serialize(Zo);qn&&(Ie.attr("data-mce-html",escape(qn)),Ie.empty())},zr=de=>{const se=de.attr("class");return zt(se)&&/\btiny-pageembed\b/.test(se)},Aa=de=>{let se=de;for(;se=se.parent;)if(se.attr("data-ephox-embed-iri")||zr(se))return!0;return!1},Qa=de=>se=>{let Ie=se.length,Me;for(;Ie--;)Me=se[Ie],Me.parent&&(Me.parent.attr("data-mce-object")||(Hc(Me)&&ht(de)?Aa(Me)||Me.replace(Uo(de,Me)):Aa(Me)||Me.replace(va(de,Me))))},ec=(de,se,Ie)=>{const Me=de.options.get,Kt=Me("xss_sanitization"),bn=Dn(de);return Bo(de.schema,{sanitize:Kt,validate:bn}).parse(Ie,{context:se})},Is=de=>{de.on("PreInit",()=>{const{schema:se,serializer:Ie,parser:Me}=de,Kt=se.getBoolAttrs();tn("webkitallowfullscreen mozallowfullscreen".split(" "),bn=>{Kt[bn]={}}),tt({embed:["wmode"]},(bn,to)=>{const Zo=se.getElementRule(to);Zo&&tn(bn,qn=>{Zo.attributes[qn]={},Zo.attributesOrder.push(qn)})}),Me.addNodeFilter("iframe,video,audio,object,embed,script",Qa(de)),Ie.addAttributeFilter("data-mce-object",(bn,to)=>{var Zo;let qn=bn.length;for(;qn--;){const uo=bn[qn];if(!uo.parent)continue;const pe=uo.attr(to),Ho=new po(pe,1);if(pe!=="audio"&&pe!=="script"){const bo=uo.attr("class");bo&&bo.indexOf("mce-preview-object")!==-1&&uo.firstChild?Ho.attr({width:uo.firstChild.attr("width"),height:uo.firstChild.attr("height")}):Ho.attr({width:uo.attr("width"),height:uo.attr("height")})}Ho.attr({style:uo.attr("style")});const br=(Zo=uo.attributes)!==null&&Zo!==void 0?Zo:[];let dr=br.length;for(;dr--;){const bo=br[dr].name;bo.indexOf("data-mce-p-")===0&&Ho.attr(bo.substr(11),br[dr].value)}pe==="script"&&Ho.attr("type","text/javascript");const Vc=uo.attr("data-mce-html");if(Vc){const bo=ec(de,pe,unescape(Vc));tn(bo.children(),ml=>Ho.append(ml))}uo.replace(Ho)}})}),de.on("SetContent",()=>{const se=de.dom;tn(se.select("span.mce-preview-object"),Ie=>{se.select("span.mce-shim",Ie).length===0&&se.add(Ie,"span",{class:"mce-shim"})})})},ur=de=>{de.on("ResolveName",se=>{let Ie;se.target.nodeType===1&&(Ie=se.target.getAttribute("data-mce-object"))&&(se.name=Ie)})},bs=de=>{const se=()=>de.execCommand("mceMedia");de.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:se,onSetup:Ie=>{const Me=de.selection;return Ie.setActive(mn(Me.getNode())),Me.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",Ie.setActive).unbind}}),de.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:se})};var pr=()=>{ge.add("media",de=>(Xe(de),pt(de),bs(de),ur(de),Is(de),Ka(de),Or(de)))};pr()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager"),bt=tinymce.util.Tools.resolve("tinymce.Env");const vn=dt=>Pt=>Pt.options.get(dt),Dt=dt=>{const Pt=dt.options.register;Pt("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),Pt("pagebreak_split_block",{processor:"boolean",default:!1})},zt=vn("pagebreak_separator"),Xt=vn("pagebreak_split_block"),Mn="mce-pagebreak",Et=dt=>{const Pt=`<img src="${bt.transparentSrc}" class="${Mn}" data-mce-resize="false" data-mce-placeholder />`;return dt?`<p>${Pt}</p>`:Pt},Mt=dt=>{const Pt=zt(dt),it=()=>Xt(dt),tt=new RegExp(Pt.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,pn=>"\\"+pn),"gi");dt.on("BeforeSetContent",pn=>{pn.content=pn.content.replace(tt,Et(it()))}),dt.on("PreInit",()=>{dt.serializer.addNodeFilter("img",pn=>{let Ke=pn.length,G,Xe;for(;Ke--;)if(G=pn[Ke],Xe=G.attr("class"),Xe&&Xe.indexOf(Mn)!==-1){const Ot=G.parent;if(Ot&&dt.schema.getBlockElements()[Ot.name]&&it()){Ot.type=3,Ot.value=Pt,Ot.raw=!0,G.remove();continue}G.type=3,G.value=Pt,G.raw=!0}})})},Ln=dt=>{dt.addCommand("mcePageBreak",()=>{dt.insertContent(Et(Xt(dt)))})},hn=dt=>{dt.on("ResolveName",Pt=>{Pt.target.nodeName==="IMG"&&dt.dom.hasClass(Pt.target,Mn)&&(Pt.name="pagebreak")})},tn=dt=>{const Pt=()=>dt.execCommand("mcePageBreak");dt.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Pt}),dt.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Pt})};var fn=()=>{ge.add("pagebreak",dt=>{Dt(dt),Ln(dt),tn(dt),Mt(dt),hn(dt)})};fn()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager"),bt=tinymce.util.Tools.resolve("tinymce.Env"),vn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Dt=dt=>Pt=>Pt.options.get(dt),zt=Dt("content_style"),Xt=Dt("content_css_cors"),Mn=Dt("body_class"),Et=Dt("body_id"),Mt=dt=>{var Pt;let it="";const tt=dt.dom.encode,pn=(Pt=zt(dt))!==null&&Pt!==void 0?Pt:"";it+='<base href="'+tt(dt.documentBaseURI.getURI())+'">';const Ke=Xt(dt)?' crossorigin="anonymous"':"";vn.each(dt.contentCSS,Ye=>{it+='<link type="text/css" rel="stylesheet" href="'+tt(dt.documentBaseURI.toAbsolute(Ye))+'"'+Ke+">"}),pn&&(it+='<style type="text/css">'+pn+"</style>");const G=Et(dt),Xe=Mn(dt),at='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(bt.os.isMacOS()||bt.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",q=dt.getBody().dir,ht=q?' dir="'+tt(q)+'"':"";return"<!DOCTYPE html><html><head>"+it+'</head><body id="'+tt(G)+'" class="mce-content-body '+tt(Xe)+'"'+ht+">"+dt.getContent()+at+"</body></html>"},Ln=dt=>{const Pt=Mt(dt);dt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Pt}}).focus("close")},hn=dt=>{dt.addCommand("mcePreview",()=>{Ln(dt)})},tn=dt=>{const Pt=()=>dt.execCommand("mcePreview");dt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Pt}),dt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Pt})};var fn=()=>{ge.add("preview",dt=>{hn(dt),tn(dt)})};fn()})();(function(){var ge=tinymce.util.Tools.resolve("tinymce.PluginManager");const bt=(C,S,F)=>{var Z;return F(C,S.prototype)?!0:((Z=C.constructor)===null||Z===void 0?void 0:Z.name)===S.name},vn=C=>{const S=typeof C;return C===null?"null":S==="object"&&Array.isArray(C)?"array":S==="object"&&bt(C,String,(F,Z)=>Z.isPrototypeOf(F))?"string":S},Dt=C=>S=>vn(S)===C,zt=C=>S=>typeof S===C,Xt=C=>S=>C===S,Mn=Dt("string"),Et=Dt("array"),Mt=zt("boolean"),Ln=Xt(void 0),hn=C=>C==null,tn=C=>!hn(C),fn=zt("function"),dt=zt("number"),Pt=()=>{},it=(C,S)=>F=>C(S(F)),tt=C=>()=>C,pn=C=>C,Ke=(C,S)=>C===S;function G(C,...S){return(...F)=>{const Z=S.concat(F);return C.apply(null,Z)}}const Xe=C=>{C()},Ot=tt(!1),at=tt(!0);class q{constructor(S,F){this.tag=S,this.value=F}static some(S){return new q(!0,S)}static none(){return q.singletonNone}fold(S,F){return this.tag?F(this.value):S()}isSome(){return this.tag}isNone(){return!this.tag}map(S){return this.tag?q.some(S(this.value)):q.none()}bind(S){return this.tag?S(this.value):q.none()}exists(S){return this.tag&&S(this.value)}forall(S){return!this.tag||S(this.value)}filter(S){return!this.tag||S(this.value)?this:q.none()}getOr(S){return this.tag?this.value:S}or(S){return this.tag?this:S}getOrThunk(S){return this.tag?this.value:S()}orThunk(S){return this.tag?this:S()}getOrDie(S){if(this.tag)return this.value;throw new Error(S??"Called getOrDie on None")}static from(S){return tn(S)?q.some(S):q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(S){this.tag&&S(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}q.singletonNone=new q(!1);const ht=Object.keys,Dn=Object.hasOwnProperty,Ye=(C,S)=>{const F=ht(C);for(let Z=0,ae=F.length;Z<ae;Z++){const We=F[Z],ut=C[We];S(ut,We)}},Pe=C=>(S,F)=>{C[F]=S},fe=(C,S,F,Z)=>{Ye(C,(ae,We)=>{(S(ae,We)?F:Z)(ae,We)})},Go=(C,S)=>{const F={};return fe(C,S,Pe(F),Pt),F},zn=(C,S)=>{const F=[];return Ye(C,(Z,ae)=>{F.push(S(Z,ae))}),F},Wt=C=>zn(C,pn),O=C=>ht(C).length,Oo=(C,S)=>rt(C,S)?q.from(C[S]):q.none(),rt=(C,S)=>Dn.call(C,S),Fo=(C,S)=>rt(C,S)&&C[S]!==void 0&&C[S]!==null,cn=Array.prototype.indexOf,je=Array.prototype.push,po=(C,S)=>cn.call(C,S),es=(C,S)=>po(C,S)>-1,Bo=(C,S)=>{for(let F=0,Z=C.length;F<Z;F++){const ae=C[F];if(S(ae,F))return!0}return!1},Ts=(C,S)=>{const F=[];for(let Z=0;Z<C;Z++)F.push(S(Z));return F},De=(C,S)=>{const F=C.length,Z=new Array(F);for(let ae=0;ae<F;ae++){const We=C[ae];Z[ae]=S(We,ae)}return Z},mt=(C,S)=>{for(let F=0,Z=C.length;F<Z;F++){const ae=C[F];S(ae,F)}},H=(C,S)=>{for(let F=C.length-1;F>=0;F--){const Z=C[F];S(Z,F)}},Yr=(C,S)=>{const F=[],Z=[];for(let ae=0,We=C.length;ae<We;ae++){const ut=C[ae];(S(ut,ae)?F:Z).push(ut)}return{pass:F,fail:Z}},Pn=(C,S)=>{const F=[];for(let Z=0,ae=C.length;Z<ae;Z++){const We=C[Z];S(We,Z)&&F.push(We)}return F},is=(C,S,F)=>(H(C,(Z,ae)=>{F=S(F,Z,ae)}),F),Bn=(C,S,F)=>(mt(C,(Z,ae)=>{F=S(F,Z,ae)}),F),Zn=(C,S,F)=>{for(let Z=0,ae=C.length;Z<ae;Z++){const We=C[Z];if(S(We,Z))return q.some(We);if(F(We,Z))break}return q.none()},qt=(C,S)=>Zn(C,S,Ot),ro=C=>{const S=[];for(let F=0,Z=C.length;F<Z;++F){if(!Et(C[F]))throw new Error("Arr.flatten item "+F+" was not an array, input: "+C);je.apply(S,C[F])}return S},jt=(C,S)=>ro(De(C,S)),Ve=(C,S)=>{for(let F=0,Z=C.length;F<Z;++F){const ae=C[F];if(S(ae,F)!==!0)return!1}return!0},Vr=(C,S)=>{const F={};for(let Z=0,ae=C.length;Z<ae;Z++){const We=C[Z];F[String(We)]=S(We,Z)}return F},ks=(C,S)=>S>=0&&S<C.length?q.some(C[S]):q.none(),mn=C=>ks(C,0),Ka=C=>ks(C,C.length-1),qo=(C,S)=>{for(let F=0;F<C.length;F++){const Z=S(C[F],F);if(Z.isSome())return Z}return q.none()},Ya=8,gs=9,ir=11,Oa=1,_r=3,us=(C,S)=>{const Z=(S||document).createElement("div");if(Z.innerHTML=C,!Z.hasChildNodes()||Z.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,C),new Error(ae)}return Je(Z.childNodes[0])},ts=(C,S)=>{const Z=(S||document).createElement(C);return Je(Z)},ot=(C,S)=>{const Z=(S||document).createTextNode(C);return Je(Z)},Je=C=>{if(C==null)throw new Error("Node cannot be null or undefined");return{dom:C}},nn={fromHtml:us,fromTag:ts,fromText:ot,fromDom:Je,fromPoint:(C,S,F)=>q.from(C.dom.elementFromPoint(S,F)).map(Je)},In=(C,S)=>{const F=C.dom;if(F.nodeType!==Oa)return!1;{const Z=F;if(Z.matches!==void 0)return Z.matches(S);if(Z.msMatchesSelector!==void 0)return Z.msMatchesSelector(S);if(Z.webkitMatchesSelector!==void 0)return Z.webkitMatchesSelector(S);if(Z.mozMatchesSelector!==void 0)return Z.mozMatchesSelector(S);throw new Error("Browser lacks native selectors")}},Ao=C=>C.nodeType!==Oa&&C.nodeType!==gs&&C.nodeType!==ir||C.childElementCount===0,Rs=(C,S)=>{const F=S===void 0?document:S.dom;return Ao(F)?[]:De(F.querySelectorAll(C),nn.fromDom)},pa=(C,S)=>{const F=S===void 0?document:S.dom;return Ao(F)?q.none():q.from(F.querySelector(C)).map(nn.fromDom)},rr=(C,S)=>C.dom===S.dom,Ss=In;typeof window<"u"||Function("return this;")();const Or=C=>C.dom.nodeName.toLowerCase(),pt=C=>C.dom.nodeType,oo=C=>S=>pt(S)===C,ba=C=>pt(C)===Ya||Or(C)==="#comment",ar=oo(Oa),Hc=oo(_r),Xa=oo(gs),Ko=oo(ir),Ja=C=>S=>ar(S)&&Or(S)===C,va=C=>nn.fromDom(C.dom.ownerDocument),Uo=C=>Xa(C)?C:va(C),kn=C=>q.from(C.dom.parentNode).map(nn.fromDom),zr=(C,S)=>{const F=fn(S)?S:Ot;let Z=C.dom;const ae=[];for(;Z.parentNode!==null&&Z.parentNode!==void 0;){const We=Z.parentNode,ut=nn.fromDom(We);if(ae.push(ut),F(ut)===!0)break;Z=We}return ae},Aa=C=>q.from(C.dom.previousSibling).map(nn.fromDom),Qa=C=>q.from(C.dom.nextSibling).map(nn.fromDom),ec=C=>De(C.dom.childNodes,nn.fromDom),Is=(C,S)=>{const F=C.dom.childNodes;return q.from(F[S]).map(nn.fromDom)},ur=C=>Is(C,0),bs=C=>Ko(C)&&tn(C.dom.host),de=fn(Element.prototype.attachShadow)&&fn(Node.prototype.getRootNode)?C=>nn.fromDom(C.dom.getRootNode()):Uo,se=C=>{const S=de(C);return bs(S)?q.some(S):q.none()},Ie=C=>nn.fromDom(C.dom.host),Me=C=>{const S=Hc(C)?C.dom.parentNode:C.dom;if(S==null||S.ownerDocument===null)return!1;const F=S.ownerDocument;return se(nn.fromDom(S)).fold(()=>F.body.contains(S),it(Me,Ie))};var Kt=(C,S,F,Z,ae)=>C(F,Z)?q.some(F):fn(ae)&&ae(F)?q.none():S(F,Z,ae);const bn=(C,S,F)=>{let Z=C.dom;const ae=fn(F)?F:Ot;for(;Z.parentNode;){Z=Z.parentNode;const We=nn.fromDom(Z);if(S(We))return q.some(We);if(ae(We))break}return q.none()},to=(C,S,F)=>Kt((ae,We)=>We(ae),bn,C,S,F),Zo=(C,S)=>{const F=ae=>S(nn.fromDom(ae));return qt(C.dom.childNodes,F).map(nn.fromDom)},qn=(C,S,F)=>bn(C,Z=>In(Z,S),F),uo=(C,S)=>Zo(C,F=>In(F,S)),pe=(C,S)=>pa(S,C),Ho=(C,S,F)=>Kt((ae,We)=>In(ae,We),qn,C,S,F),br=C=>Ho(C,"[contenteditable]"),dr=(C,S=!1)=>Me(C)?C.dom.isContentEditable:br(C).fold(tt(S),F=>Vc(F)==="true"),Vc=C=>C.dom.contentEditable,bo=C=>C.nodeName.toLowerCase(),ml=C=>nn.fromDom(C.getBody()),vr=C=>S=>rr(S,ml(C)),mr=C=>C?C.replace(/px$/,""):"",Ys=C=>/^\d+(\.\d+)?$/.test(C)?C+"px":C,xs=C=>nn.fromDom(C.selection.getStart()),ds=C=>nn.fromDom(C.selection.getEnd()),zc=C=>to(C,Ja("table")).forall(dr),tc=(C,S)=>Pn(ec(C),S),gc=(C,S)=>{let F=[];return mt(ec(C),Z=>{S(Z)&&(F=F.concat([Z])),F=F.concat(gc(Z,S))}),F},el=(C,S)=>tc(C,F=>In(F,S)),tl=(C,S)=>Rs(S,C),Vo=(C,S,F)=>{if(Mn(F)||Mt(F)||dt(F))C.setAttribute(S,F+"");else throw console.error("Invalid call to Attribute.set. Key ",S,":: Value ",F,":: Element ",C),new Error("Attribute value was not simple")},ya=(C,S,F)=>{Vo(C.dom,S,F)},Ac=(C,S)=>{const F=C.dom;Ye(S,(Z,ae)=>{Vo(F,ae,Z)})},hc=(C,S)=>{const F=C.dom.getAttribute(S);return F===null?void 0:F},Da=(C,S)=>q.from(hc(C,S)),yr=(C,S)=>{C.dom.removeAttribute(S)},Es=C=>Bn(C.dom.attributes,(S,F)=>(S[F.name]=F.value,S),{}),au=(C,S,F=Ke)=>C.exists(Z=>F(Z,S)),Kl=C=>{const S=[],F=Z=>{S.push(Z)};for(let Z=0;Z<C.length;Z++)C[Z].each(F);return S},Yo=(C,S,F)=>C.isSome()&&S.isSome()?q.some(F(C.getOrDie(),S.getOrDie())):q.none(),aa=C=>C.bind(pn),wa=(C,S)=>C?q.some(S):q.none(),Xs=(C,S)=>C.substring(S),Yl=(C,S,F)=>S===""||C.length>=S.length&&C.substr(F,F+S.length)===S,nc=(C,S)=>ca(C,S)?Xs(C,S.length):C,ca=(C,S)=>Yl(C,S,0),fi=(C=>S=>S.replace(C,""))(/^\s+|\s+$/g),fl=C=>C.length>0,gi=C=>!fl(C),Ca=(C,S=10)=>{const F=parseInt(C,S);return isNaN(F)?q.none():q.some(F)},Dc=C=>{const S=parseFloat(C);return isNaN(S)?q.none():q.some(S)},Xl=C=>C.style!==void 0&&fn(C.style.getPropertyValue),Uc=(C,S,F)=>{if(!Mn(F))throw console.error("Invalid call to CSS.set. Property ",S,":: Value ",F,":: Element ",C),new Error("CSS value must be a string: "+F);Xl(C)&&C.style.setProperty(S,F)},Jl=(C,S)=>{Xl(C)&&C.style.removeProperty(S)},W=(C,S,F)=>{const Z=C.dom;Uc(Z,S,F)},ie=(C,S)=>{const F=C.dom,ae=window.getComputedStyle(F).getPropertyValue(S);return ae===""&&!Me(C)?be(F,S):ae},be=(C,S)=>Xl(C)?C.style.getPropertyValue(S):"",Fe=(C,S)=>{const F=C.dom,Z=be(F,S);return q.from(Z).filter(ae=>ae.length>0)},ct=(C,S)=>{const F=C.dom;Jl(F,S),au(Da(C,"style").map(fi),"")&&yr(C,"style")},yn=(C,S,F=0)=>Da(C,S).map(Z=>parseInt(Z,10)).getOr(F),ns=(C,S)=>wr(C,S,at),wr=(C,S,F)=>jt(ec(C),Z=>In(Z,S)?F(Z)?[Z]:[]:wr(Z,S,F)),wo=["tfoot","thead","tbody","colgroup"],Cr=C=>es(wo,C),$o=(C,S)=>({rows:C,columns:S}),Zs=(C,S,F)=>({element:C,rowspan:S,colspan:F}),Rc=(C,S,F,Z,ae,We)=>({element:C,rowspan:S,colspan:F,row:Z,column:ae,isLocked:We}),bc=(C,S,F)=>({element:C,cells:S,section:F}),Hn=(C,S,F,Z)=>({startRow:C,startCol:S,finishRow:F,finishCol:Z}),Lo=(C,S,F)=>({element:C,colspan:S,column:F}),Ur=(C,S)=>({element:C,columns:S}),$=(C,S,F=Ot)=>{if(F(S))return q.none();if(es(C,Or(S)))return q.some(S);const Z=ae=>In(ae,"table")||F(ae);return qn(S,C.join(","),Z)},K=(C,S)=>$(["td","th"],C,S),ne=C=>ns(C,"th,td"),Re=C=>In(C,"colgroup")?el(C,"col"):jt(Zt(C),S=>el(S,"col")),Nt=(C,S)=>Ho(C,"table",S),Yn=C=>ns(C,"tr"),Zt=C=>Nt(C).fold(tt([]),S=>el(S,"colgroup")),Ar=(C,S)=>De(C,F=>{if(Or(F)==="colgroup"){const Z=De(Re(F),ae=>{const We=yn(ae,"span",1);return Zs(ae,1,We)});return bc(F,Z,"colgroup")}else{const Z=De(ne(F),ae=>{const We=yn(ae,"rowspan",1),ut=yn(ae,"colspan",1);return Zs(ae,We,ut)});return bc(F,Z,S(F))}}),Wr=C=>kn(C).map(S=>{const F=Or(S);return Cr(F)?F:"tbody"}).getOr("tbody"),et=C=>{const S=Yn(C),Z=[...Zt(C),...S];return Ar(Z,Wr)},Dr="data-snooker-locked-cols",Js=C=>Da(C,Dr).bind(S=>q.from(S.match(/\d+/g))).map(S=>Vr(S,at)),Zr=(C,S)=>C+","+S,dd=(C,S,F)=>q.from(C.access[Zr(S,F)]),fo=(C,S,F)=>{const Z=Y(C,ae=>F(S,ae.element));return Z.length>0?q.some(Z[0]):q.none()},Y=(C,S)=>{const F=jt(C.all,Z=>Z.cells);return Pn(F,S)},oe=C=>{const S={};let F=0;return mt(C.cells,Z=>{const ae=Z.colspan;Ts(ae,We=>{const ut=F+We;S[ut]=Lo(Z.element,ae,ut)}),F+=ae}),S},xe=C=>{const S={},F=[],ae=mn(C).map(Fl=>Fl.element).bind(Nt).bind(Js).getOr({});let We=0,ut=0,Yt=0;const{pass:jn,fail:Xn}=Yr(C,Fl=>Fl.section==="colgroup");mt(Xn,Fl=>{const sc=[];mt(Fl.cells,Fi=>{let fu=0;for(;S[Zr(Yt,fu)]!==void 0;)fu++;const bm=Fo(ae,fu.toString()),_d=Rc(Fi.element,Fi.rowspan,Fi.colspan,Yt,fu,bm);for(let Li=0;Li<Fi.colspan;Li++)for(let Od=0;Od<Fi.rowspan;Od++){const kh=Yt+Od,dg=fu+Li,df=Zr(kh,dg);S[df]=_d,ut=Math.max(ut,dg+1)}sc.push(_d)}),We++,F.push(bc(Fl.element,sc,Fl.section)),Yt++});const{columns:ws,colgroups:Po}=Ka(jn).map(Fl=>{const sc=oe(Fl);return{colgroups:[Ur(Fl.element,Wt(sc))],columns:sc}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:$o(We,ut),access:S,all:F,columns:ws,colgroups:Po}},Ms={fromTable:C=>{const S=et(C);return xe(S)},generate:xe,getAt:dd,findItem:fo,filterItems:Y,justCells:C=>jt(C.all,S=>S.cells),justColumns:C=>Wt(C.columns),hasColumns:C=>ht(C.columns).length>0,getColumnAt:(C,S)=>q.from(C.columns[S])};var la=tinymce.util.Tools.resolve("tinymce.util.Tools");const vs=(C,S,F)=>{const Z=C.select("td,th",S);let ae;for(let We=0;We<Z.length;We++){const ut=C.getStyle(Z[We],F);if(Ln(ae)&&(ae=ut),ae!==ut)return""}return ae},vc=(C,S,F)=>{la.each("left center right".split(" "),Z=>{Z!==F&&C.formatter.remove("align"+Z,{},S)}),F&&C.formatter.apply("align"+F,{},S)},Wc=(C,S,F)=>{la.each("top middle bottom".split(" "),Z=>{Z!==F&&C.formatter.remove("valign"+Z,{},S)}),F&&C.formatter.apply("valign"+F,{},S)},hs=(C,S,F)=>{C.dispatch("TableModified",{...F,table:S})},ia=(C,S)=>Dc(C).getOr(S),Qs=(C,S,F)=>ia(ie(C,S),F),Dl=(C,S,F,Z)=>{const ae=Qs(C,`padding-${F}`,0),We=Qs(C,`padding-${Z}`,0),ut=Qs(C,`border-${F}-width`,0),Yt=Qs(C,`border-${Z}-width`,0);return S-ae-We-ut-Yt},Ri=(C,S)=>{const F=C.dom,Z=F.getBoundingClientRect().width||F.offsetWidth;return S==="border-box"?Z:Dl(C,Z,"left","right")},yc=C=>Ri(C,"content-box");var Rl=tinymce.util.Tools.resolve("tinymce.Env");const md="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",hi=Ts(5,C=>{const S=`${C+1}px`;return{title:S,value:S}}),nl=De(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],C=>({title:C,value:C.toLowerCase()})),Pr="100%",oc=C=>{var S;const F=C.dom,Z=(S=F.getParent(C.selection.getStart(),F.isBlock))!==null&&S!==void 0?S:C.getBody();return yc(nn.fromDom(Z))+"px"},Mc=(C,S)=>tf(C)||!Rr(C)?S:Iu(C)?{...S,width:oc(C)}:{...S,width:Pr},ol=(C,S)=>tf(C)||Rr(C)?S:Iu(C)?{...S,width:oc(C)}:{...S,width:Pr},Ha=C=>S=>S.options.get(C),Sr=C=>{const S=C.options.register;S("table_border_widths",{processor:"object[]",default:hi}),S("table_border_styles",{processor:"object[]",default:nl}),S("table_cell_advtab",{processor:"boolean",default:!0}),S("table_row_advtab",{processor:"boolean",default:!0}),S("table_advtab",{processor:"boolean",default:!0}),S("table_appearance_options",{processor:"boolean",default:!0}),S("table_grid",{processor:"boolean",default:!Rl.deviceType.isTouch()}),S("table_cell_class_list",{processor:"object[]",default:[]}),S("table_row_class_list",{processor:"object[]",default:[]}),S("table_class_list",{processor:"object[]",default:[]}),S("table_toolbar",{processor:"string",default:md}),S("table_background_color_map",{processor:"object[]",default:[]}),S("table_border_color_map",{processor:"object[]",default:[]})},Zc=Ha("table_sizing_mode"),im=Ha("table_border_widths"),cu=Ha("table_border_styles"),lu=Ha("table_cell_advtab"),ef=Ha("table_row_advtab"),gl=Ha("table_advtab"),iu=Ha("table_appearance_options"),fd=Ha("table_grid"),Rr=Ha("table_style_by_css"),um=Ha("table_cell_class_list"),$u=Ha("table_row_class_list"),Pu=Ha("table_class_list"),gd=Ha("table_toolbar"),hd=Ha("table_background_color_map"),pd=Ha("table_border_color_map"),Iu=C=>Zc(C)==="fixed",tf=C=>Zc(C)==="responsive",nf=C=>{const S=C.options,F=S.get("table_default_styles");return S.isSet("table_default_styles")?F:Mc(C,F)},uu=C=>{const S=C.options,F=S.get("table_default_attributes");return S.isSet("table_default_attributes")?F:ol(C,F)},Ep=(C,S)=>S.column>=C.startCol&&S.column+S.colspan-1<=C.finishCol&&S.row>=C.startRow&&S.row+S.rowspan-1<=C.finishRow,re=(C,S)=>{let F=!0;const Z=G(Ep,S);for(let ae=S.startRow;ae<=S.finishRow;ae++)for(let We=S.startCol;We<=S.finishCol;We++)F=F&&Ms.getAt(C,ae,We).exists(Z);return F?q.some(S):q.none()},bd=(C,S)=>Hn(Math.min(C.row,S.row),Math.min(C.column,S.column),Math.max(C.row+C.rowspan-1,S.row+S.rowspan-1),Math.max(C.column+C.colspan-1,S.column+S.colspan-1)),Nc=(C,S,F)=>{const Z=Ms.findItem(C,S,rr),ae=Ms.findItem(C,F,rr);return Z.bind(We=>ae.map(ut=>bd(We,ut)))},Qf=(C,S,F)=>Nc(C,S,F).bind(Z=>re(C,Z)),_p=(C,S,F)=>{const Z=Op(C);return Qf(Z,S,F)},Op=Ms.fromTable,os=(C,S)=>{kn(C).each(Z=>{Z.dom.insertBefore(S.dom,C.dom)})},Ml=(C,S)=>{Qa(C).fold(()=>{kn(C).each(ae=>{sl(ae,S)})},Z=>{os(Z,S)})},wc=(C,S)=>{ur(C).fold(()=>{sl(C,S)},Z=>{C.dom.insertBefore(S.dom,Z.dom)})},sl=(C,S)=>{C.dom.appendChild(S.dom)},uh=(C,S)=>{os(C,S),sl(S,C)},Mi=(C,S)=>{mt(S,(F,Z)=>{const ae=Z===0?C:S[Z-1];Ml(ae,F)})},hl=(C,S)=>{mt(S,F=>{sl(C,F)})},dm=C=>{const S=C.dom;S.parentNode!==null&&S.parentNode.removeChild(S)},eg=C=>{const S=ec(C);S.length>0&&Mi(C,S),dm(C)},jc=((C,S)=>{const F=We=>{if(!C(We))throw new Error("Can only get "+S+" value of a "+S+" node");return Z(We).getOr("")},Z=We=>C(We)?q.from(We.dom.nodeValue):q.none();return{get:F,getOption:Z,set:(We,ut)=>{if(!C(We))throw new Error("Can only set raw "+S+" value of a "+S+" node");We.dom.nodeValue=ut}}})(Hc,"text"),vd=C=>jc.get(C),mh=(C,S)=>jc.set(C,S);var rl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ra=()=>{const C=Xn=>nn.fromDom(Xn.dom.cloneNode(!1)),S=Xn=>Uo(Xn).dom,F=Xn=>ar(Xn)?Or(Xn)==="body"?!0:es(rl,Or(Xn)):!1,Z=Xn=>ar(Xn)?es(["br","img","hr","input"],Or(Xn)):!1,ae=Xn=>ar(Xn)&&hc(Xn,"contenteditable")==="false",We=(Xn,ws)=>Xn.dom.compareDocumentPosition(ws.dom),ut=(Xn,ws)=>{const Po=Es(Xn);Ac(ws,Po)},Yt=Xn=>{const ws=Or(Xn);return es(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ws)},jn=Xn=>ar(Xn)?Da(Xn,"lang"):q.none();return{up:tt({selector:qn,closest:Ho,predicate:bn,all:zr}),down:tt({selector:tl,predicate:gc}),styles:tt({get:ie,getRaw:Fe,set:W,remove:ct}),attrs:tt({get:hc,set:ya,remove:yr,copyTo:ut}),insert:tt({before:os,after:Ml,afterAll:Mi,append:sl,appendAll:hl,prepend:wc,wrap:uh}),remove:tt({unwrap:eg,remove:dm}),create:tt({nu:nn.fromTag,clone:C,text:nn.fromText}),query:tt({comparePosition:We,prevSibling:Aa,nextSibling:Qa}),property:tt({children:ec,name:Or,parent:kn,document:S,isText:Hc,isComment:ba,isElement:ar,isSpecial:Yt,getLanguage:jn,getText:vd,setText:mh,isBoundary:F,isEmptyTag:Z,isNonEditable:ae}),eq:rr,is:Ss}};const yd=(C,S,F,Z)=>{const ae=F[0],We=F.slice(1);return Z(C,S,ae,We)},wd=(C,S,F)=>F.length>0?yd(C,S,F,Nl):q.none(),Nl=(C,S,F,Z)=>{const ae=S(C,F);return is(Z,(We,ut)=>{const Yt=S(C,ut);return Bc(C,We,Yt)},ae)},Bc=(C,S,F)=>S.bind(Z=>F.filter(G(C.eq,Z))),of=wd,sf=Ra(),rf=(C,S)=>of(sf,(F,Z)=>C(Z),S),af=C=>qn(C,"table"),Ql=(C,S)=>{const F=tl(C,S);return F.length>0?q.some(F):q.none()},mm=(C,S,F)=>pe(C,S).bind(Z=>pe(C,F).bind(ae=>rf(af,[Z,ae]).map(We=>({first:Z,last:ae,table:We})))),fh=(C,S)=>Ql(C,S),A0=(C,S,F)=>mm(C,S,F).bind(Z=>{const ae=jn=>rr(C,jn),We="thead,tfoot,tbody,table",ut=qn(Z.first,We,ae),Yt=qn(Z.last,We,ae);return ut.bind(jn=>Yt.bind(Xn=>rr(jn,Xn)?_p(Z.table,Z.first,Z.last):q.none()))}),gh=C=>De(C,nn.fromDom),fm="data-mce-selected",tg="td["+fm+"],th["+fm+"]",Ni="data-mce-first-selected",ng="td["+Ni+"],th["+Ni+"]",js="data-mce-last-selected",E="td["+js+"],th["+js+"]",M={selected:fm,selectedSelector:tg,firstSelected:Ni,firstSelectedSelector:ng,lastSelected:js,lastSelectedSelector:E},z=C=>Nt(C).bind(S=>fh(S,M.firstSelectedSelector)).fold(tt(C),S=>S[0]),ue=C=>(S,F)=>{const Z=Or(S),ae=Z==="col"||Z==="colgroup"?z(S):S;return Ho(ae,C,F)},me=ue("th,td,caption"),Tt=ue("th,td"),_n=C=>gh(C.model.table.getSelectedCells()),Un=(C,S)=>{const F=Tt(C),Z=F.bind(ae=>Nt(ae)).map(ae=>Yn(ae));return Yo(F,Z,(ae,We)=>Pn(We,ut=>Bo(gh(ut.dom.cells),Yt=>hc(Yt,S)==="1"||rr(Yt,ae)))).getOr([])},go=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Ct=C=>({value:gm(C)}),ms=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Sa=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,pl=C=>ms.test(C)||Sa.test(C),gm=C=>nc(C,"#").toUpperCase(),og=C=>pl(C)?q.some({value:gm(C)}):q.none(),pi=C=>{const S=C.toString(16);return(S.length===1?"0"+S:S).toUpperCase()},bl=C=>{const S=pi(C.red)+pi(C.green)+pi(C.blue);return Ct(S)},$c=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Bl=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Va=(C,S,F,Z)=>({red:C,green:S,blue:F,alpha:Z}),pb=(C,S,F,Z)=>{const ae=parseInt(C,10),We=parseInt(S,10),ut=parseInt(F,10),Yt=parseFloat(Z);return Va(ae,We,ut,Yt)},as=C=>{if(C==="transparent")return q.some(Va(0,0,0,0));const S=$c.exec(C);if(S!==null)return q.some(pb(S[1],S[2],S[3],"1"));const F=Bl.exec(C);return F!==null?q.some(pb(F[1],F[2],F[3],F[4])):q.none()},Fu=C=>og(C).orThunk(()=>as(C).map(bl)).getOrThunk(()=>{const S=document.createElement("canvas");S.height=1,S.width=1;const F=S.getContext("2d");F.clearRect(0,0,S.width,S.height),F.fillStyle="#FFFFFF",F.fillStyle=C,F.fillRect(0,0,1,1);const Z=F.getImageData(0,0,1,1).data,ae=Z[0],We=Z[1],ut=Z[2],Yt=Z[3];return bl(Va(ae,We,ut,Yt))}),Cd=C=>as(C).map(bl).map(S=>"#"+S.value).getOr(C),Mr=C=>{let S=C;return{get:()=>S,set:ae=>{S=ae}}},bb=C=>{const S=Mr(q.none()),F=()=>S.get().each(C);return{clear:()=>{F(),S.set(q.none())},isSet:()=>S.get().isSome(),get:()=>S.get(),set:Yt=>{F(),S.set(q.some(Yt))}}},D0=()=>bb(C=>C.unbind()),Lu=(C,S,F)=>Z=>{const ae=D0(),We=gi(F),ut=()=>{const Yt=_n(C),jn=Xn=>C.formatter.match(S,{value:F},Xn.dom,We);We?(Z.setActive(!Bo(Yt,jn)),ae.set(C.formatter.formatChanged(S,Xn=>Z.setActive(!Xn),!0))):(Z.setActive(Ve(Yt,jn)),ae.set(C.formatter.formatChanged(S,Z.setActive,!1,{value:F})))};return C.initialized?ut():C.on("init",ut),ae.clear},Ns=C=>Fo(C,"menu"),Ls=C=>De(C,S=>{const F=S.text||S.title||"";return Ns(S)?{text:F,items:Ls(S.menu)}:{text:F,value:S.value}}),ua=(C,S,F,Z)=>De(S,ae=>{const We=ae.text||ae.title;return Ns(ae)?{type:"nestedmenuitem",text:We,getSubmenuItems:()=>ua(C,ae.menu,F,Z)}:{text:We,type:"togglemenuitem",onAction:()=>Z(ae.value),onSetup:Lu(C,F,ae.value)}}),Sd=(C,S)=>F=>{C.execCommand("mceTableApplyCellStyle",!1,{[S]:F})},xd=C=>jt(C,S=>Ns(S)?[{...S,menu:xd(S.menu)}]:fl(S.value)?[S]:[]),hm=(C,S,F,Z)=>ae=>ae(ua(C,S,F,Z)),Td=(C,S,F)=>{const Z=De(S,ae=>({text:ae.title,value:"#"+Fu(ae.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:Z.length>0?Z:void 0,allowCustomColors:!1},onAction:ae=>{const We=ae.value==="remove"?"":ae.value;C.execCommand("mceTableApplyCellStyle",!1,{[F]:We})}}]},Co=C=>()=>{const F=C.queryCommandValue("mceTableRowType")==="header"?"body":"header";C.execCommand("mceTableRowType",!1,{type:F})},hh=C=>()=>{const F=C.queryCommandValue("mceTableColType")==="th"?"td":"th";C.execCommand("mceTableColType",!1,{type:F})},Ap=C=>{const S=Ls(um(C));return S.length>0?q.some({name:"class",type:"listbox",label:"Class",items:S}):q.none()},R0=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:go}],M0=C=>R0.concat(Ap(C).toArray()),sg=(C,S)=>{const Z=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Ls(cu(C)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:S==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(Z):Z}},rg={normal:(C,S)=>{const F=C.dom;return{setAttrib:(ut,Yt)=>{F.setAttrib(S,ut,Yt)},setStyle:(ut,Yt)=>{F.setStyle(S,ut,Yt)},setFormat:(ut,Yt)=>{Yt===""?C.formatter.remove(ut,{value:null},S,!0):C.formatter.apply(ut,{value:Yt},S)}}}},bi=Ja("th"),yb=(C,S)=>C&&S?"sectionCells":C?"section":"cells",ph=C=>{const S=C.section==="thead",F=au(wb(C.cells),"th");return C.section==="tfoot"?{type:"footer"}:S||F?{type:"header",subType:yb(S,F)}:{type:"body"}},wb=C=>{const S=Pn(C,F=>bi(F.element));return S.length===0?q.some("td"):S.length===C.length?q.some("th"):q.none()},Bi=C=>{const S=De(C,ae=>ph(ae).type),F=es(S,"header"),Z=es(S,"footer");if(!F&&!Z)return q.some("body");{const ae=es(S,"body");return F&&!ae&&!Z?q.some("header"):!F&&!ae&&Z?q.some("footer"):q.none()}},Dp=C=>{let S=!1,F;return(...Z)=>(S||(S=!0,F=C.apply(null,Z)),F)},$i=(C,S)=>qo(C.all,F=>qt(F.cells,Z=>rr(S,Z.element))),pm=(C,S,F)=>{const Z=De(S.selection,We=>K(We).bind(ut=>$i(C,ut)).filter(F)),ae=Kl(Z);return wa(ae.length>0,ae)},N0=(C,S)=>S.mergable,bh=(C,S)=>S.unmergable,vh=(C,S)=>pm(C,S,at),Cb=(C,S)=>$i(C,S).exists(F=>!F.isLocked),yh=(C,S)=>Ve(S,F=>Cb(C,F)),Cc=(C,S)=>N0(C,S).filter(F=>yh(C,F.cells)),wh=(C,S)=>bh(C,S).filter(F=>yh(C,F));({...{generate:C=>{if(!Et(C))throw new Error("cases must be an array");if(C.length===0)throw new Error("there must be at least one case");const S=[],F={};return mt(C,(Z,ae)=>{const We=ht(Z);if(We.length!==1)throw new Error("one and only one name per case");const ut=We[0],Yt=Z[ut];if(F[ut]!==void 0)throw new Error("duplicate key detected:"+ut);if(ut==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Et(Yt))throw new Error("case arguments must be an array");S.push(ut),F[ut]=(...jn)=>{const Xn=jn.length;if(Xn!==Yt.length)throw new Error("Wrong number of arguments to case "+ut+". Expected "+Yt.length+" ("+Yt+"), got "+Xn);return{fold:(...Po)=>{if(Po.length!==C.length)throw new Error("Wrong number of arguments to fold. Expected "+C.length+", got "+Po.length);return Po[ae].apply(null,jn)},match:Po=>{const er=ht(Po);if(S.length!==er.length)throw new Error("Wrong number of arguments to match. Expected: "+S.join(",")+`
Actual: `+er.join(","));if(!Ve(S,sc=>es(er,sc)))throw new Error("Not all branches were specified when using match. Specified: "+er.join(", ")+`
Required: `+S.join(", "));return Po[ut].apply(null,jn)},log:Po=>{console.log(Po,{constructors:S,constructor:ut,params:jn})}}}}),F}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const ag=(C,S)=>{const F=Ms.fromTable(C);return vh(F,S).bind(ae=>{const We=ae[ae.length-1],ut=ae[0].row,Yt=We.row+We.rowspan,jn=F.all.slice(ut,Yt);return Bi(jn)}).getOr("")},al=C=>ca(C,"rgb")?Cd(C):C,cg=C=>{const S=nn.fromDom(C);return{borderwidth:Fe(S,"border-width").getOr(""),borderstyle:Fe(S,"border-style").getOr(""),bordercolor:Fe(S,"border-color").map(al).getOr(""),backgroundcolor:Fe(S,"background-color").map(al).getOr("")}},Ch=C=>{const S=C[0],F=C.slice(1);return mt(F,Z=>{mt(ht(S),ae=>{Ye(Z,(We,ut)=>{const Yt=S[ae];Yt!==""&&ae===ut&&Yt!==We&&(S[ae]="")})})}),S},$l=(C,S,F,Z)=>qt(C,ae=>!Ln(F.formatter.matchNode(Z,S+ae))).getOr(""),vl=G($l,["left","center","right"],"align"),Sh=G($l,["top","middle","bottom"],"valign"),Nr=(C,S)=>{const F=nf(C),Z=uu(C),ae=()=>({borderstyle:Oo(F,"border-style").getOr(""),bordercolor:al(Oo(F,"border-color").getOr("")),backgroundcolor:al(Oo(F,"background-color").getOr(""))}),We={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},ut=()=>{const ws=F["border-width"];return Rr(C)&&ws?{border:ws}:Oo(Z,"border").fold(()=>({}),Po=>({border:Po}))},Yt=S?ae():{},jn=()=>{const ws=Oo(F,"border-spacing").or(Oo(Z,"cellspacing")).fold(()=>({}),er=>({cellspacing:er})),Po=Oo(F,"border-padding").or(Oo(Z,"cellpadding")).fold(()=>({}),er=>({cellpadding:er}));return{...ws,...Po}};return{...We,...F,...Z,...Yt,...ut(),...jn()}},cf=C=>Nt(nn.fromDom(C)).map(S=>{const F={selection:gh(C.cells)};return ag(S,F)}).getOr(""),lg=(C,S,F)=>{const Z=(Yt,jn)=>{const Xn=Fe(nn.fromDom(jn),"border-width");return Rr(C)&&Xn.isSome()?Xn.getOr(""):Yt.getAttrib(jn,"border")||vs(C.dom,jn,"border-width")||vs(C.dom,jn,"border")||""},ae=C.dom,We=Rr(C)?ae.getStyle(S,"border-spacing")||ae.getAttrib(S,"cellspacing"):ae.getAttrib(S,"cellspacing")||ae.getStyle(S,"border-spacing"),ut=Rr(C)?vs(ae,S,"padding")||ae.getAttrib(S,"cellpadding"):ae.getAttrib(S,"cellpadding")||vs(ae,S,"padding");return{width:ae.getStyle(S,"width")||ae.getAttrib(S,"width"),height:ae.getStyle(S,"height")||ae.getAttrib(S,"height"),cellspacing:We??"",cellpadding:ut??"",border:Z(ae,S),caption:!!ae.select("caption",S)[0],class:ae.getAttrib(S,"class",""),align:vl(C,S),...F?cg(S):{}}},ft=(C,S,F)=>{const Z=C.dom;return{height:Z.getStyle(S,"height")||Z.getAttrib(S,"height"),class:Z.getAttrib(S,"class",""),type:cf(S),align:vl(C,S),...F?cg(S):{}}},B0=(C,S,F,Z)=>{const ae=C.dom,We=Z.getOr(S),ut=(Yt,jn)=>ae.getStyle(Yt,jn)||ae.getAttrib(Yt,jn);return{width:ut(We,"width"),height:ut(S,"height"),scope:ae.getAttrib(S,"scope"),celltype:bo(S),class:ae.getAttrib(S,"class",""),halign:vl(C,S),valign:Sh(C,S),...F?cg(S):{}}},Sb=(C,S)=>{const F=Ms.fromTable(C),Z=Ms.justCells(F),ae=Pn(Z,We=>Bo(S,ut=>rr(We.element,ut)));return De(ae,We=>({element:We.element.dom,column:Ms.getColumnAt(F,We.column).map(ut=>ut.element.dom)}))},Pl=(C,S,F,Z)=>{Z("scope")&&C.setAttrib("scope",F.scope),Z("class")&&C.setAttrib("class",F.class),Z("height")&&C.setStyle("height",Ys(F.height)),Z("width")&&S.setStyle("width",Ys(F.width))},lf=(C,S,F)=>{F("backgroundcolor")&&C.setFormat("tablecellbackgroundcolor",S.backgroundcolor),F("bordercolor")&&C.setFormat("tablecellbordercolor",S.bordercolor),F("borderstyle")&&C.setFormat("tablecellborderstyle",S.borderstyle),F("borderwidth")&&C.setFormat("tablecellborderwidth",Ys(S.borderwidth))},kd=(C,S,F,Z)=>{const ae=S.length===1;mt(S,We=>{const ut=We.element,Yt=ae?at:Z,jn=rg.normal(C,ut),Xn=We.column.map(ws=>rg.normal(C,ws)).getOr(jn);Pl(jn,Xn,F,Yt),lu(C)&&lf(jn,F,Yt),Z("halign")&&vc(C,ut,F.halign),Z("valign")&&Wc(C,ut,F.valign)})},xr=(C,S)=>{C.execCommand("mceTableCellType",!1,{type:S.celltype,no_events:!0})},xb=(C,S,F,Z)=>{const ae=Go(Z,(We,ut)=>F[ut]!==We);O(ae)>0&&S.length>=1&&Nt(S[0]).each(We=>{const ut=Sb(We,S),Yt=O(Go(ae,(Xn,ws)=>ws!=="scope"&&ws!=="celltype"))>0,jn=rt(ae,"celltype");(Yt||rt(ae,"scope"))&&kd(C,ut,Z,G(rt,ae)),jn&&xr(C,Z),hs(C,We.dom,{structure:jn,style:Yt})})},ys=(C,S,F,Z)=>{const ae=Z.getData();Z.close(),C.undoManager.transact(()=>{xb(C,S,F,ae),C.focus()})},cs=(C,S)=>{const F=Nt(S[0]).map(Z=>De(Sb(Z,S),ae=>B0(C,ae.element,lu(C),ae.column)));return Ch(F.getOrDie())},xc=C=>{const S=_n(C);if(S.length===0)return;const F=cs(C,S),Z={type:"tabpanel",tabs:[{title:"General",name:"general",items:M0(C)},sg(C,"cell")]},ae={type:"panel",items:[{type:"grid",columns:2,items:M0(C)}]};C.windowManager.open({title:"Cell Properties",size:"normal",body:lu(C)?Z:ae,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:F,onSubmit:G(ys,C,S,F)})},uf=C=>{const S=Ls($u(C));return S.length>0?q.some({name:"class",type:"listbox",label:"Class",items:S}):q.none()},Xr=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Ed=C=>Xr.concat(uf(C).toArray()),Jr=(C,S,F)=>{F("class")&&C.setAttrib("class",S.class),F("height")&&C.setStyle("height",Ys(S.height))},Os=(C,S,F)=>{F("backgroundcolor")&&C.setStyle("background-color",S.backgroundcolor),F("bordercolor")&&C.setStyle("border-color",S.bordercolor),F("borderstyle")&&C.setStyle("border-style",S.borderstyle)},ig=(C,S,F,Z)=>{const We=S.length===1?at:Z;mt(S,ut=>{const Yt=rg.normal(C,ut);Jr(Yt,F,We),ef(C)&&Os(Yt,F,We),Z("align")&&vc(C,ut,F.align)})},Qe=(C,S)=>{C.execCommand("mceTableRowType",!1,{type:S.type,no_events:!0})},ei=(C,S,F,Z)=>{const ae=Go(Z,(We,ut)=>F[ut]!==We);if(O(ae)>0){const We=rt(ae,"type"),ut=We?O(ae)>1:!0;ut&&ig(C,S,Z,G(rt,ae)),We&&Qe(C,Z),Nt(nn.fromDom(S[0])).each(Yt=>hs(C,Yt.dom,{structure:We,style:ut}))}},xh=(C,S,F,Z)=>{const ae=Z.getData();Z.close(),C.undoManager.transact(()=>{ei(C,S,F,ae),C.focus()})},Ir=C=>{const S=Un(xs(C),M.selected);if(S.length===0)return;const F=De(S,ut=>ft(C,ut.dom,ef(C))),Z=Ch(F),ae={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ed(C)},sg(C,"row")]},We={type:"panel",items:[{type:"grid",columns:2,items:Ed(C)}]};C.windowManager.open({title:"Row Properties",size:"normal",body:ef(C)?ae:We,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Z,onSubmit:G(xh,C,De(S,ut=>ut.dom),Z)})},Pi=(C,S,F)=>{const Z=F?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ae=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],We=iu(C)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],ut=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Yt=S.length>0?[{type:"listbox",name:"class",label:"Class",items:S}]:[];return Z.concat(ae).concat(We).concat(ut).concat(Yt)},Rp=(C,S,F,Z)=>{if(S.tagName==="TD"||S.tagName==="TH")Mn(F)&&tn(Z)?C.setStyle(S,F,Z):C.setStyles(S,F);else if(S.children)for(let ae=0;ae<S.children.length;ae++)Rp(C,S.children[ae],F,Z)},vi=(C,S,F)=>{const Z=C.dom,ae={},We={};if(Ln(F.class)||(ae.class=F.class),We.height=Ys(F.height),Rr(C)?We.width=Ys(F.width):Z.getAttrib(S,"width")&&(ae.width=mr(F.width)),Rr(C)?(We["border-width"]=Ys(F.border),We["border-spacing"]=Ys(F.cellspacing)):(ae.border=F.border,ae.cellpadding=F.cellpadding,ae.cellspacing=F.cellspacing),Rr(C)&&S.children)for(let ut=0;ut<S.children.length;ut++)Rp(Z,S.children[ut],{"border-width":Ys(F.border),padding:Ys(F.cellpadding)}),gl(C)&&Rp(Z,S.children[ut],{"border-color":F.bordercolor});if(gl(C)){const ut=F;We["background-color"]=ut.backgroundcolor,We["border-color"]=ut.bordercolor,We["border-style"]=ut.borderstyle}ae.style=Z.serializeStyle({...nf(C),...We}),Z.setAttribs(S,{...uu(C),...ae})},$0=(C,S,F,Z)=>{const ae=C.dom,We=Z.getData(),ut=Go(We,(Yt,jn)=>F[jn]!==Yt);Z.close(),We.class===""&&delete We.class,C.undoManager.transact(()=>{if(!S){const Yt=Ca(We.cols).getOr(1),jn=Ca(We.rows).getOr(1);C.execCommand("mceInsertTable",!1,{rows:jn,columns:Yt}),S=Tt(xs(C),vr(C)).bind(Xn=>Nt(Xn,vr(C))).map(Xn=>Xn.dom).getOrDie()}if(O(ut)>0){vi(C,S,We);const Yt=ae.select("caption",S)[0];(Yt&&!We.caption||!Yt&&We.caption)&&C.execCommand("mceTableToggleCaption"),vc(C,S,We.align)}if(C.focus(),C.addVisual(),O(ut)>0){const Yt=rt(ut,"caption"),jn=Yt?O(ut)>1:!0;hs(C,S,{structure:Yt,style:jn})}})},Hu=(C,S)=>{const F=C.dom;let Z,ae=Nr(C,gl(C));S?(ae.cols="1",ae.rows="1",gl(C)&&(ae.borderstyle="",ae.bordercolor="",ae.backgroundcolor="")):(Z=F.getParent(C.selection.getStart(),"table",C.getBody()),Z?ae=lg(C,Z,gl(C)):gl(C)&&(ae.borderstyle="",ae.bordercolor="",ae.backgroundcolor=""));const We=Ls(Pu(C));We.length>0&&ae.class&&(ae.class=ae.class.replace(/\s*mce\-item\-table\s*/g,""));const ut={type:"grid",columns:2,items:Pi(C,We,S)},Yt=()=>({type:"panel",items:[ut]}),jn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[ut]},sg(C,"table")]}),Xn=gl(C)?jn():Yt();C.windowManager.open({title:"Table Properties",size:"normal",body:Xn,onSubmit:G($0,C,Z,ae),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ae})},Tb=C=>{const S=F=>{zc(xs(C))&&F()};Ye({mceTableProps:G(Hu,C,!1),mceTableRowProps:G(Ir,C),mceTableCellProps:G(xc,C),mceInsertTableDialog:G(Hu,C,!0)},(F,Z)=>C.addCommand(Z,()=>S(F)))},yl=(C,S)=>uo(C,S).isSome(),ss=pn,du=C=>{const S=(Z,ae)=>Da(Z,ae).exists(We=>parseInt(We,10)>1),F=Z=>S(Z,"rowspan")||S(Z,"colspan");return C.length>0&&Ve(C,F)?q.some(C):q.none()},ug=(C,S,F)=>S.length<=1?q.none():A0(C,F.firstSelectedSelector,F.lastSelectedSelector).map(Z=>({bounds:Z,cells:S})),Pc=C=>({element:C,mergable:q.none(),unmergable:q.none(),selection:[C]}),Ii=(C,S,F)=>({element:F,mergable:ug(S,C,M),unmergable:du(C),selection:ss(C)}),Tc=C=>{const S=Mr(q.none()),F=Mr([]);let Z=q.none();const ae=Ja("caption"),We=Io=>Z.forall(Bs=>!Bs[Io]),ut=()=>me(xs(C),vr(C)),Yt=()=>me(ds(C),vr(C)),jn=()=>ut().bind(Io=>aa(Yo(Nt(Io),Yt().bind(Nt),(Bs,Gc)=>rr(Bs,Gc)?ae(Io)?q.some(Pc(Io)):q.some(Ii(_n(C),Bs,Io)):q.none()))),Xn=Io=>Nt(Io.element).map(Gc=>{const Qr=Ms.fromTable(Gc),Cl=vh(Qr,Io).getOr([]),mg=Bn(Cl,(zu,yi)=>(yi.isLocked&&(zu.onAny=!0,yi.column===0?zu.onFirst=!0:yi.column+yi.colspan>=Qr.grid.columns&&(zu.onLast=!0)),zu),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Cc(Qr,Io).isSome(),unmergeable:wh(Qr,Io).isSome(),locked:mg}}),ws=()=>{S.set(Dp(jn)()),Z=S.get().bind(Xn),mt(F.get(),Xe)},Po=Io=>(Io(),F.set(F.get().concat([Io])),()=>{F.set(Pn(F.get(),Bs=>Bs!==Io))}),er=(Io,Bs)=>Po(()=>S.get().fold(()=>{Io.setEnabled(!1)},Gc=>{Io.setEnabled(!Bs(Gc))})),Fl=(Io,Bs,Gc)=>Po(()=>S.get().fold(()=>{Io.setEnabled(!1),Io.setActive(!1)},Qr=>{Io.setEnabled(!Bs(Qr)),Io.setActive(Gc(Qr))})),sc=Io=>Z.exists(Bs=>Bs.locked[Io]),Fi=Io=>er(Io,Bs=>!1),fu=Io=>er(Io,Bs=>ae(Bs.element)),bm=Io=>Bs=>er(Bs,Gc=>ae(Gc.element)||sc(Io)),_d=Io=>Bs=>er(Bs,Gc=>ae(Gc.element)||Io().isNone()),Li=(Io,Bs)=>Gc=>er(Gc,Qr=>ae(Qr.element)||Io().isNone()||sc(Bs)),Od=Io=>er(Io,Bs=>We("mergeable")),kh=Io=>er(Io,Bs=>We("unmergeable")),dg=Io=>Fl(Io,Ot,Bs=>Nt(Bs.element,vr(C)).exists(Qr=>yl(Qr,"caption"))),df=(Io,Bs)=>Gc=>Fl(Gc,Qr=>ae(Qr.element),()=>C.queryCommandValue(Io)===Bs),Ma=df("mceTableRowType","header"),gu=df("mceTableColType","th");return C.on("NodeChange ExecCommand TableSelectorChange",ws),{onSetupTable:Fi,onSetupCellOrRow:fu,onSetupColumn:bm,onSetupPasteable:_d,onSetupPasteableColumn:Li,onSetupMergeable:Od,onSetupUnmergeable:kh,resetTargets:ws,onSetupTableWithCaption:dg,onSetupTableRowHeaders:Ma,onSetupTableColumnHeaders:gu,targets:S.get}};var kb=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ic="x-tinymce/dom-table-",Vu=Ic+"rows",Te=Ic+"columns",cl=C=>{var S;const F=(S=kb.read())!==null&&S!==void 0?S:[];return qo(F,Z=>q.from(Z.getType(C)))},mu=()=>cl(Vu),wl=()=>cl(Te),Il=(C,S)=>{C.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:Yt=>Yt("inserttable | cell row column | advtablesort | tableprops deletetable")});const F=Yt=>()=>C.execCommand(Yt),Z=(Yt,jn)=>{C.queryCommandSupported(jn.command)&&C.ui.registry.addButton(Yt,{...jn,onAction:fn(jn.onAction)?jn.onAction:F(jn.command)})},ae=(Yt,jn)=>{C.queryCommandSupported(jn.command)&&C.ui.registry.addToggleButton(Yt,{...jn,onAction:fn(jn.onAction)?jn.onAction:F(jn.command)})};Z("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:S.onSetupTable}),Z("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:S.onSetupTable}),Z("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:S.onSetupCellOrRow}),Z("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:S.onSetupMergeable}),Z("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:S.onSetupUnmergeable}),Z("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:S.onSetupCellOrRow}),Z("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:S.onSetupCellOrRow}),Z("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:S.onSetupCellOrRow}),Z("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:S.onSetupCellOrRow}),Z("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:S.onSetupColumn("onFirst")}),Z("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:S.onSetupColumn("onLast")}),Z("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:S.onSetupColumn("onAny")}),Z("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:S.onSetupCellOrRow}),Z("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:S.onSetupCellOrRow}),Z("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:S.onSetupPasteable(mu)}),Z("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:S.onSetupPasteable(mu)}),Z("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:S.onSetupColumn("onAny")}),Z("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:S.onSetupColumn("onAny")}),Z("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:S.onSetupPasteableColumn(wl,"onFirst")}),Z("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:S.onSetupPasteableColumn(wl,"onLast")}),Z("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const We=xd(Pu(C));We.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:hm(C,We,"tableclass",Yt=>C.execCommand("mceTableToggleClass",!1,Yt)),onSetup:S.onSetupTable});const ut=xd(um(C));ut.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:hm(C,ut,"tablecellclass",Yt=>C.execCommand("mceTableCellToggleClass",!1,Yt)),onSetup:S.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:hm(C,go,"tablecellverticalalign",Sd(C,"vertical-align")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:hm(C,im(C),"tablecellborderwidth",Sd(C,"border-width")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:hm(C,cu(C),"tablecellborderstyle",Sd(C,"border-style")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Yt=>Yt(Td(C,hd(C),"background-color")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Yt=>Yt(Td(C,pd(C),"border-color")),onSetup:S.onSetupCellOrRow})),ae("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:S.onSetupTableWithCaption}),ae("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Co(C),onSetup:S.onSetupTableRowHeaders}),ae("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:hh(C),onSetup:S.onSetupTableColumnHeaders})},za=C=>{const S=Z=>C.dom.is(Z,"table")&&C.getBody().contains(Z),F=gd(C);F.length>0&&C.ui.registry.addContextToolbar("table",{predicate:S,items:F,scope:"node",position:"node"})},Ta=(C,S)=>{const F=Po=>()=>C.execCommand(Po),Z=(Po,er)=>C.queryCommandSupported(er.command)?(C.ui.registry.addMenuItem(Po,{...er,onAction:fn(er.onAction)?er.onAction:F(er.command)}),!0):!1,ae=(Po,er)=>{C.queryCommandSupported(er.command)&&C.ui.registry.addToggleMenuItem(Po,{...er,onAction:fn(er.onAction)?er.onAction:F(er.command)})},We=Po=>{C.execCommand("mceInsertTable",!1,{rows:Po.numRows,columns:Po.numColumns})},ut=[Z("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:S.onSetupCellOrRow}),Z("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:S.onSetupCellOrRow}),Z("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:S.onSetupCellOrRow}),Z("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:S.onSetupCellOrRow}),Z("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:S.onSetupCellOrRow}),Z("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:S.onSetupCellOrRow}),Z("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:S.onSetupPasteable(mu)}),Z("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:S.onSetupPasteable(mu)})],Yt=[Z("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:S.onSetupColumn("onFirst")}),Z("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:S.onSetupColumn("onLast")}),Z("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:S.onSetupColumn("onAny")}),Z("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:S.onSetupColumn("onAny")}),Z("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:S.onSetupColumn("onAny")}),Z("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:S.onSetupPasteableColumn(wl,"onFirst")}),Z("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:S.onSetupPasteableColumn(wl,"onLast")})],jn=[Z("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:S.onSetupCellOrRow}),Z("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:S.onSetupMergeable}),Z("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:S.onSetupUnmergeable})];fd(C)?C.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:We}]}):C.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:F("mceInsertTableDialog")}),C.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:F("mceInsertTableDialog")}),Z("tableprops",{text:"Table properties",onSetup:S.onSetupTable,command:"mceTableProps"}),Z("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:S.onSetupTable,command:"mceTableDelete"}),es(ut,!0)&&C.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:tt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),es(Yt,!0)&&C.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:tt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),es(jn,!0)&&C.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:tt("tablecellprops tablemergecells tablesplitcells")}),C.ui.registry.addContextMenu("table",{update:()=>(S.resetTargets(),S.targets().fold(tt(""),Po=>Or(Po.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Xn=xd(Pu(C));Xn.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>ua(C,Xn,"tableclass",Po=>C.execCommand("mceTableToggleClass",!1,Po)),onSetup:S.onSetupTable});const ws=xd(um(C));ws.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>ua(C,ws,"tablecellclass",Po=>C.execCommand("mceTableCellToggleClass",!1,Po)),onSetup:S.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>ua(C,go,"tablecellverticalalign",Sd(C,"vertical-align")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>ua(C,im(C),"tablecellborderwidth",Sd(C,"border-width")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>ua(C,cu(C),"tablecellborderstyle",Sd(C,"border-style")),onSetup:S.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Td(C,hd(C),"background-color"),onSetup:S.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Td(C,pd(C),"border-color"),onSetup:S.onSetupCellOrRow})),ae("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:S.onSetupTableWithCaption}),ae("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Co(C),onSetup:S.onSetupTableRowHeaders}),ae("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:hh(C),onSetup:S.onSetupTableRowHeaders})},P0=C=>{const S=Tc(C);Sr(C),Tb(C),Ta(C,S),Il(C,S),za(C)};var Th=()=>{ge.add("table",P0)};Th()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});const QG=bj({components:{Editor:zG},props:{value:{type:String,default:""},field:{type:String,default:""},toolbar:{type:Array,default:()=>["bold","italic","underline","h1","h2","h3","numlist","bullist","removeformat","blockquote","customLink","customImage","customMedia","code","fullscreen"]},font:{type:String,default:"sans-serif"},customFormats:{type:Array,default:()=>[]},tinymceOverrides:{type:Object,default:null},disabled:{type:Boolean,default:!0},imageToken:{type:String,default:void 0},folder:{type:String,default:void 0},softLength:{type:Number,default:void 0},direction:{type:String,default:void 0}},emits:["input"],setup(ge,{emit:bt}){var Bn;const{t:vn}=_G(),Dt=ql(null),zt=ql(null),{imageToken:Xt}=vj(ge),Mn=TG();let Et=ql("all"),Mt=ql([]);(Bn=Mn.settings)!=null&&Bn.storage_asset_transform&&(Et.value=Mn.settings.storage_asset_transform,Mt.value=Mn.settings.storage_asset_presets??[]);let Ln=ql(0);const{imageDrawerOpen:hn,imageSelection:tn,closeImageDrawer:fn,onImageSelect:dt,saveImage:Pt,imageButton:it}=qG(Dt,Xt,{storageAssetTransform:Et,storageAssetPresets:Mt}),{mediaDrawerOpen:tt,mediaSelection:pn,closeMediaDrawer:Ke,openMediaTab:G,onMediaSelect:Xe,embed:Ot,saveMedia:at,mediaHeight:q,mediaWidth:ht,mediaSource:Dn,mediaButton:Ye}=YG(Dt,Xt),{linkButton:Pe,linkDrawerOpen:fe,closeLinkDrawer:Go,saveLink:zn,linkSelection:Wt,linkNode:O}=KG(Dt),{codeDrawerOpen:Oo,code:rt,closeCodeDrawer:Fo,saveCode:cn,sourceCodeButton:je}=XG(Dt),po=lE({get(){return ge.value||""},set(Zn){ge.value!==Zn&&H()}});A2(()=>[ge.direction,Dt],()=>{var Zn,qt,ro,jt,Ve,Vr;Dt.value&&(ge.direction==="rtl"?(ro=(qt=(Zn=Dt.value.editorCommands)==null?void 0:Zn.commands)==null?void 0:qt.exec)==null||ro.mcedirectionrtl():(Vr=(Ve=(jt=Dt.value.editorCommands)==null?void 0:jt.commands)==null?void 0:Ve.exec)==null||Vr.mcedirectionltr())});const es=lE(()=>{let Zn=null;Array.isArray(ge.customFormats)&&ge.customFormats.length>0&&(Zn=ge.customFormats);let qt=(ge.toolbar??[]).map(ro=>ro.replace(/^link$/g,"customLink").replace(/^media$/g,"customMedia").replace(/^code$/g,"customCode").replace(/^image$/g,"customImage")).join(" ");return Zn&&(qt+=" styles"),{skin:!1,content_css:!1,content_style:GG(ge.font),plugins:["media","table","lists","image","link","pagebreak","code","insertdatetime","autoresize","preview","fullscreen","directionality"],branding:!1,max_height:1e3,elementpath:!1,statusbar:!1,menubar:!1,convert_urls:!1,image_dimensions:!1,extended_valid_elements:"audio[loop|controls],source[src|type]",toolbar:qt,style_formats:Zn,file_picker_types:"customImage customMedia image media",link_default_protocol:"https",browser_spellcheck:!0,directionality:ge.direction,paste_data_images:!1,setup:Pn,...ge.tinymceOverrides||{}}}),Bo=lE(()=>kG(Ln.value,ge.softLength)??100);let Ts,De;return{t:vn,percRemaining:Bo,count:Ln,editorElement:zt,editorOptions:es,internalValue:po,setFocus:is,onImageSelect:dt,saveImage:Pt,imageDrawerOpen:hn,closeImageDrawer:fn,imageSelection:tn,mediaDrawerOpen:tt,mediaSelection:pn,closeMediaDrawer:Ke,openMediaTab:G,embed:Ot,onMediaSelect:Xe,saveMedia:at,mediaHeight:q,mediaWidth:ht,mediaSource:Dn,linkButton:Pe,linkDrawerOpen:fe,closeLinkDrawer:Go,saveLink:zn,linkSelection:Wt,linkNode:O,codeDrawerOpen:Oo,code:rt,closeCodeDrawer:Fo,saveCode:cn,sourceCodeButton:je,setupContentWatcher:Yr,setCount:mt,contentUpdated:H,storageAssetTransform:Et,storageAssetPresets:Mt};function mt(){var qt,ro,jt;const Zn=(qt=Dt.value)==null?void 0:qt.contentWindow.document.getElementById("tinymce");Ln.value=((jt=(ro=Zn==null?void 0:Zn.textContent)==null?void 0:ro.replace(`
`,""))==null?void 0:jt.length)??0}function H(){if(mt(),!Ts)return;const Zn=Dt.value.getContent()?Dt.value.getContent():null;Zn!==De&&(De=Zn,bt("input",Zn))}function Yr(){if(Ts)return;const Zn=Dt.value.contentWindow.document.getElementById("tinymce");Ts=new MutationObserver(ro=>{H()});const qt={characterData:!0,childList:!0,subtree:!0};Ts.observe(Zn,qt)}function Pn(Zn){Dt.value=Zn,Zn.ui.registry.addToggleButton("customImage",it),Zn.ui.registry.addToggleButton("customMedia",Ye),Zn.ui.registry.addToggleButton("customLink",Pe),Zn.ui.registry.addButton("customCode",je),Zn.on("init",function(){Zn.shortcuts.remove("meta+k"),Zn.addShortcut("meta+k","Insert Link",()=>{Zn.ui.registry.getAll().buttons.customlink.onAction()}),mt()}),Zn.on("OpenWindow",function(qt){var ro,jt;if((ro=qt.dialog)!=null&&ro.getData){const Ve=(jt=qt.dialog)==null?void 0:jt.getData();Ve&&(Ve.url&&(qt.dialog.close(),Zn.ui.registry.getAll().buttons.customlink.onAction()),Ve.src&&(qt.dialog.close(),Zn.ui.registry.getAll().buttons.customimage.onAction(!0)))}})}function is(Zn){var ro;if(zt.value==null)return;const qt=(ro=zt.value.$el.parentElement)==null?void 0:ro.querySelector(".tox-tinymce");qt!=null&&(Zn?qt.classList.add("focus"):qt.classList.remove("focus"))}}});const eq=["id"],tq={class:"grid"},nq={class:"field"},oq={class:"type-label"},sq={class:"field"},rq={class:"type-label"},aq={class:"field half"},cq={class:"type-label"},lq={class:"field half-right"},iq={class:"type-label"},uq={class:"content"},dq={class:"content"},mq=["src"],fq={class:"grid"},gq={class:"field half"},hq={class:"type-label"},pq={class:"field half-right"},bq={class:"type-label"},vq={class:"field half"},yq={class:"type-label"},wq={class:"field half-right"},Cq={class:"type-label"},Sq={key:1,class:"field half"},xq={class:"type-label"},Tq={class:"content"},kq={key:0,class:"media-preview",controls:"true"},Eq=["src"],_q=["src"],Oq={class:"grid"},Aq={class:"field"},Dq={class:"type-label"},Rq={class:"field half"},Mq={class:"type-label"},Nq={class:"field half-right"},Bq={class:"type-label"},$q={class:"grid"},Pq={class:"field"},Iq={class:"type-label"};function Fq(ge,bt,vn,Dt,zt,Xt){const Mn=di("editor"),Et=di("v-card-title"),Mt=di("v-input"),Ln=di("v-checkbox"),hn=di("v-card-text"),tn=di("v-button"),fn=di("v-card-actions"),dt=di("v-card"),Pt=di("v-dialog"),it=di("interface-input-code"),tt=di("v-icon"),pn=di("v-drawer"),Ke=di("v-select"),G=di("v-upload"),Xe=di("v-tab"),Ot=di("v-tabs"),at=di("v-tab-item"),q=di("v-textarea"),ht=di("v-tabs-items"),Dn=SG("tooltip");return Jf(),O0("div",{id:ge.field,class:dj(["wysiwyg",{disabled:ge.disabled}])},[Er(Mn,{ref:"editorElement",modelValue:ge.internalValue,"onUpdate:modelValue":bt[0]||(bt[0]=Ye=>ge.internalValue=Ye),init:ge.editorOptions,disabled:ge.disabled,"model-events":"change keydown blur focus paste ExecCommand SetContent",onFocusin:bt[1]||(bt[1]=Ye=>ge.setFocus(!0)),onFocusout:bt[2]||(bt[2]=Ye=>ge.setFocus(!1)),onFocus:ge.setupContentWatcher,onSetContent:ge.contentUpdated},null,8,["modelValue","init","disabled","onFocus","onSetContent"]),ge.softLength?(Jf(),O0("span",{key:0,class:dj(["remaining",{warning:ge.percRemaining<10,danger:ge.percRemaining<5}])},mi(ge.softLength-ge.count),3)):VD("",!0),Er(Pt,{modelValue:ge.linkDrawerOpen,"onUpdate:modelValue":bt[7]||(bt[7]=Ye=>ge.linkDrawerOpen=Ye)},{default:Jc(()=>[Er(dt,{class:"card"},{default:Jc(()=>[Er(Et,{class:"card-title"},{default:Jc(()=>[zD(mi(ge.t("wysiwyg_options.link")),1)]),_:1}),Er(hn,null,{default:Jc(()=>[$r("div",tq,[$r("div",nq,[$r("div",oq,mi(ge.t("url")),1),Er(Mt,{modelValue:ge.linkSelection.url,"onUpdate:modelValue":bt[3]||(bt[3]=Ye=>ge.linkSelection.url=Ye),placeholder:ge.t("url_placeholder")},null,8,["modelValue","placeholder"])]),$r("div",sq,[$r("div",rq,mi(ge.t("display_text")),1),Er(Mt,{modelValue:ge.linkSelection.displayText,"onUpdate:modelValue":bt[4]||(bt[4]=Ye=>ge.linkSelection.displayText=Ye),placeholder:ge.t("display_text_placeholder")},null,8,["modelValue","placeholder"])]),$r("div",aq,[$r("div",cq,mi(ge.t("tooltip")),1),Er(Mt,{modelValue:ge.linkSelection.title,"onUpdate:modelValue":bt[5]||(bt[5]=Ye=>ge.linkSelection.title=Ye),placeholder:ge.t("tooltip_placeholder")},null,8,["modelValue","placeholder"])]),$r("div",lq,[$r("div",iq,mi(ge.t("open_link_in")),1),Er(Ln,{modelValue:ge.linkSelection.newTab,"onUpdate:modelValue":bt[6]||(bt[6]=Ye=>ge.linkSelection.newTab=Ye),block:"",label:ge.t(ge.linkSelection.newTab?"new_tab":"current_tab")},null,8,["modelValue","label"])])])]),_:1}),Er(fn,null,{default:Jc(()=>[Er(tn,{secondary:"",onClick:ge.closeLinkDrawer},{default:Jc(()=>[zD(mi(ge.t("cancel")),1)]),_:1},8,["onClick"]),Er(tn,{disabled:ge.linkSelection.url===null&&!ge.linkNode,onClick:ge.saveLink},{default:Jc(()=>[zD(mi(ge.t("save")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),Er(pn,{modelValue:ge.codeDrawerOpen,"onUpdate:modelValue":bt[9]||(bt[9]=Ye=>ge.codeDrawerOpen=Ye),title:ge.t("wysiwyg_options.source_code"),icon:"code",onCancel:ge.closeCodeDrawer},{actions:Jc(()=>[Er(tn,{icon:"",rounded:"",onClick:ge.saveCode},{default:Jc(()=>[Er(tt,{name:"check"})]),_:1},8,["onClick"])]),default:Jc(()=>[$r("div",uq,[Er(it,{value:ge.code,language:"htmlmixed","line-wrapping":!0,onInput:bt[8]||(bt[8]=Ye=>ge.code=Ye)},null,8,["value"])])]),_:1},8,["modelValue","title","onCancel"]),Er(pn,{modelValue:ge.imageDrawerOpen,"onUpdate:modelValue":bt[15]||(bt[15]=Ye=>ge.imageDrawerOpen=Ye),title:ge.t("wysiwyg_options.image"),icon:"image",onCancel:ge.closeImageDrawer},{actions:Jc(()=>[mj((Jf(),x5(tn,{icon:"",rounded:"",onClick:ge.saveImage},{default:Jc(()=>[Er(tt,{name:"check"})]),_:1},8,["onClick"])),[[Dn,ge.t("save_image"),void 0,{bottom:!0}]])]),default:Jc(()=>[$r("div",dq,[ge.imageSelection?(Jf(),O0(wW,{key:0},[$r("img",{class:"image-preview",src:ge.imageSelection.previewUrl},null,8,mq),$r("div",fq,[$r("div",gq,[$r("div",hq,mi(ge.t("image_url")),1),Er(Mt,{modelValue:ge.imageSelection.imageUrl,"onUpdate:modelValue":bt[10]||(bt[10]=Ye=>ge.imageSelection.imageUrl=Ye)},null,8,["modelValue"])]),$r("div",pq,[$r("div",bq,mi(ge.t("alt_text")),1),Er(Mt,{modelValue:ge.imageSelection.alt,"onUpdate:modelValue":bt[11]||(bt[11]=Ye=>ge.imageSelection.alt=Ye),nullable:!1},null,8,["modelValue"])]),ge.storageAssetTransform==="all"?(Jf(),O0(wW,{key:0},[$r("div",vq,[$r("div",yq,mi(ge.t("width")),1),Er(Mt,{modelValue:ge.imageSelection.width,"onUpdate:modelValue":bt[12]||(bt[12]=Ye=>ge.imageSelection.width=Ye),disabled:!!ge.imageSelection.transformationKey},null,8,["modelValue","disabled"])]),$r("div",wq,[$r("div",Cq,mi(ge.t("height")),1),Er(Mt,{modelValue:ge.imageSelection.height,"onUpdate:modelValue":bt[13]||(bt[13]=Ye=>ge.imageSelection.height=Ye),disabled:!!ge.imageSelection.transformationKey},null,8,["modelValue","disabled"])])],64)):VD("",!0),ge.storageAssetTransform!=="none"&&ge.storageAssetPresets.length>0?(Jf(),O0("div",Sq,[$r("div",xq,mi(ge.t("transformation_preset_key")),1),Er(Ke,{modelValue:ge.imageSelection.transformationKey,"onUpdate:modelValue":bt[14]||(bt[14]=Ye=>ge.imageSelection.transformationKey=Ye),items:ge.storageAssetPresets.map(Ye=>({text:Ye.key,value:Ye.key})),"show-deselect":!0},null,8,["modelValue","items"])])):VD("",!0)])],64)):(Jf(),x5(G,{key:1,multiple:!1,"from-library":"","from-url":"",folder:ge.folder,onInput:ge.onImageSelect},null,8,["folder","onInput"]))])]),_:1},8,["modelValue","title","onCancel"]),Er(pn,{modelValue:ge.mediaDrawerOpen,"onUpdate:modelValue":bt[22]||(bt[22]=Ye=>ge.mediaDrawerOpen=Ye),title:ge.t("wysiwyg_options.media"),icon:"slideshow",onCancel:ge.closeMediaDrawer},{sidebar:Jc(()=>[Er(Ot,{modelValue:ge.openMediaTab,"onUpdate:modelValue":bt[16]||(bt[16]=Ye=>ge.openMediaTab=Ye),vertical:""},{default:Jc(()=>[Er(Xe,{value:"video"},{default:Jc(()=>[zD(mi(ge.t("media")),1)]),_:1}),Er(Xe,{value:"embed"},{default:Jc(()=>[zD(mi(ge.t("embed")),1)]),_:1})]),_:1},8,["modelValue"])]),actions:Jc(()=>[mj((Jf(),x5(tn,{icon:"",rounded:"",onClick:ge.saveMedia},{default:Jc(()=>[Er(tt,{name:"check"})]),_:1},8,["onClick"])),[[Dn,ge.t("save_media"),void 0,{bottom:!0}]])]),default:Jc(()=>[$r("div",Tq,[Er(ht,{modelValue:ge.openMediaTab,"onUpdate:modelValue":bt[21]||(bt[21]=Ye=>ge.openMediaTab=Ye)},{default:Jc(()=>[Er(at,{value:"video"},{default:Jc(()=>[ge.mediaSelection?(Jf(),O0(wW,{key:0},[ge.mediaSelection.tag!=="iframe"?(Jf(),O0("video",kq,[$r("source",{src:ge.mediaSelection.previewUrl},null,8,Eq)])):VD("",!0),ge.mediaSelection.tag==="iframe"?(Jf(),O0("iframe",{key:1,class:"media-preview",src:ge.mediaSelection.previewUrl},null,8,_q)):VD("",!0),$r("div",Oq,[$r("div",Aq,[$r("div",Dq,mi(ge.t("source")),1),Er(Mt,{modelValue:ge.mediaSource,"onUpdate:modelValue":bt[17]||(bt[17]=Ye=>ge.mediaSource=Ye)},null,8,["modelValue"])]),$r("div",Rq,[$r("div",Mq,mi(ge.t("width")),1),Er(Mt,{modelValue:ge.mediaWidth,"onUpdate:modelValue":bt[18]||(bt[18]=Ye=>ge.mediaWidth=Ye)},null,8,["modelValue"])]),$r("div",Nq,[$r("div",Bq,mi(ge.t("height")),1),Er(Mt,{modelValue:ge.mediaHeight,"onUpdate:modelValue":bt[19]||(bt[19]=Ye=>ge.mediaHeight=Ye)},null,8,["modelValue"])])])],64)):(Jf(),x5(G,{key:1,multiple:!1,"from-library":"","from-url":"",folder:ge.folder,onInput:ge.onMediaSelect},null,8,["folder","onInput"]))]),_:1}),Er(at,{value:"embed"},{default:Jc(()=>[$r("div",$q,[$r("div",Pq,[$r("div",Iq,mi(ge.t("embed")),1),Er(q,{modelValue:ge.embed,"onUpdate:modelValue":bt[20]||(bt[20]=Ye=>ge.embed=Ye),nullable:!1},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title","onCancel"])],10,eq)}const Kq=EG(QG,[["render",Fq],["__scopeId","data-v-1eb32477"]]);export{Kq as default};
